model Chapter {
  id              Int             @id @default(autoincrement())
  organizationId  Int             @map("organization_id")
  organization    Organization    @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  isPublished     Boolean         @default(false) @map("is_published")
  slug            String
  title           String
  normalizedTitle String          @map("normalized_title")
  description     String
  createdAt       DateTime        @default(now()) @map("created_at")
  updatedAt       DateTime        @default(now()) @updatedAt @map("updated_at")
  courseChapters  CourseChapter[]

  @@unique([organizationId, slug], name: "orgChapterSlug")
  @@index([organizationId, normalizedTitle])
  @@map("chapters")
}

model CourseChapter {
  id        Int      @id @default(autoincrement())
  courseId  Int      @map("course_id")
  course    Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)
  chapterId Int      @map("chapter_id")
  chapter   Chapter  @relation(fields: [chapterId], references: [id], onDelete: Cascade)
  position  Int
  createdAt DateTime @default(now()) @map("created_at")

  @@unique([courseId, chapterId], name: "courseChapter")
  @@index([courseId, position])
  @@map("course_chapters")
}
