{
  "modelId": "anthropic/claude-opus-4.5",
  "results": [
    {
      "duration": 42240.080917000014,
      "inputTokens": 3801,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A child catches chickenpox at age 5. At age 25, they're exposed to someone with active chickenpox but don't get sick again.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Physical barriers like skin work the same way throughout life. The protection here comes from a different mechanism—the immune system's ability to remember past infections.\",\n          \"isCorrect\": false,\n          \"text\": \"Their skin became thicker and blocked the virus\"\n        },\n        {\n          \"feedback\": \"Exactly! After the childhood infection, memory cells stored information about the chickenpox virus. When exposed again 20 years later, these cells recognized the threat and mounted a rapid response before symptoms could develop.\",\n          \"isCorrect\": true,\n          \"text\": \"Cells retained information about the virus from the first infection\"\n        },\n        {\n          \"feedback\": \"Macrophages are part of the immediate response system and don't provide this kind of long-term, specific protection. The key is that the immune system remembered this specific virus from childhood.\",\n          \"isCorrect\": false,\n          \"text\": \"Adults naturally produce more macrophages than children\"\n        },\n        {\n          \"feedback\": \"Viruses don't weaken over time in the environment. The protection came from the person's immune system, which retained memory of the virus structure from the original infection.\",\n          \"isCorrect\": false,\n          \"text\": \"The virus weakened over the 20-year period\"\n        }\n      ],\n      \"question\": \"Why didn't the adult get sick?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A splinter breaks through your skin and introduces bacteria into the wound. Within minutes, cells arrive at the site and begin engulfing the bacteria.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Antibodies take time to produce and are highly specific. This rapid, eat-everything-foreign response is characteristic of the immediate defense system, not the targeted antibody response.\",\n          \"isCorrect\": false,\n          \"text\": \"An antibody-based targeted attack\"\n        },\n        {\n          \"feedback\": \"Right! This is your body's first-line cellular response. These cells don't wait to identify the specific threat—they immediately consume anything that appears foreign, providing quick protection.\",\n          \"isCorrect\": true,\n          \"text\": \"A fast, non-specific defense mechanism\"\n        },\n        {\n          \"feedback\": \"Memory responses require prior exposure to that specific pathogen. This immediate response happens regardless of whether you've encountered these particular bacteria before.\",\n          \"isCorrect\": false,\n          \"text\": \"A memory-based response from a previous infection\"\n        },\n        {\n          \"feedback\": \"Y-shaped proteins (antibodies) are part of the slower, targeted response. The rapid engulfing action described here is from cells that attack immediately without needing specific markers.\",\n          \"isCorrect\": false,\n          \"text\": \"Production of Y-shaped proteins to mark the bacteria\"\n        }\n      ],\n      \"question\": \"What type of response is this?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"During allergy season, your nose produces excessive mucus when pollen enters your nasal passages.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Mucus itself doesn't create antibodies—that's the job of specialized immune cells. Mucus serves a more basic, physical function in your body's defense strategy.\",\n          \"isCorrect\": false,\n          \"text\": \"It creates antibodies that neutralize allergens\"\n        },\n        {\n          \"feedback\": \"Correct! Mucus acts as a sticky physical barrier. It catches particles like pollen, dust, and pathogens, then moves them out of your body through sneezing, coughing, or swallowing.\",\n          \"isCorrect\": true,\n          \"text\": \"It traps and removes foreign particles before they go deeper\"\n        },\n        {\n          \"feedback\": \"Memory cells are activated through a different process involving recognition of specific molecular shapes. Mucus works as a simple physical trap, not a cell activator.\",\n          \"isCorrect\": false,\n          \"text\": \"It activates memory cells from previous pollen exposures\"\n        },\n        {\n          \"feedback\": \"While some body secretions have antimicrobial properties, the primary function of mucus is mechanical—it physically traps invaders rather than chemically destroying them.\",\n          \"isCorrect\": false,\n          \"text\": \"It directly kills bacteria through chemical reactions\"\n        }\n      ],\n      \"question\": \"What role does mucus play in defense?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A cut heals without infection as cells patrol the wound area eating debris\",\n          \"right\": \"Immediate cellular defense (macrophages)\"\n        },\n        {\n          \"left\": \"Your second flu shot produces a stronger response than your first\",\n          \"right\": \"Memory cells from prior exposure\"\n        },\n        {\n          \"left\": \"Intact skin prevents bacteria from a dirty doorknob from entering your body\",\n          \"right\": \"Physical barrier\"\n        },\n        {\n          \"left\": \"After a week of fighting infection, proteins appear that stick specifically to the invading virus\",\n          \"right\": \"Antibodies from B cells\"\n        }\n      ],\n      \"question\": \"Match each scenario to the immune component primarily responsible for the response:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A researcher discovers that a patient's blood contains Y-shaped proteins that bind specifically to a particular bacterial surface. The patient recovered from an infection with that bacteria two weeks ago.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Physical barriers like skin work by creating solid walls. These proteins work differently—they specifically recognize and attach to invaders, functioning more like targeted labels.\",\n          \"isCorrect\": false,\n          \"text\": \"Acting as physical barriers to block the bacteria\"\n        },\n        {\n          \"feedback\": \"The consuming/digesting role belongs to cells like macrophages. These Y-shaped proteins don't eat anything—they mark targets so other parts of the immune system can destroy them.\",\n          \"isCorrect\": false,\n          \"text\": \"Directly consuming and digesting the bacteria\"\n        },\n        {\n          \"feedback\": \"Exactly! Antibodies are like targeting tags. By binding specifically to the bacterial surface, they flag the invader so other immune cells can find and eliminate it efficiently.\",\n          \"isCorrect\": true,\n          \"text\": \"Marking the bacteria for destruction by other immune cells\"\n        },\n        {\n          \"feedback\": \"Proteins don't transform into cells. Memory cells are created from B cells after an infection, while antibodies are the protein products that B cells release.\",\n          \"isCorrect\": false,\n          \"text\": \"Transforming into memory cells for future protection\"\n        }\n      ],\n      \"question\": \"What are these Y-shaped proteins doing?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"The immune system works in layers. Physical barriers are always present and act first. If invaders breach them, rapid-response cells attack immediately. The antibody response takes days to develop since it requires recognizing the specific threat. Finally, after the infection is cleared, memory cells form to enable faster responses in the future.\",\n      \"items\": [\n        \"Physical barriers attempt to block entry\",\n        \"Patrolling cells arrive to consume any invaders that got through\",\n        \"Specialized cells begin producing targeted antibodies\",\n        \"Some cells store information about the invader for future encounters\"\n      ],\n      \"question\": \"Put these immune responses in the order they would typically occur when you're exposed to a new pathogen for the first time:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Two people are exposed to the same new virus. Person A fights it off in 2 days with mild symptoms. Person B takes 10 days and gets very sick. Testing reveals Person A was previously infected with a similar virus years ago.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Both people were already infected, meaning the virus got past physical barriers in both cases. The difference lies in what happened after the virus entered their bodies.\",\n          \"isCorrect\": false,\n          \"text\": \"Person A has stronger skin barriers than Person B\"\n        },\n        {\n          \"feedback\": \"Correct! Person A's immune system had memory cells from the earlier, similar infection. These cells recognized shared features between the two viruses and launched a rapid, targeted response before the infection could worsen.\",\n          \"isCorrect\": true,\n          \"text\": \"Person A's cells recognized features similar to the previous virus\"\n        },\n        {\n          \"feedback\": \"Mucus is a first-line physical defense. Since both people were already infected, the virus had already bypassed this barrier. The faster recovery came from a different mechanism.\",\n          \"isCorrect\": false,\n          \"text\": \"Person A naturally produces more mucus than Person B\"\n        },\n        {\n          \"feedback\": \"There's no indication of defective cells. Person A's advantage came specifically from prior exposure to a similar virus—suggesting the targeted, memory-based system provided the extra protection.\",\n          \"isCorrect\": false,\n          \"text\": \"Person B's patrolling cells were defective\"\n        }\n      ],\n      \"question\": \"What explains Person A's faster recovery?\"\n    }\n  ]\n}",
      "outputTokens": 2228,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios where someone observes immune responses in everyday life (repeat exposure, recovery time, vaccination effects) and must explain the underlying mechanism\n   - GOOD PATTERN: Situations requiring prediction of immune outcomes based on understanding defense layers\n   - BAD PATTERN: Asking to name cells, list defense mechanisms, or recall definitions without application context\n   - BAD PATTERN: Questions referencing specific metaphors or examples from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Antibodies directly killing pathogens (they MARK pathogens for destruction by other cells like macrophages)\n   - White blood cells being a single type (there are many types with different functions)\n   - Immune response being immediate (innate response is fast, adaptive takes days)\n   - Fever being harmful (it's often a beneficial immune response)\n\n3. FORMAT FIT: Multiple choice works well for \"which scenario shows X mechanism.\" Match columns work for connecting symptoms to immune responses. Sort order works for immune response sequence.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-biology-immune-system-quiz-1",
        "userInput": {
          "chapterTitle": "Body Systems",
          "courseTitle": "Human Biology",
          "explanationSteps": [
            {
              "text": "Your body has two defense systems working together. The first responds instantly to any threat. The second takes time but remembers enemies forever.",
              "title": "Two Lines of Defense"
            },
            {
              "text": "Physical barriers like skin and mucus stop most invaders. If they get through, patrolling cells called macrophages eat anything that looks foreign.",
              "title": "The First Responders"
            },
            {
              "text": "When threats persist, specialized cells called B cells create antibodies. These Y-shaped proteins stick to specific invaders, marking them for destruction.",
              "title": "The Targeting System"
            },
            {
              "text": "Some cells become memory cells after an infection. They remember the invader's shape for years, letting your body respond faster next time.",
              "title": "Remembering Enemies"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies",
          "lessonTitle": "How the Immune System Works"
        }
      }
    },
    {
      "duration": 42527.07725000003,
      "inputTokens": 3808,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"int result = \\\"hello\\\" + 5;\",\n        \"kind\": \"code\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Lexical analysis only breaks code into tokens. Each piece here (int, result, =, \\\"hello\\\", +, 5, ;) is a valid token — the problem is what they mean together.\",\n          \"isCorrect\": false,\n          \"text\": \"Lexical analysis\"\n        },\n        {\n          \"feedback\": \"The parser checks syntax structure. This line has valid syntax — it looks like a proper variable declaration with an expression. The issue is that the types don't match logically.\",\n          \"isCorrect\": false,\n          \"text\": \"Parsing\"\n        },\n        {\n          \"feedback\": \"Correct! Semantic analysis checks if code makes logical sense. Here, adding a string to a number and assigning it to an integer violates type rules — a meaning problem, not a syntax problem.\",\n          \"isCorrect\": true,\n          \"text\": \"Semantic analysis\"\n        },\n        {\n          \"feedback\": \"Code generation only runs after all validation passes. This error would be caught earlier, during semantic analysis, because the types are incompatible.\",\n          \"isCorrect\": false,\n          \"text\": \"Code generation\"\n        }\n      ],\n      \"question\": \"Which compiler phase catches this error?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"if (x > 5 {\\n    print(x)\\n}\",\n        \"kind\": \"code\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"The lexer successfully identifies all tokens here: if, (, x, >, 5, {, print, etc. Each individual piece is valid — the problem is how they're arranged.\",\n          \"isCorrect\": false,\n          \"text\": \"Lexical analysis\"\n        },\n        {\n          \"feedback\": \"Correct! The parser expects a closing parenthesis after the condition but finds an opening brace instead. This structural mismatch — invalid syntax — is exactly what parsing catches.\",\n          \"isCorrect\": true,\n          \"text\": \"Parsing\"\n        },\n        {\n          \"feedback\": \"Semantic analysis checks logical meaning, but the compiler never gets there. It fails earlier because the code structure itself is malformed.\",\n          \"isCorrect\": false,\n          \"text\": \"Semantic analysis\"\n        },\n        {\n          \"feedback\": \"Code generation happens last, after all checks pass. This error stops the compiler much earlier, during parsing.\",\n          \"isCorrect\": false,\n          \"text\": \"Code generation\"\n        }\n      ],\n      \"question\": \"Where does the compiler detect the problem?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A developer writes a program that calculates loan payments. The code compiles successfully with no errors. The developer then runs the program, and the processor executes the instructions directly.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"The tree structure is created by the parser in the middle of compilation. The final output needs to be something the processor can execute directly.\",\n          \"isCorrect\": false,\n          \"text\": \"A tree showing how statements relate to each other\"\n        },\n        {\n          \"feedback\": \"Tokens are produced early in compilation by lexical analysis. The processor can't execute a list of tokens — it needs actual machine instructions.\",\n          \"isCorrect\": false,\n          \"text\": \"A list of tokens representing the original code\"\n        },\n        {\n          \"feedback\": \"Correct! The final phase of compilation generates machine code — the binary instructions that processors understand and can run directly without further translation.\",\n          \"isCorrect\": true,\n          \"text\": \"Machine instructions the processor can execute\"\n        },\n        {\n          \"feedback\": \"If there were semantic errors, compilation would have failed. Since it succeeded, the final phase produced executable machine instructions.\",\n          \"isCorrect\": false,\n          \"text\": \"A report of all semantic errors in the code\"\n        }\n      ],\n      \"question\": \"What did the final compiler phase produce?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Compilers process code in stages: first lexical analysis identifies tokens, then parsing builds structure, then semantic analysis checks meaning, and finally code generation produces machine instructions. An error at any stage stops the process.\",\n      \"items\": [\n        \"Splitting code into individual tokens like keywords and operators\",\n        \"Building a tree structure from the tokens\",\n        \"Verifying that types and operations are logically valid\",\n        \"Translating validated code into processor instructions\"\n      ],\n      \"question\": \"A bug in your code causes a compiler error. Put these compiler activities in the order they would have been attempted before the error was detected:\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Using @#$ as a variable name\",\n          \"right\": \"Lexical analysis (invalid token)\"\n        },\n        {\n          \"left\": \"Writing 'for x in range 10' without parentheses in Python\",\n          \"right\": \"Parsing (malformed structure)\"\n        },\n        {\n          \"left\": \"Calling a function with wrong argument types\",\n          \"right\": \"Semantic analysis (type mismatch)\"\n        },\n        {\n          \"left\": \"Forgetting a semicolon at end of statement\",\n          \"right\": \"Parsing (unexpected token sequence)\"\n        }\n      ],\n      \"question\": \"Match each problematic code snippet with the compiler phase that would catch the error:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You're building a simple calculator language. When a user types '5 + * 3', your compiler needs to handle this gracefully. You want to report a helpful error message about the problem.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Each symbol here is actually a valid token on its own. The lexer sees: number(5), operator(+), operator(*), number(3). The issue is how they're arranged, not what they are.\",\n          \"isCorrect\": false,\n          \"text\": \"Lexical analysis, because '+ *' isn't a valid token\"\n        },\n        {\n          \"feedback\": \"Correct! Each token is individually valid, but the sequence '+ *' violates the grammar rules for expressions. The parser expects a number or expression after '+', not another operator.\",\n          \"isCorrect\": true,\n          \"text\": \"Parsing, because two operators can't appear consecutively\"\n        },\n        {\n          \"feedback\": \"Semantic analysis checks meaning once structure is valid. Here, the structure itself is broken — we can't even determine what operation is intended.\",\n          \"isCorrect\": false,\n          \"text\": \"Semantic analysis, because the types don't match\"\n        },\n        {\n          \"feedback\": \"Code generation never sees this code. The compiler stops much earlier when parsing fails due to the invalid operator sequence.\",\n          \"isCorrect\": false,\n          \"text\": \"Code generation, because it can't translate malformed expressions\"\n        }\n      ],\n      \"question\": \"Which phase should generate this error?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"lexical analysis\",\n        \"parser\",\n        \"semantically\",\n        \"machine code\"\n      ],\n      \"distractors\": [\n        \"semantic analysis\",\n        \"compiler\",\n        \"syntactically\",\n        \"tokens\",\n        \"bytecode\",\n        \"interpreter\"\n      ],\n      \"feedback\": \"The compiler pipeline flows from lexical analysis (tokenizing) → parsing (structuring) → semantic analysis (meaning validation) → code generation (machine code output). Each stage transforms the code into a form closer to what hardware can execute.\",\n      \"question\": \"Complete this description of how a compiler transforms source code:\",\n      \"template\": \"First, [BLANK] breaks the source code into individual meaningful pieces. Then the [BLANK] organizes these pieces into a hierarchical structure. Next, the compiler checks whether the code is [BLANK] valid. Finally, the result is translated into [BLANK] that the processor executes.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A junior developer asks: 'My code has a variable x that I declared as a boolean, but later I try to use it in a math equation like x * 10. The code looks fine to me — why won't it compile?'\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"The tokens are all perfectly valid: x is an identifier, * is an operator, and 10 is a number. The problem isn't in how the code is broken into pieces.\",\n          \"isCorrect\": false,\n          \"text\": \"The lexer doesn't recognize 'x * 10' as valid tokens\"\n        },\n        {\n          \"feedback\": \"Structurally, 'x * 10' is a valid expression. The parser successfully recognizes this as 'variable times number'. The issue is what x represents.\",\n          \"isCorrect\": false,\n          \"text\": \"The parser can't build a valid structure from this expression\"\n        },\n        {\n          \"feedback\": \"Correct! Semantic analysis checks whether operations make sense for the types involved. Multiplying a boolean doesn't make logical sense, even though the syntax is perfectly valid.\",\n          \"isCorrect\": true,\n          \"text\": \"The compiler found a mismatch between the declared type and how it's used\"\n        },\n        {\n          \"feedback\": \"The code generator only runs on validated code. This type mismatch is caught earlier during semantic analysis, before code generation begins.\",\n          \"isCorrect\": false,\n          \"text\": \"The code generator can't convert boolean multiplication to machine code\"\n        }\n      ],\n      \"question\": \"What would you explain to them?\"\n    }\n  ]\n}",
      "outputTokens": 2347,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "Questions 1 and 2 use scenarios that match the examples in the explanation text very closely (adding string to number, missing parentheses). While the quiz transforms these into code analysis tasks (which effectively tests application), using completely different types of errors (e.g., calling a variable as a function for semantic analysis, or a missing keyword for parsing) would strictly adhere better to the 'novel scenarios' rule and ensure the learner isn't just matching the 'missing parenthesis' pattern to 'Parsing'. However, this is a very minor point as the execution is high quality.",
          "kind": "potentialImprovements",
          "score": 9
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios involving code errors where learners must identify which compilation phase would catch or miss them\n   - GOOD PATTERN: Situations requiring understanding of why phases must occur in a specific order\n   - BAD PATTERN: Asking to list phases, name outputs, or define terminology without application context\n   - BAD PATTERN: Questions about the \"assembly line\" metaphor or other explanation-specific content\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Lexical analysis and parsing being the same thing (lexical analysis produces tokens; parsing builds syntax trees from tokens)\n   - Compilers only producing machine code (many produce bytecode or intermediate representations)\n   - Optimization being optional or unimportant (it's crucial for performance)\n   - Semantic analysis happening before parsing (parsing must complete first)\n\n3. FORMAT FIT: Sort order works well for compiler pipeline stages. Match columns work for connecting error types to phases. Multiple choice for \"which phase catches this error.\"\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-cs-compilers-quiz-1",
        "userInput": {
          "chapterTitle": "Language Implementation",
          "courseTitle": "Programming Language Theory",
          "explanationSteps": [
            {
              "text": "A compiler reads your code in stages, like an assembly line. Each stage transforms the code into something closer to what the machine understands.",
              "title": "The Assembly Line"
            },
            {
              "text": "First, lexical analysis breaks your code into tokens - the smallest meaningful units. Keywords, variables, and operators each become distinct pieces.",
              "title": "Breaking into Tokens"
            },
            {
              "text": "The parser takes those tokens and builds a tree structure showing how statements relate. This catches syntax errors like missing parentheses.",
              "title": "Building Structure"
            },
            {
              "text": "Semantic analysis checks if your code makes logical sense. It catches errors like using a string where a number is required.",
              "title": "Checking Meaning"
            },
            {
              "text": "Finally, code generation translates the validated structure into machine instructions the processor can execute directly.",
              "title": "Generating Output"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation",
          "lessonTitle": "How Compilers Work"
        }
      }
    },
    {
      "duration": 41523.34520800004,
      "inputTokens": 3914,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Uma família está planejando comprar um apartamento financiado. O banco central acabou de anunciar um aumento significativo na taxa básica de juros, que subiu de 6% para 10% ao ano.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Juros mais altos aumentam o custo dos empréstimos. Isso encarece financiamentos e tende a reduzir o consumo, que é justamente o objetivo quando o banco central quer desaquecer a economia.\",\n          \"isCorrect\": true,\n          \"text\": \"As parcelas do financiamento ficarão mais caras, possivelmente fazendo a família adiar a compra\"\n        },\n        {\n          \"feedback\": \"Os efeitos da política monetária não são instantâneos. Mudanças nos juros levam meses para impactar a economia real, incluindo preços de imóveis.\",\n          \"isCorrect\": false,\n          \"text\": \"O preço dos apartamentos cairá imediatamente no dia seguinte ao anúncio\"\n        },\n        {\n          \"feedback\": \"Na verdade, acontece o oposto. Com juros básicos mais altos, os bancos também cobram mais pelos empréstimos. Eles não oferecem descontos para compensar.\",\n          \"isCorrect\": false,\n          \"text\": \"A família conseguirá um desconto no financiamento porque os bancos querem atrair clientes\"\n        },\n        {\n          \"feedback\": \"A taxa básica de juros afeta praticamente todos os tipos de crédito na economia, incluindo financiamentos imobiliários. É a principal ferramenta de política monetária.\",\n          \"isCorrect\": false,\n          \"text\": \"Nada mudará, pois a taxa básica não afeta financiamentos imobiliários\"\n        }\n      ],\n      \"question\": \"O que provavelmente acontecerá?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"O país está enfrentando inflação alta de 12% ao ano. Os preços sobem rapidamente e o poder de compra das pessoas está diminuindo a cada mês.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correto! Quando há inflação alta, significa que há muito dinheiro perseguindo poucos bens. Aumentar os juros encarece o crédito, reduz gastos e ajuda a controlar a subida dos preços.\",\n          \"isCorrect\": true,\n          \"text\": \"Aumentar a taxa de juros para reduzir o consumo e conter os preços\"\n        },\n        {\n          \"feedback\": \"Reduzir juros aumentaria ainda mais o consumo, piorando a inflação. O banco central precisa desaquecer a economia, não estimulá-la.\",\n          \"isCorrect\": false,\n          \"text\": \"Reduzir a taxa de juros para estimular a produção e aumentar a oferta de produtos\"\n        },\n        {\n          \"feedback\": \"Injetar mais dinheiro na economia aumentaria a inflação, não a reduziria. Com inflação alta, o problema é justamente excesso de dinheiro em circulação.\",\n          \"isCorrect\": false,\n          \"text\": \"Comprar títulos do governo para injetar mais dinheiro na economia\"\n        },\n        {\n          \"feedback\": \"Inflação alta raramente se resolve sozinha. Sem intervenção do banco central, ela tende a se perpetuar ou até piorar, criando um ciclo vicioso.\",\n          \"isCorrect\": false,\n          \"text\": \"Manter os juros estáveis e esperar a inflação se resolver sozinha\"\n        }\n      ],\n      \"question\": \"O que o banco central deve fazer?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Em janeiro, o banco central reduziu drasticamente a taxa de juros de 13% para 5%. Um economista é entrevistado na TV em fevereiro e perguntado sobre os resultados da medida.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito! A política monetária tem efeito com atraso. Empresas precisam revisar planos de investimento, consumidores precisam renegociar dívidas, e tudo isso leva tempo.\",\n          \"isCorrect\": true,\n          \"text\": \"Ainda é cedo para avaliar os resultados, pois mudanças nos juros levam meses para impactar a economia\"\n        },\n        {\n          \"feedback\": \"Apenas um mês é tempo insuficiente para os efeitos se manifestarem. A transmissão da política monetária para a economia real é gradual.\",\n          \"isCorrect\": false,\n          \"text\": \"Os resultados já são claros e a economia está completamente recuperada\"\n        },\n        {\n          \"feedback\": \"A ausência de mudanças em um mês não significa falha. Política monetária funciona com defasagem temporal, e é normal não ver efeitos tão rapidamente.\",\n          \"isCorrect\": false,\n          \"text\": \"A medida falhou porque não houve mudanças visíveis ainda\"\n        },\n        {\n          \"feedback\": \"Os juros são justamente a principal ferramenta para influenciar a economia. Eles afetam diretamente decisões de consumo e investimento.\",\n          \"isCorrect\": false,\n          \"text\": \"Os juros não têm nenhuma relação com a atividade econômica\"\n        }\n      ],\n      \"question\": \"Qual seria a resposta mais precisa?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Banco central compra títulos do governo no mercado\",\n          \"right\": \"Injeta dinheiro na economia\"\n        },\n        {\n          \"left\": \"Banco central vende títulos do governo no mercado\",\n          \"right\": \"Retira dinheiro de circulação\"\n        },\n        {\n          \"left\": \"Banco central aumenta a taxa básica de juros\",\n          \"right\": \"Encarece empréstimos e desacelera consumo\"\n        },\n        {\n          \"left\": \"Banco central reduz a taxa básica de juros\",\n          \"right\": \"Barateia empréstimos e estimula consumo\"\n        }\n      ],\n      \"question\": \"Relacione cada ação do banco central com seu efeito na economia:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Uma economia está em recessão profunda: empresas fechando, desemprego alto, pessoas cortando gastos. O banco central quer reverter essa situação.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Ambas as ações aumentam a quantidade de dinheiro disponível e barateiam o crédito. Isso incentiva consumo e investimento, ajudando a tirar a economia da recessão.\",\n          \"isCorrect\": true,\n          \"text\": \"Reduzir juros e comprar títulos do governo para estimular a economia\"\n        },\n        {\n          \"feedback\": \"Essas ações desaquecem a economia, o oposto do necessário em uma recessão. O problema aqui não é inflação, é falta de atividade econômica.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumentar juros e vender títulos para reduzir a inflação\"\n        },\n        {\n          \"feedback\": \"Essas ações têm efeitos opostos e se anulariam parcialmente. Em recessão, o banco central precisa de uma estratégia coerente de estímulo.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumentar juros e comprar títulos para equilibrar os efeitos\"\n        },\n        {\n          \"feedback\": \"A política monetária é justamente uma das principais ferramentas para combater recessões, estimulando consumo e investimento através de juros mais baixos.\",\n          \"isCorrect\": false,\n          \"text\": \"Manter tudo igual porque política monetária não afeta recessões\"\n        }\n      ],\n      \"question\": \"Qual combinação de ações faz sentido?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"preços\",\n        \"desacelerar\"\n      ],\n      \"distractors\": [\n        \"salários\",\n        \"juros\",\n        \"acelerar\",\n        \"crescer\",\n        \"impostos\"\n      ],\n      \"feedback\": \"Excesso de dinheiro significa mais pessoas querendo comprar os mesmos produtos, o que pressiona os preços para cima (inflação). Já a escassez de dinheiro reduz o consumo e o investimento, fazendo a economia perder ritmo.\",\n      \"question\": \"Complete a frase sobre como a quantidade de dinheiro afeta a economia:\",\n      \"template\": \"Quando há dinheiro demais circulando na economia, os [BLANK] tendem a subir. Quando há pouco dinheiro, a economia tende a [BLANK].\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Uma empresária está decidindo se vai expandir sua fábrica. Ela precisaria de um empréstimo de R$ 2 milhões. Ontem, o banco central anunciou que vai reduzir os juros nos próximos meses.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correto! Juros mais baixos significam parcelas menores e custo total menor do empréstimo. Isso torna investimentos mais viáveis financeiramente.\",\n          \"isCorrect\": true,\n          \"text\": \"Torna a expansão mais atrativa, pois o custo do empréstimo será menor\"\n        },\n        {\n          \"feedback\": \"Empresas também dependem de crédito para investir. A taxa de juros afeta diretamente a viabilidade de projetos empresariais.\",\n          \"isCorrect\": false,\n          \"text\": \"Não afeta em nada, pois juros só importam para pessoas físicas\"\n        },\n        {\n          \"feedback\": \"Juros baixos podem indicar que o banco central está tentando estimular a economia, mas tornam o crédito mais barato, não mais arriscado.\",\n          \"isCorrect\": false,\n          \"text\": \"Faz ela desistir imediatamente, pois juros baixos indicam crise\"\n        },\n        {\n          \"feedback\": \"Se os juros vão cair, faz mais sentido esperar para pegar o empréstimo com condições melhores, não se apressar.\",\n          \"isCorrect\": false,\n          \"text\": \"Obriga ela a fazer o empréstimo hoje, antes que os juros subam\"\n        }\n      ],\n      \"question\": \"Como isso influencia a decisão dela?\"\n    }\n  ]\n}",
      "outputTokens": 2743,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "The response is excellent. The questions use novel scenarios (a family buying an apartment, a businesswoman expanding a factory, a TV interview about recent policy) to test the application of concepts rather than simple recall. The feedback is comprehensive and educational. The language is perfectly natural Portuguese. No significant improvements are needed.",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nLANGUAGE REQUIREMENT: Questions, options, and feedback must be in Portuguese.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios involving economic decisions (borrowing, spending, saving) where learners must predict effects of interest rate changes\n   - GOOD PATTERN: Situations requiring understanding of transmission delays between policy and economic outcomes\n   - BAD PATTERN: Asking to list monetary tools or define economic terms without application context\n   - BAD PATTERN: Questions referencing specific examples from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Interest rate changes having immediate effects (transmission mechanisms have significant time lags of 6-18 months)\n   - Central banks directly controlling inflation (they influence it through indirect mechanisms)\n   - Lower interest rates always being good (they can fuel inflation and asset bubbles)\n   - Monetary policy being the only tool for economic stability (fiscal policy also plays a role)\n\n3. FORMAT FIT: Multiple choice works for cause-effect scenarios. Match columns work for connecting policy actions to economic effects. Sort order can work for transmission mechanism sequences.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "pt-economics-monetary-policy-quiz-1",
        "userInput": {
          "chapterTitle": "Macroeconomia",
          "courseTitle": "Economia para Iniciantes",
          "explanationSteps": [
            {
              "text": "O banco central controla a quantidade de dinheiro circulando na economia. Quando ha dinheiro demais, os precos sobem. Quando ha pouco, a economia desacelera.",
              "title": "Equilibrio Monetario"
            },
            {
              "text": "A taxa basica de juros e a principal ferramenta. Juros altos tornam emprestimos caros, reduzindo gastos. Juros baixos estimulam emprestimos e consumo.",
              "title": "A Alavanca dos Juros"
            },
            {
              "text": "Mudancas nos juros levam meses para afetar a economia real. Empresas e consumidores ajustam seus planos gradualmente, nao instantaneamente.",
              "title": "Efeito com Atraso"
            },
            {
              "text": "Bancos centrais tambem compram e vendem titulos do governo. Comprando titulos, injetam dinheiro na economia. Vendendo, retiram dinheiro de circulacao.",
              "title": "Operacoes de Mercado"
            }
          ],
          "language": "pt",
          "lessonDescription": "Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria",
          "lessonTitle": "Como Funciona a Politica Monetaria"
        }
      }
    },
    {
      "duration": 49138.50962499995,
      "inputTokens": 3872,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Una empresa almacena las contraseñas de sus usuarios aplicándoles una función hash antes de guardarlas en la base de datos. Un atacante logra robar toda la base de datos.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Las funciones hash son irreversibles - no existe un proceso matemático para recuperar el dato original a partir del hash.\",\n          \"isCorrect\": false,\n          \"text\": \"Revertir los hashes para obtener las contraseñas originales\"\n        },\n        {\n          \"feedback\": \"Correcto. Como los hashes no se pueden revertir, el atacante solo puede probar contraseñas comunes, calcular sus hashes y ver si coinciden con los almacenados.\",\n          \"isCorrect\": true,\n          \"text\": \"Intentar adivinar contraseñas y comparar sus hashes con los robados\"\n        },\n        {\n          \"feedback\": \"El sistema aplica hash a lo que el usuario ingresa y compara resultados. Si ingresa el hash, se le aplicaría hash nuevamente, produciendo un valor diferente.\",\n          \"isCorrect\": false,\n          \"text\": \"Usar los hashes directamente como contraseñas en el sistema\"\n        },\n        {\n          \"feedback\": \"No puedes crear un hash específico a voluntad. Encontrar qué dato produce un hash particular es computacionalmente inviable.\",\n          \"isCorrect\": false,\n          \"text\": \"Modificar los hashes para que coincidan con una contraseña conocida\"\n        }\n      ],\n      \"question\": \"¿Qué puede hacer el atacante con los hashes?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Un hospital envía un archivo médico de 500MB a otro centro. Junto con el archivo, envían su hash SHA-256. El centro receptor calcula el hash del archivo recibido y obtiene un valor completamente diferente.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exacto. Cualquier alteración, incluso mínima, en los datos produce un hash totalmente diferente. Esto permite detectar que el archivo no llegó intacto.\",\n          \"isCorrect\": true,\n          \"text\": \"El archivo se corrompió o fue modificado durante la transmisión\"\n        },\n        {\n          \"feedback\": \"El tamaño del archivo no afecta la consistencia del hash. Un archivo siempre produce el mismo hash si no ha sido modificado.\",\n          \"isCorrect\": false,\n          \"text\": \"Los archivos grandes producen hashes inconsistentes por su tamaño\"\n        },\n        {\n          \"feedback\": \"Las funciones hash son deterministas: el mismo dato siempre produce exactamente el mismo hash, sin importar dónde se calcule.\",\n          \"isCorrect\": false,\n          \"text\": \"Cada computadora genera hashes diferentes para el mismo archivo\"\n        },\n        {\n          \"feedback\": \"SHA-256 funciona correctamente con archivos de cualquier tamaño. La diferencia en hashes indica alteración del contenido, no limitaciones del algoritmo.\",\n          \"isCorrect\": false,\n          \"text\": \"SHA-256 no es confiable para archivos mayores a 100MB\"\n        }\n      ],\n      \"question\": \"¿Qué indica esta diferencia en los hashes?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Un desarrollador crea un sistema de verificación de documentos legales. Necesita que cualquier cambio en un contrato, por pequeño que sea, sea inmediatamente detectable.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"La compresión ayuda al almacenamiento, pero no es lo que hace detectable un cambio mínimo. Podrías comprimir sin que cambios pequeños alteren el resultado.\",\n          \"isCorrect\": false,\n          \"text\": \"La compresión a longitud fija facilita la comparación\"\n        },\n        {\n          \"feedback\": \"Correcto. El efecto avalancha garantiza que incluso el cambio más pequeño produce un hash radicalmente diferente, haciendo imposible ocultar modificaciones.\",\n          \"isCorrect\": true,\n          \"text\": \"El efecto avalancha: un bit diferente genera un hash completamente distinto\"\n        },\n        {\n          \"feedback\": \"La irreversibilidad protege el contenido original, pero no es lo que permite detectar cambios. Un atacante ya tiene el documento, solo quiere modificarlo sin ser detectado.\",\n          \"isCorrect\": false,\n          \"text\": \"La irreversibilidad impide que alguien reconstruya el documento\"\n        },\n        {\n          \"feedback\": \"La resistencia a colisiones evita que dos documentos diferentes tengan el mismo hash, pero la detección de cambios mínimos depende del efecto avalancha.\",\n          \"isCorrect\": false,\n          \"text\": \"La resistencia a colisiones evita documentos duplicados\"\n        }\n      ],\n      \"question\": \"¿Qué propiedad del hash hace esto posible?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Un video de 4GB y un mensaje de texto producen hashes de igual longitud\",\n          \"right\": \"Compresión a tamaño fijo\"\n        },\n        {\n          \"left\": \"Cambiar una coma en un contrato genera un hash totalmente diferente\",\n          \"right\": \"Efecto avalancha\"\n        },\n        {\n          \"left\": \"Un atacante no puede obtener tu contraseña aunque tenga su hash\",\n          \"right\": \"Irreversibilidad\"\n        },\n        {\n          \"left\": \"Es prácticamente imposible crear un documento falso con el mismo hash que el original\",\n          \"right\": \"Resistencia a colisiones\"\n        }\n      ],\n      \"question\": \"Relaciona cada situación con la propiedad de las funciones hash que la hace posible o la explica:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Un estudiante argumenta: 'Si dos archivos muy diferentes pueden producir hashes del mismo tamaño, entonces debe ser fácil encontrar dos archivos con el mismo hash'.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exacto. Aunque matemáticamente deben existir colisiones (hay más archivos posibles que hashes), encontrar una intencionalmente requiere un esfuerzo computacional astronómico.\",\n          \"isCorrect\": true,\n          \"text\": \"Confunde posibilidad teórica con viabilidad práctica computacional\"\n        },\n        {\n          \"feedback\": \"Los hashes siempre tienen el mismo tamaño fijo, independientemente del archivo original. Ese no es el error en el razonamiento.\",\n          \"isCorrect\": false,\n          \"text\": \"Los hashes de diferente tamaño nunca pueden coincidir\"\n        },\n        {\n          \"feedback\": \"Las colisiones son matemáticamente inevitables cuando comprimes datos infinitos a un tamaño fijo. Lo importante es que sean extremadamente difíciles de encontrar.\",\n          \"isCorrect\": false,\n          \"text\": \"Las funciones hash modernas no permiten colisiones\"\n        },\n        {\n          \"feedback\": \"Cualquier par de archivos podría teóricamente producir el mismo hash, sin importar sus tamaños relativos.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo archivos del mismo tamaño pueden producir colisiones\"\n        }\n      ],\n      \"question\": \"¿Qué error hay en este razonamiento?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Una plataforma de descargas muestra el hash MD5 de cada archivo para que los usuarios verifiquen que descargaron correctamente. María descarga un programa y su hash coincide con el publicado.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. Si los hashes coinciden, los archivos son idénticos. La probabilidad de que dos archivos diferentes produzcan el mismo hash es prácticamente nula.\",\n          \"isCorrect\": true,\n          \"text\": \"El archivo descargado es idéntico bit por bit al archivo original\"\n        },\n        {\n          \"feedback\": \"El hash solo verifica integridad, no seguridad. Si el archivo original tenía malware, el hash coincidirá perfectamente - solo confirma que tienes exactamente lo que se publicó.\",\n          \"isCorrect\": false,\n          \"text\": \"El archivo es seguro y no contiene malware\"\n        },\n        {\n          \"feedback\": \"El hash no afecta la velocidad de descarga. Se calcula después de descargar para verificar integridad.\",\n          \"isCorrect\": false,\n          \"text\": \"La descarga fue más rápida gracias a la verificación hash\"\n        },\n        {\n          \"feedback\": \"El hash no tiene relación con la exclusividad o privacidad del archivo. Solo verifica que el contenido no cambió.\",\n          \"isCorrect\": false,\n          \"text\": \"Nadie más tiene acceso a ese archivo\"\n        }\n      ],\n      \"question\": \"¿Qué puede concluir María con certeza?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"fija\",\n        \"irreversibilidad\"\n      ],\n      \"distractors\": [\n        \"variable\",\n        \"reversibilidad\",\n        \"compresión\",\n        \"encriptación\",\n        \"aleatoria\"\n      ],\n      \"feedback\": \"Las funciones hash siempre producen salidas de longitud fija (por ejemplo, SHA-256 siempre produce 256 bits). La irreversibilidad significa que no hay forma de reconstruir el dato original conociendo solo su hash, lo cual es esencial para aplicaciones como almacenamiento seguro de contraseñas.\",\n      \"question\": \"Completa las oraciones sobre el funcionamiento de las funciones hash criptográficas:\",\n      \"template\": \"Las funciones hash producen una salida de longitud [BLANK] sin importar el tamaño de la entrada. Esta característica se combina con la [BLANK], que hace imposible recuperar los datos originales a partir del hash.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Un banco necesita verificar que un cliente conoce su contraseña sin almacenarla en texto plano. Cuando el cliente ingresa su contraseña, el sistema debe poder validarla.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exacto. Se guarda solo el hash. Cuando el cliente ingresa su contraseña, se calcula su hash y se compara con el almacenado. Si coinciden, la contraseña es correcta.\",\n          \"isCorrect\": true,\n          \"text\": \"Almacena el hash de la contraseña y compara hashes cuando el cliente ingresa su clave\"\n        },\n        {\n          \"feedback\": \"Los hashes no se pueden 'desencriptar' porque no son encriptación - son irreversibles. No existe forma de recuperar la contraseña original del hash.\",\n          \"isCorrect\": false,\n          \"text\": \"Desencripta la contraseña almacenada para compararla con la ingresada\"\n        },\n        {\n          \"feedback\": \"Esto expondría la contraseña y no aprovecharía las propiedades de los hashes. La comparación se hace localmente con hashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Envía ambas contraseñas a un servidor externo para comparación segura\"\n        },\n        {\n          \"feedback\": \"Al contrario: la misma contraseña siempre produce el mismo hash. Eso es lo que permite la verificación - los hashes deben coincidir, no diferir.\",\n          \"isCorrect\": false,\n          \"text\": \"Genera un nuevo hash cada vez y verifica que sea diferente al anterior\"\n        }\n      ],\n      \"question\": \"¿Cómo funciona este proceso de verificación?\"\n    }\n  ]\n}",
      "outputTokens": 3029,
      "steps": [
        {
          "conclusion": "The model correctly identifies that MD5 or SHA-1 are not secure for cryptographic purposes in modern contexts, but uses MD5 in Question 6 for a file integrity check scenario. While MD5 is broken for collision resistance, it is still often used for simple file integrity checks (checksums) to detect corruption. The question asks what can be concluded 'with certainty', and the answer 'The file is identical bit by bit' is technically acceptable in the context of a casual download integrity check against a provided hash, though a collision attack is theoretically possible. However, the feedback correctly distinguishes between integrity (matching the hash) and security (containing malware), which is the main point. No major technical errors found in the definitions of hash properties (irreversibility, avalanche effect, collision resistance, fixed length).",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "The content is entirely in Spanish as requested. The tone is conversational. The questions use novel scenarios (hospital, legal documents, bank database) rather than reusing the specific examples from the explanation text (1KB/1GB files). This successfully tests understanding rather than memorization.",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "The questions are well-structured and cover all the concepts provided in the explanation steps. Question 5 is particularly strong as it addresses the nuance between theoretical possibility and computational feasibility of collisions. Question 6 addresses the common misconception that a valid hash implies the file is virus-free. The feedback fields provide clear, educational explanations for why answers are right or wrong.",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nLANGUAGE REQUIREMENT: Questions, options, and feedback must be in Spanish.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Security scenarios where learners must apply hash properties (irreversibility, avalanche effect, collision resistance) to real situations\n   - GOOD PATTERN: Situations requiring understanding of why certain hash behaviors matter for security\n   - BAD PATTERN: Asking to list hash properties or define terminology without application context\n   - BAD PATTERN: Questions about specific terms like \"avalanche effect\" without practical application\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Hashing being the same as encryption (hashing is ONE-WAY and irreversible; encryption is designed to be reversible with a key)\n   - Hash functions producing unique outputs (collisions are mathematically possible, just extremely unlikely for good functions)\n   - Longer hashes always being more secure (algorithm quality matters more than length)\n   - MD5 or SHA-1 being secure for cryptographic purposes (both have known vulnerabilities)\n\n3. FORMAT FIT: Multiple choice works for security scenarios. Match columns work for connecting hash properties to their practical implications.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "es-crypto-hash-functions-quiz-1",
        "userInput": {
          "chapterTitle": "Fundamentos de Criptografia",
          "courseTitle": "Seguridad Informatica",
          "explanationSteps": [
            {
              "text": "Una funcion hash convierte cualquier dato en una cadena de longitud fija. Un archivo de 1KB y uno de 1GB producen hashes del mismo tamano.",
              "title": "Compresion de Datos"
            },
            {
              "text": "Cambiar un solo bit del archivo original cambia completamente el hash. Esta propiedad se llama efecto avalancha y es crucial para detectar alteraciones.",
              "title": "Sensibilidad Extrema"
            },
            {
              "text": "No puedes recuperar el archivo original desde su hash - el proceso es irreversible. Por eso se usan para almacenar contrasenas de forma segura.",
              "title": "Camino de Ida"
            },
            {
              "text": "Encontrar dos archivos diferentes con el mismo hash deberia ser practicamente imposible. Esta resistencia a colisiones es lo que hace a los hashes confiables.",
              "title": "Unicidad Practica"
            }
          ],
          "language": "es",
          "lessonDescription": "Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital",
          "lessonTitle": "Funciones Hash Criptograficas"
        }
      }
    },
    {
      "duration": 44102.99900000001,
      "inputTokens": 3795,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A team is training a neural network to classify emails as spam or not spam. After processing 1000 training emails, they notice the network correctly identifies spam 95% of the time but only 60% for legitimate emails.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correct! The network learns by identifying which connections contributed to errors (the misclassified legitimate emails) and adjusting those connections proportionally to their contribution to the mistake.\",\n          \"isCorrect\": true,\n          \"text\": \"The network should adjust connections that contributed most to misclassifying legitimate emails\"\n        },\n        {\n          \"feedback\": \"Resetting would throw away the good performance on spam detection. Training adjusts existing connections based on errors, not replacing them entirely.\",\n          \"isCorrect\": false,\n          \"text\": \"The network should reset all connections and start over with fresh random values\"\n        },\n        {\n          \"feedback\": \"Errors propagate backward through the entire network, adjusting connections at all layers based on how much each contributed to the mistake.\",\n          \"isCorrect\": false,\n          \"text\": \"The network should only adjust the final output layer since that's where predictions are made\"\n        },\n        {\n          \"feedback\": \"Uniform adjustments wouldn't help—the network needs to selectively adjust connections based on their individual contribution to errors.\",\n          \"isCorrect\": false,\n          \"text\": \"The network should increase all connection strengths equally to improve accuracy\"\n        }\n      ],\n      \"question\": \"What should happen during the next training phase?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You're training a network to predict house prices. On one example, it predicts $350,000 but the actual price was $400,000. The network has three layers of connections between input and output.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The error signal flows backward through the network, and each connection learns its share of responsibility for the mistake, allowing targeted adjustments.\",\n          \"isCorrect\": true,\n          \"text\": \"It traces backward from the $50,000 error to find how much each connection contributed to the mistake\"\n        },\n        {\n          \"feedback\": \"Random trial-and-error would be incredibly slow. Instead, the network uses the error to calculate exactly which direction each connection should adjust.\",\n          \"isCorrect\": false,\n          \"text\": \"It randomly adjusts connections until it finds a combination that works better\"\n        },\n        {\n          \"feedback\": \"While output-layer connections are adjusted, earlier connections also contributed to the prediction. The error must flow backward to reach all connections.\",\n          \"isCorrect\": false,\n          \"text\": \"It only adjusts the connections closest to the output since they directly produced the wrong answer\"\n        },\n        {\n          \"feedback\": \"The network can learn from each example immediately by measuring the error and tracing back through connections to assign responsibility.\",\n          \"isCorrect\": false,\n          \"text\": \"It stores this example and waits until it sees enough similar errors to know what to change\"\n        }\n      ],\n      \"question\": \"How does the network determine what to change?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A neural network is learning to recognize handwritten digits. During training on the digit '7', connection A contributed 40% to the error while connection B contributed 5%.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correct! Connections that contribute more to the error receive proportionally larger adjustments. This ensures the most problematic connections are fixed fastest.\",\n          \"isCorrect\": true,\n          \"text\": \"Connection A should receive a larger adjustment than connection B\"\n        },\n        {\n          \"feedback\": \"Uniform adjustments would be inefficient. The network targets connections based on their individual contribution to errors.\",\n          \"isCorrect\": false,\n          \"text\": \"Both connections should receive identical adjustments since they're in the same network\"\n        },\n        {\n          \"feedback\": \"The opposite is true—connections contributing more to the error need larger corrections to reduce future mistakes.\",\n          \"isCorrect\": false,\n          \"text\": \"Connection B should be adjusted more because it contributed less and needs improvement\"\n        },\n        {\n          \"feedback\": \"Adjustments can happen after each example (or batch). Waiting for all examples would miss the opportunity to learn incrementally.\",\n          \"isCorrect\": false,\n          \"text\": \"Neither should be adjusted until the network processes all training examples\"\n        }\n      ],\n      \"question\": \"How should these connections be adjusted?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Training follows this logical sequence: first data must flow forward to create a prediction, then we measure how wrong it was, then we trace backward to find which connections are responsible, and finally we adjust those connections. You can't adjust until you know what to adjust, and you can't know what to adjust until you measure the error.\",\n      \"items\": [\n        \"Input data flows through the network\",\n        \"The network produces a prediction\",\n        \"The difference between prediction and correct answer is calculated\",\n        \"Each connection's contribution to the error is determined\",\n        \"Connection strengths are updated based on their contribution\"\n      ],\n      \"question\": \"Arrange these events in the order they occur during a single training cycle of a neural network\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A data scientist notices their neural network improves rapidly at first but then progress slows dramatically even though there's still significant error in predictions.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Right! Adjustments are proportional to error. Large initial errors mean big corrections, but as the network improves, smaller errors lead to finer, more gradual adjustments.\",\n          \"isCorrect\": true,\n          \"text\": \"As errors get smaller, the calculated adjustments also get smaller, leading to gradual refinement\"\n        },\n        {\n          \"feedback\": \"Neural networks don't have a memory capacity limit in this sense—they continuously adjust existing connections rather than storing new memories.\",\n          \"isCorrect\": false,\n          \"text\": \"The network runs out of memory and can't process new information\"\n        },\n        {\n          \"feedback\": \"The question states there's still significant error, so the network hasn't fully learned yet. The slowdown is about adjustment size, not learning capacity.\",\n          \"isCorrect\": false,\n          \"text\": \"The network has learned everything possible from the training data\"\n        },\n        {\n          \"feedback\": \"Connections don't have an adjustment limit. They can be updated indefinitely—the slowdown comes from smaller errors leading to smaller adjustments.\",\n          \"isCorrect\": false,\n          \"text\": \"Connections can only be adjusted a limited number of times before they freeze\"\n        }\n      ],\n      \"question\": \"Why might progress slow down over time?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"An image of a cat is fed into the network and activations cascade layer by layer\",\n          \"right\": \"Forward pass generating a prediction\"\n        },\n        {\n          \"left\": \"The network said 90% dog, but it was actually a cat\",\n          \"right\": \"Error measurement\"\n        },\n        {\n          \"left\": \"Calculating how much each connection in layer 2 affected the wrong classification\",\n          \"right\": \"Assigning blame to connections\"\n        },\n        {\n          \"left\": \"Slightly reducing connection weights that pushed toward 'dog'\",\n          \"right\": \"Updating weights to reduce error\"\n        }\n      ],\n      \"question\": \"Match each scenario with what's happening in the neural network training process\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Two neural networks are trained on the same image dataset. Network A makes large adjustments to connections after each error. Network B makes tiny adjustments after each error.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Large steps can cause the network to jump past good solutions, while small steps provide stability but take longer. This is why finding the right adjustment size (learning rate) matters.\",\n          \"isCorrect\": true,\n          \"text\": \"Network A might overshoot optimal values and oscillate, while Network B will improve more steadily but slowly\"\n        },\n        {\n          \"feedback\": \"Bigger changes aren't always better—they can cause the network to overshoot good solutions and never settle on optimal values.\",\n          \"isCorrect\": false,\n          \"text\": \"Network A will always learn faster since it makes bigger changes\"\n        },\n        {\n          \"feedback\": \"Even tiny adjustments accumulate over many training examples. Small steps can reach good solutions—they just take more iterations.\",\n          \"isCorrect\": false,\n          \"text\": \"Network B will never learn because the adjustments are too small to matter\"\n        },\n        {\n          \"feedback\": \"The adjustment size significantly affects training dynamics. Different strategies can lead to different final outcomes, not just different speeds.\",\n          \"isCorrect\": false,\n          \"text\": \"Both networks will reach identical solutions since they're trained on the same data\"\n        }\n      ],\n      \"question\": \"What's a likely outcome of these strategies?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"forward\",\n        \"difference\",\n        \"backward\"\n      ],\n      \"distractors\": [\n        \"sideways\",\n        \"randomly\",\n        \"outward\",\n        \"similarity\",\n        \"connection\",\n        \"slowly\"\n      ],\n      \"feedback\": \"The two-phase nature of training is key: forward flow creates predictions, then backward flow distributes blame. This bidirectional process allows the network to systematically determine which connections need adjustment based on measured error.\",\n      \"question\": \"Complete this description of how neural networks learn from their mistakes\",\n      \"template\": \"During training, data first flows [BLANK] through the network to produce a prediction. The [BLANK] between prediction and reality is then measured. This error signal flows [BLANK] through the network so each connection can learn its contribution to the mistake.\"\n    }\n  ]\n}",
      "outputTokens": 2418,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "The quiz is excellent. The scenarios are distinct from the explanation text (e.g., spam filtering, house prices), effectively testing transfer of learning. The formats are chosen well: Sort Order is used for the process sequence, Multiple Choice for scenario application, and Match Columns for definition mapping. The feedback is detailed and educational. Question 5's scenario ('progress slows... even though there's still significant error') slightly conflicts with the answer ('As errors get smaller...'), as significant error implies large gradients in a simple convex view, but it correctly tests the relative concept that initial training has the steepest descent. This is a nuance acceptable for the target audience level.",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Training scenarios where learners must diagnose what's happening (overfitting, underfitting, vanishing gradients) based on observed behavior\n   - GOOD PATTERN: Situations requiring understanding of why the forward-backward process produces learning\n   - BAD PATTERN: Asking for formulas, definitions, or terminology without application context\n   - BAD PATTERN: Questions about specific metaphors like \"blame assignment\" from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Gradient descent being random trial and error (it follows the mathematical gradient direction)\n   - Neural networks understanding concepts like humans (they learn statistical patterns)\n   - More layers always being better (can cause vanishing gradients and overfitting)\n   - Training stopping when error reaches zero (this indicates overfitting)\n\n3. FORMAT FIT: Multiple choice works for training scenarios. Sort order can work for the forward-backward pass sequence. Fill blank can work for the gradient flow process.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-ml-backpropagation-quiz-1",
        "userInput": {
          "chapterTitle": "Neural Network Training",
          "courseTitle": "Machine Learning Fundamentals",
          "explanationSteps": [
            {
              "text": "Training a neural network means adjusting connection strengths so outputs match desired results. The question is: which connections need adjusting and by how much?",
              "title": "The Adjustment Problem"
            },
            {
              "text": "First, data flows forward through the network, producing a prediction. The difference between prediction and reality is measured as error.",
              "title": "Measuring Mistakes"
            },
            {
              "text": "Error information then flows backward through the network. Each connection learns how much it contributed to the mistake using calculus.",
              "title": "Assigning Blame"
            },
            {
              "text": "Connections that contributed more to errors get larger adjustments. The network gradually improves by making small changes in the direction that reduces error.",
              "title": "Small Steps Downhill"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates",
          "lessonTitle": "How Neural Networks Learn"
        }
      }
    },
    {
      "duration": 43681.742417,
      "inputTokens": 3818,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Scientists discover a region in the middle of an ocean where the seafloor is younger near a central ridge and progressively older as you move away from it in either direction.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Random volcanic activity wouldn't create a symmetrical age pattern centered on a ridge. The systematic younger-to-older gradient points to a continuous process at the ridge itself.\",\n          \"isCorrect\": false,\n          \"text\": \"Volcanic eruptions randomly deposited material across the seafloor over time\"\n        },\n        {\n          \"feedback\": \"Exactly right! As plates spread apart, magma rises to create new crust at the ridge. This new material pushes the older crust outward, creating that telltale age pattern—youngest at the center, oldest at the edges.\",\n          \"isCorrect\": true,\n          \"text\": \"Plates are moving apart at the ridge, with new crust forming in the gap and pushing older crust outward\"\n        },\n        {\n          \"feedback\": \"Ocean currents don't erode rock in a way that would create this symmetrical pattern. The age difference reflects when the rock was actually formed, not erosion.\",\n          \"isCorrect\": false,\n          \"text\": \"Ocean currents have eroded the older rock near the ridge, exposing younger layers\"\n        },\n        {\n          \"feedback\": \"This doesn't explain why the seafloor gets progressively older moving away from the ridge. The pattern suggests continuous creation of new crust at the ridge over millions of years.\",\n          \"isCorrect\": false,\n          \"text\": \"The ridge formed recently and hasn't had time to spread its material to the edges\"\n        }\n      ],\n      \"question\": \"What explains this age pattern?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Two neighboring countries sit on different tectonic plates that are moving toward each other. Neither plate contains oceanic crust at their boundary—both are continental.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Ocean trenches form when one plate dives beneath another (subduction). When two continental plates collide, neither sinks easily because continental crust is too buoyant—so no trench forms.\",\n          \"isCorrect\": false,\n          \"text\": \"A deep ocean trench forming between them\"\n        },\n        {\n          \"feedback\": \"Correct! When two continental plates collide, neither is dense enough to sink beneath the other. Instead, the crust crumples and folds upward, building mountain ranges. This is how major mountain chains form.\",\n          \"isCorrect\": true,\n          \"text\": \"A growing mountain range at their boundary\"\n        },\n        {\n          \"feedback\": \"Volcanic island chains typically form from subduction zones or hotspots, not from two continental plates pushing against each other. Continental collisions produce mountains, not volcanic islands.\",\n          \"isCorrect\": false,\n          \"text\": \"Volcanic islands emerging in a chain\"\n        },\n        {\n          \"feedback\": \"Rift valleys form where plates pull apart, not where they collide. These countries are on plates moving toward each other, so compression—not extension—is occurring.\",\n          \"isCorrect\": false,\n          \"text\": \"A rift valley as the plates separate\"\n        }\n      ],\n      \"question\": \"What geological feature would you expect?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A geologist notices that tectonic plates move only a few centimeters each year—about the rate your fingernails grow. Yet this motion has dramatically reshaped Earth's surface over time.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"While earthquakes release built-up stress, the plates themselves don't speed up significantly. The key is that even slow, continuous movement adds up over geological timescales.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates occasionally speed up dramatically during earthquakes\"\n        },\n        {\n          \"feedback\": \"That's the key insight! A few centimeters per year doesn't sound like much, but over millions of years it adds up. In 100 million years, plates moving at 5 cm/year would travel 5,000 kilometers—enough to reshape entire continents.\",\n          \"isCorrect\": true,\n          \"text\": \"The movement is continuous over millions of years, accumulating massive changes\"\n        },\n        {\n          \"feedback\": \"Tectonic plates are actually incredibly massive and require enormous forces to move. Their power comes from the relentless accumulation of small movements over vast time periods, not from being lightweight.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates are light enough that even small forces move them easily\"\n        },\n        {\n          \"feedback\": \"Solar energy doesn't penetrate deep enough to affect plate motion. The driving force comes from heat within Earth's interior, not from the sun.\",\n          \"isCorrect\": false,\n          \"text\": \"Solar energy heats the surface and pushes the plates forward\"\n        }\n      ],\n      \"question\": \"What makes this slow movement so powerful?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A chain of underwater mountains runs down the center of the Atlantic Ocean\",\n          \"right\": \"Plates spreading apart and new crust forming\"\n        },\n        {\n          \"left\": \"Japan experiences frequent earthquakes and has many active volcanoes\",\n          \"right\": \"One plate diving beneath another\"\n        },\n        {\n          \"left\": \"The Himalayas are still growing taller by a few millimeters each year\",\n          \"right\": \"Two continental plates colliding\"\n        },\n        {\n          \"left\": \"Iceland has visible cracks where the land is pulling apart\",\n          \"right\": \"Divergent plate boundary on land\"\n        }\n      ],\n      \"question\": \"Match each real-world observation to the plate tectonic process that explains it:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Engineers are planning to build a nuclear waste storage facility that must remain stable for thousands of years. They're considering a location near a boundary where an oceanic plate meets a continental plate.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! When oceanic and continental plates meet, the denser oceanic plate typically subducts beneath the continental one. This process generates earthquakes and volcanic activity—definitely not ideal for long-term storage of anything sensitive.\",\n          \"isCorrect\": true,\n          \"text\": \"The oceanic plate will likely dive beneath the continental plate, causing earthquakes and volcanic activity\"\n        },\n        {\n          \"feedback\": \"Plates at this type of boundary converge, not diverge. The concern isn't a gap opening up, but rather the seismic and volcanic activity that comes from one plate diving under the other.\",\n          \"isCorrect\": false,\n          \"text\": \"The two plates will push apart, creating a gap that could swallow the facility\"\n        },\n        {\n          \"feedback\": \"At an oceanic-continental boundary, one plate subducts rather than both rising. Mountain building from equal uplift happens when two continental plates collide—a different scenario.\",\n          \"isCorrect\": false,\n          \"text\": \"Both plates will rise equally, elevating the facility to dangerous altitudes\"\n        },\n        {\n          \"feedback\": \"These plates are converging, not separating. The hazards at this boundary come from subduction—earthquakes and volcanoes—not from plates pulling apart.\",\n          \"isCorrect\": false,\n          \"text\": \"Ocean water will flood inland as the plates separate\"\n        }\n      ],\n      \"question\": \"Why is this location risky?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"The process works like a conveyor belt driven by heat. It starts with the heat source (the core), which creates density differences in the mantle rock. Hot material rises because it's less dense, while cooler material sinks. This circulation pattern—called convection—is what ultimately drags the plates along, moving them centimeters per year.\",\n      \"items\": [\n        \"Heat generates in Earth's core from radioactive decay and residual formation heat\",\n        \"Hot material in the mantle becomes less dense and rises toward the surface\",\n        \"Cooler material near the surface sinks back down, creating circulation\",\n        \"This slow churning motion drags the overlying plates along\"\n      ],\n      \"question\": \"Put these steps in order to show how heat from Earth's interior ultimately moves tectonic plates:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A student wonders why the rock in Earth's mantle can flow and carry plates along, even though it's solid rock—not liquid.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Common misconception! The mantle is mostly solid rock. Only in certain locations does it melt to form magma. The mantle's ability to flow comes from a different mechanism.\",\n          \"isCorrect\": false,\n          \"text\": \"The mantle is actually liquid magma, not solid rock\"\n        },\n        {\n          \"feedback\": \"Right! At mantle temperatures and pressures, solid rock behaves differently than at the surface. Over geological timescales—millions of years—this solid rock can deform and flow extremely slowly, carrying the plates along like a very slow conveyor belt.\",\n          \"isCorrect\": true,\n          \"text\": \"At extreme heat and pressure over millions of years, solid rock can flow very slowly\"\n        },\n        {\n          \"feedback\": \"There's no ocean of water beneath the plates. The mantle is rock that can flow slowly due to its extreme heat and the vast timescales involved.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates actually float on underground water, not rock\"\n        },\n        {\n          \"feedback\": \"While gravity plays a role in some plate movements (like pulling subducting plates down), the primary driver is convection in the mantle. The flowing mantle drags plates along with it.\",\n          \"isCorrect\": false,\n          \"text\": \"Gravity pulls the plates directly, not the mantle's movement\"\n        }\n      ],\n      \"question\": \"How is this possible?\"\n    }\n  ]\n}",
      "outputTokens": 2410,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "The instructions explicitly state: 'Never test recall of specific words, metaphors, or examples from the explanation steps' and 'Use novel scenarios'. Explanation Step 4 mentions: 'Mountain ranges like the Himalayas form when neither plate sinks.' Question 4 includes a matching pair for 'The Himalayas' to 'Two continental plates colliding'. This tests recall of a specific example provided in the text rather than applying the concept to a purely novel scenario, technically violating the negative constraint. However, the question includes other novel examples (Japan, Iceland), minimizing the impact.",
          "kind": "minorErrors",
          "score": 9
        },
        {
          "conclusion": "None",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Geographic scenarios where learners must explain geological features or patterns based on plate interactions\n   - GOOD PATTERN: Situations requiring prediction of geological activity based on understanding boundary types\n   - BAD PATTERN: Asking to name boundary types or list geological features without application context\n   - BAD PATTERN: Questions referencing the \"cracked shell\" or \"engine below\" metaphors from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - The mantle being liquid or molten (it is SOLID rock that flows very slowly over geological time due to heat and pressure)\n   - Plates floating on liquid (they move on the slowly-flowing solid mantle)\n   - Earthquakes only happening at plate boundaries (intraplate earthquakes exist)\n   - Continental drift being the same as plate tectonics (continental drift was the early theory; plate tectonics is the modern mechanism)\n\n3. FORMAT FIT: Multiple choice works well for geological scenarios. Match columns work for connecting geological features to boundary types. Sort order could work for mountain-building sequences.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-geology-plate-tectonics-quiz-1",
        "userInput": {
          "chapterTitle": "Earth's Structure",
          "courseTitle": "Earth Science",
          "explanationSteps": [
            {
              "text": "Earth's outer shell is cracked into massive pieces called plates. These plates sit on the mantle - solid rock so hot it flows like thick honey over millions of years.",
              "title": "A Cracked Shell"
            },
            {
              "text": "Heat from Earth's core creates circulation in the mantle. This slow churning drags the plates along, moving them centimeters per year.",
              "title": "The Engine Below"
            },
            {
              "text": "Where plates pull apart, magma rises to fill the gap, creating new crust. Mid-ocean ridges are underwater mountain chains formed this way.",
              "title": "Spreading Apart"
            },
            {
              "text": "Where plates collide, one may dive under the other, triggering earthquakes and volcanoes. Mountain ranges like the Himalayas form when neither plate sinks.",
              "title": "Collision Zones"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create",
          "lessonTitle": "Plate Tectonics"
        }
      }
    },
    {
      "duration": 39423.62062499998,
      "inputTokens": 3885,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Uma célula está prestes a se dividir e você observa que as duas fitas do DNA começam a se separar, formando uma estrutura em forma de Y.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correto! Após a separação, cada fita original serve como molde para a construção de uma nova fita complementar. As enzimas 'leem' a fita antiga e constroem a nova.\",\n          \"isCorrect\": true,\n          \"text\": \"Novas bases são adicionadas usando cada fita separada como guia\"\n        },\n        {\n          \"feedback\": \"Não é isso. Se as fitas simplesmente se juntassem novamente, não haveria cópia do DNA. O objetivo da separação é justamente permitir que cada fita sirva de molde para criar uma nova.\",\n          \"isCorrect\": false,\n          \"text\": \"As duas fitas se juntam novamente para formar uma nova molécula\"\n        },\n        {\n          \"feedback\": \"Incorreto. Ambas as fitas são aproveitadas como moldes. Descartar uma significaria perder metade da informação genética.\",\n          \"isCorrect\": false,\n          \"text\": \"A célula descarta uma das fitas e mantém apenas uma\"\n        },\n        {\n          \"feedback\": \"Não é assim que funciona. A fita antiga permanece intacta e serve como modelo - ela não é destruída, mas sim usada para guiar a construção da nova fita.\",\n          \"isCorrect\": false,\n          \"text\": \"As bases da fita antiga são removidas e substituídas por novas\"\n        }\n      ],\n      \"question\": \"O que acontece logo após essa separação?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Um pesquisador observa que durante a cópia do DNA, uma das fitas é replicada de forma contínua e suave, enquanto a outra é copiada em fragmentos pequenos que depois são unidos.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exatamente! A DNA polimerase só adiciona bases em uma direção. Como as duas fitas do DNA são antiparalelas, uma pode ser copiada continuamente, mas a outra precisa ser feita em pedaços.\",\n          \"isCorrect\": true,\n          \"text\": \"A enzima que copia só consegue trabalhar em uma direção específica\"\n        },\n        {\n          \"feedback\": \"Não é uma questão de quantidade. Ambas as fitas têm o mesmo número de bases. A diferença está na limitação direcional da enzima que faz a cópia.\",\n          \"isCorrect\": false,\n          \"text\": \"Uma fita tem mais bases que a outra e demora mais para copiar\"\n        },\n        {\n          \"feedback\": \"A diferença não é por economia de energia. É uma limitação física da enzima - ela só consegue adicionar bases em uma direção, forçando estratégias diferentes para cada fita.\",\n          \"isCorrect\": false,\n          \"text\": \"O corpo economiza energia copiando uma fita mais devagar\"\n        },\n        {\n          \"feedback\": \"Os fragmentos não são um sistema de backup. Eles existem porque a enzima não consegue copiar na direção oposta, então precisa trabalhar em pequenos trechos.\",\n          \"isCorrect\": false,\n          \"text\": \"Os fragmentos são uma forma de backup caso ocorra um erro\"\n        }\n      ],\n      \"question\": \"Por que existe essa diferença?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Durante um experimento, cientistas desativam temporariamente as enzimas responsáveis por verificar e corrigir erros durante a replicação do DNA em células em cultura.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correto! Sem o sistema de correção, os erros que normalmente seriam detectados e removidos permaneceriam no DNA. Isso resultaria em muito mais mutações nas células.\",\n          \"isCorrect\": true,\n          \"text\": \"A taxa de mutações nas células aumentaria significativamente\"\n        },\n        {\n          \"feedback\": \"A replicação ainda poderia continuar - as enzimas de correção não são necessárias para adicionar bases. Mas sem elas, os erros não seriam corrigidos e se acumulariam.\",\n          \"isCorrect\": false,\n          \"text\": \"A replicação do DNA pararia completamente\"\n        },\n        {\n          \"feedback\": \"Embora verificar cada base leve tempo, o resultado principal da falta de correção seria o acúmulo de erros, não necessariamente uma cópia mais rápida.\",\n          \"isCorrect\": false,\n          \"text\": \"O DNA seria copiado mais rapidamente que o normal\"\n        },\n        {\n          \"feedback\": \"A separação das fitas é feita por outras enzimas, não pelas de correção. O problema seria na qualidade da cópia, não na separação inicial.\",\n          \"isCorrect\": false,\n          \"text\": \"As duas fitas do DNA não conseguiriam se separar\"\n        }\n      ],\n      \"question\": \"Qual seria o resultado mais provável?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"As duas fitas da hélice se afastam uma da outra\",\n          \"right\": \"Preparação para criar moldes de cópia\"\n        },\n        {\n          \"left\": \"Uma enzima remove uma base recém-adicionada e coloca outra no lugar\",\n          \"right\": \"Sistema de controle de qualidade\"\n        },\n        {\n          \"left\": \"Uma fita sendo copiada em pequenos pedaços separados\",\n          \"right\": \"Limitação direcional da polimerase\"\n        },\n        {\n          \"left\": \"Nova fita sendo construída base por base seguindo a fita antiga\",\n          \"right\": \"Uso de molde para síntese\"\n        }\n      ],\n      \"question\": \"Conecte cada situação observada durante a replicação do DNA com o processo ou característica que ela representa:\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Primeiro, as fitas precisam ser separadas para expor as bases. Depois, cada fita serve como molde. As novas bases são então adicionadas seguindo o molde. Por fim, o sistema de correção verifica cada base para garantir a fidelidade da cópia.\",\n      \"items\": [\n        \"As duas fitas da dupla hélice são separadas\",\n        \"Cada fita original é usada como molde\",\n        \"Novas bases são adicionadas uma por uma\",\n        \"Enzimas verificam se as bases estão corretas\"\n      ],\n      \"question\": \"Coloque em ordem os eventos que ocorrem quando uma célula precisa duplicar seu DNA antes de se dividir:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine que você tem uma molécula de DNA marcada com cor azul. Após uma rodada de replicação, você observa as duas moléculas resultantes.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito! Como cada fita original serve de molde para uma nova, cada molécula resultante terá uma fita do DNA original (azul) pareada com uma fita recém-sintetizada (sem cor).\",\n          \"isCorrect\": true,\n          \"text\": \"Cada molécula teria uma fita azul (antiga) e uma fita sem cor (nova)\"\n        },\n        {\n          \"feedback\": \"Isso implicaria que as duas fitas originais ficaram juntas e duas novas foram criadas do nada. Na verdade, cada fita original guia a criação de uma nova fita complementar.\",\n          \"isCorrect\": false,\n          \"text\": \"Uma molécula seria toda azul e a outra sem nenhuma cor\"\n        },\n        {\n          \"feedback\": \"Isso não é possível. Só havia material azul suficiente para duas fitas (a molécula original). Novas bases não teriam essa cor.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambas as moléculas seriam completamente azuis\"\n        },\n        {\n          \"feedback\": \"A distribuição não é aleatória. As fitas originais permanecem intactas e cada uma se pareia com uma fita nova. É um processo ordenado, não aleatório.\",\n          \"isCorrect\": false,\n          \"text\": \"As cores estariam misturadas aleatoriamente em ambas as moléculas\"\n        }\n      ],\n      \"question\": \"O que você esperaria encontrar?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"antiga\",\n        \"nova\",\n        \"correção\"\n      ],\n      \"distractors\": [\n        \"dupla\",\n        \"final\",\n        \"separação\",\n        \"ligação\",\n        \"síntese\"\n      ],\n      \"feedback\": \"A fita antiga (original) atua como molde para guiar a construção da fita nova. Para garantir que a cópia seja fiel, enzimas de correção verificam cada base adicionada e corrigem erros, mantendo a integridade da informação genética.\",\n      \"question\": \"Complete as frases sobre como o DNA mantém a precisão durante sua cópia:\",\n      \"template\": \"Durante a replicação, a fita [BLANK] serve como guia para construir a fita [BLANK]. Se uma base incorreta for adicionada, enzimas de [BLANK] detectam e substituem o erro.\"\n    }\n  ]\n}",
      "outputTokens": 2453,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nLANGUAGE REQUIREMENT: Questions, options, and feedback must be in Portuguese.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios requiring understanding of WHY replication works as it does (directionality constraints, error correction needs)\n   - GOOD PATTERN: Situations where learners must predict outcomes of replication errors or enzyme malfunctions\n   - BAD PATTERN: Asking to name enzymes or describe their functions without application context\n   - BAD PATTERN: Questions referencing the \"zipper\" metaphor or other explanation-specific content\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Both DNA strands being synthesized the same way (leading strand is continuous; lagging strand is synthesized in Okazaki fragments)\n   - DNA polymerase being able to start synthesis on its own (it needs a primer)\n   - Replication being error-free (proofreading catches most errors but some slip through)\n   - Replication happening randomly along the chromosome (it starts at specific origins)\n\n3. FORMAT FIT: Sort order works well for replication sequence. Fill blank works for enzyme roles. Multiple choice for understanding why the process works as it does.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "pt-biology-dna-replication-quiz-1",
        "userInput": {
          "chapterTitle": "Genetica Molecular",
          "courseTitle": "Biologia Celular",
          "explanationSteps": [
            {
              "text": "Antes de uma celula se dividir, ela precisa copiar todo seu DNA. O processo comeca quando enzimas separam as duas fitas da dupla helice.",
              "title": "Abrindo o Ziper"
            },
            {
              "text": "Cada fita original serve de molde para uma nova. Enzimas chamadas DNA polimerases leem a fita antiga e constroem a nova, base por base.",
              "title": "Lendo o Molde"
            },
            {
              "text": "Ha um problema: a polimerase so consegue adicionar bases em uma direcao. Uma fita e copiada continuamente, mas a outra precisa ser copiada em pedacos.",
              "title": "O Problema da Direcao"
            },
            {
              "text": "Enzimas de correcao verificam cada base adicionada. Se encontram um erro, removem e substituem. Esse controle de qualidade mantem a fidelidade genetica.",
              "title": "Corrigindo Erros"
            }
          ],
          "language": "pt",
          "lessonDescription": "Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade",
          "lessonTitle": "Como o DNA se Replica"
        }
      }
    },
    {
      "duration": 53069.75975000003,
      "inputTokens": 3809,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Sarah has been convinced for years that her neighbor is unfriendly. Yesterday, she saw her neighbor wave at another person on the street but walk past Sarah without acknowledging her. She immediately thought, 'See, I knew she didn't like me.' Later, her husband mentioned that the neighbor had actually smiled at Sarah earlier that morning while Sarah was checking her phone.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"This isn't deliberate manipulation. Sarah genuinely didn't notice the smile because her existing belief acted as a filter - her brain registered the snub but not the friendly gesture.\",\n          \"isCorrect\": false,\n          \"text\": \"She's deliberately ignoring evidence to feel justified in her dislike\"\n        },\n        {\n          \"feedback\": \"Exactly! Sarah's belief that her neighbor is unfriendly causes her to readily notice and remember the perceived snub, while completely missing the earlier smile. This selective attention happens automatically, not maliciously.\",\n          \"isCorrect\": true,\n          \"text\": \"Her existing belief is causing her to notice evidence that confirms it while missing contradicting evidence\"\n        },\n        {\n          \"feedback\": \"This isn't about general memory problems. Sarah's brain specifically filtered out information that contradicted her belief while highlighting information that confirmed it - a selective process, not random forgetfulness.\",\n          \"isCorrect\": false,\n          \"text\": \"She has a poor memory and simply forgot the morning interaction\"\n        },\n        {\n          \"feedback\": \"While sensitivity might play a role, the core issue is that her existing belief shaped what she noticed and remembered. The selective attention to confirming evidence is the key psychological phenomenon here.\",\n          \"isCorrect\": false,\n          \"text\": \"She's being overly sensitive about normal social interactions\"\n        }\n      ],\n      \"question\": \"What's happening with Sarah's perception?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Two friends watch the same football game together. After the game, Tom says 'The refs were totally biased against our team - did you see all those bad calls?' His friend Mike, who roots for the opposing team, responds 'What are you talking about? The refs let your guys get away with everything!'\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Both were watching closely - that's not the issue. Their different team loyalties caused each to genuinely perceive and remember different fouls more vividly.\",\n          \"isCorrect\": false,\n          \"text\": \"One of them wasn't paying close attention to the game\"\n        },\n        {\n          \"feedback\": \"Right! This isn't about dishonesty or inattention. Each person's brain automatically highlighted plays that fit their expectation (unfair treatment of their team) and downplayed plays that contradicted it. They literally perceived the same game differently.\",\n          \"isCorrect\": true,\n          \"text\": \"Their emotional investment in their teams causes each to genuinely notice more fouls against their side\"\n        },\n        {\n          \"feedback\": \"While some exaggeration might occur, the fascinating part is that each person genuinely believes their perception is accurate. Their brains filtered the game's events through their existing loyalties.\",\n          \"isCorrect\": false,\n          \"text\": \"They're exaggerating to defend their teams during an argument\"\n        },\n        {\n          \"feedback\": \"Even if the calls were perfectly balanced, each fan would likely perceive bias against their team. Their existing loyalty shapes what they notice and remember about the game.\",\n          \"isCorrect\": false,\n          \"text\": \"The refs actually made more calls against one team, and one friend is right\"\n        }\n      ],\n      \"question\": \"Why do Tom and Mike see the same game so differently?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A pharmaceutical company is testing a new pain medication. In one study design, the doctors evaluating patients' pain levels know which patients received the real drug versus a placebo. In another design, neither the doctors nor the patients know who received what until after all evaluations are complete.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"While patient expectations matter, the key issue is that even well-intentioned doctors who know which treatment was given might unconsciously interpret ambiguous symptoms in ways that confirm their expectations about the drug's effectiveness.\",\n          \"isCorrect\": false,\n          \"text\": \"Patients might lie about their pain levels if they know they got the placebo\"\n        },\n        {\n          \"feedback\": \"Exactly! Even highly trained, honest researchers can unconsciously see what they expect to see. When a doctor knows a patient received the real drug, they might interpret a slight improvement as significant. Blinding removes this invisible influence on judgment.\",\n          \"isCorrect\": true,\n          \"text\": \"It prevents doctors from unconsciously interpreting results in ways that match their expectations\"\n        },\n        {\n          \"feedback\": \"This isn't about appearances. Blinding serves a practical purpose: it protects against the very real tendency for expectations to shape perception, even in trained professionals trying to be objective.\",\n          \"isCorrect\": false,\n          \"text\": \"It makes the study more official and impressive to regulators\"\n        },\n        {\n          \"feedback\": \"While keeping patients unaware matters, the deeper reason is protecting against the doctors' own unconscious tendency to interpret data in ways that confirm their hypotheses about the drug.\",\n          \"isCorrect\": false,\n          \"text\": \"Doctors might accidentally reveal which treatment patients received\"\n        }\n      ],\n      \"question\": \"Why is the second design more reliable?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A hiring manager who believes older workers are less tech-savvy remembers interview mistakes by older candidates but forgets similar mistakes by younger ones\",\n          \"right\": \"Selective memory favoring existing beliefs\"\n        },\n        {\n          \"left\": \"Reading an article that challenges your political views feels mentally exhausting and irritating\",\n          \"right\": \"Discomfort from contradicting evidence\"\n        },\n        {\n          \"left\": \"A parent convinced their child is gifted genuinely sees more signs of intelligence than an objective observer would\",\n          \"right\": \"Unconscious filtering of perception\"\n        },\n        {\n          \"left\": \"Scientific journals require outside experts to review research before publication\",\n          \"right\": \"External safeguards against biased reasoning\"\n        }\n      ],\n      \"question\": \"Match each scenario with the psychological phenomenon it best demonstrates:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Marcus is convinced that a certain brand of vitamins has improved his energy levels. His wife points out that he also started exercising, sleeping better, and drinking more water around the same time he started taking the vitamins. Marcus responds, 'Yeah, but I really feel like it's the vitamins making the difference.'\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"While studies are valuable, the core issue is that Marcus's belief in the vitamins is causing him to attribute his improved energy to them while dismissing equally valid alternative explanations.\",\n          \"isCorrect\": false,\n          \"text\": \"He should trust scientific studies instead of personal experience\"\n        },\n        {\n          \"feedback\": \"Correct! Marcus has already concluded that the vitamins work, so his brain gravitates toward evidence supporting that belief (feeling better after taking them) while minimizing contradicting possibilities (the lifestyle changes). This happens without him realizing it.\",\n          \"isCorrect\": true,\n          \"text\": \"His belief in the vitamins is causing him to discount equally plausible explanations\"\n        },\n        {\n          \"feedback\": \"Whether vitamins work isn't the point here. The issue is Marcus's reasoning process - he's dismissing alternative explanations not because they're wrong, but because they don't fit his existing belief.\",\n          \"isCorrect\": false,\n          \"text\": \"Vitamins don't actually have any health benefits\"\n        },\n        {\n          \"feedback\": \"Marcus isn't being deliberately stubborn. He genuinely feels certain it's the vitamins because his brain is unconsciously filtering information to match his existing belief. He's not aware of this process.\",\n          \"isCorrect\": false,\n          \"text\": \"He's being stubborn and refusing to listen to his wife\"\n        }\n      ],\n      \"question\": \"What makes Marcus's reasoning problematic?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A detective has identified a primary suspect in a robbery case. Over the next week, she interviews witnesses and reviews security footage. She feels increasingly confident in the suspect's guilt as the investigation continues.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"This is the key concern. Once the detective formed a hypothesis, her brain may automatically filter evidence to confirm it. She might probe harder when witnesses support her theory and accept denials less critically. This isn't about dishonesty - it's how all human minds work.\",\n          \"isCorrect\": true,\n          \"text\": \"The detective might unconsciously give more weight to evidence pointing to the suspect while overlooking evidence that doesn't fit\"\n        },\n        {\n          \"feedback\": \"The timeline isn't the issue. The concern is that her growing confidence might stem partly from unconsciously seeking and valuing evidence that confirms her initial suspicion.\",\n          \"isCorrect\": false,\n          \"text\": \"A week isn't enough time to properly investigate a crime\"\n        },\n        {\n          \"feedback\": \"While more evidence is good, the deeper issue is that once she formed a belief about the suspect, her brain began filtering all subsequent information through that lens - regardless of how much evidence she gathers.\",\n          \"isCorrect\": false,\n          \"text\": \"She should have interviewed more witnesses before forming any opinion\"\n        },\n        {\n          \"feedback\": \"Confidence isn't inherently wrong, but the concern is where that confidence comes from. If it's growing because her mind is selectively noticing confirming evidence, the confidence might be misplaced.\",\n          \"isCorrect\": false,\n          \"text\": \"Detectives shouldn't feel confident until they have physical evidence\"\n        }\n      ],\n      \"question\": \"What should concern us about this investigation?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"discomfort\",\n        \"dismiss\",\n        \"automatically\"\n      ],\n      \"distractors\": [\n        \"clarity\",\n        \"embrace\",\n        \"deliberately\",\n        \"excitement\",\n        \"analyze\",\n        \"occasionally\"\n      ],\n      \"feedback\": \"Contradicting evidence creates discomfort (not clarity or excitement) because our brains prefer consistency. To resolve this, we dismiss (not embrace or analyze) the contradicting information. Crucially, this happens automatically (not deliberately or occasionally) - we don't consciously choose to ignore evidence; our brains do it without our awareness.\",\n      \"question\": \"Complete this explanation of how our minds handle information that conflicts with our beliefs:\",\n      \"template\": \"When we encounter evidence that contradicts what we believe, it creates mental [BLANK]. To relieve this feeling, our brains tend to [BLANK] the contradicting information rather than updating our beliefs. This process happens [BLANK], meaning we're usually not aware it's occurring.\"\n    }\n  ]\n}",
      "outputTokens": 2630,
      "steps": [
        {
          "conclusion": "The AI failed a specific negative constraint found in the Expectations section: 'BAD PATTERN: Questions about the sports fan or political supporter examples from the explanation'. Question 2 ('Two friends watch the same football game...') is a direct adaptation of the example provided in the explanation text ('A sports fan genuinely sees more fouls by the opposing team'). This violates the instruction to use novel scenarios and specifically ignores the forbidden pattern.",
          "kind": "majorErrors",
          "score": 7
        },
        {
          "conclusion": "Question 7 is a 'fillBlank' question that closely mirrors the phrasing of the explanation steps (Step 1 mentions 'uncomfortable', Step 2 mentions 'dismiss', Step 3 mentions 'automatically'). This borders on testing recall of specific words or the text's structure rather than conceptual understanding applied to a novel scenario, which contradicts the instruction: 'Never test recall of specific words... from the explanation steps'.",
          "kind": "minorErrors",
          "score": 8.5
        },
        {
          "conclusion": "To improve the response, Question 2 should be replaced with a completely novel scenario (e.g., a teacher grading a favorite student, or an investor watching a stock). Question 7 should be replaced with another application-based question (like Q1 or Q6) rather than a summary completion task, to better align with the 'Understanding vs. Memorization' philosophy.",
          "kind": "potentialImprovements",
          "score": 8
        }
      ],
      "testCase": {
        "expectations": "\nSPECIAL CONSIDERATION: This is an edge case - an abstract psychological concept where understanding means recognizing the bias in everyday situations.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Everyday scenarios where learners must recognize confirmation bias operating in someone's reasoning\n   - GOOD PATTERN: Situations requiring understanding of WHY the bias is unconscious and hard to overcome\n   - BAD PATTERN: Asking to define confirmation bias or list its characteristics without application context\n   - BAD PATTERN: Questions about the sports fan or political supporter examples from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Confirmation bias being intentional deception (it's usually unconscious)\n   - Only unintelligent people having confirmation bias (everyone is susceptible, including experts)\n   - Confirmation bias being easy to overcome once you know about it (awareness helps but doesn't eliminate it)\n   - Confirmation bias only affecting beliefs about facts (it affects emotional and value-based beliefs too)\n\n3. FORMAT FIT: Multiple choice excels here - present scenarios and ask which demonstrates the bias. Match columns could connect cognitive biases to example scenarios. AVOID sort_order as the concept isn't sequential.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-psychology-confirmation-bias-quiz-1",
        "userInput": {
          "chapterTitle": "Cognitive Biases",
          "courseTitle": "Introduction to Psychology",
          "explanationSteps": [
            {
              "text": "Our brains prefer consistency. When we believe something, finding contradicting evidence feels uncomfortable - like a mental itch we want to scratch away.",
              "title": "The Comfort of Consistency"
            },
            {
              "text": "To avoid discomfort, our brains play tricks. We notice evidence supporting our beliefs and unconsciously filter out or dismiss contradicting evidence.",
              "title": "Selective Attention"
            },
            {
              "text": "This happens automatically, not deliberately. A sports fan genuinely sees more fouls by the opposing team. A political supporter honestly remembers more flaws in opponents.",
              "title": "Unconscious Filtering"
            },
            {
              "text": "Even scientists fall prey to this. That's why research uses blind studies and peer review - external checks against our natural tendency to see what we expect.",
              "title": "Safeguards Help"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding confirmation bias - how our tendency to favor information that confirms existing beliefs affects our perception and decision-making",
          "lessonTitle": "Confirmation Bias"
        }
      }
    },
    {
      "duration": 39208.63179200003,
      "inputTokens": 3796,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You're photographing a lighthouse at sunset with a dramatic, colorful sky. You want the sky to be the star of the image.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Placing the horizon low gives the sky about two-thirds of the frame, making it the dominant element and letting those sunset colors shine.\",\n          \"isCorrect\": true,\n          \"text\": \"In the lower third of the frame\"\n        },\n        {\n          \"feedback\": \"A centered horizon gives equal weight to sky and ground. Since you want to emphasize the dramatic sky, this would diminish its impact.\",\n          \"isCorrect\": false,\n          \"text\": \"Dead center, splitting the frame 50/50\"\n        },\n        {\n          \"feedback\": \"This would emphasize the ground/foreground and give the sky only a small portion of the frame—the opposite of what you want when the sky is your main attraction.\",\n          \"isCorrect\": false,\n          \"text\": \"In the upper third of the frame\"\n        },\n        {\n          \"feedback\": \"This would leave almost no sky visible at all, completely undermining your goal of showcasing those sunset colors.\",\n          \"isCorrect\": false,\n          \"text\": \"Just below the top edge of the frame\"\n        }\n      ],\n      \"question\": \"Where should you place the horizon?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A photographer takes two shots of the same bird on a branch. In Photo A, the bird is perfectly centered. In Photo B, the bird is positioned at one of the intersection points of an imaginary grid.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Right! When subjects aren't centered, our eyes naturally move around the image, creating a more dynamic viewing experience that feels alive.\",\n          \"isCorrect\": true,\n          \"text\": \"Off-center placement gives the viewer's eye room to travel through the image\"\n        },\n        {\n          \"feedback\": \"Not true—centered subjects can work well in certain situations, like symmetrical architecture or formal portraits. Off-center placement is a guideline, not an absolute rule.\",\n          \"isCorrect\": false,\n          \"text\": \"Centered subjects always look unnatural and amateur\"\n        },\n        {\n          \"feedback\": \"There's nothing magical about these points—they work because of how our eyes naturally scan images, not because of any special energy they emit.\",\n          \"isCorrect\": false,\n          \"text\": \"Grid intersection points have been proven to emit visual energy\"\n        },\n        {\n          \"feedback\": \"Subject placement doesn't affect lighting at all. Both photos could have identical lighting—the difference is purely compositional.\",\n          \"isCorrect\": false,\n          \"text\": \"Photo B would have better lighting than Photo A\"\n        }\n      ],\n      \"question\": \"Why might Photo B feel more engaging?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You're taking a portrait of your friend standing in a beautiful garden. You want to create a balanced but visually interesting composition.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correct! The four points where vertical and horizontal lines cross are considered 'power points'—placing your subject there naturally draws the viewer's attention.\",\n          \"isCorrect\": true,\n          \"text\": \"Where the imaginary grid lines intersect\"\n        },\n        {\n          \"feedback\": \"Placing subjects at the very edges often makes them feel cut off or creates awkward compositions. The intersection points are more balanced positions.\",\n          \"isCorrect\": false,\n          \"text\": \"Anywhere along the outer edges of the frame\"\n        },\n        {\n          \"feedback\": \"While centering can work, it doesn't create the dynamic visual interest you're looking for. The intersection points typically create more engaging compositions.\",\n          \"isCorrect\": false,\n          \"text\": \"Exactly in the center of the frame\"\n        },\n        {\n          \"feedback\": \"Corners are too extreme and would likely crop important parts of your subject. The power points are positioned more harmoniously within the frame.\",\n          \"isCorrect\": false,\n          \"text\": \"In the corners of the frame\"\n        }\n      ],\n      \"question\": \"Where are the strongest placement spots?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Photographing rolling wheat fields with a thin strip of clouds above\",\n          \"right\": \"Horizon in upper third to emphasize the ground\"\n        },\n        {\n          \"left\": \"Capturing storm clouds building over a small farmhouse\",\n          \"right\": \"Horizon in lower third to emphasize the sky\"\n        },\n        {\n          \"left\": \"A perfectly symmetrical cathedral entrance\",\n          \"right\": \"Centered subject placement\"\n        },\n        {\n          \"left\": \"A runner mid-stride crossing a finish line\",\n          \"right\": \"Subject on a power point for dynamic energy\"\n        }\n      ],\n      \"question\": \"Match each photography scenario with the compositional approach that would best achieve the photographer's goal:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A friend shows you their vacation photos and asks why their images feel 'static' compared to professional travel photography they admire. You notice every single photo has the subject dead center.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Good advice! Off-center placement gives the viewer's eye somewhere to travel, creating the dynamic, engaging quality that makes professional photos feel alive.\",\n          \"isCorrect\": true,\n          \"text\": \"Try placing subjects off-center to create visual movement\"\n        },\n        {\n          \"feedback\": \"Equipment won't fix compositional issues. A photo taken on a phone with thoughtful composition will feel more dynamic than a centered shot on professional gear.\",\n          \"isCorrect\": false,\n          \"text\": \"Use a more expensive camera with better resolution\"\n        },\n        {\n          \"feedback\": \"Orientation doesn't address the centering issue. You can have static, centered compositions in either landscape or portrait format.\",\n          \"isCorrect\": false,\n          \"text\": \"Always shoot in landscape orientation instead of portrait\"\n        },\n        {\n          \"feedback\": \"This doesn't solve the centering problem—you'd just have a closer, still-centered subject. The issue is placement within the frame, not zoom level.\",\n          \"isCorrect\": false,\n          \"text\": \"Zoom in closer to eliminate all background elements\"\n        }\n      ],\n      \"question\": \"What compositional advice would help?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You're photographing a lone tree in a vast desert landscape. You want to convey the sense of emptiness and isolation while still making the tree feel significant.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Perfect! Positioning the tree on a power point keeps it visually significant while the surrounding empty space in the other sections emphasizes the isolation and vastness you want to convey.\",\n          \"isCorrect\": true,\n          \"text\": \"Place the tree at a grid intersection point with empty desert filling the rest\"\n        },\n        {\n          \"feedback\": \"Cropping out the desert would eliminate the sense of vastness and isolation you're trying to capture. The emptiness is essential to your story.\",\n          \"isCorrect\": false,\n          \"text\": \"Center the tree and crop tightly so the desert barely shows\"\n        },\n        {\n          \"feedback\": \"This would make the tree feel accidental rather than significant. You'd lose the sense that it's the intentional subject of your composition.\",\n          \"isCorrect\": false,\n          \"text\": \"Place the tree at the very edge of the frame, nearly cut off\"\n        },\n        {\n          \"feedback\": \"An extreme close-up would eliminate the desert context entirely, losing the story of isolation you want to tell.\",\n          \"isCorrect\": false,\n          \"text\": \"Fill the entire frame with just the tree trunk\"\n        }\n      ],\n      \"question\": \"What placement would achieve this effect?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"nine\",\n        \"four\",\n        \"dynamic\",\n        \"travel\"\n      ],\n      \"distractors\": [\n        \"three\",\n        \"six\",\n        \"twelve\",\n        \"two\",\n        \"eight\",\n        \"balanced\",\n        \"colorful\",\n        \"sharp\",\n        \"jump\",\n        \"focus\",\n        \"rest\"\n      ],\n      \"feedback\": \"The grid creates nine sections (3×3) with four intersection points where the lines cross. These placements create dynamic images because they give our eyes room to travel through the composition, making photos feel more alive and engaging.\",\n      \"question\": \"Complete this explanation of how the compositional grid helps photographers:\",\n      \"template\": \"When you mentally divide your frame into [BLANK] equal sections using two horizontal and two vertical lines, you create [BLANK] intersection points. Placing subjects at these spots creates more [BLANK] images because our eyes naturally [BLANK] through the composition rather than landing and stopping.\"\n    }\n  ]\n}",
      "outputTokens": 2146,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "Question 7 violates the 'Non-Negotiable Rule' to 'Never test recall of specific words... from the explanation steps'. The explanation step 4 states: 'Off-center placement gives the eye somewhere to travel'. Question 7 asks the learner to fill in the blank for the sentence: '...our eyes naturally [travel] through the composition'. This tests recall of the specific word 'travel' rather than conceptual understanding, as other words like 'move' or 'flow' could conceptually fit but aren't accepted. Additionally, filling in 'nine' and 'four' tests the definition (rote memory) rather than application, although these are fundamental constants of the concept.",
          "kind": "minorErrors",
          "score": 8.5
        },
        {
          "conclusion": "Question 7 could be replaced with a visual application question (e.g., describing a scene and asking which grid lines align with specific elements) or a conceptual question about *why* the grid is used (e.g., balancing negative space) without relying on fill-in-the-blank definitions. This would align better with the goal of testing understanding over memorization.",
          "kind": "potentialImprovements",
          "score": 9
        }
      ],
      "testCase": {
        "expectations": "\nSPECIAL CONSIDERATION: This is an edge case - a visual/practical skill where understanding is demonstrated through application to real scenarios, not visual recognition.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Photography scenarios where learners must decide subject placement to achieve specific visual effects\n   - GOOD PATTERN: Situations requiring understanding of WHY off-center placement creates visual interest\n   - BAD PATTERN: Asking to define the rule of thirds or describe the grid without application context\n   - BAD PATTERN: Questions about \"power points\" terminology without practical application\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Rule of thirds being mandatory (it's a guideline, not a rule - breaking it intentionally can be effective)\n   - Centered subjects always being wrong (centered composition works for symmetry and certain moods)\n   - The grid being visible in final photos (it's an imaginary guide)\n   - Rule of thirds being the only composition technique (leading lines, framing, and many others exist)\n\n3. FORMAT FIT: Multiple choice works for \"where would you place the subject\" scenarios. Match columns could connect composition choices to their visual effects. AVOID selectImage unless visual recognition is truly being tested.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Arrange words: TRAP FORMAT. Only valid when understanding the concept is required to know which words go where. PENALIZE HEAVILY when the sentence can be assembled through grammar/syntax knowledge alone (e.g., basic sentence structure like \"Subject + verb + object\" that any native speaker could guess).\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - arrangeWords is used but the sentence structure is trivially guessable from grammar (this is a common failure mode)\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-photography-composition-quiz-1",
        "userInput": {
          "chapterTitle": "Composition Basics",
          "courseTitle": "Photography Fundamentals",
          "explanationSteps": [
            {
              "text": "Most beginners center their subjects. While this works sometimes, placing subjects off-center often creates more dynamic, interesting images.",
              "title": "Beyond the Center"
            },
            {
              "text": "Imagine your frame divided by two horizontal and two vertical lines, creating nine equal sections. The four points where lines cross are power points.",
              "title": "The Grid"
            },
            {
              "text": "Placing your main subject on a power point or along a line draws the viewer's eye naturally. A horizon on the lower line emphasizes sky; on the upper line emphasizes ground.",
              "title": "Strategic Placement"
            },
            {
              "text": "This guideline works because our eyes naturally scan images in patterns. Off-center placement gives the eye somewhere to travel, making photos feel more alive.",
              "title": "Why It Works"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding the rule of thirds and how strategic subject placement creates more visually engaging photographs",
          "lessonTitle": "The Rule of Thirds"
        }
      }
    }
  ],
  "taskId": "activity-explanation-quiz"
}
