{
  "modelId": "google/gemini-3-flash",
  "results": [
    {
      "duration": 24365.955916,
      "inputTokens": 1845,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You get a small scrape on your knee while hiking. Within minutes, the area becomes red, warm, and slightly swollen. However, your body doesn't \\\"recognize\\\" the specific dirt or bacteria that entered; it just reacts to the damage in general.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correct! This is the 'innate' response—it's fast and general, reacting to any potential threat without needing a specific ID.\",\n          \"isCorrect\": true,\n          \"text\": \"This is a general, immediate defense that reacts the same way to almost any injury or intruder.\"\n        },\n        {\n          \"feedback\": \"If this were a 'memory' response, it would be because you've had this exact scrape before. The immediate redness is actually the 'first line' of defense in action.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a highly specialized response based on your body's memory of this specific type of dirt.\"\n        },\n        {\n          \"feedback\": \"Actually, the redness and swelling are signs that your first responders are working hard to clear the area, even if they don't know exactly what the intruder is yet.\",\n          \"isCorrect\": false,\n          \"text\": \"The redness means your immune system has failed to recognize the threat and is waiting for instructions.\"\n        },\n        {\n          \"feedback\": \"Antibodies take time to build (usually days). An immediate reaction like this is handled by generalist cells and physical responses.\",\n          \"isCorrect\": false,\n          \"text\": \"This reaction is caused by antibodies that were already waiting in your skin for this specific moment.\"\n        }\n      ],\n      \"question\": \"Why does your knee get red and warm so quickly?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A thick castle wall that prevents anyone from entering the city.\",\n          \"right\": \"Skin\"\n        },\n        {\n          \"left\": \"A sticky floor trap in a hallway that catches insects as they crawl by.\",\n          \"right\": \"Mucus\"\n        },\n        {\n          \"left\": \"A roving security patrol that removes anyone not wearing a resident's badge.\",\n          \"right\": \"Macrophages\"\n        }\n      ],\n      \"question\": \"Match these city security features to the body's natural defenses.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Scientists are studying a patient who is struggling to fight off a specific infection. They discover that while the patient's body identifies the germ, it isn't producing the Y-shaped proteins needed to 'tag' the germ for the rest of the immune system to see.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Antibodies act as specific 'tags' or 'flags.' Without them, the 'killer' cells of the immune system might walk right past the intruder because they don't see it as a target.\",\n          \"isCorrect\": true,\n          \"text\": \"The immune system won't know exactly which cells are the 'enemies' that need to be destroyed.\"\n        },\n        {\n          \"feedback\": \"Physical barriers are things like skin; the issue here is with the internal 'tagging' system.\",\n          \"isCorrect\": false,\n          \"text\": \"The patient's skin and mucus will stop working as physical barriers.\"\n        },\n        {\n          \"feedback\": \"Memory is what happens AFTER an infection. This patient is currently failing to 'tag' the active threat.\",\n          \"isCorrect\": false,\n          \"text\": \"The patient will immediately forget any diseases they had in the past.\"\n        },\n        {\n          \"feedback\": \"Actually, the germ would spread more easily because it isn't being marked for destruction.\",\n          \"isCorrect\": false,\n          \"text\": \"The germs will become 'stuck' in the blood and unable to move to other organs.\"\n        }\n      ],\n      \"question\": \"What is the result of this 'tagging' failure?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Defense starts with blocking (barriers), moves to general cleanup (macrophages), then shifts to a specific targeted attack (antibodies), and finally prepares for the future (memory).\",\n      \"items\": [\n        \"Physical barriers try to block the virus from entering.\",\n        \"General patrol cells (macrophages) consume any foreign material they find.\",\n        \"The body identifies the specific unique 'shape' of the virus.\",\n        \"The body produces custom-fit antibodies to tag that specific virus.\",\n        \"Memory cells store the virus's 'blueprint' for future encounters.\"\n      ],\n      \"question\": \"Order the stages of the body's response to a brand-new virus.\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"memory cells\",\n        \"faster\"\n      ],\n      \"distractors\": [\n        \"barriers\",\n        \"macrophages\",\n        \"slower\"\n      ],\n      \"feedback\": \"Memory cells act like a 'wanted poster'—because the body already knows what the criminal looks like, it can skip the identification phase and go straight to the attack.\",\n      \"question\": \"Understanding why we usually only get certain diseases once.\",\n      \"template\": \"After you recover from a cold, your body keeps [BLANK] in reserve. These cells ensure that if the exact same virus enters your body a year later, your immune response will be [BLANK] than it was the first time.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine a 'security guard' cell in the lungs. It spends its day wandering around, 'swallowing' and digesting any dust, soot, or bacteria it encounters, regardless of what they are.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Macrophages are the generalists—they don't need a specific target; they just eat anything that isn't 'you.'\",\n          \"isCorrect\": true,\n          \"text\": \"A macrophage (a generalist 'eater' cell).\"\n        },\n        {\n          \"feedback\": \"B cells are specialists that produce antibodies; they don't typically wander around 'eating' random dust.\",\n          \"isCorrect\": false,\n          \"text\": \"A B cell (a specialized antibody creator).\"\n        },\n        {\n          \"feedback\": \"Memory cells stay quiet until they see a specific threat they've encountered before; they aren't general 'cleanup' crews.\",\n          \"isCorrect\": false,\n          \"text\": \"A memory cell (a long-term record keeper).\"\n        },\n        {\n          \"feedback\": \"Antibodies are proteins, not living 'cells' that can eat or digest things.\",\n          \"isCorrect\": false,\n          \"text\": \"An antibody (a targeting protein).\"\n        }\n      ],\n      \"question\": \"Which part of the immune system is this guard?\"\n    }\n  ]\n}",
      "outputTokens": 2370,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "The generated questions are of very high quality. They strictly adhere to the 'Understanding vs. Memorization' philosophy by using novel scenarios (hiking scrape, city security metaphors, patient study, lung guard) rather than repeating text examples. The formats are chosen appropriately for the content: matching for analogies, sorting for process order, and multiple choice for scenario application. The feedback provided for each question is excellent, explaining the reasoning behind correct and incorrect answers. No significant improvements are needed.",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios where someone observes immune responses in everyday life (repeat exposure, recovery time, vaccination effects) and must explain the underlying mechanism\n   - GOOD PATTERN: Situations requiring prediction of immune outcomes based on understanding defense layers\n   - BAD PATTERN: Asking to name cells, list defense mechanisms, or recall definitions without application context\n   - BAD PATTERN: Questions referencing specific metaphors or examples from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Antibodies directly killing pathogens (they MARK pathogens for destruction by other cells like macrophages)\n   - White blood cells being a single type (there are many types with different functions)\n   - Immune response being immediate (innate response is fast, adaptive takes days)\n   - Fever being harmful (it's often a beneficial immune response)\n\n3. FORMAT FIT: Multiple choice works well for \"which scenario shows X mechanism.\" Match columns work for connecting symptoms to immune responses. Sort order works for immune response sequence.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-biology-immune-system-quiz-1",
        "userInput": {
          "chapterTitle": "Body Systems",
          "courseTitle": "Human Biology",
          "explanationSteps": [
            {
              "text": "Your body has two defense systems working together. The first responds instantly to any threat. The second takes time but remembers enemies forever.",
              "title": "Two Lines of Defense"
            },
            {
              "text": "Physical barriers like skin and mucus stop most invaders. If they get through, patrolling cells called macrophages eat anything that looks foreign.",
              "title": "The First Responders"
            },
            {
              "text": "When threats persist, specialized cells called B cells create antibodies. These Y-shaped proteins stick to specific invaders, marking them for destruction.",
              "title": "The Targeting System"
            },
            {
              "text": "Some cells become memory cells after an infection. They remember the invader's shape for years, letting your body respond faster next time.",
              "title": "Remembering Enemies"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies",
          "lessonTitle": "How the Immune System Works"
        }
      }
    },
    {
      "duration": 13591.176958,
      "inputTokens": 1855,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine you are writing a letter. You use a word that doesn't exist in the dictionary, like \\\"glarb-flarb.\\\" Later, you write a sentence that uses real words but makes no sense, like \\\"The blue fast runs tomorrow.\\\"\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"The first error is just an unrecognized unit (lexical), while the second is about how units are structured (syntax).\",\n          \"isCorrect\": false,\n          \"text\": \"The first is a syntax error, and the second is a semantic error.\"\n        },\n        {\n          \"feedback\": \"Exactly! Lexical analysis checks for valid \\\"words\\\" (tokens), while syntax analysis checks if those words are arranged in a valid \\\"sentence\\\" structure.\",\n          \"isCorrect\": true,\n          \"text\": \"The first is a lexical error, and the second is a syntax error.\"\n        },\n        {\n          \"feedback\": \"Semantic errors are about logic (like adding a color to a day). The second error is about the grammar of the sentence itself.\",\n          \"isCorrect\": false,\n          \"text\": \"Both are semantic errors because they lack meaning.\"\n        },\n        {\n          \"feedback\": \"Lexical analysis only looks at individual pieces, not the structure of the whole sentence.\",\n          \"isCorrect\": false,\n          \"text\": \"Both are lexical errors because the \\\"words\\\" are the problem in both cases.\"\n        }\n      ],\n      \"question\": \"How would a compiler categorize these two errors?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A programmer writes the following line of code: \\n`total_price = quantity * \\\"expensive\\\"`\\nThe compiler successfully identifies 'total_price', '*', and '\\\"expensive\\\"' as valid pieces of the language. It also confirms the math equation is written in the correct order.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Lexical analysis already finished; it identified the individual pieces (tokens) correctly.\",\n          \"isCorrect\": false,\n          \"text\": \"Lexical Analysis\"\n        },\n        {\n          \"feedback\": \"Parsing checks the grammar (the order of pieces), which the compiler already confirmed was correct.\",\n          \"isCorrect\": false,\n          \"text\": \"Parsing (Syntax Analysis)\"\n        },\n        {\n          \"feedback\": \"Correct! This phase checks the logic and types. It realizes you can't perform math between a number and a word, even if the sentence structure is perfect.\",\n          \"isCorrect\": true,\n          \"text\": \"Semantic Analysis\"\n        },\n        {\n          \"feedback\": \"Code generation only happens after the logic and meaning of the code have been verified.\",\n          \"isCorrect\": false,\n          \"text\": \"Code Generation\"\n        }\n      ],\n      \"question\": \"Which phase will flag this specific error?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A word is misspelled or uses illegal characters.\",\n          \"right\": \"Lexical Analysis\"\n        },\n        {\n          \"left\": \"A closing parenthesis is missing at the end of a math problem.\",\n          \"right\": \"Parsing (Syntax Analysis)\"\n        },\n        {\n          \"left\": \"A variable is used before it has been given a value.\",\n          \"right\": \"Semantic Analysis\"\n        },\n        {\n          \"left\": \"The high-level logic is turned into 0s and 1s for the hardware.\",\n          \"right\": \"Code Generation\"\n        }\n      ],\n      \"question\": \"Match the coding mishap to the stage of the \\\"assembly line\\\" that would handle it.\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"The compiler starts with the smallest pieces (tokens), builds a structure (tree), checks the logic (semantics), and finally outputs the version the computer can run.\",\n      \"items\": [\n        \"Breaking code into individual tokens\",\n        \"Building a structural tree of the statements\",\n        \"Verifying that data types and logic are consistent\",\n        \"Translating the structure into machine instructions\"\n      ],\n      \"question\": \"Put these steps of the compilation process in the correct order.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Think of the compiler as a translator for a chef. The chef writes a recipe in a notebook (source code), and the translator needs to prepare it for a kitchen robot that only understands button-press sequences.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"The robot needs specific hardware commands, not just another list of words it can't read.\",\n          \"isCorrect\": false,\n          \"text\": \"A cleaned-up version of the original notebook.\"\n        },\n        {\n          \"feedback\": \"The tree is an internal tool for the compiler, not the final product for the robot.\",\n          \"isCorrect\": false,\n          \"text\": \"A visual diagram of how the recipe flows.\"\n        },\n        {\n          \"feedback\": \"Exactly. The final output is 'machine code'—instructions that talk directly to the hardware without needing more translation.\",\n          \"isCorrect\": true,\n          \"text\": \"A series of electrical-level instructions the robot executes directly.\"\n        },\n        {\n          \"feedback\": \"The compiler's job is to finish the translation, not leave it for another human to figure out.\",\n          \"isCorrect\": false,\n          \"text\": \"A simplified list of keywords for the chef to review.\"\n        }\n      ],\n      \"question\": \"What is the final result of the \\\"Code Generation\\\" stage?\"\n    }\n  ]\n}",
      "outputTokens": 1323,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "In Question 1, the example 'The blue fast runs tomorrow' is identified as a syntax error. While valid if 'fast' is strictly an adjective (creating a structural error in the noun phrase), it could be interpreted as a semantic error (nonsense) or valid syntax if 'fast' is treated as a noun. However, within the context of the options provided (it's the only option correctly identifying the first error as Lexical), it functions correctly as a distractor/answer pair for a beginner level.",
          "kind": "minorErrors",
          "score": 9.5
        },
        {
          "conclusion": "None",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios involving code errors where learners must identify which compilation phase would catch or miss them\n   - GOOD PATTERN: Situations requiring understanding of why phases must occur in a specific order\n   - BAD PATTERN: Asking to list phases, name outputs, or define terminology without application context\n   - BAD PATTERN: Questions about the \"assembly line\" metaphor or other explanation-specific content\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Lexical analysis and parsing being the same thing (lexical analysis produces tokens; parsing builds syntax trees from tokens)\n   - Compilers only producing machine code (many produce bytecode or intermediate representations)\n   - Optimization being optional or unimportant (it's crucial for performance)\n   - Semantic analysis happening before parsing (parsing must complete first)\n\n3. FORMAT FIT: Sort order works well for compiler pipeline stages. Match columns work for connecting error types to phases. Multiple choice for \"which phase catches this error.\"\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-cs-compilers-quiz-1",
        "userInput": {
          "chapterTitle": "Language Implementation",
          "courseTitle": "Programming Language Theory",
          "explanationSteps": [
            {
              "text": "A compiler reads your code in stages, like an assembly line. Each stage transforms the code into something closer to what the machine understands.",
              "title": "The Assembly Line"
            },
            {
              "text": "First, lexical analysis breaks your code into tokens - the smallest meaningful units. Keywords, variables, and operators each become distinct pieces.",
              "title": "Breaking into Tokens"
            },
            {
              "text": "The parser takes those tokens and builds a tree structure showing how statements relate. This catches syntax errors like missing parentheses.",
              "title": "Building Structure"
            },
            {
              "text": "Semantic analysis checks if your code makes logical sense. It catches errors like using a string where a number is required.",
              "title": "Checking Meaning"
            },
            {
              "text": "Finally, code generation translates the validated structure into machine instructions the processor can execute directly.",
              "title": "Generating Output"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation",
          "lessonTitle": "How Compilers Work"
        }
      }
    },
    {
      "duration": 18352.713917,
      "inputTokens": 1902,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"O Banco Central percebe que as famílias estão comprando muito mais do que as fábricas conseguem produzir, o que está gerando filas e aumentos constantes de preços nos supermercados.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Juros mais altos tornam o crédito (cartão, carnê, empréstimo) mais caro, o que naturalmente desencoraja o consumo imediato e ajuda a equilibrar os preços.\",\n          \"isCorrect\": true,\n          \"text\": \"Subir a taxa básica de juros para encarecer o crédito.\"\n        },\n        {\n          \"feedback\": \"Isso teria o efeito oposto: facilitaria ainda mais as compras, aumentando a demanda e, consequentemente, a inflação.\",\n          \"isCorrect\": false,\n          \"text\": \"Reduzir os juros para facilitar o parcelamento.\"\n        },\n        {\n          \"feedback\": \"Injetar mais dinheiro através da compra de títulos aumentaria o poder de compra, piorando o problema do excesso de demanda.\",\n          \"isCorrect\": false,\n          \"text\": \"Comprar títulos públicos dos bancos para injetar dinheiro no sistema.\"\n        },\n        {\n          \"feedback\": \"Embora a produção ajude, a política monetária atua na demanda e na circulação de dinheiro, não diretamente na gestão das prateleiras das lojas.\",\n          \"isCorrect\": false,\n          \"text\": \"Pedir que as fábricas funcionem em turnos extras.\"\n        }\n      ],\n      \"question\": \"Qual ação esfriaria essa economia?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"dinheiro\",\n        \"preços\"\n      ],\n      \"distractors\": [\n        \"impostos\",\n        \"juros\",\n        \"desemprego\"\n      ],\n      \"feedback\": \"A inflação acontece quando há um descompasso: muito dinheiro circulando para a mesma quantidade de produtos disponíveis. É a lei da oferta e da procura aplicada a toda a economia.\",\n      \"question\": \"Sobre a relação entre circulação de moeda e inflação:\",\n      \"template\": \"Quando a quantidade de [BLANK] circulando na economia cresce muito além da capacidade de produção de bens e serviços, o resultado mais comum é o aumento dos [BLANK].\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine que o Banco Central reduziu drasticamente a taxa de juros hoje. No entanto, um dono de uma pequena confecção decide esperar seis meses para comprar novas máquinas e contratar mais costureiras.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correto. Mudanças na economia não são instantâneas; empresas e pessoas precisam de tempo para recalcular custos e tomar decisões de longo prazo.\",\n          \"isCorrect\": true,\n          \"text\": \"Decisões de investimento levam tempo para serem planejadas e executadas.\"\n        },\n        {\n          \"feedback\": \"Os juros baixos já estão valendo, mas a reação humana e empresarial aos novos custos leva tempo para se materializar.\",\n          \"isCorrect\": false,\n          \"text\": \"A redução só passa a valer para as empresas após o primeiro semestre.\"\n        },\n        {\n          \"feedback\": \"Na verdade, juros baixos tornam as máquinas mais baratas de financiar; a demora é puramente um efeito de atraso na transmissão da política.\",\n          \"isCorrect\": false,\n          \"text\": \"Máquinas ficam mais caras quando os juros caem.\"\n        },\n        {\n          \"feedback\": \"Embora a confiança importe, o conceito central aqui é que a política monetária tem um efeito defasado (atrasado) no mundo real.\",\n          \"isCorrect\": false,\n          \"text\": \"Ele provavelmente não confia no Banco Central.\"\n        }\n      ],\n      \"question\": \"Por que a economia não reage na mesma hora?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"O Banco Central vende títulos públicos aos bancos.\",\n          \"right\": \"Retira-se dinheiro de circulação para conter a inflação.\"\n        },\n        {\n          \"left\": \"A taxa de juros cai para o menor nível histórico.\",\n          \"right\": \"Estímulo para as pessoas financiarem casas e carros.\"\n        },\n        {\n          \"left\": \"O Banco Central compra títulos que estavam com investidores.\",\n          \"right\": \"Injeção de novos recursos na economia para evitar uma crise.\"\n        },\n        {\n          \"left\": \"Os juros sobem de forma agressiva.\",\n          \"right\": \"As empresas adiam planos de expansão devido ao custo do crédito.\"\n        }\n      ],\n      \"question\": \"Associe as ações do Banco Central com os efeitos esperados na economia:\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Este é o fluxo clássico: o Banco Central altera o custo do dinheiro, o que muda o comportamento de consumo e, por fim, impacta a velocidade com que os preços sobem.\",\n      \"items\": [\n        \"O Banco Central identifica que a inflação está acima da meta.\",\n        \"A taxa básica de juros é aumentada.\",\n        \"Empréstimos e financiamentos ficam mais caros para o cidadão.\",\n        \"As pessoas compram menos bens e contratam menos serviços.\",\n        \"A pressão sobre os preços diminui, e a inflação desacelera.\"\n      ],\n      \"question\": \"Qual é a sequência lógica de uma política para combater a inflação?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Um país está passando por uma recessão severa: o desemprego está alto e as lojas estão vazias. O Banco Central decide agir através do 'Mercado Aberto' (Open Market).\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Quando o BC compra títulos, ele entrega dinheiro aos bancos/investidores em troca desses papéis, aumentando a liquidez e facilitando o crédito.\",\n          \"isCorrect\": true,\n          \"text\": \"Comprar títulos públicos para colocar mais dinheiro no mercado.\"\n        },\n        {\n          \"feedback\": \"Vender títulos retiraria dinheiro das mãos das pessoas para o cofre do BC, o que agravaria a recessão.\",\n          \"isCorrect\": false,\n          \"text\": \"Vender títulos para tirar o dinheiro de circulação.\"\n        },\n        {\n          \"feedback\": \"Aumentar impostos é política fiscal (governo), não política monetária (Banco Central). Além disso, pioraria a recessão.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumentar impostos sobre o consumo.\"\n        },\n        {\n          \"feedback\": \"Isso dificultaria o acesso ao dinheiro, exatamente o oposto do que uma economia em recessão precisa.\",\n          \"isCorrect\": false,\n          \"text\": \"Exigir que os bancos guardem mais dinheiro e emprestem menos.\"\n        }\n      ],\n      \"question\": \"Qual manobra com títulos públicos ajudaria a economia?\"\n    }\n  ]\n}",
      "outputTokens": 2178,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "The response perfectly follows all instructions. The questions cover all the provided explanation steps (Monetary Equilibrium, Interest Rates, Lag Effect, Market Operations) using appropriate formats. It successfully translates the abstract concepts into novel scenarios (e.g., the factory/supermarket scenario for inflation, the clothing business owner for lag effects). The language is strictly Portuguese as requested, and the JSON is valid. The distinction between understanding and memorization is well-maintained.",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nLANGUAGE REQUIREMENT: Questions, options, and feedback must be in Portuguese.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios involving economic decisions (borrowing, spending, saving) where learners must predict effects of interest rate changes\n   - GOOD PATTERN: Situations requiring understanding of transmission delays between policy and economic outcomes\n   - BAD PATTERN: Asking to list monetary tools or define economic terms without application context\n   - BAD PATTERN: Questions referencing specific examples from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Interest rate changes having immediate effects (transmission mechanisms have significant time lags of 6-18 months)\n   - Central banks directly controlling inflation (they influence it through indirect mechanisms)\n   - Lower interest rates always being good (they can fuel inflation and asset bubbles)\n   - Monetary policy being the only tool for economic stability (fiscal policy also plays a role)\n\n3. FORMAT FIT: Multiple choice works for cause-effect scenarios. Match columns work for connecting policy actions to economic effects. Sort order can work for transmission mechanism sequences.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "pt-economics-monetary-policy-quiz-1",
        "userInput": {
          "chapterTitle": "Macroeconomia",
          "courseTitle": "Economia para Iniciantes",
          "explanationSteps": [
            {
              "text": "O banco central controla a quantidade de dinheiro circulando na economia. Quando ha dinheiro demais, os precos sobem. Quando ha pouco, a economia desacelera.",
              "title": "Equilibrio Monetario"
            },
            {
              "text": "A taxa basica de juros e a principal ferramenta. Juros altos tornam emprestimos caros, reduzindo gastos. Juros baixos estimulam emprestimos e consumo.",
              "title": "A Alavanca dos Juros"
            },
            {
              "text": "Mudancas nos juros levam meses para afetar a economia real. Empresas e consumidores ajustam seus planos gradualmente, nao instantaneamente.",
              "title": "Efeito com Atraso"
            },
            {
              "text": "Bancos centrais tambem compram e vendem titulos do governo. Comprando titulos, injetam dinheiro na economia. Vendendo, retiram dinheiro de circulacao.",
              "title": "Operacoes de Mercado"
            }
          ],
          "language": "pt",
          "lessonDescription": "Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria",
          "lessonTitle": "Como Funciona a Politica Monetaria"
        }
      }
    },
    {
      "duration": 19284.521957999998,
      "inputTokens": 1872,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagina que tienes dos archivos: una nota de texto que dice \\\"Hola\\\" y una película en 4K que pesa 50GB. Ambos se procesan con el mismo algoritmo hash (como SHA-256).\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! No importa si el archivo es un átomo de datos o una galaxia de información, el hash resultante siempre tendrá la misma cantidad de caracteres.\",\n          \"isCorrect\": true,\n          \"text\": \"Ambos hashes tendrán exactamente la misma longitud.\"\n        },\n        {\n          \"feedback\": \"Aunque parezca lógico, los hashes no funcionan como carpetas comprimidas (ZIP). Su tamaño de salida es fijo por diseño matemático.\",\n          \"isCorrect\": false,\n          \"text\": \"El hash de la película será mucho más largo que el de la nota.\"\n        },\n        {\n          \"feedback\": \"El tamaño del hash está determinado por el algoritmo elegido, no por el contenido del archivo original.\",\n          \"isCorrect\": false,\n          \"text\": \"El tamaño del hash dependerá de cuántas letras tenga la nota.\"\n        },\n        {\n          \"feedback\": \"La complejidad del contenido no afecta la longitud del resultado final; un video complejo y un texto simple producen salidas del mismo tamaño.\",\n          \"isCorrect\": false,\n          \"text\": \"El hash del video será más complejo y por lo tanto más extenso.\"\n        }\n      ],\n      \"question\": \"¿Qué pasará con el tamaño de los hashes?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Estás revisando un contrato digital de 100 páginas. Al final, alguien decide cambiar una sola letra minúscula por una mayúscula en la página 42 y vuelve a generar el hash del documento.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. Este es el 'efecto avalancha': un cambio insignificante en la entrada provoca un cambio drástico e irreconocible en la salida.\",\n          \"isCorrect\": true,\n          \"text\": \"El nuevo hash será totalmente distinto al original.\"\n        },\n        {\n          \"feedback\": \"No es así. En criptografía, los hashes son extremadamente sensibles; no guardan ninguna similitud visual si el origen cambió.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo cambiarán los últimos caracteres del hash.\"\n        },\n        {\n          \"feedback\": \"Los hashes no funcionan por 'proximidad'. Un cambio pequeño no genera un hash parecido.\",\n          \"isCorrect\": false,\n          \"text\": \"El hash será casi igual, facilitando ver dónde estuvo el cambio.\"\n        },\n        {\n          \"feedback\": \"El contenido del hash cambia, pero su estructura y longitud se mantienen idénticas.\",\n          \"isCorrect\": false,\n          \"text\": \"El hash se volverá más corto debido al cambio.\"\n        }\n      ],\n      \"question\": \"¿Cómo será el nuevo hash comparado con el anterior?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Un servidor de una red social sufre un ataque y los hackers logran descargar la tabla donde se guardan las contraseñas. Sin embargo, la empresa solo guardaba los 'hashes' de las contraseñas, no las palabras reales.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"¡Así es! Al ser funciones de una sola vía, no existe una 'fórmula' para deshacer el hash y obtener la palabra original. Los hackers tendrían que adivinar.\",\n          \"isCorrect\": true,\n          \"text\": \"No pueden reconstruir las contraseñas originales a partir de los hashes.\"\n        },\n        {\n          \"feedback\": \"El robo es grave, pero el hash protege el secreto. Los hackers tienen el resultado, pero no la 'llave' para entrar.\",\n          \"isCorrect\": false,\n          \"text\": \"Los hashes se convierten automáticamente en las nuevas contraseñas.\"\n        },\n        {\n          \"feedback\": \"Los hashes no son archivos comprimidos; no se pueden 'descomprimir' para ver qué había dentro.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo necesitan un programa para descomprimir el hash y leer la clave.\"\n        },\n        {\n          \"feedback\": \"El hash es una transformación matemática, no un código secreto que se rompe con un diccionario de traducción.\",\n          \"isCorrect\": false,\n          \"text\": \"Los hashes revelan la longitud de la contraseña original, facilitando el ataque.\"\n        }\n      ],\n      \"question\": \"¿Por qué esto es una buena noticia para los usuarios?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"colisión\",\n        \"imposible\"\n      ],\n      \"distractors\": [\n        \"coincidencia\",\n        \"fácil\",\n        \"error\",\n        \"probable\"\n      ],\n      \"feedback\": \"La resistencia a colisiones asegura que cada entrada tenga su propia 'huella digital'. Si fuera fácil encontrar dos archivos con el mismo hash, podrías camuflar un virus como si fuera un documento legítimo.\",\n      \"question\": \"Imagina que descargas un antivirus y su hash coincide exactamente con el que publica el fabricante. Esto te da seguridad.\",\n      \"template\": \"Si un atacante lograra crear un virus que tuviera exactamente el mismo hash que el antivirus real, habría encontrado una [BLANK]. En un buen algoritmo, esto debe ser prácticamente [BLANK] de lograr.\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Guardar claves en una base de datos sin que nadie pueda leerlas.\",\n          \"right\": \"Camino de ida (Irreversibilidad)\"\n        },\n        {\n          \"left\": \"Asegurar que un instalador de software no fue modificado por un virus.\",\n          \"right\": \"Sensibilidad extrema (Efecto avalancha)\"\n        },\n        {\n          \"left\": \"Identificar archivos de diferentes tamaños con una etiqueta estándar.\",\n          \"right\": \"Compresión a longitud fija\"\n        },\n        {\n          \"left\": \"Garantizar que dos documentos distintos no tengan la misma identidad digital.\",\n          \"right\": \"Resistencia a colisiones\"\n        }\n      ],\n      \"question\": \"Empareja cada situación del mundo real con la propiedad de las funciones hash que la hace posible.\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Este proceso permite que el usuario confíe en que el archivo que tiene en su computadora es exactamente el mismo que el desarrollador creó, sin alteraciones en el camino.\",\n      \"items\": [\n        \"El desarrollador genera el hash del archivo original.\",\n        \"El desarrollador publica el hash en su sitio web oficial.\",\n        \"El usuario descarga el archivo en su propia computadora.\",\n        \"El usuario calcula el hash del archivo que acaba de descargar.\",\n        \"El usuario compara su resultado con el hash publicado en la web.\"\n      ],\n      \"question\": \"¿Cuál es el orden lógico para verificar que un archivo descargado de internet no ha sido alterado?\"\n    }\n  ]\n}",
      "outputTokens": 1921,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nLANGUAGE REQUIREMENT: Questions, options, and feedback must be in Spanish.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Security scenarios where learners must apply hash properties (irreversibility, avalanche effect, collision resistance) to real situations\n   - GOOD PATTERN: Situations requiring understanding of why certain hash behaviors matter for security\n   - BAD PATTERN: Asking to list hash properties or define terminology without application context\n   - BAD PATTERN: Questions about specific terms like \"avalanche effect\" without practical application\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Hashing being the same as encryption (hashing is ONE-WAY and irreversible; encryption is designed to be reversible with a key)\n   - Hash functions producing unique outputs (collisions are mathematically possible, just extremely unlikely for good functions)\n   - Longer hashes always being more secure (algorithm quality matters more than length)\n   - MD5 or SHA-1 being secure for cryptographic purposes (both have known vulnerabilities)\n\n3. FORMAT FIT: Multiple choice works for security scenarios. Match columns work for connecting hash properties to their practical implications.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "es-crypto-hash-functions-quiz-1",
        "userInput": {
          "chapterTitle": "Fundamentos de Criptografia",
          "courseTitle": "Seguridad Informatica",
          "explanationSteps": [
            {
              "text": "Una funcion hash convierte cualquier dato en una cadena de longitud fija. Un archivo de 1KB y uno de 1GB producen hashes del mismo tamano.",
              "title": "Compresion de Datos"
            },
            {
              "text": "Cambiar un solo bit del archivo original cambia completamente el hash. Esta propiedad se llama efecto avalancha y es crucial para detectar alteraciones.",
              "title": "Sensibilidad Extrema"
            },
            {
              "text": "No puedes recuperar el archivo original desde su hash - el proceso es irreversible. Por eso se usan para almacenar contrasenas de forma segura.",
              "title": "Camino de Ida"
            },
            {
              "text": "Encontrar dos archivos diferentes con el mismo hash deberia ser practicamente imposible. Esta resistencia a colisiones es lo que hace a los hashes confiables.",
              "title": "Unicidad Practica"
            }
          ],
          "language": "es",
          "lessonDescription": "Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital",
          "lessonTitle": "Funciones Hash Criptograficas"
        }
      }
    },
    {
      "duration": 20412.334875,
      "inputTokens": 1837,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A specialized robot is learning to sort recycling. In its first run, it consistently mistakes plastic bottles for glass jars. To improve, the robot needs to change its internal \\\"understanding\\\" of what makes a bottle look like plastic versus glass.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. Training is essentially the process of fine-tuning these internal 'volume knobs' so the right inputs lead to the right outputs.\",\n          \"isCorrect\": true,\n          \"text\": \"The strength of the internal connections between its visual sensors and its decision-making units.\"\n        },\n        {\n          \"feedback\": \"While sensors matter, 'learning' in a neural network happens in how the data is processed, not by physically swapping the hardware.\",\n          \"isCorrect\": false,\n          \"text\": \"Replacing its cameras with higher-resolution sensors.\"\n        },\n        {\n          \"feedback\": \"Simply seeing more items isn't enough; the robot must have a mechanism to actually adjust its internal logic based on those items.\",\n          \"isCorrect\": false,\n          \"text\": \"The physical speed at which it moves its robotic arm to the bins.\"\n        },\n        {\n          \"feedback\": \"Learning isn't about clearing memory; it's about refining the existing connections so the mistakes don't happen again.\",\n          \"isCorrect\": false,\n          \"text\": \"Deleting all previous sorting memories to start with a blank slate.\"\n        }\n      ],\n      \"question\": \"What is the robot actually 'tuning' to learn?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A weather-prediction system guesses that tomorrow will be exactly 72 degrees. However, tomorrow arrives and the actual temperature is 80 degrees.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"The error (or loss) is the 'gap' between the guess and the truth. Without this number, the system has no way to know how much it needs to change.\",\n          \"isCorrect\": true,\n          \"text\": \"The difference of 8 degrees represents the 'error' that will guide its next update.\"\n        },\n        {\n          \"feedback\": \"80 degrees is the 'ground truth,' but the system needs to compare it to its own guess to learn.\",\n          \"isCorrect\": false,\n          \"text\": \"The 80-degree reading is its new starting point for all future guesses.\"\n        },\n        {\n          \"feedback\": \"If it ignores the guess, it can't figure out why it was wrong in the first place.\",\n          \"isCorrect\": false,\n          \"text\": \"The system should discard its 72-degree guess and only memorize the 80-degree result.\"\n        },\n        {\n          \"feedback\": \"The system doesn't know the guess was 'high' or 'low' until it calculates the difference; '8 degrees' is the key metric.\",\n          \"isCorrect\": false,\n          \"text\": \"The system averages the two numbers to get 76 degrees for its next prediction.\"\n        }\n      ],\n      \"question\": \"Why is the 8-degree difference important?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Watching a student take a practice exam to see their current score.\",\n          \"right\": \"Measuring the 'Error' or 'Loss'\"\n        },\n        {\n          \"left\": \"A teacher looking at a missed question and figuring out which specific concept the student misunderstood.\",\n          \"right\": \"Assigning 'Blame' to specific connections\"\n        },\n        {\n          \"left\": \"A student studying just the specific chapter they failed for 20 minutes.\",\n          \"right\": \"Making a small adjustment to reduce error\"\n        },\n        {\n          \"left\": \"The student actually sitting down and answering the exam questions.\",\n          \"right\": \"Performing a 'Forward Pass'\"\n        }\n      ],\n      \"question\": \"Match these classroom moments to the steps of how a network learns.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine you are trying to find the lowest point in a dark, foggy valley. You can't see the bottom, but you can feel the slope of the ground beneath your feet.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. In neural networks, if we change the connections too drastically (taking a giant leap), we might skip over the 'perfect' setting and end up making the error worse.\",\n          \"isCorrect\": true,\n          \"text\": \"To avoid overshooting the lowest point and ending up on another hill.\"\n        },\n        {\n          \"feedback\": \"Small steps actually take more time, but they are safer and more accurate.\",\n          \"isCorrect\": false,\n          \"text\": \"Because small steps are the fastest way to reach the destination.\"\n        },\n        {\n          \"feedback\": \"You actually want to change the slope! The goal is to reach the flat bottom where the slope is zero.\",\n          \"isCorrect\": false,\n          \"text\": \"To ensure the slope of the ground stays as steep as possible.\"\n        },\n        {\n          \"feedback\": \"While it uses less energy, the primary reason in machine learning is about accuracy, not 'computational battery life.'\",\n          \"isCorrect\": false,\n          \"text\": \"Because the system doesn't have enough 'energy' to make large changes.\"\n        }\n      ],\n      \"question\": \"Why take small steps instead of one giant leap?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"First, the network acts (Forward Pass), then we see how it did (Measure Error), then we figure out what caused the error (Assign Blame), and finally, we tweak the settings (Adjust Connections).\",\n      \"items\": [\n        \"The network makes a prediction based on input data.\",\n        \"The system compares the prediction to the actual correct answer.\",\n        \"The error is sent backward to see which parts of the network caused the miss.\",\n        \"The internal connection strengths are nudged slightly to improve accuracy.\"\n      ],\n      \"question\": \"Put the steps of a single training cycle in the correct order:\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"blame\",\n        \"weight\"\n      ],\n      \"distractors\": [\n        \"speed\",\n        \"randomness\",\n        \"success\",\n        \"volume\"\n      ],\n      \"feedback\": \"To fix a mistake, you must first identify the cause (assign blame) and then modify the specific connection (the weight) that contributed to it.\",\n      \"question\": \"Understanding how individual parts of a network contribute to a total mistake.\",\n      \"template\": \"When a network makes a bad prediction, it uses a backward flow of information to assign [BLANK] to specific internal connections. Once the 'culprits' are identified, the network changes the [BLANK] (strength) of those connections to do better next time.\"\n    }\n  ]\n}",
      "outputTokens": 2025,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "Two issues were identified:\n1. Question 3 (matchColumns) is missing the `feedback` field entirely. The instructions explicitly require that 'Feedback explains reasoning', especially for complex formats like matching.\n2. Question 6 tests the specific metaphor \"blame\" (asking to fill in the blank for 'assign [BLANK]'). The explanation text provided to the AI uses the header '3. Assigning Blame'. The instructions explicitly state: 'Never test recall of specific words, metaphors, or examples from the explanation steps'. While 'blame assignment' is a common pedagogical term, testing this specific word violates the non-negotiable negative constraints against testing words from the provided text.",
          "kind": "minorErrors",
          "score": 8
        },
        {
          "conclusion": "Add a detailed feedback string to Question 3 explaining the correct pairings (e.g., clarifying the distinction between the 'exam' as the forward pass and 'score' as the error). Modify Question 6 to test the concept of calculating contribution or gradients without relying on the specific 'blame' metaphor found in the source text headers.",
          "kind": "potentialImprovements",
          "score": 9
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Training scenarios where learners must diagnose what's happening (overfitting, underfitting, vanishing gradients) based on observed behavior\n   - GOOD PATTERN: Situations requiring understanding of why the forward-backward process produces learning\n   - BAD PATTERN: Asking for formulas, definitions, or terminology without application context\n   - BAD PATTERN: Questions about specific metaphors like \"blame assignment\" from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Gradient descent being random trial and error (it follows the mathematical gradient direction)\n   - Neural networks understanding concepts like humans (they learn statistical patterns)\n   - More layers always being better (can cause vanishing gradients and overfitting)\n   - Training stopping when error reaches zero (this indicates overfitting)\n\n3. FORMAT FIT: Multiple choice works for training scenarios. Sort order can work for the forward-backward pass sequence. Fill blank can work for the gradient flow process.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-ml-backpropagation-quiz-1",
        "userInput": {
          "chapterTitle": "Neural Network Training",
          "courseTitle": "Machine Learning Fundamentals",
          "explanationSteps": [
            {
              "text": "Training a neural network means adjusting connection strengths so outputs match desired results. The question is: which connections need adjusting and by how much?",
              "title": "The Adjustment Problem"
            },
            {
              "text": "First, data flows forward through the network, producing a prediction. The difference between prediction and reality is measured as error.",
              "title": "Measuring Mistakes"
            },
            {
              "text": "Error information then flows backward through the network. Each connection learns how much it contributed to the mistake using calculus.",
              "title": "Assigning Blame"
            },
            {
              "text": "Connections that contributed more to errors get larger adjustments. The network gradually improves by making small changes in the direction that reduces error.",
              "title": "Small Steps Downhill"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates",
          "lessonTitle": "How Neural Networks Learn"
        }
      }
    },
    {
      "duration": 21455.993375,
      "inputTokens": 1854,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine a planet that is identical to Earth, but its core has completely cooled down and is no longer producing heat.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correct! Without heat from the core to circulate the mantle, there would be no 'engine' to push or pull the plates.\",\n          \"isCorrect\": true,\n          \"text\": \"The surface plates would stop moving entirely.\"\n        },\n        {\n          \"feedback\": \"Plate movement is driven by heat from below, not by the speed of the planet's spin.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates would move much faster due to less friction.\"\n        },\n        {\n          \"feedback\": \"Gravity keeps the plates on the surface; it's the heat-driven circulation of the mantle that causes them to move and collide.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates would be pulled into the center by gravity.\"\n        },\n        {\n          \"feedback\": \"Solar energy affects the atmosphere and weather, but it doesn't have the power to move the massive rocky plates of the crust.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates would only move when the sun is shining.\"\n        }\n      ],\n      \"question\": \"What would happen to the tectonic plates?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A research team is drilling into the seafloor. They notice that the rock samples get progressively older the further they move away from a central underwater mountain ridge.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"If it were a collision, we would see mountains being pushed up and crust being destroyed, not a sequence of ages spreading out.\",\n          \"isCorrect\": false,\n          \"text\": \"Two plates are crashing into each other.\"\n        },\n        {\n          \"feedback\": \"Correct! As plates pull apart, new magma rises and cools to form new rock. The older rock is pushed aside, like a conveyor belt.\",\n          \"isCorrect\": true,\n          \"text\": \"New crust is being created as plates pull apart.\"\n        },\n        {\n          \"feedback\": \"If rock were being destroyed there, we wouldn't find a continuous sequence of older rocks spreading outward.\",\n          \"isCorrect\": false,\n          \"text\": \"The seafloor is being swallowed into the mantle at the ridge.\"\n        },\n        {\n          \"feedback\": \"The age pattern suggests a clear point of origin (the ridge), which wouldn't happen if the plates weren't moving.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates have been frozen in place for billions of years.\"\n        }\n      ],\n      \"question\": \"What does this age pattern tell us?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A deep trench forming on the ocean floor.\",\n          \"right\": \"One plate is diving beneath another.\"\n        },\n        {\n          \"left\": \"A massive mountain range with no active volcanoes.\",\n          \"right\": \"Two thick plates are crashing head-on.\"\n        },\n        {\n          \"left\": \"A long rift valley where the ground is cracking open.\",\n          \"right\": \"Two plates are pulling away from each other.\"\n        }\n      ],\n      \"question\": \"Match the geological feature to the plate movement that created it.\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Heat from the core is the starting point. It causes the mantle rock to rise, spread out (dragging the plate), and then cool and sink, creating a continuous loop of motion.\",\n      \"items\": [\n        \"Heat from the core warms up the deep mantle rock.\",\n        \"The warmed rock rises slowly toward the Earth's surface.\",\n        \"The rock spreads out horizontally underneath the plates.\",\n        \"Friction from the moving mantle rock drags the plates along.\",\n        \"The rock cools down and sinks back toward the core.\"\n      ],\n      \"question\": \"How does heat from the Earth's interior actually move a continent? Put these steps in the correct order.\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"solid\",\n        \"flow\",\n        \"rigid\"\n      ],\n      \"distractors\": [\n        \"liquid\",\n        \"melt\",\n        \"soft\"\n      ],\n      \"feedback\": \"It's a common misconception that the mantle is liquid. It is actually solid rock, but because it is so hot, it can flow very slowly (ductile), allowing the hard, rigid plates on top to move.\",\n      \"question\": \"Explain why the Earth's surface can move even though it sits on rock.\",\n      \"template\": \"The Earth's mantle is actually [BLANK] rock, but the extreme heat allows it to [BLANK] very slowly over millions of years. This movement acts like a conveyor belt for the [BLANK] plates sitting on top.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Two tectonic plates are moving toward each other. Plate A is thin and very dense (heavy), while Plate B is thick and less dense (light).\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correct! The denser (heavier) plate will always be forced downward into the mantle when it hits a lighter plate.\",\n          \"isCorrect\": true,\n          \"text\": \"Plate A will dive underneath Plate B.\"\n        },\n        {\n          \"feedback\": \"When a dense plate hits a light plate, the dense one sinks; they only crumble upward if they are both light and thick.\",\n          \"isCorrect\": false,\n          \"text\": \"Both plates will crumple upward to form high mountains.\"\n        },\n        {\n          \"feedback\": \"The plates are moving toward each other, so they must interact; one will eventually give way.\",\n          \"isCorrect\": false,\n          \"text\": \"They will bounce off each other and change direction.\"\n        },\n        {\n          \"feedback\": \"Thickness doesn't determine which sinks; density (weight for its size) is the deciding factor.\",\n          \"isCorrect\": false,\n          \"text\": \"Plate B will dive underneath Plate A because it is thicker.\"\n        }\n      ],\n      \"question\": \"What is the most likely result of this collision?\"\n    }\n  ]\n}",
      "outputTokens": 2549,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "None",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Geographic scenarios where learners must explain geological features or patterns based on plate interactions\n   - GOOD PATTERN: Situations requiring prediction of geological activity based on understanding boundary types\n   - BAD PATTERN: Asking to name boundary types or list geological features without application context\n   - BAD PATTERN: Questions referencing the \"cracked shell\" or \"engine below\" metaphors from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - The mantle being liquid or molten (it is SOLID rock that flows very slowly over geological time due to heat and pressure)\n   - Plates floating on liquid (they move on the slowly-flowing solid mantle)\n   - Earthquakes only happening at plate boundaries (intraplate earthquakes exist)\n   - Continental drift being the same as plate tectonics (continental drift was the early theory; plate tectonics is the modern mechanism)\n\n3. FORMAT FIT: Multiple choice works well for geological scenarios. Match columns work for connecting geological features to boundary types. Sort order could work for mountain-building sequences.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-geology-plate-tectonics-quiz-1",
        "userInput": {
          "chapterTitle": "Earth's Structure",
          "courseTitle": "Earth Science",
          "explanationSteps": [
            {
              "text": "Earth's outer shell is cracked into massive pieces called plates. These plates sit on the mantle - solid rock so hot it flows like thick honey over millions of years.",
              "title": "A Cracked Shell"
            },
            {
              "text": "Heat from Earth's core creates circulation in the mantle. This slow churning drags the plates along, moving them centimeters per year.",
              "title": "The Engine Below"
            },
            {
              "text": "Where plates pull apart, magma rises to fill the gap, creating new crust. Mid-ocean ridges are underwater mountain chains formed this way.",
              "title": "Spreading Apart"
            },
            {
              "text": "Where plates collide, one may dive under the other, triggering earthquakes and volcanoes. Mountain ranges like the Himalayas form when neither plate sinks.",
              "title": "Collision Zones"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create",
          "lessonTitle": "Plate Tectonics"
        }
      }
    },
    {
      "duration": 15743.913375000002,
      "inputTokens": 1899,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine que você tem um manual de instruções secreto guardado dentro de uma caixa que só abre se você separar as duas metades dela. Para que a célula consiga começar a copiar sua informação genética, qual é o primeiro passo físico necessário?\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exato. As duas fitas precisam ser separadas (como um zíper abrindo) para que as máquinas de cópia consigam ler as bases que estavam escondidas no interior da hélice.\",\n          \"isCorrect\": true,\n          \"text\": \"Desenrolar e separar as duas fitas originais.\"\n        },\n        {\n          \"feedback\": \"Isso na verdade acontece depois. Antes de construir algo novo, a célula precisa acessar a informação original que está 'trancada' na estrutura de fita dupla.\",\n          \"isCorrect\": false,\n          \"text\": \"Quebrar o DNA em pequenos pedaços aleatórios.\"\n        },\n        {\n          \"feedback\": \"Embora as enzimas façam o trabalho, o primeiro passo não é criar mais delas, mas sim expor o molde que já existe.\",\n          \"isCorrect\": false,\n          \"text\": \"Produzir mais proteínas para envolver o DNA.\"\n        },\n        {\n          \"feedback\": \"A célula não destrói o original; ela o usa como guia. Para isso, ela precisa primeiro abrir a estrutura.\",\n          \"isCorrect\": false,\n          \"text\": \"Dissolver a fita antiga para dar lugar à nova.\"\n        }\n      ],\n      \"question\": \"Qual é o ponto de partida da replicação?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine uma máquina de pintura de faixas em estradas que só consegue pintar enquanto se move para a frente (do sul para o norte). Se a estrada está sendo construída em duas direções ao mesmo tempo, como ela resolve o problema do lado que cresce para o sul?\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Correto! Como a enzima de construção (DNA polimerase) só trabalha em um sentido, a fita que corre na direção 'oposta' precisa ser feita em pequenos segmentos que depois são unidos.\",\n          \"isCorrect\": true,\n          \"text\": \"Pintando pequenos trechos de cada vez e voltando para começar o próximo.\"\n        },\n        {\n          \"feedback\": \"As enzimas têm uma limitação física real: elas só conseguem adicionar novas peças em uma extremidade específica da fita em crescimento.\",\n          \"isCorrect\": false,\n          \"text\": \"Simplesmente mudando de direção e pintando para trás.\"\n        },\n        {\n          \"feedback\": \"Isso deixaria a célula com apenas metade da informação necessária para se dividir. Ambas as fitas precisam ser copiadas integralmente.\",\n          \"isCorrect\": false,\n          \"text\": \"Esperando a estrada terminar para pintar tudo de uma vez.\"\n        },\n        {\n          \"feedback\": \"Na verdade, a célula usa a mesma lógica de construção, mas precisa se adaptar à direção fixa da enzima.\",\n          \"isCorrect\": false,\n          \"text\": \"Usando uma tinta diferente que seca mais rápido.\"\n        }\n      ],\n      \"question\": \"Por que uma das fitas é feita em pedaços?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Separar as fitas originais\",\n          \"right\": \"Permitir o acesso à informação interna\"\n        },\n        {\n          \"left\": \"DNA Polimerase adicionando bases\",\n          \"right\": \"Construção da nova fita complementar\"\n        },\n        {\n          \"left\": \"Revisão e correção de erros\",\n          \"right\": \"Garantia da fidelidade genética\"\n        },\n        {\n          \"left\": \"Uso da fita antiga como guia\",\n          \"right\": \"Replicação semiconservativa (molde)\"\n        }\n      ],\n      \"question\": \"Associe cada etapa do processo de replicação ao seu objetivo fundamental:\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Primeiro, o acesso é criado (abertura), depois a informação é lida para criar o novo material (construção). Como a construção tem direções opostas, surgem os fragmentos, e por fim, tudo é conferido para evitar mutações.\",\n      \"items\": [\n        \"As duas fitas da hélice são separadas.\",\n        \"A fita original é usada como molde para a nova.\",\n        \"Pedaços de DNA são unidos na fita descontínua.\",\n        \"Enzimas revisoras corrigem possíveis falhas na sequência.\"\n      ],\n      \"question\": \"Coloque as etapas da replicação na ordem lógica em que ocorrem:\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"polimerase\",\n        \"erros\"\n      ],\n      \"distractors\": [\n        \"destruição\",\n        \"velocidade\",\n        \"energia\"\n      ],\n      \"feedback\": \"A DNA polimerase é a construtora principal, mas ela não é perfeita. Por isso, as enzimas de revisão são cruciais para manter a 'receita' da vida sem erros perigosos.\",\n      \"question\": \"Sobre a precisão da cópia do DNA:\",\n      \"template\": \"Durante a replicação, a enzima chamada DNA [BLANK] adiciona novas bases à fita, mas o processo só é confiável porque existem mecanismos que detectam e corrigem [BLANK] imediatamente.\"\n    }\n  ]\n}",
      "outputTokens": 1868,
      "steps": [
        {
          "conclusion": "None",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "The user explicitly requested 'Novel scenarios' and to 'Never test recall of specific words'. While Q1 and Q2 follow this perfectly with creative analogies, Q3, Q4, and Q5 revert to standard academic contexts. Specifically, Q5 tests the recall of the word 'polimerase' (Fill in the blank), which directly violates the 'Understanding vs. Memorization' and 'Never test recall of specific words' rules. It tests vocabulary, not concept application.",
          "kind": "minorErrors",
          "score": 8
        },
        {
          "conclusion": "To strictly adhere to the 'Novel Scenarios' and 'Transfer Test' philosophy, Q3, Q4, and Q5 should have been framed within applied contexts (e.g., troubleshooting a replication error in a hypothetical organism or using a metaphor) rather than direct description. Q5 specifically should have tested the *function* of the enzyme (e.g., 'What acts as the builder?') rather than asking the user to recall its name.",
          "kind": "potentialImprovements",
          "score": 8.5
        }
      ],
      "testCase": {
        "expectations": "\nLANGUAGE REQUIREMENT: Questions, options, and feedback must be in Portuguese.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Scenarios requiring understanding of WHY replication works as it does (directionality constraints, error correction needs)\n   - GOOD PATTERN: Situations where learners must predict outcomes of replication errors or enzyme malfunctions\n   - BAD PATTERN: Asking to name enzymes or describe their functions without application context\n   - BAD PATTERN: Questions referencing the \"zipper\" metaphor or other explanation-specific content\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Both DNA strands being synthesized the same way (leading strand is continuous; lagging strand is synthesized in Okazaki fragments)\n   - DNA polymerase being able to start synthesis on its own (it needs a primer)\n   - Replication being error-free (proofreading catches most errors but some slip through)\n   - Replication happening randomly along the chromosome (it starts at specific origins)\n\n3. FORMAT FIT: Sort order works well for replication sequence. Fill blank works for enzyme roles. Multiple choice for understanding why the process works as it does.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "pt-biology-dna-replication-quiz-1",
        "userInput": {
          "chapterTitle": "Genetica Molecular",
          "courseTitle": "Biologia Celular",
          "explanationSteps": [
            {
              "text": "Antes de uma celula se dividir, ela precisa copiar todo seu DNA. O processo comeca quando enzimas separam as duas fitas da dupla helice.",
              "title": "Abrindo o Ziper"
            },
            {
              "text": "Cada fita original serve de molde para uma nova. Enzimas chamadas DNA polimerases leem a fita antiga e constroem a nova, base por base.",
              "title": "Lendo o Molde"
            },
            {
              "text": "Ha um problema: a polimerase so consegue adicionar bases em uma direcao. Uma fita e copiada continuamente, mas a outra precisa ser copiada em pedacos.",
              "title": "O Problema da Direcao"
            },
            {
              "text": "Enzimas de correcao verificam cada base adicionada. Se encontram um erro, removem e substituem. Esse controle de qualidade mantem a fidelidade genetica.",
              "title": "Corrigindo Erros"
            }
          ],
          "language": "pt",
          "lessonDescription": "Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade",
          "lessonTitle": "Como o DNA se Replica"
        }
      }
    },
    {
      "duration": 18237.871334000003,
      "inputTokens": 1844,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You are taking a photo of a mountain climber scaling a cliff. You want the viewer to feel the vast height of the mountain above the climber, rather than focusing on the ground they already covered.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Perfect! Placing the climber low in the frame (on the bottom horizontal line) leaves the majority of the photo for the mountain peak, emphasizing the distance left to go.\",\n          \"isCorrect\": true,\n          \"text\": \"Place the climber along the bottom horizontal grid line.\"\n        },\n        {\n          \"feedback\": \"This would emphasize the ground below the climber, making the mountain above look smaller.\",\n          \"isCorrect\": false,\n          \"text\": \"Place the climber along the top horizontal grid line.\"\n        },\n        {\n          \"feedback\": \"While balanced, centering the climber often makes the image feel static and fails to emphasize the 'scale' of the environment.\",\n          \"isCorrect\": false,\n          \"text\": \"Place the climber exactly in the center of the frame.\"\n        },\n        {\n          \"feedback\": \"Vertical lines help with side-to-side balance, but to show height and scale, horizontal placement is more effective.\",\n          \"isCorrect\": false,\n          \"text\": \"Align the climber with the center vertical line only.\"\n        }\n      ],\n      \"question\": \"Where should you place the climber?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A photo of a flat, cracked desert floor under a cloudless blue sky.\",\n          \"right\": \"Place the horizon on the upper third line.\"\n        },\n        {\n          \"left\": \"A photo of a dramatic lightning storm happening high in the atmosphere.\",\n          \"right\": \"Place the horizon on the lower third line.\"\n        },\n        {\n          \"left\": \"A portrait of a person looking directly at the camera.\",\n          \"right\": \"Align the eyes with the top horizontal line.\"\n        },\n        {\n          \"left\": \"A single lighthouse on a vast, empty coastline.\",\n          \"right\": \"Place the lighthouse on a vertical intersection point.\"\n        }\n      ],\n      \"question\": \"Match the scene to the best placement.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"Imagine a photo of a dog running from the left side of the frame toward the right. To make the photo feel 'active' and give the dog 'room to run,' where should the dog be located?\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"By placing the dog on the left, you leave two-thirds of the frame open in front of it, creating a sense of future movement.\",\n          \"isCorrect\": true,\n          \"text\": \"On the left vertical grid line.\"\n        },\n        {\n          \"feedback\": \"Putting the dog on the right makes it look like it's about to run out of the photo, which feels cramped and 'stopped.'\",\n          \"isCorrect\": false,\n          \"text\": \"On the right vertical grid line.\"\n        },\n        {\n          \"feedback\": \"The center is stable, but it doesn't create the same sense of 'pathway' or movement that off-center placement does.\",\n          \"isCorrect\": false,\n          \"text\": \"Dead center in the middle square.\"\n        },\n        {\n          \"feedback\": \"This would focus on the ground or sky rather than the direction of the dog's movement.\",\n          \"isCorrect\": false,\n          \"text\": \"Exactly on the bottom horizontal line.\"\n        }\n      ],\n      \"question\": \"Where should the dog be positioned?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"intersections\",\n        \"movement\"\n      ],\n      \"distractors\": [\n        \"centers\",\n        \"stillness\",\n        \"corners\",\n        \"colors\"\n      ],\n      \"feedback\": \"The four 'power points' (intersections) are where the eye naturally lands, and off-center placement creates 'visual tension' that makes the eye move through the image.\",\n      \"question\": \"Why do we use the Rule of Thirds?\",\n      \"template\": \"Strategic placement at the grid's [BLANK] works because it aligns with how humans naturally scan a scene. By moving the subject away from the center, you create a sense of [BLANK] and energy.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"You're looking at a photo of a lone tree in a field. The tree is placed exactly in the center of the image. It looks okay, but it feels a bit like a textbook illustration—very symmetrical and 'still.'\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. When a subject is centered, the eye hits it and stops. Off-centering it forces the eye to travel across the rest of the frame.\",\n          \"isCorrect\": true,\n          \"text\": \"The eye has no reason to 'travel' or explore the rest of the frame.\"\n        },\n        {\n          \"feedback\": \"The Rule of Thirds isn't about focus; a centered subject can be perfectly sharp. It's about composition.\",\n          \"isCorrect\": false,\n          \"text\": \"The camera cannot focus properly on the center of the lens.\"\n        },\n        {\n          \"feedback\": \"Actually, centering usually creates *too much* balance, making the photo feel boring rather than chaotic.\",\n          \"isCorrect\": false,\n          \"text\": \"It creates too much visual 'noise' for the viewer.\"\n        },\n        {\n          \"feedback\": \"Symmetry is easy to understand; the Rule of Thirds is used because it's often more interesting than simple symmetry.\",\n          \"isCorrect\": false,\n          \"text\": \"The viewer's brain gets confused by symmetrical shapes.\"\n        }\n      ],\n      \"question\": \"Why might this centered photo feel less 'alive'?\"\n    },\n    {\n      \"format\": \"selectImage\",\n      \"options\": [\n        {\n          \"feedback\": \"Placing the flower off-center on a 'power point' creates a much more professional and dynamic look.\",\n          \"isCorrect\": true,\n          \"prompt\": \"A high-quality photo of a bright red tulip located on the right-hand vertical third of the frame, with a soft blurred green background.\"\n        },\n        {\n          \"feedback\": \"This is a common beginner mistake. It's clear, but it feels static and less engaging than an off-center composition.\",\n          \"isCorrect\": false,\n          \"prompt\": \"A high-quality photo of a bright red tulip perfectly centered in the middle of the frame, with a soft blurred green background.\"\n        }\n      ],\n      \"question\": \"Which composition creates a more 'dynamic' and professional feel?\"\n    }\n  ]\n}",
      "outputTokens": 1799,
      "steps": [
        {
          "conclusion": "No major errors found. The response generates 6 questions, falling within the requested 4-8 range. All questions test the concepts defined in the explanation steps without referencing the text directly (e.g., no 'according to the text'). The scenarios (mountain climber, running dog, desert floor, etc.) are novel and distinct from the abstract explanation provided. The JSON structure is valid.",
          "kind": "majorErrors",
          "score": 10
        },
        {
          "conclusion": "No minor errors found. The physics/composition rules applied in the questions are accurate (e.g., placing a subject low to emphasize height above, placing a moving subject with lead room). The 'matchColumns' question correctly applies the concept of horizon placement (high horizon to emphasize ground, low horizon to emphasize sky). The 'fillBlank' question tests the 'why' and 'how' correctly. The 'selectImage' format is used appropriately here, as visual recognition is central to photography composition.",
          "kind": "minorErrors",
          "score": 10
        },
        {
          "conclusion": "The response is excellent. It perfectly captures the instruction to test 'Understanding vs. Memorization'. The feedback for every question provides the 'why', explaining the logic rather than just stating correctness. The tone is conversational and helpful. The variety of formats is functional, not forced.",
          "kind": "potentialImprovements",
          "score": 10
        }
      ],
      "testCase": {
        "expectations": "\nSPECIAL CONSIDERATION: This is an edge case - a visual/practical skill where understanding is demonstrated through application to real scenarios, not visual recognition.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Photography scenarios where learners must decide subject placement to achieve specific visual effects\n   - GOOD PATTERN: Situations requiring understanding of WHY off-center placement creates visual interest\n   - BAD PATTERN: Asking to define the rule of thirds or describe the grid without application context\n   - BAD PATTERN: Questions about \"power points\" terminology without practical application\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Rule of thirds being mandatory (it's a guideline, not a rule - breaking it intentionally can be effective)\n   - Centered subjects always being wrong (centered composition works for symmetry and certain moods)\n   - The grid being visible in final photos (it's an imaginary guide)\n   - Rule of thirds being the only composition technique (leading lines, framing, and many others exist)\n\n3. FORMAT FIT: Multiple choice works for \"where would you place the subject\" scenarios. Match columns could connect composition choices to their visual effects. AVOID selectImage unless visual recognition is truly being tested.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-photography-composition-quiz-1",
        "userInput": {
          "chapterTitle": "Composition Basics",
          "courseTitle": "Photography Fundamentals",
          "explanationSteps": [
            {
              "text": "Most beginners center their subjects. While this works sometimes, placing subjects off-center often creates more dynamic, interesting images.",
              "title": "Beyond the Center"
            },
            {
              "text": "Imagine your frame divided by two horizontal and two vertical lines, creating nine equal sections. The four points where lines cross are power points.",
              "title": "The Grid"
            },
            {
              "text": "Placing your main subject on a power point or along a line draws the viewer's eye naturally. A horizon on the lower line emphasizes sky; on the upper line emphasizes ground.",
              "title": "Strategic Placement"
            },
            {
              "text": "This guideline works because our eyes naturally scan images in patterns. Off-center placement gives the eye somewhere to travel, making photos feel more alive.",
              "title": "Why It Works"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding the rule of thirds and how strategic subject placement creates more visually engaging photographs",
          "lessonTitle": "The Rule of Thirds"
        }
      }
    },
    {
      "duration": 19828.611459,
      "inputTokens": 1845,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A movie critic is convinced that a certain director is a 'genius.' In their latest review, they praise the director's use of 'intentional' blurry shots, even though the same critic usually complains about poor focus in other films.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. To avoid the discomfort of being wrong, the critic's brain finds a way to make the 'flaw' fit their 'genius' narrative.\",\n          \"isCorrect\": true,\n          \"text\": \"Their brain is reframing a flaw as a strength to keep their belief consistent.\"\n        },\n        {\n          \"feedback\": \"Confirmation bias isn't about lying; the critic likely genuinely believes the shots were intentional because of their existing bias.\",\n          \"isCorrect\": false,\n          \"text\": \"The critic is intentionally lying to protect the director's reputation.\"\n        },\n        {\n          \"feedback\": \"While they might be, the core issue here is how they are treating the SAME information differently based on who the director is.\",\n          \"isCorrect\": false,\n          \"text\": \"The critic has simply changed their mind about what makes a movie good.\"\n        },\n        {\n          \"feedback\": \"Even if the director said this, the critic is ignoring their own usual standards to support a specific belief.\",\n          \"isCorrect\": false,\n          \"text\": \"The director likely told the critic the shots were intentional.\"\n        }\n      ],\n      \"question\": \"Why did the critic's opinion change?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A sports fan only remembers the times the referee made a bad call against their favorite team.\",\n          \"right\": \"Selective Attention\"\n        },\n        {\n          \"left\": \"A laboratory requires two different scientists to check each other's data before publishing.\",\n          \"right\": \"Safeguards\"\n        },\n        {\n          \"left\": \"A person feels a surge of frustration when they see a news headline that challenges their political view.\",\n          \"right\": \"Discomfort of Inconsistency\"\n        },\n        {\n          \"left\": \"A teacher is surprised to see a 'troublemaker' student doing well, assuming it must have been a fluke.\",\n          \"right\": \"Unconscious Filtering\"\n        }\n      ],\n      \"question\": \"Match these real-life behaviors to the concept they represent.\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"automatically\",\n        \"deliberately\"\n      ],\n      \"distractors\": [\n        \"occasionally\",\n        \"rarely\",\n        \"maliciously\",\n        \"slowly\"\n      ],\n      \"feedback\": \"The danger of confirmation bias is that it isn't a conscious choice—it's a background process our brains run without asking us.\",\n      \"question\": \"Why is it so hard to 'just stop' being biased?\",\n      \"template\": \"Confirmation bias is difficult to spot in ourselves because it happens [BLANK]. We aren't [BLANK] choosing to ignore facts; our brains are just streamlining information to match what we already know.\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"This sequence shows how our brains protect our existing beliefs by dismissing new evidence and reinforcing what we already thought.\",\n      \"items\": [\n        \"You develop a strong opinion that 'Brand A' is the best coffee.\",\n        \"You see a news report claiming 'Brand A' uses low-quality beans.\",\n        \"You feel a sense of irritation and doubt toward the news reporter.\",\n        \"You decide the reporter probably doesn't know much about coffee.\",\n        \"You feel even more certain that 'Brand A' is the superior choice.\"\n      ],\n      \"question\": \"Order the steps of how our minds typically react to information that challenges a belief.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": {\n        \"description\": \"A hiring manager believes that people from 'Ivy League' schools are always the best employees. While interviewing, they spend 20 minutes chatting about a shared hobby with an Ivy League grad, but spend the entire interview grillng a candidate from a local college on technical flaws.\",\n        \"kind\": \"text\"\n      },\n      \"options\": [\n        {\n          \"feedback\": \"The manager's bias led them to seek out 'proof' of the local student's weakness while ignoring potential flaws in the Ivy League student.\",\n          \"isCorrect\": true,\n          \"text\": \"The manager is looking for evidence to support a pre-existing stereotype.\"\n        },\n        {\n          \"feedback\": \"Bias usually happens in the background, making the manager feel like they are just being 'thorough' with the second candidate.\",\n          \"isCorrect\": false,\n          \"text\": \"The manager is trying to be extra fair by testing the second candidate harder.\"\n        },\n        {\n          \"feedback\": \"Even if the manager is aware of their preference, the 'filtering' of how they interpret the candidates' answers is a classic bias.\",\n          \"isCorrect\": false,\n          \"text\": \"This isn't confirmation bias because the manager knows they like Ivy League schools.\"\n        },\n        {\n          \"feedback\": \"The manager's brain is filtering the experience to confirm that the Ivy League student is a better 'fit.'\",\n          \"isCorrect\": false,\n          \"text\": \"The manager is simply more comfortable with people who have similar hobbies.\"\n        }\n      ],\n      \"question\": \"What is driving the manager's behavior?\"\n    }\n  ]\n}",
      "outputTokens": 1973,
      "steps": [
        {
          "conclusion": "The response violated explicit negative constraints regarding content. Question 2 directly reuses the 'sports fan' and 'scientists' examples from the explanation text. The prompt's 'Expectations' section explicitly stated: 'BAD PATTERN: Questions about the sports fan... examples from the explanation' and the 'Non-Negotiable Rules' stated 'Never test recall of specific... examples from the explanation steps'.",
          "kind": "majorErrors",
          "score": 6.5
        },
        {
          "conclusion": "The response violated explicit negative constraints regarding format. Question 4 uses the 'sortOrder' format, despite the 'Expectations' section explicitly stating: 'AVOID sort_order as the concept isn't sequential'.",
          "kind": "majorErrors",
          "score": 7
        },
        {
          "conclusion": "Question 1's stem 'Why did the critic's opinion change?' is slightly inaccurate. In the scenario, the critic is maintaining their existing opinion (that the director is a genius) by reframing the evidence, rather than changing their opinion. A better phrasing would be 'How is the critic interpreting the footage?'",
          "kind": "minorErrors",
          "score": 9
        },
        {
          "conclusion": "To improve, Question 2 should be rewritten with completely novel scenarios (e.g., a stock trader ignoring bad news about a favorite stock, or a parent excusing their child's behavior) to truly test transfer of learning. Question 4 should be removed or converted to a Multiple Choice question focusing on the mechanism of the bias, adhering to the format constraints.",
          "kind": "potentialImprovements",
          "score": 7.5
        }
      ],
      "testCase": {
        "expectations": "\nSPECIAL CONSIDERATION: This is an edge case - an abstract psychological concept where understanding means recognizing the bias in everyday situations.\n\nTOPIC-SPECIFIC GUIDANCE:\n\n1. APPLICATION CHECK:\n   - GOOD PATTERN: Everyday scenarios where learners must recognize confirmation bias operating in someone's reasoning\n   - GOOD PATTERN: Situations requiring understanding of WHY the bias is unconscious and hard to overcome\n   - BAD PATTERN: Asking to define confirmation bias or list its characteristics without application context\n   - BAD PATTERN: Questions about the sports fan or political supporter examples from the explanation\n\n2. ACCURACY PITFALLS - Penalize if any of these are stated or implied:\n   - Confirmation bias being intentional deception (it's usually unconscious)\n   - Only unintelligent people having confirmation bias (everyone is susceptible, including experts)\n   - Confirmation bias being easy to overcome once you know about it (awareness helps but doesn't eliminate it)\n   - Confirmation bias only affecting beliefs about facts (it affects emotional and value-based beliefs too)\n\n3. FORMAT FIT: Multiple choice excels here - present scenarios and ask which demonstrates the bias. Match columns could connect cognitive biases to example scenarios. AVOID sort_order as the concept isn't sequential.\n\n\nEVALUATION CRITERIA:\n\n1. UNDERSTANDING OVER MEMORIZATION: Questions must test conceptual understanding, not recall. A learner who understood the concept but never read this specific explanation should be able to answer correctly. Penalize questions that:\n   - Use phrases like \"according to the text,\" \"as described,\" or \"the explanation said\"\n   - Reference specific metaphors, analogies, or examples from the explanation steps\n   - Ask \"what is X?\" instead of \"what would happen if...\" or \"which scenario shows...\"\n\n2. APPLICATION TO NOVEL SCENARIOS: Questions should present concepts in new contexts the learner hasn't seen. The scenario in the question should be different from any examples in the explanation steps. Penalize questions that:\n   - Reuse scenarios from the explanation\n   - Ask about facts that could only be known by reading this specific text\n   - Test vocabulary definitions rather than concept application\n\n3. FORMAT APPROPRIATENESS: Evaluate whether the chosen format genuinely tests understanding.\n\n   ANTI-PATTERN - \"Forced variety\": Using different formats just for variety is a serious flaw. Multiple well-crafted questions of the same format are better than poorly-suited formats used for variety's sake. Do NOT penalize for using multiple choice repeatedly if it tests the concepts well.\n\n   Format guidance:\n   - Multiple choice: Often the BEST choice, not just a \"default.\" It excels at testing whether learners can apply concepts to novel scenarios. Use it freely.\n   - Match columns: Best when the concept involves connecting observations to principles (symptoms to causes, effects to mechanisms).\n   - Sort order: ONLY when the concept IS about sequence — when order matters conceptually (biological processes, compilation phases).\n   - Fill blank: Best for completing relationships or processes where the blank tests conceptual understanding.\n   - Select image: ONLY when visual recognition genuinely tests understanding.\n\n   PENALIZE when:\n   - Formats are used for variety rather than fit\n   - A different format would clearly test the concept better\n\n   Do NOT penalize when:\n   - Multiple choice is used repeatedly across several questions\n   - Some available formats are not used at all\n   - The quiz sticks to one or two well-suited formats\n\n4. FEEDBACK QUALITY: Feedback must explain reasoning, not just state correct/incorrect. Good feedback:\n   - For correct answers: Explains WHY it's right plus an additional insight\n   - For incorrect answers: Explains WHY it's wrong AND why the correct answer is right\n   Penalize feedback that only says \"Correct!\" or \"That's wrong.\"\n\n5. FACTUAL ACCURACY: All questions and answers must be scientifically/technically correct. Penalize:\n   - Incorrect facts presented as correct answers\n   - Correct facts marked as incorrect\n   - Misleading simplifications that create misconceptions\n\n6. QUESTION CLARITY: Questions must be unambiguous with a conversational tone. Penalize:\n   - Academic or formal phrasing\n   - Ambiguous scenarios where multiple answers could be valid\n   - Trick questions designed to confuse rather than test understanding\n\n7. APPROPRIATE DIFFICULTY: Questions should challenge understanding without being unfair. Penalize:\n   - Trivially easy questions anyone could guess\n   - Questions requiring knowledge beyond the lesson scope\n   - Trick questions that test careful reading rather than comprehension\n\nANTI-CHECKLIST GUIDANCE (CRITICAL):\n- Do NOT penalize for missing specific question formats you might expect\n- Do NOT require a specific number of questions - quality matters more than quantity\n- Do NOT check against an imagined \"complete\" quiz you think should exist\n- Do NOT penalize for covering some concepts more than others if coverage is reasonable\n- Do NOT expect questions to follow any particular order or progression\n- ONLY penalize for: memorization-based questions, factual errors, poor feedback quality, unclear wording, or inappropriate format choices\n- Different valid quiz designs exist - assess the quality of what IS provided\n\n    ",
        "id": "en-psychology-confirmation-bias-quiz-1",
        "userInput": {
          "chapterTitle": "Cognitive Biases",
          "courseTitle": "Introduction to Psychology",
          "explanationSteps": [
            {
              "text": "Our brains prefer consistency. When we believe something, finding contradicting evidence feels uncomfortable - like a mental itch we want to scratch away.",
              "title": "The Comfort of Consistency"
            },
            {
              "text": "To avoid discomfort, our brains play tricks. We notice evidence supporting our beliefs and unconsciously filter out or dismiss contradicting evidence.",
              "title": "Selective Attention"
            },
            {
              "text": "This happens automatically, not deliberately. A sports fan genuinely sees more fouls by the opposing team. A political supporter honestly remembers more flaws in opponents.",
              "title": "Unconscious Filtering"
            },
            {
              "text": "Even scientists fall prey to this. That's why research uses blind studies and peer review - external checks against our natural tendency to see what we expect.",
              "title": "Safeguards Help"
            }
          ],
          "language": "en",
          "lessonDescription": "Understanding confirmation bias - how our tendency to favor information that confirms existing beliefs affects our perception and decision-making",
          "lessonTitle": "Confirmation Bias"
        }
      }
    }
  ],
  "taskId": "activity-explanation-quiz"
}
