{
  "generatedAt": "2026-02-21T22:45:55.324Z",
  "modelId": "google/gemini-3.1-pro-preview",
  "outputs": [
    {
      "duration": 20587.896915999998,
      "inputTokens": 1448,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine a recipe with a million steps. Early software was written as massive, endless lists of instructions. When things went wrong, untangling the mess was like finding a needle in a stadium-sized haystack.\",\n      \"title\": \"The Age of Spaghetti Code\"\n    },\n    {\n      \"text\": \"As software grew more complex, this top-down approach collapsed. A tiny tweak to how a video game character jumped might accidentally break the scoring system. Programmers were terrified to touch their own code.\",\n      \"title\": \"The Breaking Point\"\n    },\n    {\n      \"text\": \"In the 1960s, a visionary named Alan Kay looked at biology for a solution. He noticed that complex organisms are made of trillions of independent cells, all communicating and working together without a central boss.\",\n      \"title\": \"Inspiration from Biology\"\n    },\n    {\n      \"text\": \"What if software worked like cells? Instead of a giant, tangled list of rules, programmers started building independent \\\"objects.\\\" A digital dog object could store its own name, and independently know how to bark.\",\n      \"title\": \"Enter the Object\"\n    },\n    {\n      \"text\": \"Think of an object like a self-contained food truck. It holds its own ingredients (data) and has its own recipes (actions). You don't need to know exactly how the chef cooks the taco, you just place your order.\",\n      \"title\": \"Packing It All Together\"\n    },\n    {\n      \"text\": \"This shift was monumental. Developers could now build modular, reusable blocks. Huge teams could work on the wheels, engine, and radio independently, then easily snap them together to build a digital car.\",\n      \"title\": \"A Software Revolution\"\n    },\n    {\n      \"text\": \"From the apps on your phone to the heroes in your favorite video game, almost all modern software is built using Object-Oriented Programming. You're about to learn the mindset that built the modern digital world.\",\n      \"title\": \"The World Built on Objects\"\n    }\n  ]\n}",
      "outputTokens": 1662,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-programming-oop-1",
      "userPrompt": "LESSON_TITLE: Object-Oriented Programming\nLESSON_DESCRIPTION: Understanding the core principles of object-oriented programming and why it revolutionized software development\nCHAPTER_TITLE: Programming Paradigms\nCOURSE_TITLE: Introduction to Programming\nLANGUAGE: en"
    },
    {
      "duration": 19253.138791999998,
      "inputTokens": 1444,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Before calculus, math was like a photograph. Geometry and algebra were perfect for measuring static things—a perfectly round circle, a motionless field, or a cart traveling at a steady speed. Math was brilliant, but it was frozen.\",\n      \"title\": \"A Universe Frozen in Time\"\n    },\n    {\n      \"text\": \"But reality doesn't stand still. Planets orbit in curves, arrows slow down due to air resistance, and falling objects speed up as they drop. The universe is a continuous, messy movie, and mathematicians only had tools to study still frames.\",\n      \"title\": \"The Problem with Reality\"\n    },\n    {\n      \"text\": \"Imagine driving a car and looking at the speedometer. It says exactly 60 mph right now. But how can you measure speed in a single, frozen instant? Speed is distance divided by time. If the time passed is zero, the math breaks.\",\n      \"title\": \"The Speedometer Paradox\"\n    },\n    {\n      \"text\": \"In 1665, an outbreak of the bubonic plague forced a young Isaac Newton into quarantine. Watching apples fall in his garden, he realized he needed a completely new kind of math—one that could capture continuous, ever-changing motion.\",\n      \"title\": \"The Plague and the Apple\"\n    },\n    {\n      \"text\": \"Around the same time, a German philosopher named Gottfried Leibniz was tackling the same puzzle. Both men independently cracked the code: instead of measuring a static moment, they figured out how to measure the infinitely small.\",\n      \"title\": \"Two Minds, One Big Idea\"\n    },\n    {\n      \"text\": \"They called it calculus. It was the math of continuous change. Suddenly, humanity could predict planetary orbits, design aerodynamic airplanes, and model the stock market. Calculus gave us the power to finally understand a world in motion.\",\n      \"title\": \"The Language of the Universe\"\n    }\n  ]\n}",
      "outputTokens": 1860,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-math-calculus-1",
      "userPrompt": "LESSON_TITLE: What is Calculus?\nLESSON_DESCRIPTION: The origins of calculus and why mathematicians needed a new way to describe change and motion\nCHAPTER_TITLE: Foundations\nCOURSE_TITLE: Calculus I\nLANGUAGE: en"
    },
    {
      "duration": 26282.954874999996,
      "inputTokens": 1445,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"For centuries, humans looked at nature and saw a finished puzzle. A tiger was always a tiger; a fern was always a fern. People believed every creature was placed on Earth exactly as it looked, unchanging forever.\",\n      \"title\": \"A World Set in Stone\"\n    },\n    {\n      \"text\": \"But the earth was hiding secrets. Miners and explorers kept digging up giant bones and fossilized shells of creatures that no longer existed. If animals never changed, why were there so many bizarre, extinct monsters buried in the rock?\",\n      \"title\": \"The Clues Beneath Our Feet\"\n    },\n    {\n      \"text\": \"In 1831, a young man named Charles Darwin boarded a ship called the HMS Beagle. He wasn't a legendary scientist yet—just a seasick college graduate fascinated by bugs. His five-year voyage around the world would change history.\",\n      \"title\": \"A Seasick Naturalist\"\n    },\n    {\n      \"text\": \"When Darwin reached the isolated Galápagos Islands, he noticed something strange. Birds on one island had thick beaks for cracking seeds, while birds on a neighboring island had long beaks for catching insects. They looked like cousins.\",\n      \"title\": \"The Island Puzzle\"\n    },\n    {\n      \"text\": \"Darwin realized nature was a massive, high-stakes game of survival. If a bird's beak perfectly matched its local food, it lived long enough to have babies. If it didn't, it starved. Nature was invisibly \\\"selecting\\\" the winners.\",\n      \"title\": \"The \\\"Aha!\\\" Moment\"\n    },\n    {\n      \"text\": \"This meant species weren't static statues; they were like wet clay, constantly being reshaped by their environment over millions of years. Slowly, generation by generation, animals adapted to survive.\",\n      \"title\": \"Sculpted by Survival\"\n    },\n    {\n      \"text\": \"Suddenly, the world made sense. Every living thing on Earth was connected to a massive, ancient family tree. The extinct monsters in the ground were just the distant ancestors of the animals walking around today.\",\n      \"title\": \"The Great Family Tree\"\n    },\n    {\n      \"text\": \"Darwin's insight unlocked the ultimate cheat code to biology. Today, evolution isn't just history—it explains how modern viruses mutate, how we breed better crops, and how all life is beautifully woven together.\",\n      \"title\": \"Why Evolution Matters Today\"\n    }\n  ]\n}",
      "outputTokens": 1862,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-science-evolution-1",
      "userPrompt": "LESSON_TITLE: The Theory of Evolution\nLESSON_DESCRIPTION: How Darwin's observations led to a revolutionary understanding of how species change over time\nCHAPTER_TITLE: Life Science\nCOURSE_TITLE: Biology Fundamentals\nLANGUAGE: en"
    },
    {
      "duration": 26801.723625,
      "inputTokens": 1443,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine a bustling ancient Greek marketplace. Politicians are shouting, merchants are haggling, and smooth talkers are winning debates not with facts, but with sheer charisma. It was a chaotic world where the loudest or most charming voice usually won.\",\n      \"title\": \"A World of Loud Opinions\"\n    },\n    {\n      \"text\": \"These professional debaters, called Sophists, could argue that black was white and get the crowd to agree. People grew frustrated. How could you tell if an argument was actually true, or just a clever illusion? The human mind desperately needed a referee.\",\n      \"title\": \"The Tricksters of Athens\"\n    },\n    {\n      \"text\": \"Enter Aristotle. He realized that good arguments share a hidden, invisible skeleton. He asked a groundbreaking question: What if we could strip away the fiery emotions and tricky words, and just look at the structural mechanics of an argument?\",\n      \"title\": \"The First Rulebook for Thought\"\n    },\n    {\n      \"text\": \"He discovered that if you plug true statements into the right structure, the conclusion absolutely must be true. It was like discovering the laws of physics, but for human reasoning. He captured this reliable system of thinking and called it logic.\",\n      \"title\": \"The Anatomy of Truth\"\n    },\n    {\n      \"text\": \"For centuries, logic lived mainly in the minds of philosophers. But eventually, thinkers realized these strict rules of thought could be written as mathematical equations. Today, those exact same ancient rules form the binary code that runs your smartphone.\",\n      \"title\": \"From Ancient Greece to Silicon Valley\"\n    },\n    {\n      \"text\": \"We are bombarded with more information and smooth-talking algorithms than ever before. Logic is no longer just an academic subject. It is your mind's ultimate antivirus software, giving you the power to filter out the noise and protect yourself from bad ideas.\",\n      \"title\": \"Your Mental Antivirus\"\n    }\n  ]\n}",
      "outputTokens": 1702,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-philosophy-logic-1",
      "userPrompt": "LESSON_TITLE: What is Logic?\nLESSON_DESCRIPTION: The ancient quest to find reliable rules for correct thinking and argumentation\nCHAPTER_TITLE: Foundations of Reasoning\nCOURSE_TITLE: Introduction to Philosophy\nLANGUAGE: en"
    },
    {
      "duration": 27018.18475,
      "inputTokens": 1454,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Você já foi ao mercado com 100 reais e sentiu que comprou menos do que no mês passado? O dinheiro é o mesmo, a nota é idêntica, mas parece que ela encolheu. Esse é o sintoma clássico de um fenômeno que confunde as pessoas há séculos.\",\n      \"title\": \"O Mistério do Carrinho Vazio\"\n    },\n    {\n      \"text\": \"Há dois mil anos, imperadores romanos precisavam pagar seus exércitos, mas não tinham ouro suficiente. A solução? Começaram a misturar metais baratos nas moedas. De repente, havia muito mais moedas circulando pelo império.\",\n      \"title\": \"O Truque do Imperador Romano\"\n    },\n    {\n      \"text\": \"Os comerciantes não eram bobos. Percebendo que o dinheiro valia menos, eles começaram a cobrar mais moedas pelos mesmos pedaços de pão e jarras de vinho. Foi assim que a humanidade conheceu a inflação de perto.\",\n      \"title\": \"A Descoberta dos Comerciantes\"\n    },\n    {\n      \"text\": \"Pense em um leilão de obras de arte. Se todo mundo na sala de repente ganhasse o dobro de dinheiro, o que aconteceria? Os lances disparariam! A inflação costuma nascer quando há muito dinheiro perseguindo poucos produtos.\",\n      \"title\": \"Dinheiro Demais, Coisa de Menos\"\n    },\n    {\n      \"text\": \"No Brasil dos anos 80, isso chegou ao extremo com a hiperinflação. Funcionários de mercado corriam de patins pelos corredores com maquininhas, remarcando preços várias vezes ao dia. O seu salário perdia o valor enquanto você voltava para casa.\",\n      \"title\": \"O Trauma das Etiquetas\"\n    },\n    {\n      \"text\": \"Hoje, a inflação funciona como um ladrão invisível. Ela não tira as notas da sua carteira, mas rouba o que essas notas conseguem comprar. Entender a inflação é o primeiro passo para aprender a proteger o fruto do seu trabalho.\",\n      \"title\": \"O Ladrão Invisível do Seu Suor\"\n    }\n  ]\n}",
      "outputTokens": 2094,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "pt-economics-inflation-1",
      "userPrompt": "LESSON_TITLE: O que é Inflação?\nLESSON_DESCRIPTION: Entendendo por que os preços sobem e como isso afeta a vida das pessoas\nCHAPTER_TITLE: Conceitos Básicos\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt"
    },
    {
      "duration": 40014.341375,
      "inputTokens": 1454,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Durante miles de años, la humanidad simplemente aceptó que las cosas caían. Si soltabas una roca, iba al suelo. Los antiguos griegos creían que los objetos simplemente buscaban regresar a su hogar natural en el centro del universo.\",\n      \"title\": \"El misterio de las cosas que caen\"\n    },\n    {\n      \"text\": \"Había un gran problema: las reglas de la Tierra no parecían funcionar allá arriba. La Luna y las estrellas flotaban en una danza perfecta que no caía. Se creía que el cielo y nuestro planeta jugaban un juego con reglas completamente distintas.\",\n      \"title\": \"Dos mundos desconectados\"\n    },\n    {\n      \"text\": \"A principios del siglo XVII, algo cambió. Galileo comenzó a soltar esferas desde torres y por rampas. Descubrió que todo cae exactamente al mismo ritmo, sin importar su peso. Rompió los mitos antiguos, pero la gran duda seguía: ¿por qué caen?\",\n      \"title\": \"La chispa de la duda\"\n    },\n    {\n      \"text\": \"Imagina a un joven Isaac Newton en 1665, refugiado en una granja por una pandemia. Al ver caer una manzana, tuvo una epifanía monumental: ¿Y si la fuerza invisible que jala la fruta es exactamente la misma que mantiene a la Luna en el cielo?\",\n      \"title\": \"Una manzana y la Luna\"\n    },\n    {\n      \"text\": \"Newton descubrió que la Luna también está cayendo hacia la Tierra, pero viaja tan rápido de lado que siempre falla y no choca. ¡Había unificado el cielo y la Tierra! Una sola regla matemática, un hilo invisible, dictaba todo el cosmos.\",\n      \"title\": \"El hilo invisible del universo\"\n    },\n    {\n      \"text\": \"Esa misma fuerza que jala la manzana mantiene a los océanos en su lugar, guía a los satélites de tu GPS y evita que salgamos volando al espacio. Entender la gravedad fue nuestro primer paso para aprender a navegar por todo el universo.\",\n      \"title\": \"Nuestro ancla en el espacio\"\n    }\n  ]\n}",
      "outputTokens": 3563,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "es-physics-gravity-1",
      "userPrompt": "LESSON_TITLE: La Gravedad\nLESSON_DESCRIPTION: La historia de cómo los humanos entendieron por qué las cosas caen y los planetas orbitan\nCHAPTER_TITLE: Mecánica Clásica\nCOURSE_TITLE: Física para Principiantes\nLANGUAGE: es"
    },
    {
      "duration": 15813.629958999998,
      "inputTokens": 1448,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Early AI tried to learn human language by memorizing strict dictionary rules. It acted like a rigid grammar teacher. But language is messy, full of slang, sarcasm, and rule-breaking context. The rule-based approach failed spectacularly.\",\n      \"title\": \"The Rigid Grammar Teacher\"\n    },\n    {\n      \"text\": \"Next, scientists tried statistical guessing, similar to early smartphone autocomplete. The AI would just guess the next word based on what usually follows. It could say \\\"Good morning,\\\" but couldn't hold a conversation or remember what you said five minutes ago.\",\n      \"title\": \"The Era of Blind Guessing\"\n    },\n    {\n      \"text\": \"The core problem? Older models processed text word-by-word, like trying to understand a movie by looking through a keyhole. By the time they reached the end of a long sentence, they had already forgotten the beginning. They lacked true context.\",\n      \"title\": \"Looking Through a Keyhole\"\n    },\n    {\n      \"text\": \"In 2017, a breakthrough called the Transformer changed everything. It gave AI a new superpower called \\\"Attention.\\\" Instead of reading word-by-word, the AI could finally look at the entire sentence at once, instantly seeing how every word connected to the others.\",\n      \"title\": \"The Transformer Breakthrough\"\n    },\n    {\n      \"text\": \"With this new ability to grasp context, scientists scaled up. They built \\\"Large\\\" Language Models and fed them billions of pages from the internet. The AI wasn't just learning grammar anymore; it was absorbing human knowledge, reasoning, and creativity.\",\n      \"title\": \"Devouring the Internet\"\n    },\n    {\n      \"text\": \"Today, these massive models don't just calculate words; they understand intent. From drafting emails to writing code and telling jokes, they have transformed computers from silent calculators into fluent conversational partners.\",\n      \"title\": \"The Conversational Revolution\"\n    }\n  ]\n}",
      "outputTokens": 1560,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-recent-topic-1",
      "userPrompt": "LESSON_TITLE: Large Language Models\nLESSON_DESCRIPTION: How AI went from rigid rule-based systems to models that can understand and generate human language\nCHAPTER_TITLE: Modern AI\nCOURSE_TITLE: Introduction to Machine Learning\nLANGUAGE: en"
    },
    {
      "duration": 33090.689875,
      "inputTokens": 1439,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"For centuries, mathematicians studied numbers, shapes, and equations. But there was no universal language tying it all together. Imagine a toolbox where every tool was made for a completely different trade, with no underlying system.\",\n      \"title\": \"Math's Missing Foundation\"\n    },\n    {\n      \"text\": \"The real trouble began when mathematicians tried to understand infinity. If you have an infinite number of even numbers, and an infinite number of whole numbers, are they the same size? Intuition said yes, but logic was stuck.\",\n      \"title\": \"The Infinite Problem\"\n    },\n    {\n      \"text\": \"In the 1870s, Georg Cantor introduced a seemingly simple concept: the \\\"set.\\\" He decided to treat a collection of objects like numbers, points, or even ideas as a single mathematical entity. It was like putting chaos into neat, labeled boxes.\",\n      \"title\": \"Cantor's Radical Idea\"\n    },\n    {\n      \"text\": \"Using sets, Cantor proved something mind-bending: infinities come in different sizes! The set of decimals is vastly larger than the set of whole numbers. This shattered norms, and many of his peers actually called his work absurd.\",\n      \"title\": \"Infinity Comes in Sizes\"\n    },\n    {\n      \"text\": \"Just as sets became popular, a philosopher named Bertrand Russell found a fatal flaw. He asked: \\\"If a set contains everything except itself, does it contain itself?\\\" This simple brain-teaser literally broke the logical foundation of mathematics!\",\n      \"title\": \"The Paradox that Broke Math\"\n    },\n    {\n      \"text\": \"To fix this, mathematicians created strict rules for how sets could be formed. Today, set theory isn't just a quirky idea, it is the bedrock. Every modern mathematical concept, database, and computer algorithm is built on this very foundation.\",\n      \"title\": \"The Ultimate Foundation\"\n    }\n  ]\n}",
      "outputTokens": 2374,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-abstract-topic-1",
      "userPrompt": "LESSON_TITLE: Set Theory\nLESSON_DESCRIPTION: Understanding why mathematicians needed a rigorous way to study collections of objects\nCHAPTER_TITLE: Advanced Concepts\nCOURSE_TITLE: Discrete Mathematics\nLANGUAGE: en"
    },
    {
      "duration": 31243.111707999997,
      "inputTokens": 1443,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Before databases, information lived in filing cabinets. Imagine a hospital with a million patient records. Finding one file meant physically walking down endless aisles of alphabetical folders. It was slow, tedious, and took up entire buildings.\",\n      \"title\": \"A World of Paper Towers\"\n    },\n    {\n      \"text\": \"When early computers arrived, we simply digitized those cabinets. We created 'flat files' - giant digital lists, like endless spreadsheets. It was faster than searching through paper, but it created a massive new headache: data duplication.\",\n      \"title\": \"Computers Join the Office\"\n    },\n    {\n      \"text\": \"Imagine you moved to a new house. In a flat file system, a bank had to update your address on your checking account, savings account, and mortgage separately. Miss one, and the whole system broke. Data was a fragile, messy house of cards.\",\n      \"title\": \"The Nightmare of Updating\"\n    },\n    {\n      \"text\": \"In 1970, an IBM researcher named Edgar F. Codd had a brilliant idea. Instead of one giant list, what if we broke data into separate, specialized tables that linked together? You would store an address exactly once, and everything else would point to it.\",\n      \"title\": \"A Mathematical Masterpiece\"\n    },\n    {\n      \"text\": \"This became the relational database. It was like giving computers a superhuman filing system. Suddenly, asking complex questions, like 'Which customers bought shoes in Paris last Tuesday?', took milliseconds instead of weeks. Information became fluid.\",\n      \"title\": \"The Relational Revolution\"\n    },\n    {\n      \"text\": \"Today, databases are the invisible engines powering our digital lives. When you search for a movie, check your bank balance, or load a social media feed, you are pulling perfectly organized data. They are the memories of the modern world.\",\n      \"title\": \"The Brain of the Internet\"\n    }\n  ]\n}",
      "outputTokens": 2480,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-engineering-databases-1",
      "userPrompt": "LESSON_TITLE: Introduction to Databases\nLESSON_DESCRIPTION: The history of how computers learned to organize and retrieve vast amounts of information\nCHAPTER_TITLE: Data Storage\nCOURSE_TITLE: Computer Science Fundamentals\nLANGUAGE: en"
    },
    {
      "duration": 34408.587667,
      "inputTokens": 1442,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"In 19th-century Paris, the art world had strict rules. Paintings had to be historical, dramatic, and polished to perfection. Artists spent months locked in dark studios, blending colors until every brushstroke disappeared. It was beautiful, but lifeless.\",\n      \"title\": \"The Tyranny of Perfect Art\"\n    },\n    {\n      \"text\": \"A powerful jury called the Salon decided what was 'good' art. If you didn't paint by their rigid rulebook, your career was over. A group of young, frustrated painters felt this polished style looked fake. They didn't want to paint ancient myths; they wanted to paint real life.\",\n      \"title\": \"The Gatekeepers of Culture\"\n    },\n    {\n      \"text\": \"Then, a magical invention changed everything: paint in metal tubes. Suddenly, artists weren't chained to their studios mixing pigments. They packed up their canvases, stepped out into the blazing sunlight, and started painting the world exactly as it was happening.\",\n      \"title\": \"Freedom in a Tube\"\n    },\n    {\n      \"text\": \"Outside, things move fast. Clouds shift, the sun sets, and shadows dance. To capture these fleeting moments, these rebels had to paint quickly. They abandoned perfect blending for fast, messy, vibrant brushstrokes. They weren't painting objects anymore; they were painting light.\",\n      \"title\": \"Chasing the Light\"\n    },\n    {\n      \"text\": \"The Salon hated it, so the rebels hosted their own show in 1874. A critic saw Claude Monet's painting of a misty harbor and laughed. He called it an unfinished 'impression', meant as a nasty insult. But the artists loved the word. They took the insult and made it their name.\",\n      \"title\": \"An Insult Becomes a Movement\"\n    },\n    {\n      \"text\": \"Impressionism broke the rules of art forever. Instead of acting like human cameras trying to perfectly freeze reality, artists became interpreters. They taught us that a messy, colorful blur of paint can actually feel more alive and real than a perfectly polished masterpiece.\",\n      \"title\": \"Painting a Feeling\"\n    }\n  ]\n}",
      "outputTokens": 2906,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-art-impressionism-1",
      "userPrompt": "LESSON_TITLE: Impressionism\nLESSON_DESCRIPTION: How a group of rebellious painters changed the way we see and capture the world\nCHAPTER_TITLE: Art Movements\nCOURSE_TITLE: Art History\nLANGUAGE: en"
    },
    {
      "duration": 26397.883665999994,
      "inputTokens": 1446,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine viver séculos atrás. Se você perguntasse por que existiam ricos e pobres, a resposta seria simples: 'É a vontade dos deuses' ou 'Sempre foi assim'. A tradição ditava as regras e quase ninguém questionava a ordem do mundo.\",\n      \"title\": \"Um Mundo de Respostas Prontas\"\n    },\n    {\n      \"text\": \"Então, vieram as Revoluções Francesa e Industrial. De repente, reis perdiam suas cabeças e camponeses migravam para cidades lotadas e poluídas para trabalhar em fábricas. O mundo antigo desabou e a tradição já não explicava o caos.\",\n      \"title\": \"O Caos Bate à Porta\"\n    },\n    {\n      \"text\": \"A pobreza explodiu, greves tomaram as ruas e a violência urbana aumentou. Era como se a sociedade fosse uma máquina complexa que de repente entrou em curto-circuito. Como consertar algo que ninguém sequer entendia como funcionava?\",\n      \"title\": \"Uma Máquina em Curto-Circuito\"\n    },\n    {\n      \"text\": \"Pensadores do século XIX tiveram uma epifania. A humanidade já usava a ciência para entender o movimento dos planetas e a biologia dos corpos. E se usássemos essa mesma lente científica e rigorosa para investigar o comportamento humano?\",\n      \"title\": \"A Grande Sacada\"\n    },\n    {\n      \"text\": \"Foi assim que surgiu a Sociologia: o estudo científico da sociedade. Ela nasceu da necessidade urgente de entender as novas relações humanas, não mais baseadas em achismos ou mitologias, mas em fatos, padrões e observação estruturada.\",\n      \"title\": \"O Nascimento de uma Ciência\"\n    },\n    {\n      \"text\": \"Hoje, a Sociologia é como um óculos de raio-X. Ela nos ajuda a ver os fios invisíveis que conectam nossas escolhas pessoais a grandes estruturas sociais. Ela nos mostra que, mesmo quando achamos que estamos sozinhos, fazemos parte de um todo.\",\n      \"title\": \"Enxergando os Fios Invisíveis\"\n    }\n  ]\n}",
      "outputTokens": 1840,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "pt-social-sociology-1",
      "userPrompt": "LESSON_TITLE: O que é Sociologia?\nLESSON_DESCRIPTION: Como surgiu a necessidade de estudar cientificamente a sociedade e as relações humanas\nCHAPTER_TITLE: Introdução\nCOURSE_TITLE: Sociologia\nLANGUAGE: pt"
    },
    {
      "duration": 27952.087083000006,
      "inputTokens": 1439,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine standing at the entrance of a massive, branching maze. Your goal is to find the exit. You could try tracking every single twist and turn in your head, but quickly, the sheer number of paths becomes completely overwhelming.\",\n      \"title\": \"The Giant, Tangled Maze\"\n    },\n    {\n      \"text\": \"In programming, we usually tackle repetitive tasks with loops, doing the same action over and over. But when a problem branches out wildly, like a maze or a family tree, writing loops inside of loops becomes a chaotic, unreadable mess.\",\n      \"title\": \"The Loop Limitation\"\n    },\n    {\n      \"text\": \"Then came a brilliant, mind-bending shift in computer science. What if you didn't have to solve the entire maze? What if your only job was to take one single step, and then pass the rest of the problem to an exact clone of yourself?\",\n      \"title\": \"A Shift in Perspective\"\n    },\n    {\n      \"text\": \"This is the magic of recursion. It is a function that calls itself. Instead of tackling a massive problem all at once, the function handles a tiny piece, then summons a copy of itself to handle the next piece. The problem shrinks with every clone.\",\n      \"title\": \"The Clone Army\"\n    },\n    {\n      \"text\": \"There is just one catch. If clones keep summoning clones forever, your computer crashes. Every recursive story needs an ending, called a base case. This is the moment the final clone finds the exit, stops the chain, and shouts the answer back up.\",\n      \"title\": \"The Infinite Trap\"\n    },\n    {\n      \"text\": \"Today, recursion is the secret behind programming's most elegant algorithms. From how your computer searches through nested folders, to how AI calculates chess moves, recursion lets us solve impossibly complex problems with beautiful simplicity.\",\n      \"title\": \"Beauty in Simplicity\"\n    }\n  ]\n}",
      "outputTokens": 1829,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-narrow-topic-1",
      "userPrompt": "LESSON_TITLE: Recursion\nLESSON_DESCRIPTION: Understanding the elegant idea of functions that call themselves to solve complex problems\nCHAPTER_TITLE: Functions\nCOURSE_TITLE: Programming Fundamentals\nLANGUAGE: en"
    }
  ],
  "taskId": "activity-background"
}
