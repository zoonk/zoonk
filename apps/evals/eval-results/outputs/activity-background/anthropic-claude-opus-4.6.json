{
  "generatedAt": "2026-02-21T22:45:25.240Z",
  "modelId": "anthropic/claude-opus-4.6",
  "outputs": [
    {
      "duration": 23489.009625000006,
      "inputTokens": 1791,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture the 1960s. Programs are getting longer, messier, and harder to fix. Code looks like a giant plate of spaghetti — tangled, interconnected, impossible to follow. Change one line and the whole thing breaks.\",\n      \"title\": \"The Spaghetti Nightmare\"\n    },\n    {\n      \"text\": \"Early programmers wrote instructions top to bottom, like a recipe with thousands of steps. Variables floated everywhere. Anyone could change anything. As programs grew, bugs multiplied like rabbits and nobody knew where to look.\",\n      \"title\": \"Code Without Boundaries\"\n    },\n    {\n      \"text\": \"Think of building a car by dumping every bolt, wire, and gear into one enormous pile. Need to fix the brakes? Good luck finding them. That's what software felt like — no structure, no separation, no sanity.\",\n      \"title\": \"Imagine a Pile of Parts\"\n    },\n    {\n      \"text\": \"Programmers started asking: what if code could mirror the real world? Cars have engines. Engines have pistons. Each piece has a job and an interface. What if software could be organized the same way?\",\n      \"title\": \"A Radical Question\"\n    },\n    {\n      \"text\": \"In the late 1960s, Norwegian scientists Ole-Johan Dahl and Kristen Nygaard created Simula — a language that let you define \\\"objects\\\" that bundled data and behavior together, like little self-contained machines.\",\n      \"title\": \"Simula's Spark\"\n    },\n    {\n      \"text\": \"Alan Kay ran with the idea at Xerox PARC, coining the term \\\"object-oriented programming.\\\" His language Smalltalk treated everything as an object — numbers, text, even the program itself. A whole new philosophy was born.\",\n      \"title\": \"Alan Kay's Vision\"\n    },\n    {\n      \"text\": \"OOP introduced a powerful concept: encapsulation. Like a TV remote, you press buttons without knowing the circuitry inside. Objects hide their messy internals and expose only what others need to use.\",\n      \"title\": \"Hiding the Messy Wiring\"\n    },\n    {\n      \"text\": \"Then came inheritance — the idea that objects can share traits, like how a golden retriever inherits characteristics from \\\"dog,\\\" which inherits from \\\"animal.\\\" Write once, reuse everywhere. Less code, fewer bugs.\",\n      \"title\": \"The Family Tree of Code\"\n    },\n    {\n      \"text\": \"Polymorphism added flexibility. Imagine telling different musicians to \\\"play.\\\" A guitarist strums, a drummer beats, a pianist presses keys. Same instruction, different behaviors — elegantly handled.\",\n      \"title\": \"Same Word, Different Actions\"\n    },\n    {\n      \"text\": \"By the 1990s, OOP conquered the industry. C++, Java, and Python embraced it. Massive projects — operating systems, video games, banking software — became manageable because code finally had architecture.\",\n      \"title\": \"The Takeover\"\n    },\n    {\n      \"text\": \"Today, every app on your phone, every website you visit, and every game you play likely uses OOP. It taught us to think in building blocks — and that one insight transformed programming from chaos into craft.\",\n      \"title\": \"Why This Changes Everything\"\n    }\n  ]\n}",
      "outputTokens": 660,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-programming-oop-1",
      "userPrompt": "LESSON_TITLE: Object-Oriented Programming\nLESSON_DESCRIPTION: Understanding the core principles of object-oriented programming and why it revolutionized software development\nCHAPTER_TITLE: Programming Paradigms\nCOURSE_TITLE: Introduction to Programming\nLANGUAGE: en"
    },
    {
      "duration": 26227.921916,
      "inputTokens": 1792,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture a world where nothing holds still. Planets sweep through the sky, arrows arc toward targets, rivers carve canyons grain by grain. Humans watched all this motion for millennia — and had almost no math to describe it precisely.\",\n      \"title\": \"A Universe in Constant Motion\"\n    },\n    {\n      \"text\": \"Ancient Greek geometry could measure static shapes beautifully — the area of a circle, the angles of a triangle. But the moment something started moving or changing, those elegant tools hit a wall.\",\n      \"title\": \"When Geometry Hit a Wall\"\n    },\n    {\n      \"text\": \"How fast is a falling stone traveling at one exact instant? Not over a whole second — at one frozen heartbeat of time. The Greeks could approximate, but the precise answer slipped through their fingers like water.\",\n      \"title\": \"The Instant Speed Puzzle\"\n    },\n    {\n      \"text\": \"Archimedes came close. He sliced curves into thinner and thinner strips, stacking tiny rectangles to estimate areas under curves. It was brilliant, exhausting, and maddeningly imprecise.\",\n      \"title\": \"Archimedes' Clever Slices\"\n    },\n    {\n      \"text\": \"For nearly two thousand years, mathematicians circled the same frustrations. Astronomers needed to predict orbits. Engineers needed to understand forces. The math of the static world simply wasn't enough.\",\n      \"title\": \"Two Thousand Years of Waiting\"\n    },\n    {\n      \"text\": \"Then, in the 1660s, a plague shut down Cambridge University. A 23-year-old Isaac Newton, stuck at home on a farm, began scribbling ideas about \\\"fluxions\\\" — quantities that flow and change over time.\",\n      \"title\": \"A Plague and a Farm\"\n    },\n    {\n      \"text\": \"Independently, across the English Channel, Gottfried Leibniz was wrestling with the same questions. He developed his own elegant notation — the 'dx' and '∫' symbols you'll soon recognize everywhere.\",\n      \"title\": \"A Rival Across the Channel\"\n    },\n    {\n      \"text\": \"Their big insight was deceptively simple: zoom in close enough on any smooth curve, and it starts to look like a straight line. That tiny straight line holds the secret to instantaneous change.\",\n      \"title\": \"The Zoom-In Revelation\"\n    },\n    {\n      \"text\": \"This single idea unlocked two powerful tools: the derivative, which captures how fast something changes at any instant, and the integral, which accumulates tiny pieces into a whole. Two sides of the same coin.\",\n      \"title\": \"Two Tools, One Coin\"\n    },\n    {\n      \"text\": \"Suddenly, physics had a language. Newton could describe gravity, motion, and light. Engineers could calculate curves, pressures, and flows. The floodgates of modern science swung wide open.\",\n      \"title\": \"Science Gets a New Language\"\n    },\n    {\n      \"text\": \"Today, calculus powers everything from smartphone GPS to cancer treatment planning, from predicting weather to training AI. Whenever the real world changes — and it always does — calculus is the lens we reach for.\",\n      \"title\": \"Why This Matters to You\"\n    }\n  ]\n}",
      "outputTokens": 641,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-math-calculus-1",
      "userPrompt": "LESSON_TITLE: What is Calculus?\nLESSON_DESCRIPTION: The origins of calculus and why mathematicians needed a new way to describe change and motion\nCHAPTER_TITLE: Foundations\nCOURSE_TITLE: Calculus I\nLANGUAGE: en"
    },
    {
      "duration": 18174.301917000004,
      "inputTokens": 1787,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture a world where every living thing was believed to be exactly as it had always been. Tigers, tulips, and turtles — all fixed, unchanging, created in their current form since the beginning of time.\",\n      \"title\": \"A Frozen World\"\n    },\n    {\n      \"text\": \"But cracks kept appearing in this tidy picture. Miners dug up strange bones — giant lizards, enormous ferns, creatures no one had ever seen alive. If life never changed, why were these beings gone?\",\n      \"title\": \"Bones That Didn't Belong\"\n    },\n    {\n      \"text\": \"Naturalists noticed odd patterns too. Why did island birds look slightly different from their mainland cousins? Why did a whale's flipper have finger-like bones inside, just like a human hand?\",\n      \"title\": \"Unsettling Clues\"\n    },\n    {\n      \"text\": \"In 1831, a 22-year-old named Charles Darwin boarded the HMS Beagle for a five-year voyage around the world. He packed notebooks, jars, and an insatiable curiosity about the living world.\",\n      \"title\": \"A Young Man Sets Sail\"\n    },\n    {\n      \"text\": \"On the Galápagos Islands, Darwin found something astonishing. Each island had its own species of finch, with beaks shaped perfectly for the local food — seeds, insects, or cactus fruit.\",\n      \"title\": \"The Finches That Changed Everything\"\n    },\n    {\n      \"text\": \"A question haunted him for years: what if these finches shared a common ancestor, and their beaks slowly changed to match their environments? What if species weren't fixed at all?\",\n      \"title\": \"A Dangerous Idea Takes Shape\"\n    },\n    {\n      \"text\": \"Darwin noticed that animals produce more offspring than can survive. Those with traits better suited to their environment live longer and reproduce more. He called this natural selection.\",\n      \"title\": \"Survival of the Best Fit\"\n    },\n    {\n      \"text\": \"It's like a filter. Every generation, nature \\\"selects\\\" the individuals best equipped to thrive. Over thousands of generations, tiny advantages accumulate into dramatic transformations.\",\n      \"title\": \"Nature's Invisible Hand\"\n    },\n    {\n      \"text\": \"Darwin agonized for 20 years before publishing. He knew his idea would shake the foundations of science and society. In 1859, \\\"On the Origin of Species\\\" finally hit the shelves.\",\n      \"title\": \"Twenty Years of Doubt\"\n    },\n    {\n      \"text\": \"The reaction was explosive. Some celebrated a unifying explanation for life's diversity. Others were outraged. But the evidence — fossils, anatomy, geography — kept piling up in Darwin's favor.\",\n      \"title\": \"A World Divided\"\n    },\n    {\n      \"text\": \"Today, evolution is the backbone of biology. It explains antibiotic resistance, vaccine design, and why your DNA shares code with bananas. Every living thing on Earth is connected through one grand, branching tree.\",\n      \"title\": \"Why Evolution Matters Now\"\n    }\n  ]\n}",
      "outputTokens": 613,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-science-evolution-1",
      "userPrompt": "LESSON_TITLE: The Theory of Evolution\nLESSON_DESCRIPTION: How Darwin's observations led to a revolutionary understanding of how species change over time\nCHAPTER_TITLE: Life Science\nCOURSE_TITLE: Biology Fundamentals\nLANGUAGE: en"
    },
    {
      "duration": 26249.509708999998,
      "inputTokens": 1787,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture two neighbors arguing over a fence. One says the land is his because his father said so. The other claims it's hers because she planted trees on it. Both feel absolutely certain — but feelings aren't proof. Who's actually right, and how would you even decide?\",\n      \"title\": \"Two People, Two Truths\"\n    },\n    {\n      \"text\": \"For most of human history, arguments were settled by whoever spoke loudest, held the most power, or told the most persuasive story. Emotions ruled debate. A charismatic speaker could convince a crowd the sun was cold — and nobody had a reliable method to push back.\",\n      \"title\": \"When Loudness Won Arguments\"\n    },\n    {\n      \"text\": \"Ancient Greece was a pressure cooker. Citizens debated laws in public assemblies, lawyers argued cases in courts, and philosophers clashed in the marketplace. Getting tricked by a clever but flawed argument wasn't just embarrassing — it could cost you your property or your life.\",\n      \"title\": \"Athens Had a Problem\"\n    },\n    {\n      \"text\": \"Enter Aristotle, around 350 BCE. He asked a deceptively simple question: Are there rules for correct thinking — the way grammar has rules for correct sentences? Could you build a toolkit that exposes bad reasoning no matter how beautifully it's dressed up?\",\n      \"title\": \"Aristotle's Wild Idea\"\n    },\n    {\n      \"text\": \"He started cataloging patterns. \\\"All humans are mortal. Socrates is human. Therefore, Socrates is mortal.\\\" This wasn't just a clever observation — it was a recipe. If the ingredients are true and the pattern is valid, the conclusion must follow. No exceptions. No opinions.\",\n      \"title\": \"Recipes for Reasoning\"\n    },\n    {\n      \"text\": \"Think of it like a vending machine for truth. You feed in true statements, select a valid pattern, and out comes a guaranteed true conclusion. Logic doesn't care who you are, how you feel, or how loudly you shout. The machine works the same for everyone.\",\n      \"title\": \"A Truth Machine\"\n    },\n    {\n      \"text\": \"Aristotle also mapped out the ways thinking goes wrong — fallacies. Attacking a person instead of their argument. Assuming what you're trying to prove. Confusing coincidence with cause. Suddenly, humans had a vocabulary for calling out bad reasoning.\",\n      \"title\": \"Naming the Tricks\"\n    },\n    {\n      \"text\": \"For two thousand years, Aristotle's system was the gold standard. Then in the 1800s, thinkers like George Boole and Gottlob Frege supercharged logic with mathematical precision, creating formal systems powerful enough to eventually become the backbone of computers.\",\n      \"title\": \"Logic Gets an Upgrade\"\n    },\n    {\n      \"text\": \"Today, logic is everywhere you look — hiding inside every Google search, every courtroom verdict, every medical diagnosis. It's the invisible scaffolding beneath science, law, mathematics, and artificial intelligence. It shapes how we build knowledge itself.\",\n      \"title\": \"The Invisible Backbone\"\n    },\n    {\n      \"text\": \"So what is logic? It's humanity's ancient, ongoing attempt to find rules for thinking that work whether you're a Greek philosopher, a medieval monk, or someone scrolling their phone in 2024. It's the art of reasoning that doesn't depend on who's doing the reasoning.\",\n      \"title\": \"Why This Matters to You\"\n    }\n  ]\n}",
      "outputTokens": 705,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-philosophy-logic-1",
      "userPrompt": "LESSON_TITLE: What is Logic?\nLESSON_DESCRIPTION: The ancient quest to find reliable rules for correct thinking and argumentation\nCHAPTER_TITLE: Foundations of Reasoning\nCOURSE_TITLE: Introduction to Philosophy\nLANGUAGE: en"
    },
    {
      "duration": 24179.922875000004,
      "inputTokens": 1801,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Seu avô conta que comprava pão por centavos. Sua mãe lembra que um cafezinho custava quase nada. Você olha o preço hoje e pensa: \\\"O que aconteceu?\\\" Essa sensação de que tudo ficou mais caro tem nome — e uma história fascinante.\",\n      \"title\": \"O pão do seu avô\"\n    },\n    {\n      \"text\": \"Milhares de anos atrás, as pessoas trocavam mercadorias diretamente: galinhas por trigo, tecido por sal. Não existia \\\"preço\\\" subindo porque não existia dinheiro. O valor era negociado no olho, de pessoa para pessoa.\",\n      \"title\": \"Antes do dinheiro\"\n    },\n    {\n      \"text\": \"Quando moedas de ouro e prata surgiram, algo curioso aconteceu: reis começaram a misturar metais baratos nas moedas para fabricar mais delas. Resultado? Cada moeda valia menos — e os comerciantes passaram a cobrar mais.\",\n      \"title\": \"O truque dos reis\"\n    },\n    {\n      \"text\": \"No século XVI, a Espanha trouxe toneladas de ouro e prata da América. A Europa foi inundada de moedas. Com tanto dinheiro circulando, os preços dispararam. Foi a primeira grande inflação que os europeus sentiram na pele.\",\n      \"title\": \"Ouro demais, problema demais\"\n    },\n    {\n      \"text\": \"Imagine um leilão: se todo mundo chega com o bolso cheio de dinheiro, os lances sobem. É a mesma lógica. Quando há mais dinheiro perseguindo a mesma quantidade de produtos, os preços naturalmente aumentam.\",\n      \"title\": \"O leilão invisível\"\n    },\n    {\n      \"text\": \"O Brasil conhece bem essa história. Nos anos 80 e 90, os preços mudavam no mesmo dia. Supermercados remarcavam etiquetas enquanto você fazia compras. Salários derretiam antes de chegar ao fim do mês.\",\n      \"title\": \"O pesadelo brasileiro\"\n    },\n    {\n      \"text\": \"Famílias corriam ao supermercado no dia do pagamento, comprando tudo de uma vez. Guardar dinheiro era como segurar gelo — ele derretia nas suas mãos. A confiança na moeda quase desapareceu completamente.\",\n      \"title\": \"Corrida contra o relógio\"\n    },\n    {\n      \"text\": \"Em 1994, o Plano Real domou o monstro. Uma nova moeda, regras claras e um banco central firme trouxeram estabilidade. Os preços pararam de enlouquecer e as pessoas puderam planejar o futuro de novo.\",\n      \"title\": \"O Real entra em cena\"\n    },\n    {\n      \"text\": \"Inflação não é apenas um número no jornal. Ela decide se seu salário compra mais ou menos, se vale a pena poupar ou gastar, se um negócio sobrevive ou fecha. Ela molda silenciosamente cada decisão financeira da sua vida.\",\n      \"title\": \"Por que isso importa pra você\"\n    },\n    {\n      \"text\": \"Entender inflação é como ganhar um par de óculos novo: de repente você enxerga por que o aluguel subiu, por que o governo mexe nos juros e por que aquele investimento rendeu menos do que parecia. Tudo começa a fazer sentido.\",\n      \"title\": \"Os óculos da economia\"\n    }\n  ]\n}",
      "outputTokens": 805,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "pt-economics-inflation-1",
      "userPrompt": "LESSON_TITLE: O que é Inflação?\nLESSON_DESCRIPTION: Entendendo por que os preços sobem e como isso afeta a vida das pessoas\nCHAPTER_TITLE: Conceitos Básicos\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt"
    },
    {
      "duration": 26853.763832999997,
      "inputTokens": 1807,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagina a un humano primitivo viendo caer una fruta de un árbol. Cada día, todo caía hacia abajo. Las rocas, la lluvia, los ríos. Era tan obvio que nadie se preguntaba por qué. El suelo simplemente \\\"atraía\\\" las cosas, como si fuera su destino natural.\",\n      \"title\": \"Todo cae, nadie pregunta\"\n    },\n    {\n      \"text\": \"Los griegos antiguos intentaron explicarlo. Aristóteles dijo que cada objeto tenía un \\\"lugar natural\\\": las piedras pertenecían al suelo y el fuego al cielo. Las cosas caían porque querían volver a casa. Era poético, pero estaba completamente equivocado.\",\n      \"title\": \"La poesía de Aristóteles\"\n    },\n    {\n      \"text\": \"¿Y los planetas? Los griegos creían que giraban en esferas cristalinas perfectas alrededor de la Tierra. El cielo y el suelo eran mundos separados, con reglas distintas. Nadie imaginaba que una manzana y la Luna obedecieran la misma ley.\",\n      \"title\": \"El cielo y la tierra, divorciados\"\n    },\n    {\n      \"text\": \"En el siglo XVI, Copérnico movió el Sol al centro. Kepler descubrió que los planetas no viajaban en círculos perfectos, sino en elipses. Algo los empujaba, algo los curvaba. Pero nadie sabía qué fuerza invisible tiraba de ellos.\",\n      \"title\": \"Pistas en las órbitas\"\n    },\n    {\n      \"text\": \"Galileo dejó caer esferas desde torres y las deslizó por rampas. Descubrió algo revolucionario: todos los objetos caen a la misma velocidad, sin importar su peso. Una pluma y una bala de cañón, sin aire, tocarían el suelo al mismo tiempo.\",\n      \"title\": \"Galileo desafía lo obvio\"\n    },\n    {\n      \"text\": \"Llegó 1687. Un joven inglés de 24 años, aislado por la peste, observó el mundo desde su jardín. Isaac Newton se preguntó algo que nadie había conectado: ¿y si la fuerza que tira de la manzana es la misma que mantiene a la Luna en órbita?\",\n      \"title\": \"La pregunta que cambió todo\"\n    },\n    {\n      \"text\": \"Newton lo demostró con matemáticas: cada objeto con masa atrae a otro. La fuerza depende de las masas y de la distancia entre ellas. Una sola ecuación explicaba la caída de una piedra, la órbita de Júpiter y las mareas del océano.\",\n      \"title\": \"Una ley para gobernarlas todas\"\n    },\n    {\n      \"text\": \"De pronto, el universo dejó de ser misterioso y caprichoso. Se podían predecir eclipses, calcular trayectorias de cometas y hasta descubrir planetas invisibles solo con matemáticas. La gravedad convirtió el caos del cielo en un reloj predecible.\",\n      \"title\": \"El universo se volvió predecible\"\n    },\n    {\n      \"text\": \"Hoy, cada vez que lanzas una pelota, caminas sin flotar o ves la Luna en el cielo nocturno, estás experimentando esa misma fuerza invisible. La gravedad no solo explica por qué caen las cosas: es el pegamento que mantiene unido al cosmos entero.\",\n      \"title\": \"El hilo invisible del cosmos\"\n    }\n  ]\n}",
      "outputTokens": 829,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "es-physics-gravity-1",
      "userPrompt": "LESSON_TITLE: La Gravedad\nLESSON_DESCRIPTION: La historia de cómo los humanos entendieron por qué las cosas caen y los planetas orbitan\nCHAPTER_TITLE: Mecánica Clásica\nCOURSE_TITLE: Física para Principiantes\nLANGUAGE: es"
    },
    {
      "duration": 19986.508250000006,
      "inputTokens": 1789,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture a robot in a 1960s lab. You type \\\"What is the weather?\\\" and it replies perfectly. Type \\\"How's the weather?\\\" and it stares blankly. Early AI understood only exact phrases — like a vending machine that rejects slightly wrinkled bills.\",\n      \"title\": \"Talking to a Brick Wall\"\n    },\n    {\n      \"text\": \"For decades, engineers hand-wrote thousands of grammar rules, trying to teach machines every quirk of human language. \\\"If the user says X, respond with Y.\\\" It was like writing a dictionary for every possible conversation — an impossible task.\",\n      \"title\": \"The Rule Book Nightmare\"\n    },\n    {\n      \"text\": \"Human language is wild. We use sarcasm, slang, and context. \\\"I'm dying\\\" can mean laughter or an emergency. Rule-based systems crumbled under this chaos. The dream of truly conversational AI felt hopelessly out of reach.\",\n      \"title\": \"Language Is Messy\"\n    },\n    {\n      \"text\": \"What if, instead of writing rules, we let machines learn from examples? Statistical models began digesting massive amounts of text, spotting patterns humans never could. It was like teaching a child language — through exposure, not grammar drills.\",\n      \"title\": \"A Radical Idea: Let Machines Read\"\n    },\n    {\n      \"text\": \"In 2017, Google researchers published a paper called \\\"Attention Is All You Need.\\\" It introduced the Transformer — an architecture that could focus on relationships between words, no matter how far apart they sat in a sentence. A quiet revolution had begun.\",\n      \"title\": \"The Transformer Breakthrough\"\n    },\n    {\n      \"text\": \"Think of reading a novel. Your brain doesn't process one word at a time — you hold the whole scene in mind. Transformers mimic this with \\\"attention,\\\" weighing how every word relates to every other word simultaneously. Context, finally captured.\",\n      \"title\": \"Attention: The Secret Sauce\"\n    },\n    {\n      \"text\": \"Researchers then scaled this idea up — dramatically. Feed a Transformer billions of sentences from books, websites, and articles, give it enormous computing power, and something remarkable emerges: a Large Language Model, or LLM.\",\n      \"title\": \"Scaling to the Extraordinary\"\n    },\n    {\n      \"text\": \"LLMs don't memorize answers like a search engine. They learn the deep statistical fabric of language — how ideas connect, how arguments flow, how stories unfold. They predict the next word so well that their output feels genuinely intelligent.\",\n      \"title\": \"Not a Search Engine\"\n    },\n    {\n      \"text\": \"GPT, LLaMA, Claude — these models shocked the world. Suddenly, AI could write essays, summarize research, translate languages, debug code, and hold nuanced conversations. The rigid robots of the 1960s would be unrecognizable.\",\n      \"title\": \"A Cambrian Explosion\"\n    },\n    {\n      \"text\": \"From hand-coded rules to models that absorb the patterns of human thought at scale — LLMs represent one of the biggest leaps in AI history. Understanding them isn't just useful. It's essential for navigating the world being built around you right now.\",\n      \"title\": \"Why This Changes Everything\"\n    }\n  ]\n}",
      "outputTokens": 666,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-recent-topic-1",
      "userPrompt": "LESSON_TITLE: Large Language Models\nLESSON_DESCRIPTION: How AI went from rigid rule-based systems to models that can understand and generate human language\nCHAPTER_TITLE: Modern AI\nCOURSE_TITLE: Introduction to Machine Learning\nLANGUAGE: en"
    },
    {
      "duration": 22234.507124999996,
      "inputTokens": 1784,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Before set theory, math was like a workshop full of powerful tools — but no shelves to organize them. Numbers, shapes, functions — all floating around without a shared language to describe what they had in common.\",\n      \"title\": \"A Workshop Without Shelves\"\n    },\n    {\n      \"text\": \"By the 1800s, mathematics was exploding with new ideas. But weird contradictions kept popping up. Infinity was a minefield — could you compare infinities? Was one bigger than another? Mathematicians argued without resolution.\",\n      \"title\": \"The Infinity Problem\"\n    },\n    {\n      \"text\": \"Imagine two people debating whether a bag holds 'more' items than another — but they can't even agree on what a 'bag' is. That was math. There was no formal way to talk about collections of objects.\",\n      \"title\": \"No Common Language\"\n    },\n    {\n      \"text\": \"Enter Georg Cantor, a German mathematician in the 1870s who dared to ask: what if we could treat any well-defined collection of things — numbers, points, ideas — as a single mathematical object?\",\n      \"title\": \"Cantor's Bold Question\"\n    },\n    {\n      \"text\": \"He called these collections 'sets.' A set could hold anything: all even numbers, every point on a line, or just your three favorite primes. Simple? Yes. Revolutionary? Absolutely.\",\n      \"title\": \"A Deceptively Simple Idea\"\n    },\n    {\n      \"text\": \"Cantor proved something mind-bending: not all infinities are equal. The set of real numbers is genuinely 'larger' than the set of natural numbers. Infinity wasn't one thing — it was a whole landscape.\",\n      \"title\": \"Infinity Has Sizes\"\n    },\n    {\n      \"text\": \"The math world erupted. Some called Cantor a genius; others called his work a 'disease.' Henri Poincaré was horrified. Leopold Kronecker tried to block his publications. Cantor had touched a nerve.\",\n      \"title\": \"Controversy and Outrage\"\n    },\n    {\n      \"text\": \"But the power was undeniable. Set theory gave mathematicians a universal foundation — like discovering that every building, no matter how complex, could be described in terms of bricks and mortar.\",\n      \"title\": \"A Universal Foundation\"\n    },\n    {\n      \"text\": \"Logicians like Zermelo and Fraenkel refined Cantor's ideas into a rigorous system of axioms. Paradoxes were tamed. The messy workshop finally got its shelving system — and it held everything.\",\n      \"title\": \"Taming the Paradoxes\"\n    },\n    {\n      \"text\": \"Today, set theory is the bedrock of modern math. Functions, relations, probability, databases, algorithms — they all speak the language of sets. When you group, filter, or compare collections of data, you're using Cantor's gift.\",\n      \"title\": \"Why Sets Matter to You\"\n    }\n  ]\n}",
      "outputTokens": 604,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-abstract-topic-1",
      "userPrompt": "LESSON_TITLE: Set Theory\nLESSON_DESCRIPTION: Understanding why mathematicians needed a rigorous way to study collections of objects\nCHAPTER_TITLE: Advanced Concepts\nCOURSE_TITLE: Discrete Mathematics\nLANGUAGE: en"
    },
    {
      "duration": 23068.192500000005,
      "inputTokens": 1787,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture a giant room filled with metal filing cabinets stretching floor to ceiling. Need one customer's record? You'd walk the aisles, pull open drawers, and flip through hundreds of paper cards by hand.\",\n      \"title\": \"The Filing Cabinet Era\"\n    },\n    {\n      \"text\": \"As businesses grew after World War II, the paper nightmare exploded. Banks processed millions of checks. Airlines tracked thousands of flights. Finding one piece of information could take hours — or get lost forever.\",\n      \"title\": \"Drowning in Paper\"\n    },\n    {\n      \"text\": \"Early computers offered hope, but they stored data on punch cards and magnetic tape. Want a record near the end? You'd have to read through the entire tape, like fast-forwarding a cassette to find your favorite song.\",\n      \"title\": \"Tape Reels and Patience\"\n    },\n    {\n      \"text\": \"In the 1960s, IBM built systems where data was organized in rigid tree-like structures. Fast, yes — but changing how data was organized meant rewriting entire programs. It was like rebuilding a library every time you added a shelf.\",\n      \"title\": \"The First Attempts\"\n    },\n    {\n      \"text\": \"Then in 1970, a quiet mathematician named Edgar F. Codd at IBM published a paper that would change everything. His radical idea? Organize data into simple tables — rows and columns — like spreadsheets that could talk to each other.\",\n      \"title\": \"Codd's Revolutionary Insight\"\n    },\n    {\n      \"text\": \"Codd's relational model let you ask questions about your data in plain, logical terms without caring how it was physically stored. It separated the \\\"what\\\" from the \\\"how\\\" — a concept that felt almost magical.\",\n      \"title\": \"Ask Questions, Not Directions\"\n    },\n    {\n      \"text\": \"IBM hesitated, but a tiny startup called Oracle ran with the idea. By the 1980s, relational databases powered banks, hospitals, and governments. Data that took hours to find now appeared in milliseconds.\",\n      \"title\": \"From Theory to Reality\"\n    },\n    {\n      \"text\": \"Today, every time you search a product online, check your bank balance, or scroll social media, databases silently retrieve exactly what you need from billions of records — in the blink of an eye.\",\n      \"title\": \"The Invisible Engine\"\n    },\n    {\n      \"text\": \"From dusty filing cabinets to systems handling millions of queries per second, databases are the unsung backbone of the digital world. Understanding them means understanding how modern technology truly thinks.\",\n      \"title\": \"Why This Matters to You\"\n    }\n  ]\n}",
      "outputTokens": 524,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-engineering-databases-1",
      "userPrompt": "LESSON_TITLE: Introduction to Databases\nLESSON_DESCRIPTION: The history of how computers learned to organize and retrieve vast amounts of information\nCHAPTER_TITLE: Data Storage\nCOURSE_TITLE: Computer Science Fundamentals\nLANGUAGE: en"
    },
    {
      "duration": 19480.898417000004,
      "inputTokens": 1786,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture Paris in the 1860s. If you wanted to be a serious painter, there was one path: the Salon. This government-sponsored exhibition was your gallery, your resume, your entire career. A jury of old masters decided what \\\"real art\\\" looked like.\",\n      \"title\": \"One Door to Success\"\n    },\n    {\n      \"text\": \"\\\"Real art\\\" meant historical scenes, mythological heroes, and portraits so polished you couldn't see a single brushstroke. Paintings took months. Every shadow was blended to perfection. The canvas was a window — and the window had to be invisible.\",\n      \"title\": \"The Rules of the Game\"\n    },\n    {\n      \"text\": \"But a restless generation of young painters was bored to death. They didn't want to paint Greek gods in studios. They wanted to step outside and capture the shimmer of sunlight on water, the blur of a crowd, the fleeting glow of a sunset.\",\n      \"title\": \"Restless Rebels\"\n    },\n    {\n      \"text\": \"They hauled their easels into gardens, cafés, and riverbanks. They painted fast — impossibly fast — trying to catch a moment before the light shifted. Their brushstrokes were visible, almost rough. Traditionalists were horrified.\",\n      \"title\": \"Painting at the Speed of Light\"\n    },\n    {\n      \"text\": \"In 1874, the Salon rejected them again. So they did something radical: they organized their own show. Claude Monet hung a hazy sunrise titled \\\"Impression, Sunrise.\\\" A critic used the word \\\"Impressionism\\\" as an insult. The rebels adopted it as a badge of honor.\",\n      \"title\": \"The Exhibition That Changed Art\"\n    },\n    {\n      \"text\": \"Monet, Renoir, Degas, Morisot, Pissarro — they shattered centuries of tradition. They proved that a painting didn't need to be a perfect copy of reality. It could capture a feeling, a fleeting moment, the way light dances across skin.\",\n      \"title\": \"A New Way of Seeing\"\n    },\n    {\n      \"text\": \"Colors were placed side by side instead of mixed on a palette, letting your eye do the blending. Shadows weren't black — they were purple and blue. Everyday scenes replaced grand mythology. Art became alive and breathing.\",\n      \"title\": \"Color Unchained\"\n    },\n    {\n      \"text\": \"The establishment mocked them for years. But collectors slowly noticed. Galleries opened. By the 1880s, the movement had swept across Europe and inspired every modern art revolution that followed — from Post-Impressionism to Abstraction.\",\n      \"title\": \"From Ridicule to Revolution\"\n    },\n    {\n      \"text\": \"Next time you snap a photo with a dreamy filter, or notice how golden hour light transforms an ordinary street — that's Impressionist thinking. They taught us that how you see something matters as much as what you see.\",\n      \"title\": \"Why This Still Matters\"\n    }\n  ]\n}",
      "outputTokens": 612,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-art-impressionism-1",
      "userPrompt": "LESSON_TITLE: Impressionism\nLESSON_DESCRIPTION: How a group of rebellious painters changed the way we see and capture the world\nCHAPTER_TITLE: Art Movements\nCOURSE_TITLE: Art History\nLANGUAGE: en"
    },
    {
      "duration": 21740.141459000006,
      "inputTokens": 1796,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine viver numa aldeia onde todos se conhecem, as regras são claras e o futuro do seu filho já está traçado: ele fará o que o pai fez. Durante milênios, a vida social se explicava pela tradição, pela religião ou pela vontade dos reis.\",\n      \"title\": \"Um mundo que se explicava sozinho\"\n    },\n    {\n      \"text\": \"No final do século XVIII, tudo desaba. A Revolução Francesa derruba reis, a Revolução Industrial arranca camponeses do campo e os joga em cidades sujas e lotadas. Em poucas décadas, o mundo conhecido virou de cabeça para baixo.\",\n      \"title\": \"Quando tudo desmoronou\"\n    },\n    {\n      \"text\": \"Cidades cresciam sem parar. Fábricas engoliam crianças. Multidões famintas se amontoavam em cortiços. As velhas explicações — \\\"Deus quis assim\\\" ou \\\"sempre foi assim\\\" — já não convenciam ninguém. Algo novo precisava surgir.\",\n      \"title\": \"O caos pede respostas\"\n    },\n    {\n      \"text\": \"Filósofos começaram a perguntar: se podemos estudar os astros com método científico, por que não estudar a própria sociedade? Se existem leis da física, será que existem também leis que governam o convívio humano?\",\n      \"title\": \"E se a sociedade fosse um laboratório?\"\n    },\n    {\n      \"text\": \"Auguste Comte, um francês obcecado por ordem, cunhou o termo \\\"Sociologia\\\" em 1838. Sua ideia era audaciosa: aplicar o rigor da ciência para entender o caos social. Não mais opiniões — agora, observação e método.\",\n      \"title\": \"Nasce um nome, nasce uma ciência\"\n    },\n    {\n      \"text\": \"Mas foi Émile Durkheim quem transformou a ideia em disciplina de verdade. Ele provou que até algo tão íntimo quanto o suicídio seguia padrões sociais. A sociedade não era só cenário — ela moldava nossos atos mais profundos.\",\n      \"title\": \"Durkheim e a prova dos fatos\"\n    },\n    {\n      \"text\": \"Karl Marx mostrou que as relações econômicas dividiam as pessoas em classes com interesses opostos. Max Weber revelou que as crenças e valores também moviam a história. Cada um iluminou uma face diferente do mesmo enigma.\",\n      \"title\": \"Novas lentes, novas revelações\"\n    },\n    {\n      \"text\": \"A Sociologia nasceu de uma crise, mas nunca perdeu a relevância. Desigualdade, redes sociais, racismo, polarização política — tudo isso é matéria-prima sociológica. Entender a sociedade com método é o primeiro passo para transformá-la.\",\n      \"title\": \"Por que isso importa hoje\"\n    }\n  ]\n}",
      "outputTokens": 675,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "pt-social-sociology-1",
      "userPrompt": "LESSON_TITLE: O que é Sociologia?\nLESSON_DESCRIPTION: Como surgiu a necessidade de estudar cientificamente a sociedade e as relações humanas\nCHAPTER_TITLE: Introdução\nCOURSE_TITLE: Sociologia\nLANGUAGE: pt"
    },
    {
      "duration": 18456.253374999993,
      "inputTokens": 1783,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture a set of Russian nesting dolls. You open one, and there's a smaller one inside. Open that, and there's another. You keep going until you reach the tiniest doll at the center. That's recursion in a nutshell — solving a problem by solving smaller versions of itself.\",\n      \"title\": \"Dolls Inside Dolls\"\n    },\n    {\n      \"text\": \"Before recursion, early programmers wrote long, tangled loops to tackle problems that had repeating structures. Calculating factorials, traversing tree-like data, searching through mazes — the code was messy, hard to read, and even harder to trust.\",\n      \"title\": \"The Loop Spaghetti Era\"\n    },\n    {\n      \"text\": \"Mathematicians had a secret weapon long before computers existed. They defined things in terms of themselves. The factorial of 5? It's just 5 times the factorial of 4. And the factorial of 4? It's 4 times the factorial of 3. Elegant, simple, and infinitely powerful.\",\n      \"title\": \"Math Had the Answer All Along\"\n    },\n    {\n      \"text\": \"In the 1950s and 60s, languages like LISP embraced this mathematical trick. A function could call itself. Suddenly, problems that seemed impossibly complex could be expressed in just a few beautiful lines of code. Programmers were stunned.\",\n      \"title\": \"Functions That Call Themselves\"\n    },\n    {\n      \"text\": \"But there's a catch. Those nesting dolls need a tiniest doll — a stopping point. Without it, a recursive function calls itself forever, like two mirrors reflecting into infinity. That stopping point is called the base case, and it's the anchor that keeps everything from spiraling.\",\n      \"title\": \"The Danger of Infinite Mirrors\"\n    },\n    {\n      \"text\": \"Think of it like giving directions: \\\"Walk to the next street sign and follow whatever it says.\\\" If one sign eventually says \\\"You're here!\\\" you stop. That final sign is your base case. Every sign before it is a recursive step that moves you closer to the answer.\",\n      \"title\": \"Street Signs to the Destination\"\n    },\n    {\n      \"text\": \"Recursion unlocked entire fields. Sorting algorithms, file system navigation, game AI, fractals, language parsing — all elegantly expressed through functions that trust smaller copies of themselves to handle the work. It turned complexity into clarity.\",\n      \"title\": \"Unlocking a Universe of Problems\"\n    },\n    {\n      \"text\": \"Today, recursion is more than a technique — it's a way of thinking. When you learn to spot a problem hiding inside itself, you gain a superpower. You stop wrestling with complexity and start letting the problem solve itself, one layer at a time.\",\n      \"title\": \"Why Recursion Matters to You\"\n    }\n  ]\n}",
      "outputTokens": 583,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-narrow-topic-1",
      "userPrompt": "LESSON_TITLE: Recursion\nLESSON_DESCRIPTION: Understanding the elegant idea of functions that call themselves to solve complex problems\nCHAPTER_TITLE: Functions\nCOURSE_TITLE: Programming Fundamentals\nLANGUAGE: en"
    }
  ],
  "taskId": "activity-background"
}
