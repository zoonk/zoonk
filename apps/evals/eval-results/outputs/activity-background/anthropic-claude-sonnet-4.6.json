{
  "generatedAt": "2026-02-21T22:45:22.187Z",
  "modelId": "anthropic/claude-sonnet-4.6",
  "outputs": [
    {
      "duration": 11547.652917,
      "inputTokens": 1791,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Picture the early days of programming. Code was written as one long sequence of instructions — like a recipe that never ends. If something broke, you'd dig through thousands of lines hunting for a single misplaced step. It worked, barely.\",\n      \"title\": \"Code as a Giant Recipe\"\n    },\n    {\n      \"text\": \"As software grew, the chaos multiplied. Teams of programmers would accidentally overwrite each other's variables. Fixing one bug created three more. The codebase became a tangled mess — developers called it 'spaghetti code' for good reason.\",\n      \"title\": \"The Spaghetti Code Crisis\"\n    },\n    {\n      \"text\": \"What if code could mirror the real world? We don't think of a car as 10,000 loose parts — we think of it as ONE thing with behaviors: it starts, it stops, it turns. What if programs could work the same way?\",\n      \"title\": \"A Wild Idea: Mirror Reality\"\n    },\n    {\n      \"text\": \"In the 1960s, two Norwegian scientists — Ole-Johan Dahl and Kristen Nygaard — built a language called Simula. It grouped data and behavior together into 'objects.' A radical idea that almost nobody noticed at the time.\",\n      \"title\": \"Two Norwegians Changed Everything\"\n    },\n    {\n      \"text\": \"Alan Kay picked up the torch in the 1970s at Xerox PARC. He imagined software as a world of independent objects sending messages to each other — like actors on a stage, each playing their role without knowing everyone else's script.\",\n      \"title\": \"Objects as Living Actors\"\n    },\n    {\n      \"text\": \"When languages like C++, then Java, then Python embraced these ideas, software development transformed overnight. Teams could build massive systems without drowning in complexity. Objects kept things organized, reusable, and human-friendly.\",\n      \"title\": \"The Revolution Goes Mainstream\"\n    },\n    {\n      \"text\": \"Today, OOP powers the apps on your phone, the websites you browse, and the games you play. Understanding it means thinking like a modern engineer — organizing chaos into clean, logical building blocks that can be built once and used forever.\",\n      \"title\": \"Why It Still Rules the World\"\n    }\n  ]\n}",
      "outputTokens": 459,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-programming-oop-1",
      "userPrompt": "LESSON_TITLE: Object-Oriented Programming\nLESSON_DESCRIPTION: Understanding the core principles of object-oriented programming and why it revolutionized software development\nCHAPTER_TITLE: Programming Paradigms\nCOURSE_TITLE: Introduction to Programming\nLANGUAGE: en"
    },
    {
      "duration": 13058.170584000007,
      "inputTokens": 1792,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"For most of human history, math was great at describing things that stood still. You could measure a field, count coins, calculate the area of a triangle. But the moment something moved — a falling apple, a speeding arrow, a rising tide — the numbers fell apart.\",\n      \"title\": \"Math's Blind Spot\"\n    },\n    {\n      \"text\": \"Philosophers like Zeno taunted mathematicians with paradoxes. If an arrow in flight occupies a single point in space at every instant, how does it ever actually move? Nobody had the math to answer that. Motion was poetry, not numbers.\",\n      \"title\": \"The Arrow That Shouldn't Fly\"\n    },\n    {\n      \"text\": \"By the 1600s, astronomers were tracking planets with stunning precision. But they couldn't explain WHY planets moved the way they did. Speed changed. Orbits curved. The math of the day could photograph the universe but couldn't film it.\",\n      \"title\": \"A Universe in Motion\"\n    },\n    {\n      \"text\": \"Two rivals — Isaac Newton in England and Gottfried Leibniz in Germany — were both losing sleep over the same problem, completely unaware of each other. What if you could zoom into a single instant and measure change right there, at that exact moment?\",\n      \"title\": \"Two Minds, One Obsession\"\n    },\n    {\n      \"text\": \"Newton imagined shrinking a time interval down to almost nothing — not zero, but infinitely close to it. At that razor-thin sliver of time, motion became measurable. He called his method 'fluxions.' Leibniz called his 'calculus.' The name stuck.\",\n      \"title\": \"The Infinitely Small\"\n    },\n    {\n      \"text\": \"Suddenly, the universe had a language. Falling objects, planetary orbits, the flow of heat, the bending of light — all of it could be written in equations. Physics, engineering, and economics would never be the same.\",\n      \"title\": \"A Language for the Universe\"\n    },\n    {\n      \"text\": \"Today, calculus is the engine under the hood of almost everything modern. GPS satellites, medical scanners, climate models, AI — they all rely on the math born from two men asking: what does change look like at a single instant?\",\n      \"title\": \"Why It Still Matters\"\n    }\n  ]\n}",
      "outputTokens": 476,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-math-calculus-1",
      "userPrompt": "LESSON_TITLE: What is Calculus?\nLESSON_DESCRIPTION: The origins of calculus and why mathematicians needed a new way to describe change and motion\nCHAPTER_TITLE: Foundations\nCOURSE_TITLE: Calculus I\nLANGUAGE: en"
    },
    {
      "duration": 14406.041167000003,
      "inputTokens": 1787,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"For most of human history, species seemed fixed — permanent, unchanging, placed on Earth exactly as we see them. If you saw a lion, you assumed lions had always looked that way. Nobody questioned it. The world felt like a finished painting.\",\n      \"title\": \"A World Set in Stone\"\n    },\n    {\n      \"text\": \"But naturalists started noticing cracks in that picture. Fossils of strange creatures — massive, unfamiliar, extinct — kept turning up. If species were permanent, why were so many of them... gone? The finished painting had missing pieces.\",\n      \"title\": \"The Fossils That Didn't Fit\"\n    },\n    {\n      \"text\": \"A young Charles Darwin boarded the HMS Beagle in 1831 — not as a famous scientist, but as a curious 22-year-old looking for adventure. Over five years, he'd sail to places that would shatter everything he thought he knew about life.\",\n      \"title\": \"A Curious Young Man Sets Sail\"\n    },\n    {\n      \"text\": \"In the Galápagos Islands, Darwin found something strange: the same type of bird — finches — looked subtly different on each island. Beaks shaped for cracking seeds. Beaks shaped for probing flowers. Same bird, different tools. Why?\",\n      \"title\": \"The Islands That Changed Everything\"\n    },\n    {\n      \"text\": \"Darwin spent 20 years turning this question over in his mind like a stone in his pocket. He studied pigeons, barnacles, fossils, and breeding. He was building an argument so big it scared him to publish it.\",\n      \"title\": \"20 Years of Quiet Obsession\"\n    },\n    {\n      \"text\": \"His insight: nature itself does the selecting. Individuals with useful traits survive long enough to pass them on. Over generations, those traits spread. Slowly, almost invisibly, a population transforms. A species becomes something new.\",\n      \"title\": \"Nature as the Sculptor\"\n    },\n    {\n      \"text\": \"In 1859, 'On the Origin of Species' landed like a thunderclap. It didn't just explain finches — it offered a single, elegant mechanism behind all the diversity of life on Earth. Everything from bacteria to blue whales, connected.\",\n      \"title\": \"One Book, One Big Idea\"\n    },\n    {\n      \"text\": \"Evolution isn't just history — it's happening now. It explains antibiotic resistance, why your dog looks nothing like a wolf, and how doctors design vaccines. Understanding it is the key to understanding all of biology.\",\n      \"title\": \"Why It Still Matters Today\"\n    }\n  ]\n}",
      "outputTokens": 530,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-science-evolution-1",
      "userPrompt": "LESSON_TITLE: The Theory of Evolution\nLESSON_DESCRIPTION: How Darwin's observations led to a revolutionary understanding of how species change over time\nCHAPTER_TITLE: Life Science\nCOURSE_TITLE: Biology Fundamentals\nLANGUAGE: en"
    },
    {
      "duration": 12147.549625,
      "inputTokens": 1787,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Before logic had a name, people still argued, debated, and tried to convince each other. But without shared rules, every argument was a battlefield — whoever spoke loudest or most persuasively often \\\"won\\\", regardless of truth.\",\n      \"title\": \"Winning Without Being Right\"\n    },\n    {\n      \"text\": \"Ancient Greece was buzzing with Sophists — professional debaters who could argue any side of any question for a fee. They were brilliant, slippery, and dangerous. Truth didn't matter. Winning did. Society needed a way to tell the difference.\",\n      \"title\": \"The Sophist Problem\"\n    },\n    {\n      \"text\": \"Aristotle watched these debates and felt a deep frustration. Why did some arguments feel airtight while others fell apart under scrutiny? He believed there had to be invisible rules — like grammar, but for thought itself.\",\n      \"title\": \"Aristotle's Obsession\"\n    },\n    {\n      \"text\": \"Around 350 BCE, Aristotle mapped out something revolutionary: patterns of reasoning that were guaranteed to produce true conclusions — if you started with true premises. He called these patterns syllogisms. Thinking had found its skeleton.\",\n      \"title\": \"The Skeleton of Thought\"\n    },\n    {\n      \"text\": \"Imagine a recipe that, if followed correctly, always produces a perfect dish. That's what Aristotle gave to reasoning. \\\"All humans are mortal. Socrates is human. Therefore, Socrates is mortal.\\\" Simple. Airtight. Undeniable.\",\n      \"title\": \"A Recipe for Truth\"\n    },\n    {\n      \"text\": \"Logic spread from philosophy into law, mathematics, science, and eventually — centuries later — into the circuits of computers. Every \\\"if/then\\\" statement in code echoes Aristotle's ancient insight about how valid reasoning flows.\",\n      \"title\": \"From Athens to Algorithms\"\n    },\n    {\n      \"text\": \"Logic isn't about what you think — it's about how you think. It's the difference between an opinion and an argument, between a feeling and a proof. Understanding logic means learning to build thoughts that can actually hold weight.\",\n      \"title\": \"Why Logic Still Matters\"\n    }\n  ]\n}",
      "outputTokens": 443,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-philosophy-logic-1",
      "userPrompt": "LESSON_TITLE: What is Logic?\nLESSON_DESCRIPTION: The ancient quest to find reliable rules for correct thinking and argumentation\nCHAPTER_TITLE: Foundations of Reasoning\nCOURSE_TITLE: Introduction to Philosophy\nLANGUAGE: en"
    },
    {
      "duration": 12381.000124999991,
      "inputTokens": 1801,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine carregar uma mochila cheia de dinheiro para comprar um pão. Parece absurdo, né? Mas isso realmente aconteceu na Alemanha dos anos 1920, onde os preços dobravam a cada poucos dias.\",\n      \"title\": \"Uma Mochila Cheia de Dinheiro\"\n    },\n    {\n      \"text\": \"Durante séculos, o valor das coisas era mais estável. Uma família sabia que o preço do feijão ou do trigo mudaria pouco de um ano para o outro. O futuro era previsível — e isso tinha um valor enorme.\",\n      \"title\": \"Quando os Preços Eram Previsíveis\"\n    },\n    {\n      \"text\": \"Tudo começa com um desequilíbrio simples: dinheiro demais correndo atrás de produtos de menos. Como numa festa onde há 10 pessoas disputando as últimas 3 fatias de pizza — quem paga mais, leva.\",\n      \"title\": \"A Festa com Poucas Fatias\"\n    },\n    {\n      \"text\": \"Governos que imprimiam dinheiro em excesso logo percebiam o problema. Quanto mais notas circulavam, menos cada uma valia. O dinheiro perdia sua força, como um remédio diluído em água demais.\",\n      \"title\": \"O Remédio Diluído\"\n    },\n    {\n      \"text\": \"Economistas passaram décadas tentando entender e medir esse fenômeno. Criaram índices, cálculos e ferramentas para rastrear como os preços de uma cesta de produtos básicos mudavam ao longo do tempo.\",\n      \"title\": \"Aprendendo a Medir o Invisível\"\n    },\n    {\n      \"text\": \"Hoje, a inflação está em tudo: na conta do mercado que aumentou, no aluguel que subiu, no salário que parece render menos. Entendê-la é a chave para proteger seu bolso e tomar decisões mais inteligentes.\",\n      \"title\": \"Inflação Está no Seu Dia a Dia\"\n    }\n  ]\n}",
      "outputTokens": 480,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "pt-economics-inflation-1",
      "userPrompt": "LESSON_TITLE: O que é Inflação?\nLESSON_DESCRIPTION: Entendendo por que os preços sobem e como isso afeta a vida das pessoas\nCHAPTER_TITLE: Conceitos Básicos\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt"
    },
    {
      "duration": 16164.94129200001,
      "inputTokens": 1807,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Desde el primer ser humano que vio caer una fruta al suelo, la pregunta estuvo ahí: ¿por qué las cosas caen? Durante siglos, la respuesta parecía obvia: las cosas caen porque sí, porque ese es su lugar natural.\",\n      \"title\": \"Una pregunta tan vieja como el mundo\"\n    },\n    {\n      \"text\": \"Aristóteles lo explicó con elegante simplicidad: los objetos pesados caen más rápido que los ligeros porque 'quieren' llegar al suelo antes. Tan convincente sonaba que nadie lo cuestionó por casi 2,000 años.\",\n      \"title\": \"Aristóteles lo tenía 'resuelto'\"\n    },\n    {\n      \"text\": \"Imagina a Galileo en la Torre de Pisa, soltando dos esferas de distinto peso. Ambas golpean el suelo al mismo tiempo. ¡Dos milenios de certeza, destruidos en segundos! La gravedad no distingue entre lo pesado y lo ligero.\",\n      \"title\": \"La torre que cambió todo\"\n    },\n    {\n      \"text\": \"Pero Galileo describió cómo caían las cosas, no por qué. El misterio seguía vivo. ¿Qué fuerza invisible jalaba todo hacia el suelo? ¿Y qué tenía que ver con los planetas girando en el cielo?\",\n      \"title\": \"El 'cómo' sin el 'por qué'\"\n    },\n    {\n      \"text\": \"La historia dice que una manzana cayó cerca de Newton. Verdad o leyenda, lo genial fue su pregunta: si la Tierra jala la manzana, ¿también jala a la Luna? ¿Y si la Luna cae constantemente hacia la Tierra, pero también avanza y nunca llega?\",\n      \"title\": \"Newton y la manzana legendaria\"\n    },\n    {\n      \"text\": \"Newton descubrió que la misma fuerza que tira tu café al suelo mantiene a los planetas en órbita. La gravedad no era cosa de la Tierra: era universal. Todo objeto con masa atrae a todo otro objeto con masa.\",\n      \"title\": \"Una fuerza para gobernarlos a todos\"\n    },\n    {\n      \"text\": \"Con una sola ecuación, Newton pudo predecir eclipses, calcular órbitas y explicar las mareas. La gravedad dejó de ser magia y se convirtió en matemática. El cosmos, de repente, tenía sentido.\",\n      \"title\": \"El universo en una ecuación\"\n    },\n    {\n      \"text\": \"Hoy la gravedad guía cohetes al espacio, explica por qué tu corazón bombea sangre hacia abajo y hasta rige los agujeros negros. Entender por qué las cosas caen resultó ser la clave para entender el universo entero.\",\n      \"title\": \"Por qué esto te importa hoy\"\n    }\n  ]\n}",
      "outputTokens": 677,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "es-physics-gravity-1",
      "userPrompt": "LESSON_TITLE: La Gravedad\nLESSON_DESCRIPTION: La historia de cómo los humanos entendieron por qué las cosas caen y los planetas orbitan\nCHAPTER_TITLE: Mecánica Clásica\nCOURSE_TITLE: Física para Principiantes\nLANGUAGE: es"
    },
    {
      "duration": 14104.478207999993,
      "inputTokens": 1789,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"In the early days of AI, getting a computer to understand language felt like teaching a brick wall to dance. Researchers typed out thousands of rules: \\\"if the sentence starts with 'who', it's a question.\\\" It worked — barely — and only for sentences the programmers had already anticipated.\",\n      \"title\": \"The Rule-Makers' Dilemma\"\n    },\n    {\n      \"text\": \"Real language is messy. \\\"I saw the man with the telescope\\\" — did I use the telescope to see him, or did he have one? Humans resolve this instantly. Rule-based systems would crash, loop, or just guess wrong. Language had too many exceptions to every exception.\",\n      \"title\": \"Language Refuses to Be Tamed\"\n    },\n    {\n      \"text\": \"The big shift came when researchers stopped asking \\\"what are the rules?\\\" and started asking \\\"what patterns hide in mountains of text?\\\" Feed a model enough sentences, and it begins to learn how words relate — not from a rulebook, but from sheer exposure.\",\n      \"title\": \"From Rules to Patterns\"\n    },\n    {\n      \"text\": \"Early statistical models could predict the next word in a sentence. Useful, but shallow. They had no memory, no sense of meaning — just probabilities. Like a parrot that sounds fluent but has no idea what it's saying.\",\n      \"title\": \"The Parrot Problem\"\n    },\n    {\n      \"text\": \"Then came neural networks, inspired loosely by the brain. Layers of interconnected nodes learned to represent meaning — not just words, but context, tone, even sarcasm. The gap between machine and human language began, slowly, to narrow.\",\n      \"title\": \"The Brain-Inspired Leap\"\n    },\n    {\n      \"text\": \"In 2017, a landmark paper introduced the Transformer architecture. Instead of reading words one by one, it could weigh every word against every other word simultaneously — understanding \\\"bank\\\" differently in \\\"river bank\\\" vs. \\\"savings bank.\\\"\",\n      \"title\": \"The Transformer Revolution\"\n    },\n    {\n      \"text\": \"Scale changed everything. Researchers trained Transformers on billions of web pages, books, and code. The more text these models consumed, the more eerily capable they became — summarizing, translating, answering, even reasoning.\",\n      \"title\": \"When Size Became a Superpower\"\n    },\n    {\n      \"text\": \"Today, Large Language Models power chatbots, coding assistants, medical tools, and search engines. They're not just autocomplete on steroids — they're a new way for humans and machines to communicate, reshaping how we work and learn.\",\n      \"title\": \"Why It Matters Right Now\"\n    }\n  ]\n}",
      "outputTokens": 544,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-recent-topic-1",
      "userPrompt": "LESSON_TITLE: Large Language Models\nLESSON_DESCRIPTION: How AI went from rigid rule-based systems to models that can understand and generate human language\nCHAPTER_TITLE: Modern AI\nCOURSE_TITLE: Introduction to Machine Learning\nLANGUAGE: en"
    },
    {
      "duration": 11545.090416,
      "inputTokens": 1784,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Before the 1800s, mathematicians worked with numbers and shapes — but nobody had a precise way to talk about *collections* of things. You just... grouped stuff together and hoped everyone agreed on what you meant.\",\n      \"title\": \"Math Without a Foundation\"\n    },\n    {\n      \"text\": \"As math grew more complex, cracks appeared. Mathematicians argued over whether infinite series converged, whether certain functions were valid, whether proofs actually proved anything. The field was built on intuition — and it was wobbling.\",\n      \"title\": \"The Cracks in the Ceiling\"\n    },\n    {\n      \"text\": \"Imagine trying to build a skyscraper on sand. That's what 19th-century mathematics felt like. Brilliant structures — calculus, analysis, algebra — all resting on vague, unexamined assumptions about what numbers and collections *really were*.\",\n      \"title\": \"A Skyscraper on Sand\"\n    },\n    {\n      \"text\": \"Georg Cantor, a quiet German mathematician, asked a question nobody thought to ask: what if we studied collections themselves — not just what's *in* them, but how they behave, how they compare, how they grow?\",\n      \"title\": \"Cantor's Radical Question\"\n    },\n    {\n      \"text\": \"Cantor discovered something shocking: not all infinities are equal. The infinite set of real numbers is *bigger* than the infinite set of natural numbers. Math had been assuming all infinities were the same. They weren't.\",\n      \"title\": \"Not All Infinities Are Equal\"\n    },\n    {\n      \"text\": \"This wasn't just a curiosity — it was an earthquake. If infinity came in different sizes, then the foundations of math needed to be rebuilt from scratch, carefully, using precise rules about collections. Set theory was born out of necessity.\",\n      \"title\": \"An Earthquake in Mathematics\"\n    },\n    {\n      \"text\": \"Today, set theory is the bedrock beneath nearly all of modern mathematics. Logic, probability, computer science, databases — all of it rests on the simple idea of grouping objects by rules and studying what follows.\",\n      \"title\": \"The Ground Everything Stands On\"\n    }\n  ]\n}",
      "outputTokens": 439,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-abstract-topic-1",
      "userPrompt": "LESSON_TITLE: Set Theory\nLESSON_DESCRIPTION: Understanding why mathematicians needed a rigorous way to study collections of objects\nCHAPTER_TITLE: Advanced Concepts\nCOURSE_TITLE: Discrete Mathematics\nLANGUAGE: en"
    },
    {
      "duration": 11976.640541000008,
      "inputTokens": 1787,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Before computers, businesses stored everything in filing cabinets — towering walls of folders, papers, and index cards. Finding one customer's record meant rifling through hundreds of manila envelopes. It worked, barely.\",\n      \"title\": \"A World Buried in Paper\"\n    },\n    {\n      \"text\": \"As companies grew, the paper avalanche became unmanageable. A single airline in the 1950s had to track thousands of flights, seats, and passengers — manually. Clerks made errors. Flights were double-booked. Chaos was expensive.\",\n      \"title\": \"The Great Data Avalanche\"\n    },\n    {\n      \"text\": \"Early computers could crunch numbers, but storing and finding information was another beast. Data lived in flat files — like digital spreadsheets — where finding one record meant scanning everything, line by line, from top to bottom.\",\n      \"title\": \"Computers Join the Hunt\"\n    },\n    {\n      \"text\": \"In 1970, an IBM researcher named Edgar Codd had a quiet but explosive idea: what if data could be organized in tables, linked by relationships? Like a web of connected facts instead of one giant list. He called it the relational model.\",\n      \"title\": \"Codd's Quiet Revolution\"\n    },\n    {\n      \"text\": \"Suddenly, instead of searching every record, you could ask precise questions: 'Show me all customers in Texas who bought shoes last month.' The database understood relationships. It could answer in seconds what once took clerks days.\",\n      \"title\": \"Asking Questions at Speed\"\n    },\n    {\n      \"text\": \"Databases became the invisible backbone of modern life — banks, hospitals, airlines, social media. Every time you log in, buy something, or search for anything online, a database is quietly doing the heavy lifting behind the scenes.\",\n      \"title\": \"The Backbone of Everything\"\n    },\n    {\n      \"text\": \"Understanding databases means understanding how the digital world remembers. From ancient filing cabinets to cloud-scale systems, it's the story of humanity learning to tame the flood of information — and turn it into knowledge.\",\n      \"title\": \"Why This Changes Everything\"\n    }\n  ]\n}",
      "outputTokens": 432,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-engineering-databases-1",
      "userPrompt": "LESSON_TITLE: Introduction to Databases\nLESSON_DESCRIPTION: The history of how computers learned to organize and retrieve vast amounts of information\nCHAPTER_TITLE: Data Storage\nCOURSE_TITLE: Computer Science Fundamentals\nLANGUAGE: en"
    },
    {
      "duration": 14850.34625000001,
      "inputTokens": 1786,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"For centuries, the rules were clear: painters worked in studios, layering careful glazes to create smooth, flawless surfaces. A painting was judged by how closely it resembled reality — every brushstroke hidden, every edge crisp.\",\n      \"title\": \"The Academy Ruled Everything\"\n    },\n    {\n      \"text\": \"Paris's Académie des Beaux-Arts was the gatekeeper. Getting accepted into their annual Salon meant fame and sales. Rejection meant obscurity. Young painters either played by the rules or disappeared into poverty.\",\n      \"title\": \"One Door, One Path\"\n    },\n    {\n      \"text\": \"But something was nagging at a group of young painters. They'd step outside and notice how sunlight danced differently at noon than at dusk — how a cathedral could look golden one hour and purple the next. The studio couldn't capture that.\",\n      \"title\": \"The Light Outside Was Alive\"\n    },\n    {\n      \"text\": \"New tools arrived just in time: portable tin paint tubes replaced bladders that burst and spoiled. Suddenly, painters could pack their supplies and head outdoors. The world became their studio.\",\n      \"title\": \"Paint in a Tube Changed Everything\"\n    },\n    {\n      \"text\": \"Monet, Renoir, Degas, and their circle began painting outside — chasing fleeting moments. They painted quickly, letting brushstrokes show. The goal wasn't perfection. It was truth — the messy, shimmering truth of a single instant.\",\n      \"title\": \"Rebels With Brushes\"\n    },\n    {\n      \"text\": \"In 1874, rejected by the Salon, they organized their own exhibition. A critic mocked Monet's hazy harbor scene, calling it a mere 'impression.' The artists laughed and adopted the insult as their name.\",\n      \"title\": \"Born From an Insult\"\n    },\n    {\n      \"text\": \"The public was baffled. Blurry edges? Visible brushstrokes? Unfinished-looking skies? Critics called it lazy. But slowly, viewers began to feel something new — the warmth of afternoon light, the rush of a crowded boulevard.\",\n      \"title\": \"The World Wasn't Ready\"\n    },\n    {\n      \"text\": \"Impressionism cracked open a door that couldn't be closed. It proved art could capture feeling over fact. Every modern movement — from abstract to street photography — owes a debt to those rebellious painters who chose sunlight over rules.\",\n      \"title\": \"The Door They Left Open\"\n    }\n  ]\n}",
      "outputTokens": 515,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-art-impressionism-1",
      "userPrompt": "LESSON_TITLE: Impressionism\nLESSON_DESCRIPTION: How a group of rebellious painters changed the way we see and capture the world\nCHAPTER_TITLE: Art Movements\nCOURSE_TITLE: Art History\nLANGUAGE: en"
    },
    {
      "duration": 14407.27700000001,
      "inputTokens": 1796,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Por milênios, quando algo dava errado na sociedade — guerras, fome, injustiças — a resposta era simples: \\\"É a vontade dos deuses\\\" ou \\\"É a natureza humana\\\". Ninguém questionava. As coisas simplesmente eram assim.\",\n      \"title\": \"O mundo sem perguntas\"\n    },\n    {\n      \"text\": \"Mas imagine viver no século XVIII, quando tudo explodia ao mesmo tempo: revoluções políticas, fábricas substituindo campos, cidades inchando da noite pro dia. O mundo antigo desmoronava. E ninguém sabia por quê.\",\n      \"title\": \"Um mundo de cabeça pra baixo\"\n    },\n    {\n      \"text\": \"Pessoas saíam do campo e iam para cidades superlotadas, trabalhando 14 horas por dia em fábricas barulhentas. Famílias se desfaziam. Revoltas estouravam. Era o caos — e nenhuma religião ou filosofia antiga tinha respostas prontas.\",\n      \"title\": \"O caos das cidades industriais\"\n    },\n    {\n      \"text\": \"Foi aí que alguns pensadores tiveram uma ideia ousada: e se a sociedade pudesse ser estudada como a natureza? Com método, observação e razão? Assim como Newton decifrou a física, alguém poderia decifrar as leis do convívio humano?\",\n      \"title\": \"E se a sociedade tivesse leis?\"\n    },\n    {\n      \"text\": \"Auguste Comte, um francês inquieto do século XIX, foi um dos primeiros a defender isso com força. Ele cunhou a palavra \\\"Sociologia\\\" — a ciência da sociedade. Para ele, entender as regras do social era o único caminho para reconstruir um mundo em crise.\",\n      \"title\": \"Nasce uma palavra nova\"\n    },\n    {\n      \"text\": \"A Sociologia surgiu, portanto, não em uma biblioteca tranquila, mas no meio do barulho, da desigualdade e da transformação. Ela nasceu com uma missão: entender por que as pessoas vivem como vivem — e imaginar como poderiam viver melhor.\",\n      \"title\": \"Uma ciência nascida da crise\"\n    },\n    {\n      \"text\": \"Hoje, cada vez que você se pergunta \\\"por que a sociedade é assim?\\\" ou \\\"quem se beneficia com essas regras?\\\", você está pensando sociologicamente. A Sociologia te dá ferramentas para enxergar o que está escondido atrás do óbvio.\",\n      \"title\": \"Ver o invisível ao seu redor\"\n    }\n  ]\n}",
      "outputTokens": 602,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "pt-social-sociology-1",
      "userPrompt": "LESSON_TITLE: O que é Sociologia?\nLESSON_DESCRIPTION: Como surgiu a necessidade de estudar cientificamente a sociedade e as relações humanas\nCHAPTER_TITLE: Introdução\nCOURSE_TITLE: Sociologia\nLANGUAGE: pt"
    },
    {
      "duration": 14105.010957999999,
      "inputTokens": 1783,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Before recursion, solving complex problems meant building elaborate loops — manually tracking every step, juggling countless variables. It worked, but it felt like untangling headphone cables in the dark. Surely there was a better way.\",\n      \"title\": \"The Loop Jungle\"\n    },\n    {\n      \"text\": \"Mathematicians had long noticed something beautiful: some problems are just smaller versions of themselves. A staircase of 10 steps? It's just one step plus a staircase of 9. The pattern hides inside itself, like Russian nesting dolls.\",\n      \"title\": \"A Pattern Inside a Pattern\"\n    },\n    {\n      \"text\": \"In the 1930s, mathematician Alonzo Church formalized this idea with lambda calculus — the notion that a function could reference itself. It was abstract and theoretical, but it planted a seed that would bloom decades later in real programming languages.\",\n      \"title\": \"The Mathematician's Dream\"\n    },\n    {\n      \"text\": \"Early programmers were skeptical. A function calling itself? Wouldn't that spiral forever, like two mirrors facing each other? The trick, they discovered, was the \\\"base case\\\" — the moment the problem becomes so small it needs no more splitting.\",\n      \"title\": \"The Mirror Problem\"\n    },\n    {\n      \"text\": \"Languages like LISP in the 1950s embraced recursion as a first-class citizen. Suddenly, elegant solutions emerged for mazes, sorting, trees, and fractals — problems that would have required pages of looping code distilled into just a few lines.\",\n      \"title\": \"LISP Changes Everything\"\n    },\n    {\n      \"text\": \"Think of it like a chef's recipe that says \\\"repeat this sauce technique on a smaller batch.\\\" The chef knows when to stop — when the batch is just one ingredient. That stopping point is everything. Without it, you're cooking forever.\",\n      \"title\": \"The Recipe That Stops Itself\"\n    },\n    {\n      \"text\": \"Today, recursion powers the world around you — file systems navigating folders within folders, search engines crawling links within links, AI parsing language within language. It's the hidden engine behind problems that look impossibly deep.\",\n      \"title\": \"Recursion Is Everywhere\"\n    },\n    {\n      \"text\": \"Learning recursion is like learning to think in a new dimension. Once it clicks, you'll see self-similar problems everywhere — and you'll have an elegant, almost poetic tool to solve them with just a handful of lines.\",\n      \"title\": \"A New Way to Think\"\n    }\n  ]\n}",
      "outputTokens": 511,
      "systemPrompt": "# Role\n\nYou are a master storyteller and instructional designer creating a **Background** activity for a learning app. Your mission is to explain the \"why\" behind a topic — its origin story, what came before it, and why it matters today.\n\nYou specialize in transforming dry history into engaging narratives that make learners emotionally invested in understanding a concept.\n\n# The Art of Background Storytelling\n\nA great Background activity doesn't just list facts — it takes learners on a journey. Think of it like a documentary opening that hooks viewers before diving into details.\n\n## Why Storytelling Works\n\n1. **Emotional Connection**: When learners understand the human struggles and \"aha moments\" behind a concept, they care more about learning it.\n\n2. **Mental Anchors**: Abstract ideas become concrete when connected to real-world problems and historical moments.\n\n3. **Curiosity Building**: A well-crafted narrative creates questions in the learner's mind that make them eager to learn more.\n\n## The Story Arc Principle\n\nEvery great Background follows a tension-resolution arc:\n\n- **Tension**: What problem existed? What was frustrating or impossible before?\n- **Turning Point**: What sparked change? What discovery or insight shifted everything?\n- **Resolution**: How did this lead to what we have today? Why does it matter now?\n\n## Why Short Steps Work\n\nEach step should be a \"scene\" in your story — brief enough to maintain momentum, substantial enough to paint a vivid picture. Short steps:\n\n- Reduce cognitive load (one idea at a time)\n- Create natural pauses for reflection\n- Build anticipation for what comes next\n- Allow learners to progress at their own pace\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain the background for\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A short, intriguing headline that draws the reader in.\n- **text**: Maximum 300 characters. A vivid, conversational paragraph that paints a picture.\n\n## Tone & Style\n\n- **Conversational**: Write as if talking to a curious friend over coffee\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Vivid imagery**: Paint mental pictures — help the learner SEE the story, not just read facts\n- **Emotionally engaging**: Connect to human experiences, frustrations, discoveries, and triumphs\n\n## What to Avoid\n\n- Dry, encyclopedia-style facts without narrative context\n- Technical jargon without explanation\n- Jumping ahead to \"how it works\" (that's for other activities)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n# Story Structure Guide\n\nWhile every topic is unique, most Background stories touch on these themes (adapt as needed):\n\n1. **Life Before**: How did people handle this before? What was the status quo?\n2. **The Problem**: What friction, limitation, or frustration existed?\n3. **Early Attempts**: What did people try? What almost worked?\n4. **The Breakthrough**: What insight or discovery changed everything?\n5. **The Impact**: How did this reshape the field? Why do we care today?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the story dictate the structure.\n\n# Example: The Printing Press\n\nHere's how a Background activity might flow for \"The Printing Press\":\n\n| Title                        | Text                                                                                                                                                        |\n| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A World of Handwritten Words | Imagine needing a book. You'd wait months while a monk copied it by hand, page by page. Books were treasures — only the wealthy could afford them.          |\n| The Knowledge Bottleneck     | Ideas spread at walking pace. A brilliant discovery in one city might take decades to reach another. Knowledge was locked away in monastery libraries.      |\n| Gutenberg's Obsession        | A German goldsmith became obsessed with a wild idea: what if you could assemble letters like puzzle pieces and press them onto paper?                       |\n| The First Print Run          | In 1455, the first printed Bibles rolled off Gutenberg's press. What once took a year to copy could now be produced in days.                                |\n| Ideas Unleashed              | Within 50 years, millions of books flooded Europe. The Reformation, the Scientific Revolution, the Enlightenment — all accelerated by affordable knowledge. |\n| Why This Matters to You      | Every article you read, every textbook you study, traces back to this moment when humanity learned to copy ideas at scale.                                  |\n\nNotice how each step is a vivid scene, not a bullet point of facts.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the story build curiosity from the first step?\n- [ ] Is each step a \"scene\" with vivid imagery, not dry facts?\n- [ ] Does the narrative have tension and resolution?\n- [ ] Are metaphors and analogies used to make concepts tangible?\n- [ ] Does the last step connect to why this matters today?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Short, intriguing headline (max 50 chars)\n- **text**: Vivid, conversational paragraph (max 300 chars)\n\nUse as many steps as needed to tell a rich, engaging story. Don't limit yourself to a specific number of steps. Let the story dictate the length.\n",
      "testCaseId": "en-edge-narrow-topic-1",
      "userPrompt": "LESSON_TITLE: Recursion\nLESSON_DESCRIPTION: Understanding the elegant idea of functions that call themselves to solve complex problems\nCHAPTER_TITLE: Functions\nCOURSE_TITLE: Programming Fundamentals\nLANGUAGE: en"
    }
  ],
  "taskId": "activity-background"
}
