{
  "generatedAt": "2026-01-17T21:27:46.965Z",
  "modelId": "google/gemini-3-pro-preview",
  "outputs": [
    {
      "duration": 67930.494917,
      "inputTokens": 2864,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"You order a pizza through an app. The app charges your card, but the restaurant's internet goes down before they receive the order. The app detects this and immediately refunds your money.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Atomicity ensures 'all or nothing'—if the order step fails, the payment step must be rolled back.\",\n          \"isCorrect\": true,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Consistency is about following rules (like price > 0), not the all-or-nothing rollback of a failed process. The correct answer is Atomicity.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Durability ensures data survives a crash after it's saved. Here, the process failed during execution, so Atomicity handles the cleanup.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        },\n        {\n          \"feedback\": \"Isolation keeps users from interfering with each other. This scenario is about a single broken process, which is an Atomicity issue.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        }\n      ],\n      \"question\": \"Which concept prevents you from losing money?\"\n    },\n    {\n      \"context\": \"A role-playing game allows players to trade items. A bug in the code allows a player to give 0 items but receive a sword in return, violating the game's rule of fair exchange.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity handles crashes, not logic rules. Consistency is what enforces valid states like 'trades must be equal'.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Spot on! Consistency ensures the database moves from one valid state to another, enforcing rules like 'items exchanged must match'.\",\n          \"isCorrect\": true,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Isolation manages concurrent users. This error involves a single rule violation, which is the domain of Consistency.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Durability is about saving data. This issue is about invalid data logic, which is a Consistency failure.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        }\n      ],\n      \"question\": \"Which property failed to catch this bug?\"\n    },\n    {\n      \"context\": \"Two managers try to update the shift schedule for the same employee at the exact same moment. The system forces one manager to wait until the other finishes saving.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bingo! Isolation acts like a bubble, ensuring transactions don't interfere with each other while running.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Deadlock is when everything freezes. Here, the system is working correctly by making one wait—that's Isolation in action.\",\n          \"isCorrect\": false,\n          \"text\": \"Deadlock\"\n        },\n        {\n          \"feedback\": \"Atomicity is about rolling back failures. The waiting mechanism here is about preventing conflict, which is Isolation.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Durability protects saved data. Handling active user collisions is the job of Isolation.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        }\n      ],\n      \"question\": \"Which concept creates this waiting period?\"\n    },\n    {\n      \"context\": \"You finish writing a long report and hit 'Save'. The success message appears, but seconds later the building loses power. When power returns, your report is perfectly safe.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity guarantees the save completes or fails, but Durability is the specific promise that *committed* data survives crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Right! Durability guarantees that once the system says 'Success' (commit), the data is permanent even if the plug is pulled.\",\n          \"isCorrect\": true,\n          \"text\": \"Durability\"\n        },\n        {\n          \"feedback\": \"Consistency checks rules. Survival after a power loss is the specific job of Durability.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Isolation separates users. It doesn't help with hardware failures—that's Durability.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        }\n      ],\n      \"question\": \"Which property guaranteed your file survived?\"\n    },\n    {\n      \"context\": \"Before the 1970s, if a computer crashed while processing a payroll list, half the employees might get paid and the other half wouldn't, leaving the accountant with a mess to fix manually.\",\n      \"options\": [\n        {\n          \"feedback\": \"Slow speed was annoying, but the dangerous part was the inconsistent data (partial updates). Grouping operations solved this.\",\n          \"isCorrect\": false,\n          \"text\": \"Computers were too slow\"\n        },\n        {\n          \"feedback\": \"Exactly. The big breakthrough was grouping operations so they couldn't stop halfway—solving the 'partial update' chaos.\",\n          \"isCorrect\": true,\n          \"text\": \"Partial updates caused inconsistency\"\n        },\n        {\n          \"feedback\": \"Storage was expensive, but the critical operational risk was data corruption from crashes, not the cost of disk space.\",\n          \"isCorrect\": false,\n          \"text\": \"Storage was too expensive\"\n        },\n        {\n          \"feedback\": \"Security is important, but the fundamental reliability issue Jim Gray solved was about data integrity during crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Hackers could steal money\"\n        }\n      ],\n      \"question\": \"Why was this era considered risky for data?\"\n    },\n    {\n      \"context\": \"A developer runs a script to delete old user accounts. The script runs for 10 minutes. Before the 'Commit' command executes, the developer closes the terminal window.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! In a transaction, changes are invisible and temporary until 'Commit' is fired. Closing the session triggers a rollback.\",\n          \"isCorrect\": true,\n          \"text\": \"Nothing is deleted; changes roll back\"\n        },\n        {\n          \"feedback\": \"Without a 'Commit', the database assumes the work wasn't finished and undoes it. It never auto-saves partial work.\",\n          \"isCorrect\": false,\n          \"text\": \"The accounts are deleted\"\n        },\n        {\n          \"feedback\": \"Databases don't leave things in limbo. If the connection breaks before commit, the system cleans up (rolls back).\",\n          \"isCorrect\": false,\n          \"text\": \"The accounts are stuck in 'pending'\"\n        },\n        {\n          \"feedback\": \"There is no partial credit in transactions. It's all or nothing. Since 'Commit' never happened, nothing happened.\",\n          \"isCorrect\": false,\n          \"text\": \"Only the accounts processed so far are deleted\"\n        }\n      ],\n      \"question\": \"What happens to the user accounts?\"\n    },\n    {\n      \"context\": \"Imagine a ship's captain writing in a logbook. He writes down 'Turning left' *before* actually turning the wheel. If he faints, the next officer knows exactly what was intended.\",\n      \"options\": [\n        {\n          \"feedback\": \"That's it! Write-Ahead Logging records intent before action, allowing the system to recover or complete tasks after a crash.\",\n          \"isCorrect\": true,\n          \"text\": \"Write-Ahead Logging\"\n        },\n        {\n          \"feedback\": \"Deadlocks happen when two things get stuck. This logbook is a safety record, which describes Write-Ahead Logging.\",\n          \"isCorrect\": false,\n          \"text\": \"Deadlock Detection\"\n        },\n        {\n          \"feedback\": \"Two-phase locking is about managing access. The logbook technique for crash recovery is Write-Ahead Logging.\",\n          \"isCorrect\": false,\n          \"text\": \"Two-Phase Locking\"\n        },\n        {\n          \"feedback\": \"Optimistic locking assumes success. Writing it down *first* to ensure safety is the definition of Write-Ahead Logging.\",\n          \"isCorrect\": false,\n          \"text\": \"Optimistic Locking\"\n        }\n      ],\n      \"question\": \"What database mechanism mimics this logbook?\"\n    },\n    {\n      \"context\": \"You are trying to book the very last seat on a flight. You click 'Select', but the spinner just spins. Unknown to you, another user selected it 1 second earlier and is entering their credit card details.\",\n      \"options\": [\n        {\n          \"feedback\": \"Deadlock is a permanent freeze. This is a temporary wait caused by a Lock held by the other user.\",\n          \"isCorrect\": false,\n          \"text\": \"Deadlock\"\n        },\n        {\n          \"feedback\": \"Spot on. The other user's transaction holds an exclusive lock on that seat, forcing you to wait until they finish or cancel.\",\n          \"isCorrect\": true,\n          \"text\": \"Locking\"\n        },\n        {\n          \"feedback\": \"Logging happens in the background. The mechanism stopping you from grabbing the seat is a Lock.\",\n          \"isCorrect\": false,\n          \"text\": \"Logging\"\n        },\n        {\n          \"feedback\": \"Rollback happens if they fail. The reason you are waiting *right now* is the Lock they hold.\",\n          \"isCorrect\": false,\n          \"text\": \"Rollback\"\n        }\n      ],\n      \"question\": \"Mechanically, what is holding you up?\"\n    },\n    {\n      \"context\": \"Robot A grabs a nut and waits for a bolt. Robot B grabs the bolt and waits for the nut. Neither robot will let go of what they have, and neither can finish.\",\n      \"options\": [\n        {\n          \"feedback\": \"A race condition is about timing. This specific situation where two parties block each other in a circle is a Deadlock.\",\n          \"isCorrect\": false,\n          \"text\": \"Race Condition\"\n        },\n        {\n          \"feedback\": \"Latency is just slowness. This is a total freeze caused by circular dependency—a Deadlock.\",\n          \"isCorrect\": false,\n          \"text\": \"Latency\"\n        },\n        {\n          \"feedback\": \"Correct! A deadlock occurs when two transactions hold resources the other needs, creating a circular wait.\",\n          \"isCorrect\": true,\n          \"text\": \"Deadlock\"\n        },\n        {\n          \"feedback\": \"Isolation is the goal; this situation is a failure of resource management called a Deadlock.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation Failure\"\n        }\n      ],\n      \"question\": \"What is this frozen state called?\"\n    },\n    {\n      \"context\": \"An app update fails at 90% because your phone runs out of storage. The operating system detects the error and removes the files it had already downloaded, returning your phone to its pre-update state.\",\n      \"options\": [\n        {\n          \"feedback\": \"Committing would make the partial update permanent (leaving junk files). The system needs to reverse it.\",\n          \"isCorrect\": false,\n          \"text\": \"Commit\"\n        },\n        {\n          \"feedback\": \"Exactly. Rollback is the 'undo' command that reverses all steps of a failed transaction.\",\n          \"isCorrect\": true,\n          \"text\": \"Rollback\"\n        },\n        {\n          \"feedback\": \"Checkpointing saves progress. Here we want to undo everything because of a failure.\",\n          \"isCorrect\": false,\n          \"text\": \"Checkpoint\"\n        },\n        {\n          \"feedback\": \"Archiving saves old data. This is about cleaning up a failed active process, which is a Rollback.\",\n          \"isCorrect\": false,\n          \"text\": \"Archive\"\n        }\n      ],\n      \"question\": \"What is this cleanup process called?\"\n    },\n    {\n      \"context\": \"A social media site counts 'Likes' on a viral post. To handle millions of clicks, the counter updates every few seconds rather than in real-time. You might see 100 likes when there are actually 105.\",\n      \"options\": [\n        {\n          \"feedback\": \"Consistency rules are about validity, not timing. This is a trade-off in Isolation levels for performance.\",\n          \"isCorrect\": false,\n          \"text\": \"Relaxing Consistency\"\n        },\n        {\n          \"feedback\": \"Durability is about safety. The trade-off here is accepting slightly stale data (Isolation) to gain speed.\",\n          \"isCorrect\": false,\n          \"text\": \"Ignoring Durability\"\n        },\n        {\n          \"feedback\": \"Right! Lower isolation levels (like Read Committed) allow for faster performance at the cost of seeing slightly old data.\",\n          \"isCorrect\": true,\n          \"text\": \"Lowering Isolation Level\"\n        },\n        {\n          \"feedback\": \"Atomicity can't be relaxed without risking corruption. They are just relaxing how fresh the data looks (Isolation).\",\n          \"isCorrect\": false,\n          \"text\": \"Removing Atomicity\"\n        }\n      ],\n      \"question\": \"What trade-off is the system making?\"\n    },\n    {\n      \"context\": \"You are organizing a playlist. You drag 10 songs to a new folder. If the app crashes after moving song #5, it must put those 5 songs back in the original folder to avoid splitting the album.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is Atomicity (all or nothing), not Isolation (privacy/interference).\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Exactly! Atomicity ensures the move is treated as a single unit—either all 10 move, or none move.\",\n          \"isCorrect\": true,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Durability is about saving to disk. Atomicity is the logic that decides 'move all or move none'.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        },\n        {\n          \"feedback\": \"Consistency ensures rules (like file types). Atomicity ensures the grouping of the operations.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        }\n      ],\n      \"question\": \"Which concept dictates they must go back?\"\n    },\n    {\n      \"context\": \"A warehouse system tries to assign a package to 'Shelf 99'. The database rejects this request immediately because Shelf 99 does not exist in the Shelves table.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity handles crashes. Consistency handles rules—like 'you can't put an item on a shelf that doesn't exist'.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Isolation prevents user conflicts. This is a static rule violation, which is the domain of Consistency.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Correct! Consistency ensures data follows defined rules, such as referential integrity (everything must point to a valid location).\",\n          \"isCorrect\": true,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Durability prevents data loss. It doesn't check if the data makes logical sense—that's Consistency.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        }\n      ],\n      \"question\": \"Which property enforced this rule?\"\n    },\n    {\n      \"context\": \"Financial systems rely heavily on the ACID acronym. Ultimately, what is the primary business value this standard provides?\",\n      \"options\": [\n        {\n          \"feedback\": \"ACID often makes systems slightly slower due to safety checks. Its value is reliability, not speed.\",\n          \"isCorrect\": false,\n          \"text\": \"Faster processing speed\"\n        },\n        {\n          \"feedback\": \"ACID is about reliability, not storage efficiency. It actually uses more space (logs) to ensure safety.\",\n          \"isCorrect\": false,\n          \"text\": \"Reduced storage costs\"\n        },\n        {\n          \"feedback\": \"Yes! ACID transformed databases from fragile tools into systems that businesses could trust with critical money and data.\",\n          \"isCorrect\": true,\n          \"text\": \"Trust and reliability\"\n        },\n        {\n          \"feedback\": \"ACID protects data integrity, not security against hackers. That's a different field.\",\n          \"isCorrect\": false,\n          \"text\": \"Encryption and security\"\n        }\n      ],\n      \"question\": \"Why is ACID considered the 'gold standard'?\"\n    },\n    {\n      \"context\": \"A database restarts after a crash. It finds an entry in the log saying 'Transaction #123 Committed', but the changes aren't in the main data files yet.\",\n      \"options\": [\n        {\n          \"feedback\": \"If it's in the log as 'Committed', the database promised it was saved. It must reapply (redo) the changes to keep that promise.\",\n          \"isCorrect\": true,\n          \"text\": \"It reapplies the changes from the log\"\n        },\n        {\n          \"feedback\": \"It can't delete it! The log says it was committed, so Durability requires the database to make sure it exists.\",\n          \"isCorrect\": false,\n          \"text\": \"It deletes the log entry\"\n        },\n        {\n          \"feedback\": \"Rollback is for failed or uncommitted transactions. Since the log says 'Committed', it must be saved, not undone.\",\n          \"isCorrect\": false,\n          \"text\": \"It rolls back Transaction #123\"\n        },\n        {\n          \"feedback\": \"Ignoring it would violate Durability. The system must ensure the data is present.\",\n          \"isCorrect\": false,\n          \"text\": \"It ignores the entry\"\n        }\n      ],\n      \"question\": \"How does the system handle this?\"\n    }\n  ]\n}",
      "outputTokens": 7076,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-cs-database-transactions-acid-1",
      "userPrompt": "LESSON_TITLE: Database Transactions and ACID\nLESSON_DESCRIPTION: Understanding database transactions and ACID properties for maintaining data integrity in concurrent systems\nCHAPTER_TITLE: Data Integrity\nCOURSE_TITLE: Database Systems\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Corruption Problem: Before databases had transactions, a power failure during a bank transfer could leave money in limbo — deducted from one account but never credited to another. Data inconsistency was the norm.\n2. Gray's Breakthrough: Jim Gray at IBM tackled this chaos in the 1970s. His insight: group related operations together and guarantee they either all succeed or all fail. No partial states allowed.\n3. The ACID Standard: The ACID properties emerged as the gold standard for reliable data operations. They transformed databases from fragile systems into ones businesses could trust with critical data.\n\nEXPLANATION_STEPS:\n1. Atomicity: Atomicity means 'all or nothing.' A transaction either completes entirely or has no effect at all. There's no partial completion — if any part fails, everything rolls back.\n2. Consistency: Consistency ensures transactions bring the database from one valid state to another. Rules defined in the schema (like account balance >= 0) are never violated.\n3. Isolation: Isolation means concurrent transactions don't interfere with each other. Each transaction sees a consistent snapshot, as if it were running alone.\n4. Durability: Durability guarantees that once a transaction commits, its changes survive system crashes. The database uses write-ahead logging to ensure committed data isn't lost.\n5. Isolation Levels: Isolation levels trade off between consistency and performance. Serializable is safest but slowest; Read Committed is faster but allows some anomalies.\n\nMECHANICS_STEPS:\n1. Transaction Lifecycle: A transaction begins with BEGIN, then executes statements. Changes are held in a buffer, invisible to other transactions until COMMIT makes them permanent.\n2. Write-Ahead Logging: Write-ahead logging records changes before applying them. If a crash occurs mid-transaction, the log allows the database to either complete or undo the changes during recovery.\n3. Locking Mechanisms: Locks prevent concurrent access conflicts. When a transaction modifies a row, it acquires an exclusive lock. Other transactions must wait until the lock releases.\n4. Deadlock Detection: Deadlocks occur when two transactions each hold a lock the other needs. The database detects this circular wait and aborts one transaction to break the cycle.\n5. Rollback Process: ROLLBACK undoes all changes made during the transaction. The database uses the log to reverse each operation in the opposite order it was applied.\n\nEXAMPLES_STEPS:\n1. Banking Transfers: Banking transfers are the classic example. Moving $100 from savings to checking must debit one and credit the other atomically — or neither should happen.\n2. E-commerce Orders: E-commerce checkout involves inventory reduction, payment processing, and order creation. All must succeed together, or the customer gets charged without receiving their product.\n3. Airline Reservations: Airline booking systems face extreme concurrency — thousands of users trying to book the same seats. Transactions prevent double-booking while maintaining performance.\n4. Social Media Posts: Social media platforms use transactions for complex operations like posting a photo with tags, location, and notifications — all must be recorded consistently."
    },
    {
      "duration": 65915.64708299996,
      "inputTokens": 2910,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A mechanic refuses to list prices on his website. When you bring your car in, he chats about your job and neighborhood before giving you a quote. He does this with every customer.\",\n      \"options\": [\n        {\n          \"feedback\": \"Close, but second-degree relies on customers choosing from a menu (like Gold vs. Silver packages). This mechanic is guessing your specific maximum price.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Exactly! He's trying to guess your individual maximum willingness to pay—an approximation of perfect price discrimination.\",\n          \"isCorrect\": true,\n          \"text\": \"Approximating first-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Third-degree involves grouping people by obvious traits (like students or seniors). He is customizing the price for every single person.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Arbitrage is when customers resell products. While he might want to prevent that, his primary goal here is setting the price, not stopping resale.\",\n          \"isCorrect\": false,\n          \"text\": \"Arbitrage prevention\"\n        }\n      ],\n      \"question\": \"What is the economic logic behind the mechanic's strategy?\"\n    },\n    {\n      \"context\": \"A shipping company charges $10 to deliver a package within the city, but $50 to deliver to a remote island. The fuel and labor for the island trip cost the company exactly $40 more.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right! Price discrimination requires charging different prices for the *same* product relative to cost. Here, the price difference just covers the extra costs.\",\n          \"isCorrect\": true,\n          \"text\": \"No, this is cost-based pricing\"\n        },\n        {\n          \"feedback\": \"Third-degree discrimination groups customers by willingness to pay (elasticity), not by how much it costs to serve them.\",\n          \"isCorrect\": false,\n          \"text\": \"Yes, it is third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Geographic segmentation counts as discrimination only if the price markup varies. Here, the markup is consistent with the cost increase.\",\n          \"isCorrect\": false,\n          \"text\": \"Yes, it is geographic segmentation\"\n        },\n        {\n          \"feedback\": \"Willingness to pay might be involved, but if the price difference perfectly matches the cost difference, it's not discrimination in the economic sense.\",\n          \"isCorrect\": false,\n          \"text\": \"Yes, because islanders have higher willingness to pay\"\n        }\n      ],\n      \"question\": \"Is this an example of price discrimination?\"\n    },\n    {\n      \"context\": \"A coffee shop sells a standard coffee for $3. However, if you clip a coupon from a the Sunday newspaper and bring it in, the coffee costs only $2.\",\n      \"options\": [\n        {\n          \"feedback\": \"That's part of it, but the key is *who* uses the coupon. The hassle of clipping ensures only price-sensitive people get the discount.\",\n          \"isCorrect\": false,\n          \"text\": \"It rewards loyal customers\"\n        },\n        {\n          \"feedback\": \"Spot on! The time it takes to clip coupons acts as a 'hurdle.' High-income customers usually won't bother, so they pay full price.\",\n          \"isCorrect\": true,\n          \"text\": \"It separates customers by time sensitivity\"\n        },\n        {\n          \"feedback\": \"Actually, this is likely second-degree discrimination (self-selection), not third. Third-degree relies on fixed traits like age or student status.\",\n          \"isCorrect\": false,\n          \"text\": \"It is third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"If this were true, they'd just lower the price for everyone. The goal is to keep the price high for those willing to pay it.\",\n          \"isCorrect\": false,\n          \"text\": \"The shop is trying to clear old inventory\"\n        }\n      ],\n      \"question\": \"What is the economic function of the 'clipping' requirement?\"\n    },\n    {\n      \"context\": \"A software company sells a 'Professional' version for $1000 and a 'Student' version for $50. A clever student buys 100 copies of the student version and sells them to local architecture firms for $500 each.\",\n      \"options\": [\n        {\n          \"feedback\": \"Menu design refers to creating the options. The failure here isn't the options themselves, but the leak between them.\",\n          \"isCorrect\": false,\n          \"text\": \"Poor menu design\"\n        },\n        {\n          \"feedback\": \"Elasticity estimation helps set the prices ($50 vs $1000). It doesn't physically stop one group from selling to the other.\",\n          \"isCorrect\": false,\n          \"text\": \"Incorrect elasticity estimation\"\n        },\n        {\n          \"feedback\": \"Bingo! Price discrimination fails if you can't prevent 'arbitrage'—the resale of low-price goods to high-price customers.\",\n          \"isCorrect\": true,\n          \"text\": \"Failure to prevent arbitrage\"\n        },\n        {\n          \"feedback\": \"First-degree is charging everyone their max. This was third-degree (groups), and it failed because the groups mixed.\",\n          \"isCorrect\": false,\n          \"text\": \"Failed first-degree discrimination\"\n        }\n      ],\n      \"question\": \"What mechanism is missing from the company's strategy?\"\n    },\n    {\n      \"context\": \"An amusement park creates a 'VIP Line' that moves twice as fast but costs three times as much as a regular ticket. They do not check ID or income; anyone can buy it.\",\n      \"options\": [\n        {\n          \"feedback\": \"First-degree would be charging you specifically based on your data. This is a general offer open to all.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Third-degree requires identifying groups (like 'Students'). Here, the park lets customers sort themselves based on preference.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Correct! This is second-degree discrimination. The firm offers versions, and customers 'self-select' based on whether they value money or time more.\",\n          \"isCorrect\": true,\n          \"text\": \"Second-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Arbitrage is about resale. While tickets might be non-transferable, the strategy itself is about versioning.\",\n          \"isCorrect\": false,\n          \"text\": \"Arbitrage blocking\"\n        }\n      ],\n      \"question\": \"Which type of price discrimination is the park using?\"\n    },\n    {\n      \"context\": \"A pharmaceutical company launches a new drug. In Country A, patients are wealthy but have many alternative treatments. In Country B, patients are poorer but have no other options for this disease.\",\n      \"options\": [\n        {\n          \"feedback\": \"You'd think so, but 'alternatives' make demand elastic (sensitive). If you raise prices in A, they switch to other drugs. Country B is stuck, so demand is inelastic.\",\n          \"isCorrect\": false,\n          \"text\": \"Charge more in Country A because they are richer\"\n        },\n        {\n          \"feedback\": \"Correct. Even though B is poorer, the lack of alternatives makes their demand 'inelastic' (insensitive to price). They need the drug more desperately.\",\n          \"isCorrect\": true,\n          \"text\": \"Charge more in Country B because demand is inelastic\"\n        },\n        {\n          \"feedback\": \"Charging the same price usually leaves money on the table. Discrimination aims to maximize profit from each market's specific conditions.\",\n          \"isCorrect\": false,\n          \"text\": \"Charge the same in both to be fair\"\n        },\n        {\n          \"feedback\": \"Cost is a floor, not the ceiling. Pricing depends on willingness to pay, not just covering manufacturing costs.\",\n          \"isCorrect\": false,\n          \"text\": \"Charge based strictly on shipping costs\"\n        }\n      ],\n      \"question\": \"Based on elasticity, how might a profit-maximizing firm price the drug?\"\n    },\n    {\n      \"context\": \"A cable company sells a Sports Channel for $20 and a Cooking Channel for $20. Or, you can buy a bundle of both for $30. Most customers only really want one, but buy the bundle anyway.\",\n      \"options\": [\n        {\n          \"feedback\": \"It's actually the opposite—this captures the 'consumer surplus' (the extra value) from people who have a mild interest in the second channel.\",\n          \"isCorrect\": true,\n          \"text\": \"To capture surplus from customers with varied tastes\"\n        },\n        {\n          \"feedback\": \"If they wanted to discourage the single channels, they wouldn't offer them, or would price them higher than the bundle.\",\n          \"isCorrect\": false,\n          \"text\": \"To discourage buying single channels\"\n        },\n        {\n          \"feedback\": \"Bundling works even if distribution costs are zero (like digital). It's a demand-side strategy, not just cost-saving.\",\n          \"isCorrect\": false,\n          \"text\": \"To save on distribution costs\"\n        },\n        {\n          \"feedback\": \"Actually, bundling confuses price signals and makes it harder to know the true market value of individual channels.\",\n          \"isCorrect\": false,\n          \"text\": \"To better estimate demand for specific shows\"\n        }\n      ],\n      \"question\": \"What is the primary economic goal of this bundling strategy?\"\n    },\n    {\n      \"context\": \"A website sells travel insurance. It automatically displays a 10% higher price if your browser data shows you are using a brand new, high-end computer model.\",\n      \"options\": [\n        {\n          \"feedback\": \"Arbitrage is resale. The computer model isn't preventing resale; it's identifying the user.\",\n          \"isCorrect\": false,\n          \"text\": \"An arbitrage prevention mechanism\"\n        },\n        {\n          \"feedback\": \"Exactly! The expensive computer acts as a 'signal' or proxy for high income, suggesting you're less sensitive to price.\",\n          \"isCorrect\": true,\n          \"text\": \"A segmentation signal\"\n        },\n        {\n          \"feedback\": \"This is actually third-degree discrimination (segmentation based on a trait), not second-degree (self-selection). The user didn't choose to see the high price.\",\n          \"isCorrect\": false,\n          \"text\": \"A self-selection menu\"\n        },\n        {\n          \"feedback\": \"Bundling involves combining products. Here, the product is the same, just the price tag changes based on your hardware.\",\n          \"isCorrect\": false,\n          \"text\": \"A bundling strategy\"\n        }\n      ],\n      \"question\": \"In economic terms, what is the computer type acting as?\"\n    },\n    {\n      \"context\": \"During a rainstorm, a ride-sharing app triples its prices. Drivers flood the streets to chase the high fares, while only passengers who really need a ride book one.\",\n      \"options\": [\n        {\n          \"feedback\": \"It definitely increases revenue, but the 'allocation' part is key—it ensures rides go to those who value them most.\",\n          \"isCorrect\": false,\n          \"text\": \"It maximizes revenue but creates shortages\"\n        },\n        {\n          \"feedback\": \"Spot on. High prices discourage low-value trips (demand side) and encourage drivers (supply side), balancing the market.\",\n          \"isCorrect\": true,\n          \"text\": \"It allocates scarce supply to those with highest willingness to pay\"\n        },\n        {\n          \"feedback\": \"This is dynamic pricing, which is a form of discrimination based on time/demand. It is certainly a pricing strategy.\",\n          \"isCorrect\": false,\n          \"text\": \"It is not a pricing strategy, just chaos\"\n        },\n        {\n          \"feedback\": \"Actually, this is about short-term volatility. Long-term loyalty usually prefers stable pricing, so this risks annoying customers.\",\n          \"isCorrect\": false,\n          \"text\": \"It builds long-term customer loyalty\"\n        }\n      ],\n      \"question\": \"What economic function does this dynamic pricing serve?\"\n    },\n    {\n      \"context\": \"A software firm releases a 'Home' version of their video editor. It has the same code as the 'Pro' version, but the engineers added extra code specifically to block 4K exporting in the Home version.\",\n      \"options\": [\n        {\n          \"feedback\": \"It seems wasteful, but if the Home version were too good, Pros would buy it. They must 'damage' the cheap one to protect the expensive market.\",\n          \"isCorrect\": true,\n          \"text\": \"To prevent the cheap version from cannibalizing the expensive one\"\n        },\n        {\n          \"feedback\": \"Actually, adding code to block features costs money. It would be cheaper to just release the full version to everyone, but less profitable.\",\n          \"isCorrect\": false,\n          \"text\": \"To reduce development costs\"\n        },\n        {\n          \"feedback\": \"This is 2nd degree (versioning). 3rd degree would be 'Students get 50% off'. This relies on product features, not user identity.\",\n          \"isCorrect\": false,\n          \"text\": \"To enable third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Arbitrage is about users reselling. This strategy is about segmentation—making sure high-value users don't settle for the cheap option.\",\n          \"isCorrect\": false,\n          \"text\": \"To prevent arbitrage between users\"\n        }\n      ],\n      \"question\": \"Why would a firm spend money to *remove* features?\"\n    },\n    {\n      \"context\": \"A local gym charges $50/month to everyone. However, if you come between 5 PM and 7 PM (peak hours), you must pay a $5 surcharge per visit.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. This isn't just about extracting profit; it's about managing limited capacity during peak times.\",\n          \"isCorrect\": true,\n          \"text\": \"Congestion pricing\"\n        },\n        {\n          \"feedback\": \"Second-degree usually implies a choice of quality/version. Here, the 'product' (gym access) is the same, just the time differs.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Two-part tariffs usually mean a flat fee plus a usage fee. While similar, the time-specific nature makes 'congestion pricing' the precise term.\",\n          \"isCorrect\": false,\n          \"text\": \"Two-part tariff\"\n        },\n        {\n          \"feedback\": \"Bundling combines distinct products. This is a surcharge on a single service based on time.\",\n          \"isCorrect\": false,\n          \"text\": \"Product bundling\"\n        }\n      ],\n      \"question\": \"What is this pricing strategy best described as?\"\n    },\n    {\n      \"context\": \"Imagine a world where a company knows exactly how much every single person is willing to pay for a toothbrush and charges them that exact amount.\",\n      \"options\": [\n        {\n          \"feedback\": \"Actually, it would be zero. 'Consumer surplus' is the difference between what you *would* pay and what you *did* pay. If you pay your max, you save nothing.\",\n          \"isCorrect\": false,\n          \"text\": \"Consumer surplus would be maximized\"\n        },\n        {\n          \"feedback\": \"Exactly. The company captures 100% of the value. You get the toothbrush, but you don't feel like you got a 'deal' at all.\",\n          \"isCorrect\": true,\n          \"text\": \"Consumer surplus would drop to zero\"\n        },\n        {\n          \"feedback\": \"Deadweight loss usually comes from pricing people out of the market. Since everyone willing to pay at least cost gets one, efficiency is actually high.\",\n          \"isCorrect\": false,\n          \"text\": \"Deadweight loss would increase\"\n        },\n        {\n          \"feedback\": \"Arbitrage is impossible here by definition (the scenario assumes the pricing works). The outcome is about surplus distribution.\",\n          \"isCorrect\": false,\n          \"text\": \"Arbitrage would be rampant\"\n        }\n      ],\n      \"question\": \"What would happen to 'consumer surplus' in this scenario?\"\n    },\n    {\n      \"context\": \"A museum offers a 50% discount to students. However, they don't require a student ID; they just require you to come on Tuesday mornings when most people are working or in class.\",\n      \"options\": [\n        {\n          \"feedback\": \"Third-degree relies on checking status (ID cards). This relies on behavior/hurdles, which is second-degree.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Right! They are using time as a filter. Only people with flexible schedules (who are often more price-sensitive) can make it.\",\n          \"isCorrect\": true,\n          \"text\": \"Self-selection via time constraints\"\n        },\n        {\n          \"feedback\": \"If that were the goal, they'd offer the discount at peak times too. The restricted time slot is a deliberate hurdle.\",\n          \"isCorrect\": false,\n          \"text\": \"Volume maximization\"\n        },\n        {\n          \"feedback\": \"Dynamic pricing fluctuates with real-time demand. This is a static rule (Tuesday AM = cheap) designed to segment customers.\",\n          \"isCorrect\": false,\n          \"text\": \"Dynamic pricing\"\n        }\n      ],\n      \"question\": \"What is the mechanism filtering the customers here?\"\n    },\n    {\n      \"context\": \"A luxury handbag brand burns its unsold inventory at the end of the season rather than offering it at a discount store.\",\n      \"options\": [\n        {\n          \"feedback\": \"Burning stock is a total loss, so tax benefits rarely outweigh the potential revenue from sales. There's a deeper strategic reason.\",\n          \"isCorrect\": false,\n          \"text\": \"To claim a tax write-off\"\n        },\n        {\n          \"feedback\": \"Precisely. If customers knew they could wait for a discount, they'd never pay full price. Burning stock preserves the high 'willingness to pay' for next season.\",\n          \"isCorrect\": true,\n          \"text\": \"To maintain the brand's high pricing power\"\n        },\n        {\n          \"feedback\": \"Price discrimination involves selling at different prices. Destroying goods is the refusal to discriminate (refusing to sell to the low-price segment).\",\n          \"isCorrect\": false,\n          \"text\": \"To practice third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Scarcity affects supply, but burning goods after the season is over is about protecting the brand's image, not just supply mechanics.\",\n          \"isCorrect\": false,\n          \"text\": \"To create artificial scarcity for current stock\"\n        }\n      ],\n      \"question\": \"Why would a firm destroy goods instead of price discriminating?\"\n    },\n    {\n      \"context\": \"You want to buy a digital textbook. The US store sells it for $100. The Indian store sells it for $20. You use a VPN to pretend you are in India and buy it for $20.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. The 'fence' is the mechanism that keeps the segments separate (like IP geolocation). The VPN allowed you to jump the fence.\",\n          \"isCorrect\": true,\n          \"text\": \"The fence between market segments\"\n        },\n        {\n          \"feedback\": \"The elasticity estimate might be correct (Indian students can't pay $100). The failure is in enforcing the separation.\",\n          \"isCorrect\": false,\n          \"text\": \"The elasticity estimation\"\n        },\n        {\n          \"feedback\": \"Menu design refers to the options offered. The options were fine; the problem was your ability to access the wrong one.\",\n          \"isCorrect\": false,\n          \"text\": \"The menu design\"\n        },\n        {\n          \"feedback\": \"Cost estimation isn't the issue. Digital goods have near-zero marginal cost, so $20 is still profit. The issue is losing the $100 sale.\",\n          \"isCorrect\": false,\n          \"text\": \"The marginal cost estimation\"\n        }\n      ],\n      \"question\": \"Which component of the pricing strategy did you defeat?\"\n    }\n  ]\n}",
      "outputTokens": 6645,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-economics-price-discrimination-1",
      "userPrompt": "LESSON_TITLE: Price Discrimination Strategies\nLESSON_DESCRIPTION: Understanding how firms use price discrimination to maximize profits by charging different prices to different customer segments\nCHAPTER_TITLE: Pricing Strategy\nCOURSE_TITLE: Microeconomics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Pricing Puzzle: Why do seniors get discounts while business travelers pay premium? Why does software cost different amounts in different countries? Economists discovered the logic behind seemingly arbitrary pricing.\n2. Pigou's Insight: Arthur Pigou formalized price discrimination theory in the 1920s. He showed that charging different prices to different customers could actually be economically efficient under certain conditions.\n3. The Data Revolution: The rise of big data transformed price discrimination from crude segmentation to personalized pricing. Every click, purchase, and search helps companies estimate your willingness to pay.\n\nEXPLANATION_STEPS:\n1. Definition: Price discrimination means charging different prices for the same product to different customers. It's not about cost differences — it's about extracting more consumer surplus.\n2. First-Degree: First-degree discrimination charges each customer their maximum willingness to pay. It's theoretically perfect but practically impossible without mind-reading. Haggling approximates it.\n3. Second-Degree: Second-degree discrimination offers different versions at different prices. Customers self-select based on their preferences — like choosing between economy and business class.\n4. Third-Degree: Third-degree discrimination segments customers into groups with different elasticities. Charge more to inelastic groups (business travelers), less to elastic groups (tourists).\n5. Elasticity Connection: Price elasticity of demand determines pricing power. If demand barely changes with price (inelastic), firms can charge more. If demand is sensitive (elastic), prices must stay low.\n\nMECHANICS_STEPS:\n1. Preventing Arbitrage: To price discriminate, a firm must prevent arbitrage — customers who get the low price reselling to those who'd pay more. Physical services naturally prevent this; digital goods require DRM.\n2. Segmentation Signals: Market segmentation identifies groups with different price sensitivities. Age, location, purchase timing, and usage patterns all signal willingness to pay.\n3. Menu Design: Menu pricing creates product versions that appeal to different segments. The 'basic' version exists partly to make the 'premium' version look valuable by comparison.\n4. Dynamic Adjustment: Dynamic pricing adjusts prices in real-time based on demand signals. High demand triggers price increases; low demand triggers discounts. Algorithms optimize continuously.\n5. Bundling Strategy: Bundling combines products to extract more surplus. Cable TV bundles make you pay for channels you don't want because the package captures more total willingness to pay.\n\nEXAMPLES_STEPS:\n1. Airline Pricing: Airlines are masters of price discrimination. The same seat costs $200 or $2000 depending on when you book, whether you stay Saturday, and if you're flying for business or leisure.\n2. Movie Tickets: Movie theaters charge different prices for matinees, seniors, and students. They're segmenting customers by time flexibility and price sensitivity.\n3. Educational Discounts: Academic software discounts are dramatic — students might pay $50 for software that costs businesses $500. The assumption: students can't afford full price but will become paying customers later.\n4. Happy Hour Economics: Happy hour pricing segments customers by time availability. Those who can drink at 4pm are often more price-sensitive than the 8pm crowd willing to pay full price."
    },
    {
      "duration": 81166.732166,
      "inputTokens": 3070,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Um inventor alega ter criado uma 'Bateria Infinita' que usa a energia que ela mesma gera para se recarregar completamente, funcionando para sempre sem precisar de tomada ou sol.\",\n      \"options\": [\n        {\n          \"feedback\": \"Na mosca! A 1ª e 2ª Leis garantem que perdas sempre ocorrem (como calor), então a conta nunca fecha.\",\n          \"isCorrect\": true,\n          \"text\": \"Impossível, pois viola a conservação de energia e gera entropia.\"\n        },\n        {\n          \"feedback\": \"Isso seria um problema de engenharia, mas o problema real é a violação das leis físicas fundamentais.\",\n          \"isCorrect\": false,\n          \"text\": \"A bateria esquentaria tanto que derreteria os fios internos.\"\n        },\n        {\n          \"feedback\": \"Não é questão de dinheiro; mesmo com orçamento infinito, as leis da física não podem ser compradas.\",\n          \"isCorrect\": false,\n          \"text\": \"É teoricamente possível, mas a tecnologia seria muito cara hoje.\"\n        },\n        {\n          \"feedback\": \"Voltagem é ajustável. O problema fundamental é a energia desaparecendo em perdas inevitáveis.\",\n          \"isCorrect\": false,\n          \"text\": \"Faltaria voltagem suficiente para manter o ciclo eterno.\"\n        }\n      ],\n      \"question\": \"Por que um físico não investiria dinheiro nessa invenção?\"\n    },\n    {\n      \"context\": \"Imagine uma piscina grande com água morna a 30°C e uma xícara pequena de chá fervendo a 100°C.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Embora a temperatura (média) seja menor, a massa enorme da piscina soma muito mais energia total.\",\n          \"isCorrect\": true,\n          \"text\": \"A piscina contém mais energia térmica total que a xícara.\"\n        },\n        {\n          \"feedback\": \"Cuidado! Temperatura é a média, mas calor total depende da quantidade de matéria também.\",\n          \"isCorrect\": false,\n          \"text\": \"A xícara contém mais energia térmica total que a piscina.\"\n        },\n        {\n          \"feedback\": \"Temperatura mede a velocidade média, não a energia total acumulada no sistema.\",\n          \"isCorrect\": false,\n          \"text\": \"A xícara tem mais energia porque suas moléculas são mais rápidas.\"\n        },\n        {\n          \"feedback\": \"Não são iguais. A massa faz toda a diferença no cálculo da energia interna total.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambas contêm a mesma quantidade de energia térmica.\"\n        }\n      ],\n      \"question\": \"Qual dos dois sistemas armazena mais energia térmica?\"\n    },\n    {\n      \"context\": \"Você esquece uma tigela de sopa quente e um copo de suco gelado sobre a mesa da cozinha antes de sair para trabalhar. Volta 10 horas depois.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito. Sem isolamento perfeito, tudo tende ao equilíbrio térmico com o ambiente (a sala).\",\n          \"isCorrect\": true,\n          \"text\": \"Ambos estarão na mesma temperatura, igual à da sala.\"\n        },\n        {\n          \"feedback\": \"Não. Após tanto tempo, ambos atingem o equilíbrio com o ar da cozinha, ficando iguais.\",\n          \"isCorrect\": false,\n          \"text\": \"A sopa ainda estará um pouco mais quente que o suco.\"\n        },\n        {\n          \"feedback\": \"O frio não 'vence'. O calor flui até que não haja mais diferença de temperatura.\",\n          \"isCorrect\": false,\n          \"text\": \"O suco vai esfriar a sopa através do ar até ficarem gelados.\"\n        },\n        {\n          \"feedback\": \"A umidade afeta a sensação térmica (suor), mas não a temperatura final de equilíbrio dos objetos.\",\n          \"isCorrect\": false,\n          \"text\": \"Depende da umidade do ar na cozinha naquele dia.\"\n        }\n      ],\n      \"question\": \"Como estarão as temperaturas da sopa e do suco ao seu retorno?\"\n    },\n    {\n      \"context\": \"Ao pisar descalço no chão em uma manhã fria, o piso de cerâmica parece muito mais gelado que um tapete de madeira, mesmo que ambos estejam na mesma temperatura.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! A cerâmica conduz (rouba) o calor do seu pé muito mais rápido que a madeira.\",\n          \"isCorrect\": true,\n          \"text\": \"A cerâmica rouba calor do seu pé mais rapidamente.\"\n        },\n        {\n          \"feedback\": \"Se estão na mesma sala há tempo, têm a mesma temperatura. A diferença é a taxa de transferência.\",\n          \"isCorrect\": false,\n          \"text\": \"A cerâmica retém uma temperatura naturalmente menor que a madeira.\"\n        },\n        {\n          \"feedback\": \"A madeira é isolante, não geradora de calor. Ela só rouba seu calor mais devagar.\",\n          \"isCorrect\": false,\n          \"text\": \"A madeira gera uma pequena quantidade de calor por atrito.\"\n        },\n        {\n          \"feedback\": \"Não é apenas textura. É um fenômeno físico real de transferência de energia (condução).\",\n          \"isCorrect\": false,\n          \"text\": \"Seus pés são mais sensíveis à textura lisa da cerâmica.\"\n        }\n      ],\n      \"question\": \"Qual a explicação física para essa diferença de sensação?\"\n    },\n    {\n      \"context\": \"Se você jogar um quebra-cabeça de 1000 peças montado para o alto, ele certamente cairá desmontado e espalhado.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Há bilhões de configurações 'bagunçadas' e só uma 'montada'. A probabilidade vence.\",\n          \"isCorrect\": true,\n          \"text\": \"Existem infinitamente mais arranjos desordenados que ordenados.\"\n        },\n        {\n          \"feedback\": \"A gravidade puxa para baixo, mas não escolhe a ordem das peças. A entropia é estatística.\",\n          \"isCorrect\": false,\n          \"text\": \"A força da gravidade atua para desorganizar objetos complexos.\"\n        },\n        {\n          \"feedback\": \"Não falta energia. O problema é a direção probabilística do processo (entropia).\",\n          \"isCorrect\": false,\n          \"text\": \"A energia cinética do lançamento não foi suficiente para manter a ordem.\"\n        },\n        {\n          \"feedback\": \"Não é impossível, apenas estatisticamente improvável ao extremo.\",\n          \"isCorrect\": false,\n          \"text\": \"As leis da física proíbem que objetos caiam de forma organizada.\"\n        }\n      ],\n      \"question\": \"O que explica essa tendência à desordem (entropia)?\"\n    },\n    {\n      \"context\": \"Em um dia de verão infernal, alguém tem a ideia de abrir a porta do freezer para tentar esfriar a cozinha inteira.\",\n      \"options\": [\n        {\n          \"feedback\": \"Brilhante! A geladeira joga o calor de dentro para fora E gera calor extra com o motor.\",\n          \"isCorrect\": true,\n          \"text\": \"A cozinha esquentará, pois o motor gera mais calor que o frio liberado.\"\n        },\n        {\n          \"feedback\": \"Intuitivo, mas errado. O calor removido de dentro sai atrás da geladeira, e o motor adiciona mais calor ainda.\",\n          \"isCorrect\": false,\n          \"text\": \"A cozinha esfriará, pois o ar gelado se mistura com o quente.\"\n        },\n        {\n          \"feedback\": \"Não se cancelam porque o motor consome eletricidade e a transforma em calor extra na sala.\",\n          \"isCorrect\": false,\n          \"text\": \"A temperatura ficará igual, pois o calor e o frio se cancelam.\"\n        },\n        {\n          \"feedback\": \"Isso viola a 2ª Lei. O fluxo líquido de calor para a sala (calor extraído + calor do motor) aumenta.\",\n          \"isCorrect\": false,\n          \"text\": \"Funcionará apenas se a geladeira for muito potente.\"\n        }\n      ],\n      \"question\": \"O que acontecerá com a temperatura média da cozinha fechada?\"\n    },\n    {\n      \"context\": \"Engenheiros vão construir uma usina térmica. Eles podem construí-la num deserto quente (40°C) ou na beira de um rio gelado (5°C). A temperatura da queima do combustível é a mesma.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correto! O Ciclo de Carnot prova: quanto maior a diferença entre a fonte quente e a fria, maior a eficiência.\",\n          \"isCorrect\": true,\n          \"text\": \"No rio gelado, pois a diferença de temperatura é maior.\"\n        },\n        {\n          \"feedback\": \"Parece lógico, mas motores térmicos precisam rejeitar calor. Um ambiente frio aceita esse rejeito melhor.\",\n          \"isCorrect\": false,\n          \"text\": \"No deserto, pois o ambiente já está quente e ajuda a caldeira.\"\n        },\n        {\n          \"feedback\": \"O ambiente quente dificulta o resfriamento necessário para completar o ciclo do motor.\",\n          \"isCorrect\": false,\n          \"text\": \"No deserto, pois o calor externo impede a perda de energia.\"\n        },\n        {\n          \"feedback\": \"A eficiência depende criticamente das temperaturas externas (fonte fria), não só do combustível.\",\n          \"isCorrect\": false,\n          \"text\": \"Dá na mesma, a eficiência depende só do combustível usado.\"\n        }\n      ],\n      \"question\": \"Onde a usina terá maior eficiência teórica?\"\n    },\n    {\n      \"context\": \"Ar-condicionados modernos podem aquecer um quarto no inverno. Eles não usam resistências elétricas; eles 'roubam' calor da rua, mesmo que lá fora esteja 5°C.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso! É uma bomba de calor. Gasta-se energia para empurrar o calor 'morro acima' (do frio pro quente).\",\n          \"isCorrect\": true,\n          \"text\": \"Usam trabalho para inverter o fluxo natural e trazer calor de fora.\"\n        },\n        {\n          \"feedback\": \"Não existe 'energia de frio'. Eles removem energia térmica do ar externo e a concentram dentro.\",\n          \"isCorrect\": false,\n          \"text\": \"Eles convertem o frio da rua em calor através de fricção.\"\n        },\n        {\n          \"feedback\": \"Se fosse assim, seria um aquecedor comum. Bombas de calor são mais eficientes que isso.\",\n          \"isCorrect\": false,\n          \"text\": \"Eles na verdade só geram calor elétrico interno, ignorando a rua.\"\n        },\n        {\n          \"feedback\": \"Viola a 2ª Lei. Calor nunca flui espontaneamente do frio (rua) para o quente (quarto).\",\n          \"isCorrect\": false,\n          \"text\": \"O calor entra espontaneamente porque o quarto tem pressão menor.\"\n        }\n      ],\n      \"question\": \"Como é possível extrair calor de um ambiente frio?\"\n    },\n    {\n      \"context\": \"Quando você aperta um spray de desodorante aerossol por alguns segundos, a lata fica notavelmente gelada na sua mão.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correto! O gás realiza trabalho para se expandir rapidamente, consumindo sua própria energia interna (calor).\",\n          \"isCorrect\": true,\n          \"text\": \"O gás se expande rápido, gastando energia interna e esfriando.\"\n        },\n        {\n          \"feedback\": \"Não é uma reação química, é um processo físico de termodinâmica (expansão adiabática).\",\n          \"isCorrect\": false,\n          \"text\": \"Ocorre uma reação química endotérmica dentro da lata.\"\n        },\n        {\n          \"feedback\": \"A lata esfria por dentro. Sua mão na verdade está esquentando a lata, não o contrário.\",\n          \"isCorrect\": false,\n          \"text\": \"O metal da lata absorve calor da sua mão para ativar o spray.\"\n        },\n        {\n          \"feedback\": \"A fricção aqueceria o bico, não esfriaria a lata inteira. O resfriamento vem da expansão.\",\n          \"isCorrect\": false,\n          \"text\": \"O atrito do gás saindo pelo bico gera uma onda de frio.\"\n        }\n      ],\n      \"question\": \"Por que ocorre essa queda brusca de temperatura?\"\n    },\n    {\n      \"context\": \"Você consome 2500 calorias em alimentos num dia, mas seu corpo e atividades gastam apenas 2000 calorias.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! 1ª Lei: Energia não some. Entrada > Saída = Acúmulo (neste caso, gordura/massa).\",\n          \"isCorrect\": true,\n          \"text\": \"A energia extra será armazenada no corpo (aumento de massa).\"\n        },\n        {\n          \"feedback\": \"A energia não pode ser destruída. Ela precisa ir para algum lugar (armazenamento ou calor).\",\n          \"isCorrect\": false,\n          \"text\": \"As 500 calorias extras desaparecem naturalmente durante o sono.\"\n        },\n        {\n          \"feedback\": \"O corpo regula a temperatura (homeostase), não ferve para queimar excesso de comida.\",\n          \"isCorrect\": false,\n          \"text\": \"Sua temperatura corporal aumentará drasticamente para queimar tudo.\"\n        },\n        {\n          \"feedback\": \"Viola a conservação. Se você absorveu a energia, ela já está no sistema.\",\n          \"isCorrect\": false,\n          \"text\": \"O corpo rejeitará a energia absorvida transformando-a em água.\"\n        }\n      ],\n      \"question\": \"Segundo a 1ª Lei, o que deve acontecer obrigatoriamente?\"\n    },\n    {\n      \"context\": \"Um satélite orbita no vácuo do espaço. Seus componentes eletrônicos esquentam e ele precisa se resfriar para não quebrar.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo! No vácuo não há matéria para condução ou convecção. Só a luz (radiação) transporta energia.\",\n          \"isCorrect\": true,\n          \"text\": \"Radiação térmica (emitir luz infravermelha).\"\n        },\n        {\n          \"feedback\": \"Convecção exige um fluido (ar ou líquido). No espaço há vácuo.\",\n          \"isCorrect\": false,\n          \"text\": \"Convecção através do vento espacial.\"\n        },\n        {\n          \"feedback\": \"Condução precisa de contato físico com outro corpo. O satélite não toca em nada.\",\n          \"isCorrect\": false,\n          \"text\": \"Condução de calor para o vácuo ao redor.\"\n        },\n        {\n          \"feedback\": \"Ventiladores apenas empurram ar. Sem ar no espaço, eles apenas girariam inutilmente.\",\n          \"isCorrect\": false,\n          \"text\": \"Uso de ventiladores potentes para soprar o calor.\"\n        }\n      ],\n      \"question\": \"Qual é a única forma de transferência de calor possível no vácuo?\"\n    },\n    {\n      \"context\": \"Uma planta cresce transformando ar e solo desordenados em folhas e flores complexas e organizadas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bingo! A planta diminui a entropia localmente, mas o Sol aumentou muito mais a entropia globalmente para alimentar isso.\",\n          \"isCorrect\": true,\n          \"text\": \"Não, pois o Sol gerou muito mais desordem para fornecer essa energia.\"\n        },\n        {\n          \"feedback\": \"A vida obedece às mesmas leis. A ordem local é paga com desordem externa (energia solar).\",\n          \"isCorrect\": false,\n          \"text\": \"Sim, a vida é uma exceção mágica que viola a entropia.\"\n        },\n        {\n          \"feedback\": \"A desordem total do universo sempre aumenta, mesmo que diminua em um ponto específico.\",\n          \"isCorrect\": false,\n          \"text\": \"Sim, a Segunda Lei diz que a desordem deve aumentar em todo lugar.\"\n        },\n        {\n          \"feedback\": \"A 2ª Lei não é sobre biologia vs máquinas, é sobre estatística e energia em qualquer sistema.\",\n          \"isCorrect\": false,\n          \"text\": \"Não, porque plantas não são máquinas térmicas.\"\n        }\n      ],\n      \"question\": \"Isso viola a lei de que a entropia (desordem) sempre aumenta?\"\n    },\n    {\n      \"context\": \"Em um dia frio, você esfrega uma mão na outra vigorosamente e sente elas esquentarem.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito. O movimento (energia cinética) é dissipado pelo atrito e vira agitação molecular (calor).\",\n          \"isCorrect\": true,\n          \"text\": \"Trabalho mecânico está sendo convertido em calor pelo atrito.\"\n        },\n        {\n          \"feedback\": \"Não, o calor é gerado internamente na superfície da pele, não vem do ar.\",\n          \"isCorrect\": false,\n          \"text\": \"O movimento rápido das mãos atrai o calor do ar ao redor.\"\n        },\n        {\n          \"feedback\": \"A circulação ajuda, mas o aquecimento rápido superficial é puramente conversão de trabalho em calor.\",\n          \"isCorrect\": false,\n          \"text\": \"A pressão sanguínea aumenta localmente devido à velocidade.\"\n        },\n        {\n          \"feedback\": \"Suas mãos não são 100% eficientes. O calor gerado é a 'perda' desse processo mecânico.\",\n          \"isCorrect\": false,\n          \"text\": \"É uma reação química da pele reagindo ao oxigênio mais rápido.\"\n        }\n      ],\n      \"question\": \"Qual é a origem dessa energia térmica?\"\n    },\n    {\n      \"context\": \"Instaladores recomendam colocar aquecedores perto do chão, mas aparelhos de ar-condicionado perto do teto.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso! O ar frio desce (mais denso) e o quente sobe (menos denso), criando uma circulação natural eficiente.\",\n          \"isCorrect\": true,\n          \"text\": \"A convecção natural ajuda a distribuir a temperatura corretamente.\"\n        },\n        {\n          \"feedback\": \"A radiação ocorre em todas as direções. O motivo real é o movimento do ar (convecção).\",\n          \"isCorrect\": false,\n          \"text\": \"A radiação térmica só funciona de cima para baixo.\"\n        },\n        {\n          \"feedback\": \"Condução pelo ar é péssima. O que distribui a temperatura é o movimento do fluido (convecção).\",\n          \"isCorrect\": false,\n          \"text\": \"O ar conduz calor melhor perto do chão devido à pressão.\"\n        },\n        {\n          \"feedback\": \"Isso é estética, não física. A termodinâmica dita a posição pela densidade do ar.\",\n          \"isCorrect\": false,\n          \"text\": \"É apenas uma convenção estética de arquitetura.\"\n        }\n      ],\n      \"question\": \"Qual fenômeno físico justifica essa posição estratégica?\"\n    },\n    {\n      \"context\": \"Um motor de carro queima gasolina a 2000°C, mas o gás que sai pelo escapamento ainda está a 500°C.\",\n      \"options\": [\n        {\n          \"feedback\": \"Na mosca! Para zerar o desperdício, o escapamento teria que sair no zero absoluto, o que é impossível.\",\n          \"isCorrect\": true,\n          \"text\": \"Limites termodinâmicos impedem converter todo o calor em trabalho.\"\n        },\n        {\n          \"feedback\": \"Melhorar o design ajuda, mas o limite teórico de Carnot impede 100% de aproveitamento sempre.\",\n          \"isCorrect\": false,\n          \"text\": \"É apenas uma falha de design; motores do futuro usarão 100%.\"\n        },\n        {\n          \"feedback\": \"Mesmo com materiais perfeitos, a 2ª Lei exige que parte do calor seja rejeitada para uma fonte fria.\",\n          \"isCorrect\": false,\n          \"text\": \"O metal do motor não aguenta absorver tanta energia.\"\n        },\n        {\n          \"feedback\": \"O escapamento precisa sair para dar lugar a novo ar, mas o calor que ele carrega é perda inevitável.\",\n          \"isCorrect\": false,\n          \"text\": \"O calor precisa sair para empurrar o carro para frente.\"\n        }\n      ],\n      \"question\": \"Por que o motor desperdiça tanta energia quente no escapamento?\"\n    }\n  ]\n}",
      "outputTokens": 8521,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "pt-physics-thermodynamics-laws-1",
      "userPrompt": "LESSON_TITLE: Leis da Termodinamica\nLESSON_DESCRIPTION: Compreendendo as leis da termodinamica e como elas governam a transferencia de energia e os limites de eficiencia em todos os processos fisicos\nCHAPTER_TITLE: Termodinamica\nCOURSE_TITLE: Fisica Geral\nLANGUAGE: pt\n\nBACKGROUND_STEPS:\n1. O Sonho Impossivel: No seculo XIX, engenheiros queriam construir maquinas a vapor mais eficientes. Sadi Carnot percebeu que havia um limite fundamental — nenhuma maquina poderia converter todo calor em trabalho.\n2. As Leis Universais: Rudolf Clausius e Lord Kelvin formalizaram as leis da termodinamica. Elas explicam por que o cafe esfria, por que precisamos comer, e por que o universo caminha para a desordem.\n3. Solidez da Teoria: A termodinamica e uma das teorias mais robustas da fisica. Einstein disse que, de todas as teorias, ela e a menos provavel de ser derrubada por descobertas futuras.\n\nEXPLANATION_STEPS:\n1. Primeira Lei: A primeira lei diz que energia nao se cria nem se destroi — apenas se transforma. Toda energia que entra em um sistema deve sair ou ser armazenada. E um balanco contabil universal.\n2. Segunda Lei: A segunda lei afirma que processos espontaneos aumentam a entropia total. Calor flui do quente para o frio naturalmente, nunca ao contrario sem trabalho externo.\n3. Entropia: Entropia mede a dispersao de energia entre microestados possiveis. Sistemas evoluem para configuracoes mais provaveis — e configuracoes de alta entropia sao vastamente mais provaveis.\n4. Equilibrio Termico: Equilibrio termico ocorre quando dois sistemas em contato param de trocar energia liquida. Eles atingem a mesma temperatura, mas nao necessariamente a mesma energia.\n5. Calor vs Temperatura: Calor e a transferencia de energia termica entre sistemas. Temperatura mede a energia cinetica media das moleculas. Calor alto com temperatura baixa e possivel (muito material, movimento lento).\n\nMECHANICS_STEPS:\n1. Ciclo do Motor Termico: Em um motor termico, calor flui da fonte quente para a fria. Parte dessa energia e capturada como trabalho. O resto e desperdicado como calor para o ambiente.\n2. Limite de Carnot: O ciclo de Carnot define a eficiencia maxima teorica. Depende apenas das temperaturas das fontes quente e fria. Quanto maior a diferenca, maior a eficiencia possivel.\n3. Bomba de Calor: Bombas de calor invertem o fluxo natural. Usam trabalho para mover calor do frio para o quente — como a geladeira que remove calor do interior e o despeja no ambiente.\n4. Tipos de Processos: Processos isotermicos mantem temperatura constante. Processos adiabaticos nao trocam calor com o ambiente. Cada tipo segue equacoes especificas de expansao e compressao.\n5. Mecanismos de Transferencia: A conducao, conveccao e radiacao sao os tres mecanismos de transferencia de calor. Cada um domina em situacoes diferentes — metais conduzem, liquidos convectam, o sol irradia.\n\nEXAMPLES_STEPS:\n1. A Geladeira: A geladeira e uma bomba de calor que move energia do interior frio para o exterior quente. Isso requer trabalho — por isso ela consome eletricidade continuamente.\n2. Motores de Combustao: Motores de carro convertem energia quimica do combustivel em movimento. Mas pelo menos 60-70% da energia e perdida como calor — os limites termodinamicos sao implacaveis.\n3. Geracao de Energia: Usinas termeletricas queimam combustivel para gerar vapor que move turbinas. A eficiencia tipica e 30-40% — a maior parte da energia se dissipa no ambiente.\n4. O Corpo Humano: Seu corpo e uma maquina termica. Converte energia dos alimentos em trabalho e calor. Febre significa que o termostato interno foi reconfigurado para uma temperatura mais alta."
    },
    {
      "duration": 69932.78116599997,
      "inputTokens": 3009,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Estás en una ciudad extranjera y no sabes cómo comprar boleto para el tren. Ves que todos los locales hacen fila en una máquina amarilla, aunque hay una roja libre. Decides formarte en la amarilla.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! Ante la duda y la ambigüedad, asumimos que el grupo tiene información que nosotros no tenemos (saben cuál máquina funciona).\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"No exactamente. Aquí no buscas caerles bien o evitar el rechazo (normativa), sino resolver un problema práctico usando al grupo como guía.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"Esto implicaría que alguien con rango te ordenó usar la amarilla. Aquí solo estás imitando a tus pares.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La desindividuación implica pérdida de autoconciencia en grupo, no la búsqueda de información correcta.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia guía tu decisión?\"\n    },\n    {\n      \"context\": \"En una cena elegante, odias el caviar, pero cuando el anfitrión pregunta si les gusta, todos dicen '¡Delicioso!'. Tú sonríes y dices '¡Sí, me encanta!' para no romper el ambiente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. Sabes que mientes, pero modificas tu conducta externa para encajar y evitar la incomodidad social. Tu creencia interna no cambió.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad externa (influencia normativa)\"\n        },\n        {\n          \"feedback\": \"Esto ocurriría si realmente te convencieras de que el caviar es rico porque los demás lo dicen. Aquí solo finges.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad interna (aceptación)\"\n        },\n        {\n          \"feedback\": \"La influencia informacional ocurre cuando crees que los otros tienen razón. Aquí sabes que no te gusta, solo quieres encajar.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"No hay una orden directa de una figura de autoridad aquí, es presión de pares.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia jerárquica\"\n        }\n      ],\n      \"question\": \"¿Qué está ocurriendo en este escenario?\"\n    },\n    {\n      \"context\": \"Un gerente pide a su asistente que mienta sobre una reunión pequeña. A la semana siguiente, le pide falsificar un reporte de gastos. El asistente accede a ambos, sintiéndose atrapado.\",\n      \"options\": [\n        {\n          \"feedback\": \"Cerca, pero la autoridad es solo el inicio. El mecanismo que hace difícil negarse a lo segundo tras aceptar lo primero es la escalada.\",\n          \"isCorrect\": false,\n          \"text\": \"Miedo al castigo\"\n        },\n        {\n          \"feedback\": \"¡Así es! Aceptar una pequeña transgresión inicial hace psicológicamente mucho más difícil rechazar la siguiente, creando una trampa de coherencia.\",\n          \"isCorrect\": true,\n          \"text\": \"Escalada de compromiso\"\n        },\n        {\n          \"feedback\": \"La difusión ocurre en grupos donde nadie actúa. Aquí es una interacción directa uno a uno.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"Esto se refiere a normas de comportamiento general, no a la trampa psicológica de peticiones graduales.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        }\n      ],\n      \"question\": \"¿Qué mecanismo psicológico atrapa al asistente?\"\n    },\n    {\n      \"context\": \"En un jurado de 12 personas, 11 votan 'culpable'. El jurado número 12 cree que es inocente, pero levanta la mano por 'culpable' al ver a todos los demás.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Punto clave! La unanimidad total es una barrera casi impasable. Si tan solo uno más hubiera dicho 'inocente', la presión habría colapsado.\",\n          \"isCorrect\": true,\n          \"text\": \"El poder de la unanimidad\"\n        },\n        {\n          \"feedback\": \"No necesariamente. La presión no viene de una orden (autoridad), sino del consenso del grupo (conformidad).\",\n          \"isCorrect\": false,\n          \"text\": \"Respeto a la autoridad del juez\"\n        },\n        {\n          \"feedback\": \"Al contrario, la responsabilidad se siente difusa en el grupo, lo que facilita seguir la corriente, no el sentido de deber individual.\",\n          \"isCorrect\": false,\n          \"text\": \"Alto sentido de responsabilidad personal\"\n        },\n        {\n          \"feedback\": \"Esto es cuando la gente hace lo que ve (ej. tirar basura). Aquí es presión directa de consenso en una decisión.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma descriptiva\"\n        }\n      ],\n      \"question\": \"¿Qué factor situacional hace esto tan probable?\"\n    },\n    {\n      \"context\": \"Ves a alguien colapsar en una calle concurrida. Mucha gente mira, pero nadie se acerca. Tú tampoco te mueves, pensando 'seguro alguien más cualificado ya llamó al 911'.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! Cuando hay muchos testigos, la carga de actuar se diluye. Todos esperan que otro lo haga, resultando en inacción total.\",\n          \"isCorrect\": true,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"La apatía implica que no te importa. En realidad, a menudo te importa, pero la situación te paraliza por creer que otros actuarán.\",\n          \"isCorrect\": false,\n          \"text\": \"Apatía social generalizada\"\n        },\n        {\n          \"feedback\": \"Esto sería actuar mal para ser aceptado. Aquí el problema es la falta de acción por suponer que otros la tomarán.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"No hay una figura de autoridad dando órdenes contradictorias aquí.\",\n          \"isCorrect\": false,\n          \"text\": \"Conflicto de autoridad\"\n        }\n      ],\n      \"question\": \"¿Por qué ocurre esta inacción colectiva?\"\n    },\n    {\n      \"context\": \"Un sitio web de reservas muestra un mensaje: 'El 85% de los huéspedes reutilizan sus toallas'. Esto logra que más gente las reutilice que un mensaje sobre salvar el planeta.\",\n      \"options\": [\n        {\n          \"feedback\": \"Una norma prescriptiva dice lo que 'debes' hacer. Esta describe lo que la gente 'realmente hace', lo cual es un motivador social muy fuerte.\",\n          \"isCorrect\": false,\n          \"text\": \"Uso de norma prescriptiva\"\n        },\n        {\n          \"feedback\": \"¡Correcto! Nos dicen lo que es normal (descripción de la realidad), y tendemos a alinearnos con la mayoría.\",\n          \"isCorrect\": true,\n          \"text\": \"Uso de norma descriptiva\"\n        },\n        {\n          \"feedback\": \"Esto implicaría una orden directa de la gerencia del hotel. El mensaje apela a lo que hacen los 'otros huéspedes', no a una regla.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad reduce la acción. Aquí el mensaje busca aumentarla mostrando consenso.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        }\n      ],\n      \"question\": \"¿Qué táctica psicológica se está empleando?\"\n    },\n    {\n      \"context\": \"Históricamente, muchas atrocidades fueron cometidas por ciudadanos promedio que argumentaron 'solo seguía órdenes'.\",\n      \"options\": [\n        {\n          \"feedback\": \"Esta es la explicación intuitiva, pero la psicología social demostró que la situación pesa más que la personalidad.\",\n          \"isCorrect\": false,\n          \"text\": \"Eran personas inherentemente malvadas\"\n        },\n        {\n          \"feedback\": \"¡Esa es la lección difícil! Bajo la presión de una autoridad percibida como legítima, la moral individual suele ceder ante la obediencia.\",\n          \"isCorrect\": true,\n          \"text\": \"La autoridad percibida anuló su juicio moral\"\n        },\n        {\n          \"feedback\": \"La ignorancia no es el factor clave; sabían lo que hacían, pero se sentían incapaces de desobedecer a la estructura de poder.\",\n          \"isCorrect\": false,\n          \"text\": \"No entendían las consecuencias\"\n        },\n        {\n          \"feedback\": \"El miedo físico existe, pero los experimentos muestran que la gente obedece incluso sin amenaza de violencia, solo por la presión de la jerarquía.\",\n          \"isCorrect\": false,\n          \"text\": \"El miedo físico fue el único factor\"\n        }\n      ],\n      \"question\": \"¿Qué nos enseña la psicología sobre esto?\"\n    },\n    {\n      \"context\": \"Estás en una manifestación pacífica. Cae la noche, te pones una máscara y te mezclas con miles de personas. De pronto, empiezas a gritar insultos y golpear vidrieras, algo que jamás harías solo.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Bingo! El anonimato y la inmersión en el grupo reducen tu autoconciencia y frenos morales habituales.\",\n          \"isCorrect\": true,\n          \"text\": \"Desindividuación\"\n        },\n        {\n          \"feedback\": \"La escalada es un proceso gradual. Aquí el cambio es provocado por el anonimato y la situación de masa.\",\n          \"isCorrect\": false,\n          \"text\": \"Escalada de compromiso\"\n        },\n        {\n          \"feedback\": \"La obediencia requiere alguien que mande. En una turba, a menudo no hay líder, es un contagio horizontal.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia ciega\"\n        },\n        {\n          \"feedback\": \"Informacional es buscar datos. Aquí no estás buscando la verdad, te estás dejando llevar por la emoción grupal y el anonimato.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        }\n      ],\n      \"question\": \"¿Qué fenómeno facilita este cambio de conducta?\"\n    },\n    {\n      \"context\": \"Un director ejecutivo ordena un cambio éticamente cuestionable. Si da la orden por Zoom desde otra ciudad, es más probable que los empleados se resistan que si está parado en la oficina.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Correcto! La distancia física amortigua el impacto de la autoridad. Es más fácil decir 'no' a una pantalla que a una persona presente.\",\n          \"isCorrect\": true,\n          \"text\": \"Efecto de la proximidad de la autoridad\"\n        },\n        {\n          \"feedback\": \"La ambigüedad podría influir, pero el factor decisivo aquí es la distancia física del que da la orden.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambigüedad del mensaje digital\"\n        },\n        {\n          \"feedback\": \"Al contrario, la tecnología suele despersonalizar, pero aquí lo relevante es que la ausencia física reduce la presión de obedecer.\",\n          \"isCorrect\": false,\n          \"text\": \"Mayor influencia normativa online\"\n        },\n        {\n          \"feedback\": \"La difusión ocurre entre pares. Aquí se trata de la relación vertical con el jefe y la distancia física.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        }\n      ],\n      \"question\": \"¿Por qué varía la obediencia en este caso?\"\n    },\n    {\n      \"context\": \"Un grupo de amigos decide saltarse una clase. Tú no quieres, pero otro amigo dice: 'Yo tampoco creo que sea buena idea'. De inmediato te sientes capaz de decir 'Yo tampoco voy'.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exacto. No necesitas ser mayoría. Un solo disidente rompe la ilusión de unanimidad y libera a otros para expresar su verdad.\",\n          \"isCorrect\": true,\n          \"text\": \"Ruptura de la unanimidad\"\n        },\n        {\n          \"feedback\": \"Si fuera influencia informacional, creerías que el amigo sabe más que tú. Aquí simplemente te dio el valor social para disentir.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional pura\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad suele causar inacción. Aquí alguien actuó, lo cual rompió el efecto.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumento de difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"La obediencia es hacia autoridades. Esto es presión de grupo (conformidad) que fue neutralizada.\",\n          \"isCorrect\": false,\n          \"text\": \"Desobediencia jerárquica\"\n        }\n      ],\n      \"question\": \"¿Qué efecto ilustra esta situación?\"\n    },\n    {\n      \"context\": \"Ves un cartel que dice 'Prohibido pisar el césped', pero observas un camino de tierra marcado justo por el medio donde todos cruzan.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Bien visto! La norma prescriptiva (el cartel que dice qué hacer) choca con la descriptiva (la huella que muestra qué hacen todos).\",\n          \"isCorrect\": true,\n          \"text\": \"Conflicto: norma prescriptiva vs. descriptiva\"\n        },\n        {\n          \"feedback\": \"Influencia informacional sería si cruzaras por ahí porque crees que es más seguro. El conflicto aquí es entre la regla y la costumbre visible.\",\n          \"isCorrect\": false,\n          \"text\": \"Conflicto: influencia informacional vs. normativa\"\n        },\n        {\n          \"feedback\": \"La obediencia es al cartel. El camino representa la conformidad con la multitud, no la obediencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia total a la autoridad\"\n        },\n        {\n          \"feedback\": \"No hay anonimato ni pérdida del yo aquí, solo una contradicción entre reglas y hechos.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación visual\"\n        }\n      ],\n      \"question\": \"¿Qué tipos de normas están en conflicto?\"\n    },\n    {\n      \"context\": \"Un enfermero novato nota que un cirujano experto está a punto de operar la pierna equivocada. El enfermero duda y finalmente no dice nada.\",\n      \"options\": [\n        {\n          \"feedback\": \"Esto sería imitar a otros enfermeros. Aquí el problema es la relación vertical de poder con el cirujano.\",\n          \"isCorrect\": false,\n          \"text\": \"Presión de grupo (conformidad)\"\n        },\n        {\n          \"feedback\": \"No es solo difusión (esperar que otro hable), es el miedo activo a contradecir a un superior jerárquico.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"¡Correcto! La estructura jerárquica crea una barrera psicológica donde corregir a la 'autoridad' se siente como una transgresión.\",\n          \"isCorrect\": true,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"Normativa es querer encajar. Aquí el enfermero sabe que hay un error grave (no es tema de gusto), pero la autoridad lo silencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        }\n      ],\n      \"question\": \"¿Qué factor paraliza principalmente al enfermero?\"\n    },\n    {\n      \"context\": \"Empiezas a reciclar porque tus vecinos te miran mal si no lo haces. Con el tiempo, lees sobre el impacto ambiental y ahora reciclas incluso cuando nadie te ve.\",\n      \"options\": [\n        {\n          \"feedback\": \"No es desindividuación (pérdida de identidad), sino la internalización de una norma.\",\n          \"isCorrect\": false,\n          \"text\": \"De desindividuación a obediencia\"\n        },\n        {\n          \"feedback\": \"¡Así es! Empezó como un acto para evitar rechazo (cumplimiento externo) y evolucionó a una convicción personal (aceptación interna).\",\n          \"isCorrect\": true,\n          \"text\": \"De cumplimiento externo a aceptación interna\"\n        },\n        {\n          \"feedback\": \"Al revés. Empezaste por presión social (normativa) y luego aprendiste los hechos (información/creencia).\",\n          \"isCorrect\": false,\n          \"text\": \"De influencia informacional a normativa\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad implicaría dejar de reciclar esperando que otros lo hagan.\",\n          \"isCorrect\": false,\n          \"text\": \"De responsabilidad individual a difusa\"\n        }\n      ],\n      \"question\": \"¿Cómo evolucionó tu conformidad?\"\n    },\n    {\n      \"context\": \"En una emergencia, señalas a una persona específica y le dices: '¡Tú, el de la chaqueta roja, llama al 911 ahora!'\",\n      \"options\": [\n        {\n          \"feedback\": \"La influencia normativa busca aprobación. Aquí estás dando una instrucción de crisis.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumentar la influencia normativa\"\n        },\n        {\n          \"feedback\": \"¡Exacto! Al asignar una tarea a un individuo específico, eliminas la excusa de 'alguien más lo hará' y rompes la parálisis grupal.\",\n          \"isCorrect\": true,\n          \"text\": \"Romper la difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"Al contrario, estás intentando individuarlos para que actúen, no desindividuarlos.\",\n          \"isCorrect\": false,\n          \"text\": \"Crear desindividuación\"\n        },\n        {\n          \"feedback\": \"La proximidad ayuda, pero la clave táctica aquí es la asignación única de responsabilidad.\",\n          \"isCorrect\": false,\n          \"text\": \"Reducir la proximidad de la autoridad\"\n        }\n      ],\n      \"question\": \"¿Por qué es efectiva esta estrategia?\"\n    },\n    {\n      \"context\": \"Te piden firmar una petición para 'Conducción Segura'. Dos semanas después, te piden poner un letrero gigante y feo en tu jardín sobre lo mismo. Es probable que digas que sí.\",\n      \"options\": [\n        {\n          \"feedback\": \"No es influencia normativa porque no hay un grupo presionando, es una solicitud individual basada en tu acción previa.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"¡Correcto! Al aceptar la petición pequeña, cambias tu autoimagen ('soy un conductor seguro'). Para mantener coherencia, aceptas la grande.\",\n          \"isCorrect\": true,\n          \"text\": \"Escalada (técnica del pie en la puerta)\"\n        },\n        {\n          \"feedback\": \"La obediencia requiere un jefe o figura de poder. Aquí es un voluntario pidiendo un favor.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La desindividuación ocurre en multitudes. Aquí estás actuando como individuo.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Qué explica tu disposición a aceptar?\"\n    }\n  ]\n}",
      "outputTokens": 7366,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "es-psychology-social-conformity-1",
      "userPrompt": "LESSON_TITLE: Conformidad y Obediencia Social\nLESSON_DESCRIPTION: Comprendiendo como la presion social y la autoridad influyen en nuestras decisiones, desde situaciones cotidianas hasta dilemas eticos\nCHAPTER_TITLE: Influencia Social\nCOURSE_TITLE: Psicologia Social\nLANGUAGE: es\n\nBACKGROUND_STEPS:\n1. La Pregunta Post-Guerra: Despues de la Segunda Guerra Mundial, el mundo pregunto: como pudo gente ordinaria participar en atrocidades? La psicologia social busco entender el poder de la presion grupal sobre la moral individual.\n2. Los Estudios de Asch: Solomon Asch diseno experimentos elegantes en los 1950s. Mostro que personas inteligentes negaban la evidencia de sus propios ojos cuando un grupo unanime decia lo contrario.\n3. El Shock de Milgram: Stanley Milgram llevo esto mas lejos con sus experimentos de obediencia. Revelo que la autoridad percibida podia hacer que personas normales administraran lo que creian eran descargas electricas peligrosas.\n\nEXPLANATION_STEPS:\n1. Definicion de Conformidad: La conformidad es el cambio de comportamiento o creencias para coincidir con un grupo. Puede ser externa (actuar igual) o interna (realmente creer lo que el grupo cree).\n2. Influencia Normativa: La influencia normativa surge del deseo de aceptacion social. Nos conformamos para evitar rechazo, incluso cuando sabemos que el grupo esta equivocado.\n3. Influencia Informacional: La influencia informacional surge cuando usamos al grupo como fuente de informacion. En situaciones ambiguas, asumimos que otros saben mas que nosotros.\n4. Obediencia a la Autoridad: La obediencia es conformidad hacia una autoridad. Difiere de la conformidad horizontal porque hay una jerarquia de poder explicita.\n5. Tipos de Normas: Las normas descriptivas describen lo que la gente hace. Las normas prescriptivas describen lo que deberia hacer. Ambas influyen el comportamiento de maneras diferentes.\n\nMECHANICS_STEPS:\n1. El Poder de la Unanimidad: La unanimidad amplifica la conformidad dramaticamente. Un solo disidente reduce la presion a conformarse — no necesitas mayoria, solo alguien que rompa el consenso.\n2. Proximidad y Autoridad: La proximidad de la autoridad aumenta la obediencia. En experimentos, la obediencia caia drasticamente cuando el experimentador daba ordenes por telefono en vez de en persona.\n3. Escalada de Compromiso: El compromiso gradual atrapa a las personas. Pequenas concesiones llevan a mayores — es mas facil decir 'no' al principio que despues de varios 'si'.\n4. Difusion de Responsabilidad: La difusion de responsabilidad ocurre en grupos. Cuando todos son responsables, nadie se siente responsable. Asignar roles especificos contrarresta este efecto.\n5. Desindividuacion: La desindividuacion en grupos reduce la autoconciencia. Anonimato mas excitacion grupal pueden llevar a comportamientos que el individuo solo nunca consideraria.\n\nEXAMPLES_STEPS:\n1. Dinamicas de Reunion: En reuniones de trabajo, el silencio ante una mala idea se interpreta como acuerdo. La primera persona que habla ancla la discusion, y los demas se conforman por temor a parecer diferentes.\n2. Cascadas en Redes: Las redes sociales amplifican la conformidad. Los 'likes' visibles crean cascadas — contenido popular se vuelve mas popular, no necesariamente porque sea mejor, sino porque otros ya lo aprobaron.\n3. Tendencias de Moda: La moda demuestra conformidad en accion. Tendencias se propagan porque vestirse diferente tiene costos sociales. La originalidad tiene limites definidos por el grupo.\n4. Efecto Espectador: En emergencias medicas, la difusion de responsabilidad hace que nadie actue. Cada persona espera que otro tome la iniciativa, resultando en inaccion colectiva."
    },
    {
      "duration": 73139.90220800001,
      "inputTokens": 2917,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A traditional economist builds a model assuming everyone will save exactly the optimal amount for retirement based on interest rates. In reality, most people save far too little.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. Behavioral economics emerged because humans deviate from pure logic in predictable, systematic ways.\",\n          \"isCorrect\": true,\n          \"text\": \"Humans deviate systematically from rational utility maximization\"\n        },\n        {\n          \"feedback\": \"While math skills vary, behavioral economics shows even experts make systematic errors due to cognitive biases.\",\n          \"isCorrect\": false,\n          \"text\": \"People generally lack the mathematical skills to calculate interest\"\n        },\n        {\n          \"feedback\": \"This might be a factor, but the core insight of behavioral economics is about internal psychological biases, not external market forces.\",\n          \"isCorrect\": false,\n          \"text\": \"Market volatility makes it impossible to predict the future\"\n        },\n        {\n          \"feedback\": \"Actually, behavioral economics challenges the idea that people act in their own best interest even when they have freedom.\",\n          \"isCorrect\": false,\n          \"text\": \"Government regulations prevent people from acting rationally\"\n        }\n      ],\n      \"question\": \"What core insight explains this gap between the model and reality?\"\n    },\n    {\n      \"context\": \"You happily win $100 in a lottery. Later that day, you accidentally drop $80 down a storm drain. Despite being $20 richer overall, you feel more upset about the loss than happy about the win.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! Losses hurt roughly twice as much as equivalent gains feel good, creating a net negative emotional state even when you're financially ahead.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Anchoring involves relying on the first number you see. This scenario is about the emotional asymmetry of gaining vs. losing.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Present bias is about valuing 'now' over 'later.' This scenario happens on the same day; the issue is how you feel about the loss.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"Framing is about how information is presented. Here, you actually experienced the events, and the bias is in your emotional reaction.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing effects\"\n        }\n      ],\n      \"question\": \"Which concept best explains this emotional reaction?\"\n    },\n    {\n      \"context\": \"A charity sends a donation form. One version suggests amounts starting at $10. Another version suggests amounts starting at $100. People given the second form tend to donate significantly more.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! The initial number ($100) sets a mental benchmark, pulling subsequent decisions toward it, even if the number is arbitrary.\",\n          \"isCorrect\": true,\n          \"text\": \"They are influenced by the anchoring bias\"\n        },\n        {\n          \"feedback\": \"Social proof would require knowing what *others* donated. This effect works purely based on the suggested numbers on the page.\",\n          \"isCorrect\": false,\n          \"text\": \"They are following social proof from other donors\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about avoiding losses. Donating is a voluntary payment, not a loss to be avoided in this context.\",\n          \"isCorrect\": false,\n          \"text\": \"They are experiencing loss aversion\"\n        },\n        {\n          \"feedback\": \"The availability heuristic is about recalling examples easily. This is about a specific number influencing a judgment.\",\n          \"isCorrect\": false,\n          \"text\": \"They are using the availability heuristic\"\n        }\n      ],\n      \"question\": \"Why does the second form generate higher donations?\"\n    },\n    {\n      \"context\": \"On Sunday night, you commit to a diet starting Monday. But when Monday lunch arrives, the burger looks too good to resist, and you tell yourself you'll start the diet tomorrow.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. The immediate pleasure of the burger outweighs the future benefit of health, illustrating how we overweight the present moment.\",\n          \"isCorrect\": true,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"Sunk cost involves continuing something because you've already invested in it. Here, you are abandoning a plan for immediate gratification.\",\n          \"isCorrect\": false,\n          \"text\": \"Sunk cost fallacy\"\n        },\n        {\n          \"feedback\": \"Framing is about presentation. The burger didn't change its presentation; your preference shifted based on time (now vs. later).\",\n          \"isCorrect\": false,\n          \"text\": \"Framing effect\"\n        },\n        {\n          \"feedback\": \"System 2 is slow and analytical. This impulsive decision is classic System 1 thinking overriding your System 2 plan.\",\n          \"isCorrect\": false,\n          \"text\": \"System 2 thinking\"\n        }\n      ],\n      \"question\": \"Which concept explains this reversal of preference?\"\n    },\n    {\n      \"context\": \"A butcher sells two packages of minced meat. One is labeled '80% lean,' the other '20% fat.' Although they are identical, customers perceive the '80% lean' meat as healthier and higher quality.\",\n      \"options\": [\n        {\n          \"feedback\": \"You got it! The information is identical, but the positive presentation ('lean') triggers a better emotional response than the negative one ('fat').\",\n          \"isCorrect\": true,\n          \"text\": \"Framing effects\"\n        },\n        {\n          \"feedback\": \"Anchoring relies on a specific number influencing an estimate. Here, the numbers complement each other (80/20); it's the *words* that change perception.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Confirmation bias is about seeking info that supports your beliefs. This is about how a single piece of info is packaged.\",\n          \"isCorrect\": false,\n          \"text\": \"Confirmation bias\"\n        },\n        {\n          \"feedback\": \"Availability heuristic is about memory recall. This is about immediate perception of the label in front of you.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        }\n      ],\n      \"question\": \"What is this phenomenon called?\"\n    },\n    {\n      \"context\": \"You are driving on an empty highway, listening to music (easy). Suddenly, heavy rain starts and traffic stops. You instinctively turn off the radio to concentrate (hard).\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! The easy driving was automatic System 1. The dangerous conditions required the slow, effortful attention of System 2.\",\n          \"isCorrect\": true,\n          \"text\": \"Switching from System 1 to System 2 thinking\"\n        },\n        {\n          \"feedback\": \"Actually, it's the opposite. You moved from the automatic, fast system to the effortful, analytical system.\",\n          \"isCorrect\": false,\n          \"text\": \"Switching from System 2 to System 1 thinking\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about value perception, not cognitive load or attention.\",\n          \"isCorrect\": false,\n          \"text\": \"Overcoming loss aversion\"\n        },\n        {\n          \"feedback\": \"Anchoring is about numerical estimates. This is about attention and cognitive processing modes.\",\n          \"isCorrect\": false,\n          \"text\": \"Applying an anchoring heuristic\"\n        }\n      ],\n      \"question\": \"What cognitive shift happened when the rain started?\"\n    },\n    {\n      \"context\": \"After seeing a news report about a shark attack, you refuse to swim in the ocean, even though statistics show you are far more likely to be injured by a falling coconut.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes! The shark attack is vivid and easily recalled (available), so you overestimate its probability compared to boring, common risks.\",\n          \"isCorrect\": true,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"The gambler's fallacy is about expecting streaks to end. This is about judging risk based on how scary/memorable the event is.\",\n          \"isCorrect\": false,\n          \"text\": \"Gambler's fallacy\"\n        },\n        {\n          \"feedback\": \"Social proof involves copying others. Unless everyone else on the beach is also refusing to swim, this is an internal judgment error.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof\"\n        },\n        {\n          \"feedback\": \"Sunk cost is about past investments. This is a forward-looking risk assessment based on vivid news.\",\n          \"isCorrect\": false,\n          \"text\": \"Sunk cost fallacy\"\n        }\n      ],\n      \"question\": \"Why does the shark risk feel so much higher?\"\n    },\n    {\n      \"context\": \"A software company wants users to share usage data. They add a checkbox during installation that is already checked. Users must manually uncheck it if they don't want to share data.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. This uses 'default' bias—people tend to stick with the pre-selected option because changing it requires effort.\",\n          \"isCorrect\": true,\n          \"text\": \"It leverages choice architecture through defaults\"\n        },\n        {\n          \"feedback\": \"Framing changes how a choice is described. This tactic changes the *mechanism* of selection (opt-out vs opt-in).\",\n          \"isCorrect\": false,\n          \"text\": \"It uses framing to make data sharing look fun\"\n        },\n        {\n          \"feedback\": \"Actually, this relies on System 1 (laziness/inertia). System 2 would actively evaluate whether to uncheck the box.\",\n          \"isCorrect\": false,\n          \"text\": \"It forces users to use System 2 thinking\"\n        },\n        {\n          \"feedback\": \"Social proof would involve saying '90% of users share data.' This is purely about the checkbox setting.\",\n          \"isCorrect\": false,\n          \"text\": \"It applies social proof to encourage sharing\"\n        }\n      ],\n      \"question\": \"Why is this strategy likely to increase data sharing?\"\n    },\n    {\n      \"context\": \"A GPS app automatically plots the most fuel-efficient route. Drivers can still choose the fastest route if they click a button, but most just hit 'Start' on the green path.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! A nudge steers behavior (toward fuel efficiency) by making it easy, without forbidding other options (the fast route is still there).\",\n          \"isCorrect\": true,\n          \"text\": \"It alters behavior without restricting freedom\"\n        },\n        {\n          \"feedback\": \"Nudges are specifically designed *not* to use financial incentives or penalties. They rely on psychology, not money.\",\n          \"isCorrect\": false,\n          \"text\": \"It uses financial penalties to change behavior\"\n        },\n        {\n          \"feedback\": \"If the fastest route were banned, that would be a mandate, not a nudge. Nudges must leave choices open.\",\n          \"isCorrect\": false,\n          \"text\": \"It removes the option to drive fast\"\n        },\n        {\n          \"feedback\": \"This works because it appeals to System 1 (fast/automatic), not the slow analytical System 2.\",\n          \"isCorrect\": false,\n          \"text\": \"It appeals primarily to System 2 logic\"\n        }\n      ],\n      \"question\": \"Why qualifies this design as a 'nudge'?\"\n    },\n    {\n      \"context\": \"A student knows she procrastinates. She downloads an app that blocks all social media sites on her laptop until 8:00 PM, making it impossible to check them even if she wants to.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on. She is 'tying her hands' now to prevent her future self (who will be tempted by Present Bias) from acting irrationally.\",\n          \"isCorrect\": true,\n          \"text\": \"A commitment device\"\n        },\n        {\n          \"feedback\": \"Social proof requires looking at others' behavior. This is a personal tool to manage her own behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof\"\n        },\n        {\n          \"feedback\": \"An anchor is a reference point for estimation. This is a mechanism to restrict future choices.\",\n          \"isCorrect\": false,\n          \"text\": \"An anchor\"\n        },\n        {\n          \"feedback\": \"Framing is about presentation. This is an active intervention that restricts functionality.\",\n          \"isCorrect\": false,\n          \"text\": \"A framing effect\"\n        }\n      ],\n      \"question\": \"What is the student using to overcome her nature?\"\n    },\n    {\n      \"context\": \"A hotel places a card in the bathroom saying: '75% of guests in this room reuse their towels to help the environment.' Towel reuse rates increase significantly.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! We look to others (especially those 'like us' in the same room) to determine correct behavior.\",\n          \"isCorrect\": true,\n          \"text\": \"Social proof\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about fear of losing something. Here, the guest loses nothing by reusing a towel; they are conforming to a norm.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Availability heuristic is about memory. This is about conformity to a stated statistic.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"Choice architecture usually involves defaults or ordering. This is simply providing information about what others do.\",\n          \"isCorrect\": false,\n          \"text\": \"Default bias\"\n        }\n      ],\n      \"question\": \"What psychological lever is the hotel pulling?\"\n    },\n    {\n      \"context\": \"You bought a concert ticket for $100. On the day of the show, there is a blizzard. Driving is dangerous, but you go anyway because you 'don't want to waste the money,' risking your safety.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. Loss aversion makes the pain of 'wasting' the $100 feel worse than the physical risk, leading to an irrational decision.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Anchoring involves estimates. While the $100 is a number, the drive is caused by the *pain of losing* that value, not an estimation error.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Social proof would be going because your friends are going. Here, you're going solely to avoid the feeling of waste.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof\"\n        },\n        {\n          \"feedback\": \"Availability heuristic isn't at play here. In fact, if you used it, you might remember car crashes and stay home!\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        }\n      ],\n      \"question\": \"Which bias drives you to drive into the storm?\"\n    },\n    {\n      \"context\": \"A real estate agent shows you a run-down house listed for an exorbitant price first. Then, she shows you a nice house listed for a slightly lower price. The second house feels like a steal.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. The first high price set an 'anchor.' Adjusted against it, the second price seems low, even if it's actually market value.\",\n          \"isCorrect\": true,\n          \"text\": \"The first house served as an anchor\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about giving things up. This is about perceiving value based on a comparison.\",\n          \"isCorrect\": false,\n          \"text\": \"It triggered loss aversion\"\n        },\n        {\n          \"feedback\": \"Commitment devices restrict future choices. This is just a sequence of information meant to influence perception.\",\n          \"isCorrect\": false,\n          \"text\": \"The first house was a commitment device\"\n        },\n        {\n          \"feedback\": \"Social proof requires knowing what others paid. This relies entirely on the comparison between the two houses shown.\",\n          \"isCorrect\": false,\n          \"text\": \"It utilized social proof\"\n        }\n      ],\n      \"question\": \"How did the first house influence your perception of the second?\"\n    },\n    {\n      \"context\": \"A company wants employees to save for retirement. Instead of a seminar on the benefits (which targets System 2), they simply change the paperwork so employees are enrolled automatically.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. System 2 is lazy and requires effort. By engaging the passive System 1 (doing nothing), the desired outcome becomes the path of least resistance.\",\n          \"isCorrect\": true,\n          \"text\": \"It bypasses the need for effortful System 2 action\"\n        },\n        {\n          \"feedback\": \"Actually, defaults work because people *don't* analyze them. If they used System 2, the default wouldn't matter as much.\",\n          \"isCorrect\": false,\n          \"text\": \"It forces employees to use System 2 analysis\"\n        },\n        {\n          \"feedback\": \"Availability is about vivid examples. This strategy works through inertia, not memory recall.\",\n          \"isCorrect\": false,\n          \"text\": \"It relies on the availability heuristic\"\n        },\n        {\n          \"feedback\": \"Nudging is about preserving freedom. If they increased penalties, it wouldn't be a nudge anymore.\",\n          \"isCorrect\": false,\n          \"text\": \"It increases the financial penalty for not saving\"\n        }\n      ],\n      \"question\": \"Why is this 'nudge' often more effective than the seminar?\"\n    },\n    {\n      \"context\": \"You subscribe to a streaming service for a 'free trial.' You intend to cancel, but after 30 days, the service has become part of your routine, and losing it feels painful, so you start paying.\",\n      \"options\": [\n        {\n          \"feedback\": \"You got it! Once you 'have' the service, giving it up triggers loss aversion—the pain of losing it is greater than the pleasure of gaining the cash.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion makes cancelling feel like a loss\"\n        },\n        {\n          \"feedback\": \"Anchoring is about numbers. While price is involved, the mechanism here is the emotional attachment to the service you now 'own.'\",\n          \"isCorrect\": false,\n          \"text\": \"The price was anchored too high\"\n        },\n        {\n          \"feedback\": \"Social proof requires knowing others subscribe. This works even if you are the only user on earth.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof from other subscribers\"\n        },\n        {\n          \"feedback\": \"This is actually the opposite of a commitment device. A commitment device would be setting a reminder to cancel it immediately.\",\n          \"isCorrect\": false,\n          \"text\": \"It acts as a pre-commitment device\"\n        }\n      ],\n      \"question\": \"How does the 'free trial' model exploit your psychology?\"\n    },\n    {\n      \"context\": \"A manager arranges a cafeteria so that salads are the first thing hungry employees see, and desserts are in a harder-to-reach corner. No food is removed from the menu.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. This is 'Choice Architecture'—changing the environment to influence decisions without forbidding options.\",\n          \"isCorrect\": true,\n          \"text\": \"Choice architecture\"\n        },\n        {\n          \"feedback\": \"Anchoring involves numbers and estimates. This is about physical layout and convenience.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring\"\n        },\n        {\n          \"feedback\": \"Social proof involves showing what others eat. This strategy works even if the cafeteria is empty.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof\"\n        },\n        {\n          \"feedback\": \"Loss aversion isn't the primary lever here; it's about convenience and visibility (System 1).\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        }\n      ],\n      \"question\": \"What tool is the manager using to improve health?\"\n    }\n  ]\n}",
      "outputTokens": 7621,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-interdisciplinary-behavioral-economics-1",
      "userPrompt": "LESSON_TITLE: Behavioral Economics Foundations\nLESSON_DESCRIPTION: Understanding how cognitive biases and heuristics systematically influence economic decisions, and how choice architecture can improve outcomes\nCHAPTER_TITLE: Decision Making\nCOURSE_TITLE: Behavioral Economics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Rationality Assumption: Classical economics assumed people are rational utility maximizers. But psychologists Daniel Kahneman and Amos Tversky documented systematic patterns where humans deviate from rationality in predictable ways.\n2. A Nobel-Winning Collision: Their research earned Kahneman the 2002 Nobel Prize in Economics — the first psychologist to win it. Behavioral economics was born from this collision of psychology and economic theory.\n3. From Theory to Practice: Richard Thaler expanded these insights into practical applications. His concept of 'nudging' showed how small changes in choice architecture could improve decisions without restricting freedom.\n\nEXPLANATION_STEPS:\n1. Loss Aversion: Loss aversion means losses hurt roughly twice as much as equivalent gains feel good. This asymmetry explains why people take irrational risks to avoid losses but not to achieve gains.\n2. Anchoring Bias: Anchoring occurs when we rely too heavily on the first piece of information encountered. An arbitrary initial number influences subsequent estimates, even when unrelated to the judgment.\n3. Present Bias: Present bias leads us to overweight immediate rewards compared to future ones. We know we should save for retirement, but the pleasure of spending now feels more real.\n4. Framing Effects: Framing effects mean how a choice is presented affects decisions. '90% survival rate' sounds better than '10% mortality rate' — identical information, different emotional response.\n5. Dual Systems: System 1 thinking is fast, automatic, and intuitive. System 2 is slow, deliberate, and analytical. Most decisions use System 1, which is efficient but prone to biases.\n\nMECHANICS_STEPS:\n1. Heuristics in Action: Heuristics are mental shortcuts that usually work but sometimes fail. Availability heuristic: judging probability by how easily examples come to mind, not actual frequency.\n2. Choice Architecture: Choice architecture structures how options are presented. The default, number of options, and order of presentation all influence which option people choose.\n3. Nudge Mechanics: Nudges are subtle changes that steer behavior without forbidding options. Putting healthy food at eye level in cafeterias is a nudge — junk food is still available but less convenient.\n4. Commitment Devices: Commitment devices help overcome present bias. Automatic savings deductions work because they make the rational future choice before present bias can override it.\n5. Social Proof Nudges: Social proof leverages conformity for behavior change. Telling hotel guests that 'most guests reuse towels' increases reuse more than environmental appeals alone.\n\nEXAMPLES_STEPS:\n1. Investment Behavior: Investors hold losing stocks too long and sell winners too early. Loss aversion makes the pain of realizing a loss feel worse than the pleasure of locking in a gain.\n2. Pricing Psychology: Stores price items at $9.99 instead of $10 because our brains anchor on the left digit. This 'left-digit bias' affects perception more than the actual penny saved.\n3. Gym Economics: Gym memberships exploit present bias — we overestimate future motivation when signing up, then fail to attend. The gym profits from our systematic overconfidence about future behavior.\n4. Default Effects: Default options are powerful. Countries with opt-out organ donation have 90%+ participation; opt-in countries have 15%. Same choice, different framing, vastly different outcomes."
    }
  ],
  "taskId": "activity-review"
}
