{
  "generatedAt": "2026-01-17T21:27:15.986Z",
  "modelId": "google/gemini-3-flash",
  "outputs": [
    {
      "duration": 37745.92079199999,
      "inputTokens": 2864,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A digital library system updates a book's status to 'checked out' and adds a record to the user's history simultaneously. If the system crashes after marking the book but before updating the user history, the entire operation is automatically undone.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! Atomicity ensures that if any part of the process fails, the whole thing is treated as if it never happened.\",\n          \"isCorrect\": true,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Close, but that's about following rules like 'no negative balances.' This 'all-or-nothing' behavior is actually Atomicity.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Not quite. Isolation keeps different users from stepping on each other's toes. The 'all-or-nothing' rule is Atomicity.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Durability means the data stays saved after a crash, but the rule that prevents partial updates is called Atomicity.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        }\n      ],\n      \"question\": \"Which property prevents partial updates?\"\n    },\n    {\n      \"context\": \"A warehouse database has a rule that inventory levels can never be negative. A transaction attempts to ship 50 items when only 30 are in stock. The database rejects the entire request to keep the data valid.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Consistency ensures the database moves from one valid state to another, strictly following the rules you've set.\",\n          \"isCorrect\": true,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Atomicity means 'all-or-nothing,' but the specific act of checking against rules like 'no negatives' is Consistency.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Isolation is about keeping separate users apart. Ensuring the data follows logic rules is the job of Consistency.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Durability ensures data isn't lost after a crash. Enforcing rules like 'stock >= 0' is handled by Consistency.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        }\n      ],\n      \"question\": \"What property enforces business rules?\"\n    },\n    {\n      \"context\": \"Two travel agents are trying to book the very last seat on a flight at the exact same time. The database makes sure that Agent A's work doesn't see or interfere with Agent B's work until one of them is finished.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! Isolation makes it feel like each agent is the only one using the system, preventing messy overlaps.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Atomicity ensures the whole booking happens or none of it does, but managing the 'collision' between two people is Isolation.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Durability is about making sure the seat remains booked even if the power goes out later. Keeping agents separate is Isolation.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        },\n        {\n          \"feedback\": \"Consistency ensures there isn't a '-1' seat count, but the 'privacy' between concurrent users is Isolation.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        }\n      ],\n      \"question\": \"Which property manages concurrent access?\"\n    },\n    {\n      \"context\": \"Just as a customer clicks 'Confirm Purchase,' the data center loses power. When the servers reboot, the system uses a special log to verify that the completed purchase was fully recorded and not lost.\",\n      \"options\": [\n        {\n          \"feedback\": \"You got it! Durability guarantees that once a change is confirmed, it's permanent, even if the system crashes immediately after.\",\n          \"isCorrect\": true,\n          \"text\": \"Durability\"\n        },\n        {\n          \"feedback\": \"Durability is the key here because it focuses on the data surviving a crash. Isolation is about multiple users.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Consistency ensures the data is valid, but the guarantee that the data persists through a power failure is Durability.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Atomicity ensures the whole purchase was processed, but the 'un-erasable' nature of that record is Durability.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        }\n      ],\n      \"question\": \"What ensures data survives a crash?\"\n    },\n    {\n      \"context\": \"In the early days of computing, a simple hardware glitch during a file update could leave a company's ledgers half-finished and unusable. Modern systems solve this by grouping these steps.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfect! By treating a group of steps as a single unit, we eliminate the risk of the 'half-finished' state that plagued early systems.\",\n          \"isCorrect\": true,\n          \"text\": \"Grouping related operations\"\n        },\n        {\n          \"feedback\": \"While fast hardware helps, it doesn't solve the logic problem of partial updates. The real fix was grouping operations together.\",\n          \"isCorrect\": false,\n          \"text\": \"Using faster hardware\"\n        },\n        {\n          \"feedback\": \"Backups are great for recovery, but they don't prevent the immediate corruption caused by a partial update. Grouping does.\",\n          \"isCorrect\": false,\n          \"text\": \"Making daily manual backups\"\n        },\n        {\n          \"feedback\": \"Restricting access might prevent human error, but it doesn't stop a system crash from leaving data in a 'half-way' state.\",\n          \"isCorrect\": false,\n          \"text\": \"Only allowing one user at a time\"\n        }\n      ],\n      \"question\": \"What insight originally fixed data chaos?\"\n    },\n    {\n      \"context\": \"While updating a list of employee salaries, a manager realizes they made a massive typo. Before hitting 'Commit,' they issue a command that wipes away all the pending changes and restores the old data.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! A Rollback is like an 'Undo' button that uses logs to return the data to exactly how it was before the transaction started.\",\n          \"isCorrect\": true,\n          \"text\": \"Rollback\"\n        },\n        {\n          \"feedback\": \"Commit does the opposite—it makes the changes permanent. To undo them, you need a Rollback.\",\n          \"isCorrect\": false,\n          \"text\": \"Commit\"\n        },\n        {\n          \"feedback\": \"A Lock prevents others from changing the data, but it doesn't undo the mistakes you've already typed into the buffer.\",\n          \"isCorrect\": false,\n          \"text\": \"Lock\"\n        },\n        {\n          \"feedback\": \"Isolation is the property that keeps the work private, but the specific action of undoing the work is a Rollback.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        }\n      ],\n      \"question\": \"Which process undoes pending changes?\"\n    },\n    {\n      \"context\": \"A database system records every intended change in a sequential file before actually modifying the main data storage. If a crash occurs, this file acts as a master script for recovery.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes! Write-ahead logging ensures there is always a record of the plan so the system can finish or undo the work after a crash.\",\n          \"isCorrect\": true,\n          \"text\": \"Write-ahead logging\"\n        },\n        {\n          \"feedback\": \"Locking stops people from editing the same thing, but it doesn't provide the 'script' needed to recover from a power failure.\",\n          \"isCorrect\": false,\n          \"text\": \"Exclusive locking\"\n        },\n        {\n          \"feedback\": \"A snapshot is a point-in-time copy, but write-ahead logging is the specific mechanism used to ensure Durability during recovery.\",\n          \"isCorrect\": false,\n          \"text\": \"Data snapshotting\"\n        },\n        {\n          \"feedback\": \"Indexing helps find data faster, but it has nothing to do with ensuring the safety of changes during a system failure.\",\n          \"isCorrect\": false,\n          \"text\": \"Indexing\"\n        }\n      ],\n      \"question\": \"How is Durability physically achieved?\"\n    },\n    {\n      \"context\": \"Transaction A is waiting for a file held by Transaction B. Meanwhile, Transaction B is waiting for a different file held by Transaction A. Both are stuck forever.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bingo! A deadlock is a 'circular wait' where nobody can move. Databases usually have to 'kill' one transaction to break the loop.\",\n          \"isCorrect\": true,\n          \"text\": \"Deadlock\"\n        },\n        {\n          \"feedback\": \"A rollback is the solution to a deadlock, but the state of being stuck in a circle is called a Deadlock.\",\n          \"isCorrect\": false,\n          \"text\": \"Rollback\"\n        },\n        {\n          \"feedback\": \"Consistency is a property of the data. The situation where two processes block each other is a Deadlock.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency error\"\n        },\n        {\n          \"feedback\": \"Atomicity is about 'all-or-nothing' completion, not about two processes waiting on each other's resources.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity failure\"\n        }\n      ],\n      \"question\": \"What is this 'circular wait' called?\"\n    },\n    {\n      \"context\": \"You are building a high-speed social media 'Like' counter. You decide to let users see counts that might be slightly out of date if it means the app runs much faster for everyone.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! Lower isolation levels allow for minor 'anomalies' but provide a significant boost in performance and speed.\",\n          \"isCorrect\": true,\n          \"text\": \"Faster performance\"\n        },\n        {\n          \"feedback\": \"Actually, lower isolation usually leads to lower consistency (more anomalies). The trade-off is made to get more speed.\",\n          \"isCorrect\": false,\n          \"text\": \"Higher consistency\"\n        },\n        {\n          \"feedback\": \"Durability is usually unaffected by isolation levels; it's the privacy and accuracy of concurrent data that changes.\",\n          \"isCorrect\": false,\n          \"text\": \"Better durability\"\n        },\n        {\n          \"feedback\": \"Lower isolation actually decreases security/accuracy in exchange for speed. It doesn't simplify the schema rules.\",\n          \"isCorrect\": false,\n          \"text\": \"Simplified schema rules\"\n        }\n      ],\n      \"question\": \"What is gained by lowering isolation?\"\n    },\n    {\n      \"context\": \"When a user starts an e-commerce checkout, the items are temporarily removed from the public 'available' count, but other shoppers don't see this change finalized until the payment clears.\",\n      \"options\": [\n        {\n          \"feedback\": \"Nice! Changes remain in a temporary buffer and are invisible to others until the COMMIT command is issued.\",\n          \"isCorrect\": true,\n          \"text\": \"Commit\"\n        },\n        {\n          \"feedback\": \"Begin starts the process, but Commit is what actually 'publishes' the changes so the rest of the world can see them.\",\n          \"isCorrect\": false,\n          \"text\": \"Begin\"\n        },\n        {\n          \"feedback\": \"Rollback would cancel the changes. To make them visible and permanent, you need a Commit.\",\n          \"isCorrect\": false,\n          \"text\": \"Rollback\"\n        },\n        {\n          \"feedback\": \"A Lock prevents others from changing the items, but it's the Commit that makes your specific changes permanent and visible.\",\n          \"isCorrect\": false,\n          \"text\": \"Lock\"\n        }\n      ],\n      \"question\": \"What command makes changes visible?\"\n    },\n    {\n      \"context\": \"An app allows users to tag friends in photos. The system must update the photo's metadata, notify the tagged friend, and increment the friend's 'tagged in' counter all at once.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right! Because these are related tasks, they must succeed or fail as a group to keep the social graph accurate.\",\n          \"isCorrect\": true,\n          \"text\": \"Group them into one transaction\"\n        },\n        {\n          \"feedback\": \"Running them separately risks a 'partial state' where someone is notified but the tag never actually appears on the photo.\",\n          \"isCorrect\": false,\n          \"text\": \"Run them as separate operations\"\n        },\n        {\n          \"feedback\": \"A daily check might find errors, but it's better to prevent them in the first place by using a transaction.\",\n          \"isCorrect\": false,\n          \"text\": \"Run a daily cleanup script\"\n        },\n        {\n          \"feedback\": \"While notifications are less critical than metadata, a transaction ensures the entire 'story' of the photo is consistent.\",\n          \"isCorrect\": false,\n          \"text\": \"Only prioritize the photo metadata\"\n        }\n      ],\n      \"question\": \"How should these three updates be handled?\"\n    },\n    {\n      \"context\": \"A financial system is performing a 'Serializable' transaction. This is the highest level of safety, but the system is running noticeably slower than usual.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! Higher isolation requires more strict locking and checking, which forces transactions to wait in line, slowing things down.\",\n          \"isCorrect\": true,\n          \"text\": \"It limits concurrent work\"\n        },\n        {\n          \"feedback\": \"Serializable is actually the most 'honest' level; it doesn't allow any data lies. It's just very slow because of the strictness.\",\n          \"isCorrect\": false,\n          \"text\": \"It allows 'dirty reads' of data\"\n        },\n        {\n          \"feedback\": \"Serializable transactions use the same logging as others; the slowdown comes from how they manage locks and concurrency.\",\n          \"isCorrect\": false,\n          \"text\": \"It skips the write-ahead log\"\n        },\n        {\n          \"feedback\": \"The schema rules (Consistency) stay the same; it's the Isolation level that is making the system wait.\",\n          \"isCorrect\": false,\n          \"text\": \"It disables consistency checks\"\n        }\n      ],\n      \"question\": \"Why does high isolation slow things down?\"\n    },\n    {\n      \"context\": \"A banking app moves $50 from a savings account to a checking account. If the savings account is debited but the checking account is never credited, the money has effectively vanished.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on. Transactions were invented specifically to solve the 'limbo' problem where money or data disappears during a partial failure.\",\n          \"isCorrect\": true,\n          \"text\": \"Data inconsistency\"\n        },\n        {\n          \"feedback\": \"Slow performance is a nuisance, but 'vanishing money' (inconsistency) is a critical failure that transactions were designed to fix.\",\n          \"isCorrect\": false,\n          \"text\": \"Slow user interface\"\n        },\n        {\n          \"feedback\": \"Limited storage is a hardware issue. Transactions focus on the integrity and reliability of the data you do have.\",\n          \"isCorrect\": false,\n          \"text\": \"Limited storage space\"\n        },\n        {\n          \"feedback\": \"While transactions help with multi-user access, their primary 'Why' is preventing the corruption of data states.\",\n          \"isCorrect\": false,\n          \"text\": \"Lack of user passwords\"\n        }\n      ],\n      \"question\": \"What core problem did transactions solve?\"\n    },\n    {\n      \"context\": \"A developer wants to ensure that a 'Product ID' in an order always matches an existing product in the inventory list. They set up a constraint in the database to enforce this.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes! Consistency is all about maintaining the integrity of the data relative to the predefined rules (schema) of the database.\",\n          \"isCorrect\": true,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Atomicity ensures the order is saved fully, but the rule that the Product ID must be valid is a Consistency check.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Isolation keeps two orders from clashing, but doesn't define the rules of what a 'valid' product ID is.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Durability makes sure the order isn't lost, but it doesn't care if the product ID inside that order is real or fake.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        }\n      ],\n      \"question\": \"Which ACID property validates relationships?\"\n    },\n    {\n      \"context\": \"During a busy holiday sale, a database is hit with 10,000 requests per second. To keep up, it places a 'Reserved' lock on certain rows while they are being updated.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! Locks are the physical 'No Entry' signs that enforce Isolation by making others wait until a transaction is done.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Atomicity is the result (all or nothing), but the locking mechanism itself is the tool used to achieve Isolation.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Durability is handled by the logs (WAL), while locks are used to manage who can touch the data 'live.'\",\n          \"isCorrect\": false,\n          \"text\": \"Durability\"\n        },\n        {\n          \"feedback\": \"Consistency is about the rules of the data. Locks are about managing the traffic of users (Isolation).\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        }\n      ],\n      \"question\": \"Locks primarily support which property?\"\n    },\n    {\n      \"context\": \"A system administrator sees that the database has 'killed' a user's transaction because it was stuck in a loop with another user, even though no error was made in the code.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The database aborts one transaction to break the deadlock 'circle' so the rest of the system can keep moving.\",\n          \"isCorrect\": true,\n          \"text\": \"To break a deadlock\"\n        },\n        {\n          \"feedback\": \"If the code had an error, the rollback would be intentional. 'Killing' it usually happens to resolve a resource conflict like a deadlock.\",\n          \"isCorrect\": false,\n          \"text\": \"Because the code was wrong\"\n        },\n        {\n          \"feedback\": \"The database doesn't kill transactions just to save power; it does so to maintain the flow of data when processes get stuck.\",\n          \"isCorrect\": false,\n          \"text\": \"To save battery power\"\n        },\n        {\n          \"feedback\": \"Consistency errors usually just reject the command. 'Killing' or aborting a transaction is the standard way to resolve deadlocks.\",\n          \"isCorrect\": false,\n          \"text\": \"The database ran out of rules\"\n        }\n      ],\n      \"question\": \"Why would a database 'kill' a transaction?\"\n    }\n  ]\n}",
      "outputTokens": 5602,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-cs-database-transactions-acid-1",
      "userPrompt": "LESSON_TITLE: Database Transactions and ACID\nLESSON_DESCRIPTION: Understanding database transactions and ACID properties for maintaining data integrity in concurrent systems\nCHAPTER_TITLE: Data Integrity\nCOURSE_TITLE: Database Systems\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Corruption Problem: Before databases had transactions, a power failure during a bank transfer could leave money in limbo — deducted from one account but never credited to another. Data inconsistency was the norm.\n2. Gray's Breakthrough: Jim Gray at IBM tackled this chaos in the 1970s. His insight: group related operations together and guarantee they either all succeed or all fail. No partial states allowed.\n3. The ACID Standard: The ACID properties emerged as the gold standard for reliable data operations. They transformed databases from fragile systems into ones businesses could trust with critical data.\n\nEXPLANATION_STEPS:\n1. Atomicity: Atomicity means 'all or nothing.' A transaction either completes entirely or has no effect at all. There's no partial completion — if any part fails, everything rolls back.\n2. Consistency: Consistency ensures transactions bring the database from one valid state to another. Rules defined in the schema (like account balance >= 0) are never violated.\n3. Isolation: Isolation means concurrent transactions don't interfere with each other. Each transaction sees a consistent snapshot, as if it were running alone.\n4. Durability: Durability guarantees that once a transaction commits, its changes survive system crashes. The database uses write-ahead logging to ensure committed data isn't lost.\n5. Isolation Levels: Isolation levels trade off between consistency and performance. Serializable is safest but slowest; Read Committed is faster but allows some anomalies.\n\nMECHANICS_STEPS:\n1. Transaction Lifecycle: A transaction begins with BEGIN, then executes statements. Changes are held in a buffer, invisible to other transactions until COMMIT makes them permanent.\n2. Write-Ahead Logging: Write-ahead logging records changes before applying them. If a crash occurs mid-transaction, the log allows the database to either complete or undo the changes during recovery.\n3. Locking Mechanisms: Locks prevent concurrent access conflicts. When a transaction modifies a row, it acquires an exclusive lock. Other transactions must wait until the lock releases.\n4. Deadlock Detection: Deadlocks occur when two transactions each hold a lock the other needs. The database detects this circular wait and aborts one transaction to break the cycle.\n5. Rollback Process: ROLLBACK undoes all changes made during the transaction. The database uses the log to reverse each operation in the opposite order it was applied.\n\nEXAMPLES_STEPS:\n1. Banking Transfers: Banking transfers are the classic example. Moving $100 from savings to checking must debit one and credit the other atomically — or neither should happen.\n2. E-commerce Orders: E-commerce checkout involves inventory reduction, payment processing, and order creation. All must succeed together, or the customer gets charged without receiving their product.\n3. Airline Reservations: Airline booking systems face extreme concurrency — thousands of users trying to book the same seats. Transactions prevent double-booking while maintaining performance.\n4. Social Media Posts: Social media platforms use transactions for complex operations like posting a photo with tags, location, and notifications — all must be recorded consistently."
    },
    {
      "duration": 41035.150082999986,
      "inputTokens": 2910,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A local baker sells fresh sourdough loaves for $8 in the morning. At 5:00 PM, any remaining loaves are sold for $4 to clear the shelves before closing.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The morning crowd values freshness and has less time to wait, while the evening crowd is more sensitive to price than timing.\",\n          \"isCorrect\": true,\n          \"text\": \"The baker is segmenting customers based on their flexibility and time.\"\n        },\n        {\n          \"feedback\": \"Actually, the cost of the flour and labor is the same for both loaves. The price drop is about finding a buyer, not lower production costs.\",\n          \"isCorrect\": false,\n          \"text\": \"The $4 loaf costs less to produce because it is older.\"\n        },\n        {\n          \"feedback\": \"Not quite. While clearing stock is the goal, the mechanism used is charging different prices based on a customer's willingness to wait.\",\n          \"isCorrect\": false,\n          \"text\": \"This is purely a clearance sale and doesn't involve customer psychology.\"\n        },\n        {\n          \"feedback\": \"It's the opposite! The 5:00 PM customers are very sensitive to price, which is why they wait for the discount.\",\n          \"isCorrect\": false,\n          \"text\": \"The evening customers are less price-sensitive than the morning ones.\"\n        }\n      ],\n      \"question\": \"Why does the baker change the price?\"\n    },\n    {\n      \"context\": \"Imagine you are at an antique market where no prices are listed. The seller chats with you, notices your expensive watch, and then quotes you a high price for a vintage lamp.\",\n      \"options\": [\n        {\n          \"feedback\": \"Almost, but second-degree relies on customers choosing from a menu. Here, the seller is targeting you specifically.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree discrimination because you chose the lamp.\"\n        },\n        {\n          \"feedback\": \"Bingo! By gauging your appearance, the seller is trying to guess the absolute maximum you'd be willing to pay.\",\n          \"isCorrect\": true,\n          \"text\": \"First-degree discrimination as they are targeting your specific wallet.\"\n        },\n        {\n          \"feedback\": \"Close, but third-degree usually involves broader groups like 'students' rather than one-on-one negotiation.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination based on your social demographic.\"\n        },\n        {\n          \"feedback\": \"Price discrimination is actually very efficient for the seller—it ensures they don't leave any of your potential money on the table!\",\n          \"isCorrect\": false,\n          \"text\": \"Inefficient pricing because the seller doesn't have a fixed rate.\"\n        }\n      ],\n      \"question\": \"What strategy is the seller attempting?\"\n    },\n    {\n      \"context\": \"A software company offers a 'Basic' version of their app for free with ads, and a 'Premium' version for $10 a month without ads and with extra storage.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right on! The company provides options, and customers decide which version fits their budget and needs best.\",\n          \"isCorrect\": true,\n          \"text\": \"Second-degree discrimination through self-selection.\"\n        },\n        {\n          \"feedback\": \"Actually, the goal here is to get different types of users to pay different amounts by offering different value levels.\",\n          \"isCorrect\": false,\n          \"text\": \"A strategy to eliminate all competitors by offering a free version.\"\n        },\n        {\n          \"feedback\": \"Third-degree would involve the company putting you in a group (like 'students'). Here, you make the choice yourself.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination based on user location.\"\n        },\n        {\n          \"feedback\": \"It's rarely about cost. Often, the 'Premium' features cost the company almost nothing to add—they just want to capture more value.\",\n          \"isCorrect\": false,\n          \"text\": \"Cost-plus pricing because the Premium version is more expensive to host.\"\n        }\n      ],\n      \"question\": \"How is the company separating its users?\"\n    },\n    {\n      \"context\": \"A theme park offers a 40% discount on tickets, but only for residents who live in the same zip code as the park. Tourists from other states must pay the full gate price.\",\n      \"options\": [\n        {\n          \"feedback\": \"Wait, residents usually have more options and might visit often, making them more sensitive to high prices than one-time tourists.\",\n          \"isCorrect\": false,\n          \"text\": \"Residents have a lower price elasticity than tourists.\"\n        },\n        {\n          \"feedback\": \"Exactly! The park assumes tourists are on a 'once-in-a-lifetime' trip and will pay more, while locals need a deal to come back.\",\n          \"isCorrect\": true,\n          \"text\": \"The park is using location as a proxy for price sensitivity.\"\n        },\n        {\n          \"feedback\": \"If locals could easily resell their cheap tickets to tourists, the park's strategy would fail. This is why they check IDs!\",\n          \"isCorrect\": false,\n          \"text\": \"This only works if locals can resell their tickets to tourists.\"\n        },\n        {\n          \"feedback\": \"The ride costs the same to run regardless of who is in the seat. This is purely a strategy to maximize total revenue.\",\n          \"isCorrect\": false,\n          \"text\": \"The discount reflects the lower cost of marketing to locals.\"\n        }\n      ],\n      \"question\": \"What is the logic behind the local discount?\"\n    },\n    {\n      \"context\": \"A hairstylist charges $30 for a trim, but offers a 'student discount' of $20. They don't worry about students 'reselling' the cheaper haircuts to non-students.\",\n      \"options\": [\n        {\n          \"feedback\": \"Nice! Services like haircuts are consumed instantly and can't be 'traded' to someone else, making price discrimination easier.\",\n          \"isCorrect\": true,\n          \"text\": \"Physical services naturally prevent arbitrage.\"\n        },\n        {\n          \"feedback\": \"Students actually have higher elasticity (they are more sensitive to price) because they have less disposable income.\",\n          \"isCorrect\": false,\n          \"text\": \"Students have very low price elasticity for haircuts.\"\n        },\n        {\n          \"feedback\": \"While a nice gesture, the primary economic reason is to fill the stylist's chair with people who wouldn't otherwise pay $30.\",\n          \"isCorrect\": false,\n          \"text\": \"The stylist is simply being charitable to the community.\"\n        },\n        {\n          \"feedback\": \"Actually, reselling a haircut is physically impossible. This 'non-transferability' is a key mechanic of the strategy.\",\n          \"isCorrect\": false,\n          \"text\": \"It is illegal for students to resell services to professionals.\"\n        }\n      ],\n      \"question\": \"Why is this strategy safe from reselling?\"\n    },\n    {\n      \"context\": \"A streaming service offers a 'Basic' plan for $9, a 'Standard' for $15.49, and a 'Premium' for $19.99. Most people choose 'Standard' because the 'Premium' seems expensive.\",\n      \"options\": [\n        {\n          \"feedback\": \"Actually, the 'Premium' often exists to anchor your expectations and make the 'Standard' price feel like a better value.\",\n          \"isCorrect\": false,\n          \"text\": \"The Premium plan is the only one the company wants to sell.\"\n        },\n        {\n          \"feedback\": \"Spot on! By offering a very high-end version, the middle option looks like a reasonable compromise for most people.\",\n          \"isCorrect\": true,\n          \"text\": \"The menu design uses the high price to make others look valuable.\"\n        },\n        {\n          \"feedback\": \"In many digital services, the actual cost of adding a second or third screen is nearly zero. The price is about what you'll pay.\",\n          \"isCorrect\": false,\n          \"text\": \"Each plan's price is strictly based on its server costs.\"\n        },\n        {\n          \"feedback\": \"The company prefers you to choose the highest price you are comfortable with—if that's Standard, they still win!\",\n          \"isCorrect\": false,\n          \"text\": \"Offering too many choices always leads to fewer sales.\"\n        }\n      ],\n      \"question\": \"What is a hidden purpose of the 'Premium' plan?\"\n    },\n    {\n      \"context\": \"During a massive snowstorm, a ride-sharing app triples its prices. Some people complain, but the company claims this ensures that those who 'really need' a ride can get one.\",\n      \"options\": [\n        {\n          \"feedback\": \"Good job! Dynamic pricing uses high demand to identify people who value the service enough to pay the 'surge' rate.\",\n          \"isCorrect\": true,\n          \"text\": \"The price increase identifies the most inelastic demand.\"\n        },\n        {\n          \"feedback\": \"Actually, when prices go up, total demand usually goes down. The goal is to match that limited supply to the most desperate buyers.\",\n          \"isCorrect\": false,\n          \"text\": \"Tripling the price is meant to increase the number of riders.\"\n        },\n        {\n          \"feedback\": \"It's the opposite! If you 'really need' to get home in a storm, your demand is inelastic (you aren't very sensitive to the price).\",\n          \"isCorrect\": false,\n          \"text\": \"Only people with very elastic demand will pay the surge price.\"\n        },\n        {\n          \"feedback\": \"While it might attract drivers, the price discrimination aspect focuses on the riders' willingness to pay during an emergency.\",\n          \"isCorrect\": false,\n          \"text\": \"The price change is only meant to pay for the car's snow tires.\"\n        }\n      ],\n      \"question\": \"What does 'surge pricing' accomplish?\"\n    },\n    {\n      \"context\": \"A fast-food chain sells a burger for $6 and fries for $3. However, you can buy a 'Value Meal' with both plus a drink for only $7.50.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not quite. First-degree would be if they knew your exact budget. This is a menu choice for everyone.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a form of first-degree price discrimination.\"\n        },\n        {\n          \"feedback\": \"Perfect! Bundling helps the store capture extra money from people who might have skipped the fries but will buy them for 'just a bit more.'\",\n          \"isCorrect\": true,\n          \"text\": \"Bundling extracts more total value from different preferences.\"\n        },\n        {\n          \"feedback\": \"It's often the opposite—bundling is used to encourage you to buy things you wouldn't have bought individually.\",\n          \"isCorrect\": false,\n          \"text\": \"The meal is cheaper because fries are expensive to sell alone.\"\n        },\n        {\n          \"feedback\": \"If customers could easily resell the fries for $2 to someone else, the bundle wouldn't work as well. Reselling is the enemy!\",\n          \"isCorrect\": false,\n          \"text\": \"Bundling only works if customers can easily resell the items.\"\n        }\n      ],\n      \"question\": \"Why offer the bundle?\"\n    },\n    {\n      \"context\": \"A gym offers a membership that is 50% cheaper if you only use the facilities between 1:00 PM and 4:00 PM on weekdays.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes! People with flexible schedules (like students or retirees) are usually more price-sensitive than those with 9-to-5 jobs.\",\n          \"isCorrect\": true,\n          \"text\": \"It segments customers by their time flexibility.\"\n        },\n        {\n          \"feedback\": \"Actually, the gym is more crowded during 'peak' hours, but the machines don't cost more to run at 6 PM than at 2 PM.\",\n          \"isCorrect\": false,\n          \"text\": \"Electricity is more expensive in the evening.\"\n        },\n        {\n          \"feedback\": \"The gym actually wants to sign up as many people as possible to maximize profit, using the 'dead' hours to attract new segments.\",\n          \"isCorrect\": false,\n          \"text\": \"The gym is trying to discourage people from exercising.\"\n        },\n        {\n          \"feedback\": \"This is a classic 'menu' approach where the lower price attracts a specific group that otherwise wouldn't join.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a flat pricing model with no segmentation.\"\n        }\n      ],\n      \"question\": \"Who is the target for this off-peak membership?\"\n    },\n    {\n      \"context\": \"A pharmaceutical company sells the same life-saving medicine for $100 in a wealthy country and $5 in a developing nation.\",\n      \"options\": [\n        {\n          \"feedback\": \"Actually, the goal is to prevent the $5 medicine from being shipped back to the wealthy country to compete with the $100 version.\",\n          \"isCorrect\": false,\n          \"text\": \"The company wants to encourage reselling between countries.\"\n        },\n        {\n          \"feedback\": \"Correct! To make this work, the company must ensure the low-priced medicine doesn't flow back into the high-priced market.\",\n          \"isCorrect\": true,\n          \"text\": \"They must prevent arbitrage to keep the markets separate.\"\n        },\n        {\n          \"feedback\": \"If they only sold it at $100, they would lose all the revenue from the developing nation. Discrimination maximizes their total profit.\",\n          \"isCorrect\": false,\n          \"text\": \"They would make more profit by charging $100 everywhere.\"\n        },\n        {\n          \"feedback\": \"The cost to make the pill is usually identical. The price difference is based on the average income (elasticity) of each region.\",\n          \"isCorrect\": false,\n          \"text\": \"The $100 version is made with much better ingredients.\"\n        }\n      ],\n      \"question\": \"What is the biggest challenge to this strategy?\"\n    },\n    {\n      \"context\": \"A coffee shop realizes that some customers will pay $6 for a latte no matter what, while others only buy coffee if it's under $3. They introduce a 'loyalty card' that gives every 5th coffee for free.\",\n      \"options\": [\n        {\n          \"feedback\": \"Nice! The 'high-pay' customers often don't bother with cards, while the 'price-sensitive' ones use them to lower their average cost.\",\n          \"isCorrect\": true,\n          \"text\": \"The card allows price-sensitive users to self-select a lower price.\"\n        },\n        {\n          \"feedback\": \"If they dropped the price for everyone, they would lose $3 from all the customers who were already happy to pay $6!\",\n          \"isCorrect\": false,\n          \"text\": \"It would be more profitable to just lower the price to $2 for everyone.\"\n        },\n        {\n          \"feedback\": \"A loyalty card is a form of second-degree discrimination because the customer chooses to participate to get the deal.\",\n          \"isCorrect\": false,\n          \"text\": \"This is first-degree discrimination since they know your name.\"\n        },\n        {\n          \"feedback\": \"Actually, price-sensitive customers are often the most loyal because they have found a way to make the product fit their budget.\",\n          \"isCorrect\": false,\n          \"text\": \"Loyalty cards are only used by the wealthiest customers.\"\n        }\n      ],\n      \"question\": \"How does the loyalty card help the shop?\"\n    },\n    {\n      \"context\": \"An airline ticket from New York to London costs $800 if you book two months in advance, but $2,500 if you book the day before the flight.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct! Business travelers often have to travel urgently and don't pay for their own tickets, making them less sensitive to high prices.\",\n          \"isCorrect\": true,\n          \"text\": \"Last-minute booking signals inelastic demand (likely business).\"\n        },\n        {\n          \"feedback\": \"The plane, the fuel, and the pilot cost the same whether you booked yesterday or two months ago.\",\n          \"isCorrect\": false,\n          \"text\": \"It costs the airline more to process a last-minute seat.\"\n        },\n        {\n          \"feedback\": \"Actually, the airline is betting that the person booking last minute is desperate and has no choice but to pay the premium.\",\n          \"isCorrect\": false,\n          \"text\": \"People who book early are more desperate to fly.\"\n        },\n        {\n          \"feedback\": \"Airlines use this data (timing) to group people into buckets—it's a classic example of third-degree discrimination.\",\n          \"isCorrect\": false,\n          \"text\": \"The airline is legally required to raise prices as the date nears.\"\n        }\n      ],\n      \"question\": \"Why is the last-minute price so much higher?\"\n    },\n    {\n      \"context\": \"A bookstore offers a 'Premium Membership' for $25 a year that gives 10% off all purchases. A casual reader who buys one book a year declines it.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! The membership fee is a way to separate high-volume fans from casual browsers and get them to commit to one store.\",\n          \"isCorrect\": true,\n          \"text\": \"The fee acts as a filter for different customer segments.\"\n        },\n        {\n          \"feedback\": \"It's the other way around. Frequent readers are often more price-sensitive because they spend so much on books total.\",\n          \"isCorrect\": false,\n          \"text\": \"Frequent readers are less price-sensitive than casual ones.\"\n        },\n        {\n          \"feedback\": \"The membership is a form of price discrimination, but it relies on the customer calculating if it's worth it for them.\",\n          \"isCorrect\": false,\n          \"text\": \"The bookstore loses money on every member who joins.\"\n        },\n        {\n          \"feedback\": \"Actually, the reader is making a rational choice based on their own usage. This is exactly what the bookstore expects.\",\n          \"isCorrect\": false,\n          \"text\": \"The casual reader is acting irrationally.\"\n        }\n      ],\n      \"question\": \"What is the membership fee doing?\"\n    },\n    {\n      \"context\": \"A pizza place offers a 'Large' pizza for $18, but a 'Medium' (which is half the size) for $14. Most people see this and decide the Large is a 'steal.'\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The medium is priced high relative to its size to push people toward the more profitable (for the store) Large option.\",\n          \"isCorrect\": true,\n          \"text\": \"The Medium's price makes the Large look like a better value.\"\n        },\n        {\n          \"feedback\": \"The cost of dough and cheese is very small. Most of the cost is labor and rent, which is the same for both sizes.\",\n          \"isCorrect\": false,\n          \"text\": \"Large pizzas are much cheaper to make than medium ones.\"\n        },\n        {\n          \"feedback\": \"This is actually a very clever pricing strategy to increase the 'average check' size by influencing your perception of value.\",\n          \"isCorrect\": false,\n          \"text\": \"This is an error in pricing that the store should fix.\"\n        },\n        {\n          \"feedback\": \"This is a form of second-degree discrimination where you choose the volume/price combination that you prefer.\",\n          \"isCorrect\": false,\n          \"text\": \"This is third-degree discrimination based on hunger levels.\"\n        }\n      ],\n      \"question\": \"Why is the price difference so small?\"\n    },\n    {\n      \"context\": \"A musician sells a digital album on a 'pay what you want' basis. Some fans pay $0, while others pay $50 for the same 10 songs.\",\n      \"options\": [\n        {\n          \"feedback\": \"You got it! This is as close to first-degree discrimination as you can get, letting each fan decide their own 'max' value.\",\n          \"isCorrect\": true,\n          \"text\": \"It allows fans to pay their individual maximum willingness.\"\n        },\n        {\n          \"feedback\": \"Even if some pay $0, the $50 payments from superfans often result in more total money than a fixed $10 price would.\",\n          \"isCorrect\": false,\n          \"text\": \"The musician will always make less money this way.\"\n        },\n        {\n          \"feedback\": \"This is actually the opposite—it's a very modern, data-driven way to see how much people value your work.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a failed strategy because the price isn't fixed.\"\n        },\n        {\n          \"feedback\": \"Since digital files can be copied for free, the 'cost' of an extra listener is zero. The goal is just to capture any surplus possible.\",\n          \"isCorrect\": false,\n          \"text\": \"The $50 fans are paying for the high cost of digital hosting.\"\n        }\n      ],\n      \"question\": \"What is the economic benefit of this model?\"\n    }\n  ]\n}",
      "outputTokens": 6198,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-economics-price-discrimination-1",
      "userPrompt": "LESSON_TITLE: Price Discrimination Strategies\nLESSON_DESCRIPTION: Understanding how firms use price discrimination to maximize profits by charging different prices to different customer segments\nCHAPTER_TITLE: Pricing Strategy\nCOURSE_TITLE: Microeconomics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Pricing Puzzle: Why do seniors get discounts while business travelers pay premium? Why does software cost different amounts in different countries? Economists discovered the logic behind seemingly arbitrary pricing.\n2. Pigou's Insight: Arthur Pigou formalized price discrimination theory in the 1920s. He showed that charging different prices to different customers could actually be economically efficient under certain conditions.\n3. The Data Revolution: The rise of big data transformed price discrimination from crude segmentation to personalized pricing. Every click, purchase, and search helps companies estimate your willingness to pay.\n\nEXPLANATION_STEPS:\n1. Definition: Price discrimination means charging different prices for the same product to different customers. It's not about cost differences — it's about extracting more consumer surplus.\n2. First-Degree: First-degree discrimination charges each customer their maximum willingness to pay. It's theoretically perfect but practically impossible without mind-reading. Haggling approximates it.\n3. Second-Degree: Second-degree discrimination offers different versions at different prices. Customers self-select based on their preferences — like choosing between economy and business class.\n4. Third-Degree: Third-degree discrimination segments customers into groups with different elasticities. Charge more to inelastic groups (business travelers), less to elastic groups (tourists).\n5. Elasticity Connection: Price elasticity of demand determines pricing power. If demand barely changes with price (inelastic), firms can charge more. If demand is sensitive (elastic), prices must stay low.\n\nMECHANICS_STEPS:\n1. Preventing Arbitrage: To price discriminate, a firm must prevent arbitrage — customers who get the low price reselling to those who'd pay more. Physical services naturally prevent this; digital goods require DRM.\n2. Segmentation Signals: Market segmentation identifies groups with different price sensitivities. Age, location, purchase timing, and usage patterns all signal willingness to pay.\n3. Menu Design: Menu pricing creates product versions that appeal to different segments. The 'basic' version exists partly to make the 'premium' version look valuable by comparison.\n4. Dynamic Adjustment: Dynamic pricing adjusts prices in real-time based on demand signals. High demand triggers price increases; low demand triggers discounts. Algorithms optimize continuously.\n5. Bundling Strategy: Bundling combines products to extract more surplus. Cable TV bundles make you pay for channels you don't want because the package captures more total willingness to pay.\n\nEXAMPLES_STEPS:\n1. Airline Pricing: Airlines are masters of price discrimination. The same seat costs $200 or $2000 depending on when you book, whether you stay Saturday, and if you're flying for business or leisure.\n2. Movie Tickets: Movie theaters charge different prices for matinees, seniors, and students. They're segmenting customers by time flexibility and price sensitivity.\n3. Educational Discounts: Academic software discounts are dramatic — students might pay $50 for software that costs businesses $500. The assumption: students can't afford full price but will become paying customers later.\n4. Happy Hour Economics: Happy hour pricing segments customers by time availability. Those who can drink at 4pm are often more price-sensitive than the 8pm crowd willing to pay full price."
    },
    {
      "duration": 37862.71175000002,
      "inputTokens": 3070,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Você está observando um cubo de gelo derretendo em um copo de água morna em uma sala fechada. Depois de algum tempo, o gelo some e a água fica em uma temperatura uniforme.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito! O equilíbrio térmico é justamente esse estado onde não há mais troca de energia porque as temperaturas se igualaram.\",\n          \"isCorrect\": true,\n          \"text\": \"Eles atingiram o equilíbrio térmico.\"\n        },\n        {\n          \"feedback\": \"Quase! Embora as moléculas ainda se movam, não há uma troca líquida de energia de um ponto para outro.\",\n          \"isCorrect\": false,\n          \"text\": \"As moléculas pararam de se mover completamente.\"\n        },\n        {\n          \"feedback\": \"Na verdade, a energia total do sistema permanece a mesma; ela apenas se distribuiu de forma mais uniforme.\",\n          \"isCorrect\": false,\n          \"text\": \"A energia térmica do sistema foi destruída.\"\n        },\n        {\n          \"feedback\": \"Cuidado! A água tem mais energia agora que o gelo derreteu, mas a temperatura é a mesma em todo o copo.\",\n          \"isCorrect\": false,\n          \"text\": \"A água possui agora menos energia que o gelo original.\"\n        }\n      ],\n      \"question\": \"O que aconteceu com o sistema?\"\n    },\n    {\n      \"context\": \"Um inventor afirma ter criado um motor de carro que não precisa de sistema de arrefecimento (radiador) porque converte 100% do calor da queima do combustível em movimento das rodas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! A termodinâmica diz que é impossível converter todo o calor em trabalho; sempre haverá um 'pedágio' de calor desperdiçado.\",\n          \"isCorrect\": true,\n          \"text\": \"Impossível, pois sempre há perda de calor.\"\n        },\n        {\n          \"feedback\": \"O problema não é o combustível, mas a física fundamental de transformar calor em movimento.\",\n          \"isCorrect\": false,\n          \"text\": \"Possível, se o combustível for puro o suficiente.\"\n        },\n        {\n          \"feedback\": \"A primeira lei diz que a energia se conserva, mas a segunda impõe limites à qualidade dessa conversão.\",\n          \"isCorrect\": false,\n          \"text\": \"Possível, seguindo a Primeira Lei da Termodinâmica.\"\n        },\n        {\n          \"feedback\": \"A fricção é um problema real, mas mesmo sem ela, o limite de conversão de calor continuaria existindo.\",\n          \"isCorrect\": false,\n          \"text\": \"Impossível, apenas devido à fricção das peças.\"\n        }\n      ],\n      \"question\": \"Essa invenção é fisicamente possível?\"\n    },\n    {\n      \"context\": \"Você decide resfriar sua cozinha em um dia quente deixando a porta da geladeira aberta o tempo todo enquanto ela está ligada na tomada.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! A geladeira joga mais calor para fora (pela parte de trás) do que consegue retirar do interior aberto.\",\n          \"isCorrect\": true,\n          \"text\": \"A cozinha vai ficar mais quente.\"\n        },\n        {\n          \"feedback\": \"Parece lógico, mas o motor da geladeira gera calor extra ao tentar resfriar um ambiente infinito.\",\n          \"isCorrect\": false,\n          \"text\": \"A cozinha vai esfriar gradualmente.\"\n        },\n        {\n          \"feedback\": \"Haverá mudança, sim. O trabalho elétrico realizado pelo motor acaba virando calor extra no ambiente.\",\n          \"isCorrect\": false,\n          \"text\": \"A temperatura da cozinha não mudará.\"\n        },\n        {\n          \"feedback\": \"O gelo pode derreter, mas o efeito principal é o aquecimento do ar pelo funcionamento do motor.\",\n          \"isCorrect\": false,\n          \"text\": \"O único efeito será o derretimento do gelo interno.\"\n        }\n      ],\n      \"question\": \"Qual será o resultado dessa ação?\"\n    },\n    {\n      \"context\": \"Imagine que você tem uma xícara de café fervendo e uma piscina cheia de água morna. Você joga uma pedra de gelo em cada uma.\",\n      \"options\": [\n        {\n          \"feedback\": \"Boa! Temperatura mede a agitação média, enquanto calor total (energia térmica) depende também da massa.\",\n          \"isCorrect\": true,\n          \"text\": \"A piscina tem mais energia térmica total.\"\n        },\n        {\n          \"feedback\": \"O café está mais quente (maior agitação média), mas tem muito menos moléculas para armazenar energia.\",\n          \"isCorrect\": false,\n          \"text\": \"O café tem mais energia térmica total.\"\n        },\n        {\n          \"feedback\": \"Quase! Temperatura é apenas uma média; a quantidade total de energia depende de quanta água existe.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambos possuem a mesma energia térmica.\"\n        },\n        {\n          \"feedback\": \"Energia térmica e temperatura são ligadas, mas não são a mesma coisa.\",\n          \"isCorrect\": false,\n          \"text\": \"Energia térmica não tem relação com o volume.\"\n        }\n      ],\n      \"question\": \"Qual reservatório tem mais energia térmica?\"\n    },\n    {\n      \"context\": \"Um pneu de bicicleta é inflado rapidamente com uma bomba manual. Você percebe que a mangueira da bomba fica bem quente durante o processo, mesmo sem fogo ou sol.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso aí! Ao realizar trabalho para comprimir o gás rapidamente, você aumenta a energia interna dele, o que eleva a temperatura.\",\n          \"isCorrect\": true,\n          \"text\": \"O trabalho de compressão aqueceu o ar.\"\n        },\n        {\n          \"feedback\": \"O atrito contribui um pouco, mas o aquecimento principal vem da compressão rápida do próprio ar.\",\n          \"isCorrect\": false,\n          \"text\": \"É apenas o atrito do pistão na borracha.\"\n        },\n        {\n          \"feedback\": \"Pelo contrário! O ar está recebendo energia através do trabalho que você está realizando.\",\n          \"isCorrect\": false,\n          \"text\": \"O ar perdeu energia para o ambiente.\"\n        },\n        {\n          \"feedback\": \"A borracha é um isolante; o calor está sendo gerado dentro do cilindro de ar.\",\n          \"isCorrect\": false,\n          \"text\": \"O sol aqueceu a borracha da mangueira.\"\n        }\n      ],\n      \"question\": \"Por que a mangueira esquentou?\"\n    },\n    {\n      \"context\": \"Dois motores térmicos operam entre fontes de calor diferentes. O Motor A usa vapor a 500°C e resfria a 100°C. O Motor B usa vapor a 300°C e resfria a 100°C.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exatamente! Quanto maior a diferença de temperatura entre as fontes, maior é o potencial de converter calor em trabalho.\",\n          \"isCorrect\": true,\n          \"text\": \"O Motor A tem maior eficiência potencial.\"\n        },\n        {\n          \"feedback\": \"Na verdade, a eficiência depende da diferença entre as temperaturas, não apenas da temperatura final.\",\n          \"isCorrect\": false,\n          \"text\": \"O Motor B é mais eficiente por ser mais frio.\"\n        },\n        {\n          \"feedback\": \"A física garante que, com uma diferença maior de temperatura, o Motor A leva a vantagem teórica.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambos têm a mesma eficiência máxima.\"\n        },\n        {\n          \"feedback\": \"A temperatura da fonte quente é crucial para determinar o limite máximo de eficiência.\",\n          \"isCorrect\": false,\n          \"text\": \"A eficiência depende apenas da fonte fria.\"\n        }\n      ],\n      \"question\": \"Qual motor pode ser mais eficiente?\"\n    },\n    {\n      \"context\": \"Você deixa um castelo de areia na praia. Ao voltar no dia seguinte, o vento e as ondas o transformaram em um monte de areia uniforme.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certinho! A entropia dita que sistemas tendem a evoluir de estados organizados para estados de maior desordem e probabilidade.\",\n          \"isCorrect\": true,\n          \"text\": \"A entropia do sistema aumentou.\"\n        },\n        {\n          \"feedback\": \"Pelo contrário, o monte de areia é muito mais desorganizado (maior entropia) do que o castelo.\",\n          \"isCorrect\": false,\n          \"text\": \"A entropia do sistema diminuiu.\"\n        },\n        {\n          \"feedback\": \"A energia não sumiu, ela apenas se dispersou de uma forma que não sustenta mais a estrutura do castelo.\",\n          \"isCorrect\": false,\n          \"text\": \"A energia da areia foi destruída.\"\n        },\n        {\n          \"feedback\": \"Embora a areia tenha se movido, a 'desordem' é um conceito central da Segunda Lei, não da Primeira.\",\n          \"isCorrect\": false,\n          \"text\": \"Isso demonstra a conservação de energia.\"\n        }\n      ],\n      \"question\": \"Qual conceito físico explica isso?\"\n    },\n    {\n      \"context\": \"Ao segurar uma barra de metal em uma extremidade e colocar a outra no fogo, sua mão logo sente o calor. Se fizesse o mesmo com um pedaço de madeira, demoraria muito mais.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso! Metais são ótimos condutores porque permitem que a energia térmica passe rapidamente de molécula em molécula.\",\n          \"isCorrect\": true,\n          \"text\": \"Condução térmica.\"\n        },\n        {\n          \"feedback\": \"A convecção envolve o movimento de massas de fluidos (ar ou água), o que não é o caso de uma barra sólida.\",\n          \"isCorrect\": false,\n          \"text\": \"Convecção térmica.\"\n        },\n        {\n          \"feedback\": \"A radiação é a transferência por ondas, mas o calor viajando através do corpo da barra é condução.\",\n          \"isCorrect\": false,\n          \"text\": \"Irradiação térmica.\"\n        },\n        {\n          \"feedback\": \"Isolamento é o que a madeira faz; o metal faz o oposto ao facilitar a passagem do calor.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolamento térmico.\"\n        }\n      ],\n      \"question\": \"Qual mecanismo de transferência é esse?\"\n    },\n    {\n      \"context\": \"Em uma usina termoelétrica, queima-se carvão para ferver água e girar uma turbina. Grande parte do calor gerado acaba sendo liberado em rios ou torres de resfriamento.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito! Nenhuma máquina pode ser 100% eficiente; expelir calor para uma fonte fria é obrigatório para o ciclo funcionar.\",\n          \"isCorrect\": true,\n          \"text\": \"É uma exigência das leis da física.\"\n        },\n        {\n          \"feedback\": \"Embora a tecnologia melhore, o limite fundamental de desperdício é imposto pela própria termodinâmica.\",\n          \"isCorrect\": false,\n          \"text\": \"É apenas por causa de engenharia ruim.\"\n        },\n        {\n          \"feedback\": \"A reciclagem de calor é feita até certo ponto, mas sempre haverá um resto que deve ser descartado.\",\n          \"isCorrect\": false,\n          \"text\": \"Poderia ser evitado reciclando o calor.\"\n        },\n        {\n          \"feedback\": \"A Primeira Lei diz que a energia se conserva, mas é a Segunda Lei que diz que parte dela deve ser descartada como calor baixo.\",\n          \"isCorrect\": false,\n          \"text\": \"Isso viola a conservação de energia.\"\n        }\n      ],\n      \"question\": \"Por que esse calor é descartado?\"\n    },\n    {\n      \"context\": \"O corpo humano queima calorias dos alimentos para manter a temperatura constante e realizar movimentos. Em um dia muito frio, você começa a tremer involuntariamente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Brilhante! O tremor é trabalho muscular que, devido à ineficiência natural, gera calor para compensar a perda para o ambiente.\",\n          \"isCorrect\": true,\n          \"text\": \"Gerar calor através de trabalho muscular.\"\n        },\n        {\n          \"feedback\": \"O tremor na verdade gasta energia para tentar manter a temperatura, não para resfriar.\",\n          \"isCorrect\": false,\n          \"text\": \"Esfriar o corpo através da convecção.\"\n        },\n        {\n          \"feedback\": \"Pelo contrário, o tremor aumenta o gasto de energia interna para manter o equilíbrio térmico.\",\n          \"isCorrect\": false,\n          \"text\": \"Armazenar energia para uso posterior.\"\n        },\n        {\n          \"feedback\": \"O tremor é um processo ativo de conversão de energia, não uma simples resposta de isolamento.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumentar a isolação térmica da pele.\"\n        }\n      ],\n      \"question\": \"Qual a função biológica do tremor?\"\n    },\n    {\n      \"context\": \"Você coloca uma garrafa de refrigerante quente no congelador. Depois de uma hora, o refrigerante está gelado, mas a parte de trás da geladeira está quente ao toque.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Para mover calor do frio para o quente (contra o fluxo natural), a geladeira precisa realizar trabalho elétrico.\",\n          \"isCorrect\": true,\n          \"text\": \"O calor foi movido usando trabalho.\"\n        },\n        {\n          \"feedback\": \"A energia não desaparece; ela foi retirada do refrigerante e jogada para fora da geladeira.\",\n          \"isCorrect\": false,\n          \"text\": \"O frio foi criado do nada.\"\n        },\n        {\n          \"feedback\": \"Isso violaria a Segunda Lei. O calor só flui do frio para o quente se houver ajuda externa (trabalho).\",\n          \"isCorrect\": false,\n          \"text\": \"O calor saiu da garrafa espontaneamente.\"\n        },\n        {\n          \"feedback\": \"Se fosse isolamento perfeito, o refrigerante nunca gelaria. Houve troca de calor ativa.\",\n          \"isCorrect\": false,\n          \"text\": \"A garrafa sofreu isolamento térmico.\"\n        }\n      ],\n      \"question\": \"Como o refrigerante esfriou?\"\n    },\n    {\n      \"context\": \"Um balão de festa é deixado ao sol. O ar lá dentro esquenta, as moléculas se movem mais rápido e o balão expande até estourar.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! O calor do sol aumentou a energia interna (agitação molecular), que foi usada para realizar o trabalho de expansão.\",\n          \"isCorrect\": true,\n          \"text\": \"Calor virou energia interna e trabalho.\"\n        },\n        {\n          \"feedback\": \"A energia não foi criada; ela foi transferida do sol para o gás dentro do balão.\",\n          \"isCorrect\": false,\n          \"text\": \"O gás criou energia para expandir.\"\n        },\n        {\n          \"feedback\": \"A entropia do gás aumentou conforme ele se aqueceu e se expandiu.\",\n          \"isCorrect\": false,\n          \"text\": \"A entropia do gás dentro do balão caiu.\"\n        },\n        {\n          \"feedback\": \"A temperatura subiu justamente porque a energia cinética média das moléculas aumentou.\",\n          \"isCorrect\": false,\n          \"text\": \"A temperatura subiu sem mudar a energia.\"\n        }\n      ],\n      \"question\": \"O que ocorreu com a energia solar?\"\n    },\n    {\n      \"context\": \"Em uma sala perfeitamente isolada, você acende uma lâmpada comum. Depois de algumas horas, você nota que a temperatura da sala subiu levemente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Na mosca! Toda a energia elétrica consumida pela lâmpada acaba se transformando em calor, seja de imediato ou após a luz ser absorvida pelas paredes.\",\n          \"isCorrect\": true,\n          \"text\": \"A energia elétrica virou calor.\"\n        },\n        {\n          \"feedback\": \"A luz é uma forma de energia que, ao atingir as superfícies da sala, é absorvida e transformada em energia térmica.\",\n          \"isCorrect\": false,\n          \"text\": \"Luz e calor não têm relação entre si.\"\n        },\n        {\n          \"feedback\": \"Pelo princípio da conservação, a energia elétrica deve aparecer em outra forma; nesse caso, aquecimento.\",\n          \"isCorrect\": false,\n          \"text\": \"A lâmpada destruiu a energia fria.\"\n        },\n        {\n          \"feedback\": \"Mesmo lâmpadas eficientes (como LEDs) convertem o restante da energia em calor e a própria luz vira calor ao ser absorvida.\",\n          \"isCorrect\": false,\n          \"text\": \"Isso só aconteceria se a lâmpada falhasse.\"\n        }\n      ],\n      \"question\": \"Por que a sala aqueceu?\"\n    },\n    {\n      \"context\": \"Um cientista estuda o universo e conclui que, daqui a trilhões de anos, todas as estrelas se apagarão e o universo terá a mesma temperatura em todos os lugares.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exatamente. A Segunda Lei prevê que o universo caminha para um estado de desordem máxima onde nenhuma energia útil pode ser extraída.\",\n          \"isCorrect\": true,\n          \"text\": \"O universo atingirá a entropia máxima.\"\n        },\n        {\n          \"feedback\": \"A energia não some, ela apenas se torna 'inútil' porque não há mais diferença de temperatura para gerar trabalho.\",\n          \"isCorrect\": false,\n          \"text\": \"O universo ficará sem energia total.\"\n        },\n        {\n          \"feedback\": \"Pelo contrário, se tudo está na mesma temperatura, a ordem é mínima e a entropia é máxima.\",\n          \"isCorrect\": false,\n          \"text\": \"O universo se tornará perfeitamente ordenado.\"\n        },\n        {\n          \"feedback\": \"Isso violaria a Primeira Lei. A energia permanece, mas de forma totalmente dispersa.\",\n          \"isCorrect\": false,\n          \"text\": \"A energia será convertida em matéria.\"\n        }\n      ],\n      \"question\": \"Que conceito explica essa previsão?\"\n    },\n    {\n      \"context\": \"Você está em um acampamento e sente o calor da fogueira no rosto, mesmo que o ar ao redor esteja frio e você não esteja tocando nas chamas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso! A radiação infravermelha viaja pelo espaço e aquece sua pele diretamente, sem precisar de contato ou vento.\",\n          \"isCorrect\": true,\n          \"text\": \"Calor transmitido por radiação.\"\n        },\n        {\n          \"feedback\": \"Se fosse condução, você teria que tocar na madeira em brasa para sentir o calor.\",\n          \"isCorrect\": false,\n          \"text\": \"Calor transmitido por condução.\"\n        },\n        {\n          \"feedback\": \"A convecção faria o ar quente subir; se você está ao lado, a radiação é o principal meio que te atinge.\",\n          \"isCorrect\": false,\n          \"text\": \"Calor transmitido por convecção.\"\n        },\n        {\n          \"feedback\": \"O isolamento impediria o calor de chegar; o que você sente é justamente a transferência de energia.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolamento térmico do ar frio.\"\n        }\n      ],\n      \"question\": \"Como o calor chegou até você?\"\n    }\n  ]\n}",
      "outputTokens": 5649,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "pt-physics-thermodynamics-laws-1",
      "userPrompt": "LESSON_TITLE: Leis da Termodinamica\nLESSON_DESCRIPTION: Compreendendo as leis da termodinamica e como elas governam a transferencia de energia e os limites de eficiencia em todos os processos fisicos\nCHAPTER_TITLE: Termodinamica\nCOURSE_TITLE: Fisica Geral\nLANGUAGE: pt\n\nBACKGROUND_STEPS:\n1. O Sonho Impossivel: No seculo XIX, engenheiros queriam construir maquinas a vapor mais eficientes. Sadi Carnot percebeu que havia um limite fundamental — nenhuma maquina poderia converter todo calor em trabalho.\n2. As Leis Universais: Rudolf Clausius e Lord Kelvin formalizaram as leis da termodinamica. Elas explicam por que o cafe esfria, por que precisamos comer, e por que o universo caminha para a desordem.\n3. Solidez da Teoria: A termodinamica e uma das teorias mais robustas da fisica. Einstein disse que, de todas as teorias, ela e a menos provavel de ser derrubada por descobertas futuras.\n\nEXPLANATION_STEPS:\n1. Primeira Lei: A primeira lei diz que energia nao se cria nem se destroi — apenas se transforma. Toda energia que entra em um sistema deve sair ou ser armazenada. E um balanco contabil universal.\n2. Segunda Lei: A segunda lei afirma que processos espontaneos aumentam a entropia total. Calor flui do quente para o frio naturalmente, nunca ao contrario sem trabalho externo.\n3. Entropia: Entropia mede a dispersao de energia entre microestados possiveis. Sistemas evoluem para configuracoes mais provaveis — e configuracoes de alta entropia sao vastamente mais provaveis.\n4. Equilibrio Termico: Equilibrio termico ocorre quando dois sistemas em contato param de trocar energia liquida. Eles atingem a mesma temperatura, mas nao necessariamente a mesma energia.\n5. Calor vs Temperatura: Calor e a transferencia de energia termica entre sistemas. Temperatura mede a energia cinetica media das moleculas. Calor alto com temperatura baixa e possivel (muito material, movimento lento).\n\nMECHANICS_STEPS:\n1. Ciclo do Motor Termico: Em um motor termico, calor flui da fonte quente para a fria. Parte dessa energia e capturada como trabalho. O resto e desperdicado como calor para o ambiente.\n2. Limite de Carnot: O ciclo de Carnot define a eficiencia maxima teorica. Depende apenas das temperaturas das fontes quente e fria. Quanto maior a diferenca, maior a eficiencia possivel.\n3. Bomba de Calor: Bombas de calor invertem o fluxo natural. Usam trabalho para mover calor do frio para o quente — como a geladeira que remove calor do interior e o despeja no ambiente.\n4. Tipos de Processos: Processos isotermicos mantem temperatura constante. Processos adiabaticos nao trocam calor com o ambiente. Cada tipo segue equacoes especificas de expansao e compressao.\n5. Mecanismos de Transferencia: A conducao, conveccao e radiacao sao os tres mecanismos de transferencia de calor. Cada um domina em situacoes diferentes — metais conduzem, liquidos convectam, o sol irradia.\n\nEXAMPLES_STEPS:\n1. A Geladeira: A geladeira e uma bomba de calor que move energia do interior frio para o exterior quente. Isso requer trabalho — por isso ela consome eletricidade continuamente.\n2. Motores de Combustao: Motores de carro convertem energia quimica do combustivel em movimento. Mas pelo menos 60-70% da energia e perdida como calor — os limites termodinamicos sao implacaveis.\n3. Geracao de Energia: Usinas termeletricas queimam combustivel para gerar vapor que move turbinas. A eficiencia tipica e 30-40% — a maior parte da energia se dissipa no ambiente.\n4. O Corpo Humano: Seu corpo e uma maquina termica. Converte energia dos alimentos em trabalho e calor. Febre significa que o termostato interno foi reconfigurado para uma temperatura mais alta."
    },
    {
      "duration": 36771.46854199999,
      "inputTokens": 3009,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Un historiador estudia por qué ciudadanos pacíficos de repente apoyaron leyes discriminatorias tras un cambio de gobierno. No encuentra evidencia de que las personas hayan cambiado sus valores personales de la noche a la mañana.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! El estudio de la posguerra reveló que el entorno social y la presión del grupo pueden silenciar la brújula moral individual, incluso en personas comunes.\",\n          \"isCorrect\": true,\n          \"text\": \"La presión social superó la moral individual\"\n        },\n        {\n          \"feedback\": \"Aunque puede ocurrir, la psicología social se enfoca en cómo personas con valores normales actúan contra ellos por influencia externa.\",\n          \"isCorrect\": false,\n          \"text\": \"Las personas realmente cambiaron sus creencias internas\"\n        },\n        {\n          \"feedback\": \"No es una cuestión de intelecto. Experimentos muestran que incluso personas muy inteligentes ceden ante la presión del grupo.\",\n          \"isCorrect\": false,\n          \"text\": \"El nivel educativo de la población era muy bajo\"\n        },\n        {\n          \"feedback\": \"La obediencia no requiere maldad previa, sino una estructura de autoridad que valide el comportamiento.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo las personas con tendencias agresivas participaron\"\n        }\n      ],\n      \"question\": \"¿Qué explica mejor este fenómeno social?\"\n    },\n    {\n      \"context\": \"Estás en una cena elegante y hay tres tipos de tenedores que no reconoces. Esperas a ver cuál usa el resto de los invitados antes de empezar a comer.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Buen ojo! Usas al grupo como una fuente de datos confiable porque asumes que ellos saben algo que tú no en una situación nueva.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"La influencia normativa es para encajar o evitar el rechazo, no necesariamente para obtener información sobre qué es lo correcto.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"Aquí no hay una orden directa de una figura de poder, simplemente estás observando a tus pares.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"Las normas prescriptivas dicen lo que 'debería' hacerse legal o moralmente, no son guías prácticas en la ambigüedad.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma prescriptiva\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia estás experimentando?\"\n    },\n    {\n      \"context\": \"Un grupo de amigos decide ir a un restaurante que no te gusta. Aunque te preguntan tu opinión, dices que te parece bien para no arruinar el ambiente y evitar discusiones.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Correcto! Estás actuando igual que el grupo para ser aceptado, aunque internamente sigas pensando diferente.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad externa\"\n        },\n        {\n          \"feedback\": \"La conformidad interna implica que realmente cambiaste de opinión y ahora te gusta el restaurante.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad interna\"\n        },\n        {\n          \"feedback\": \"La obediencia implica una jerarquía, y aquí estás entre amigos con el mismo nivel de poder.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia ciega\"\n        },\n        {\n          \"feedback\": \"La desindividuación ocurre cuando pierdes tu identidad en una masa, no en una decisión consciente con amigos.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Cómo se define tu comportamiento en esta cena?\"\n    },\n    {\n      \"context\": \"Un jefe le pide a un empleado que firme un documento con datos ligeramente alterados. El jefe está presente en la oficina mirando fijamente al empleado mientras este duda.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Así es! La presencia física de la autoridad hace que sea mucho más difícil resistirse a una orden, incluso si es cuestionable.\",\n          \"isCorrect\": true,\n          \"text\": \"La proximidad física de la autoridad\"\n        },\n        {\n          \"feedback\": \"La influencia normativa viene de pares, pero aquí la presión viene de un superior jerárquico.\",\n          \"isCorrect\": false,\n          \"text\": \"La influencia normativa del grupo\"\n        },\n        {\n          \"feedback\": \"La desindividuación requeriría que el empleado se sintiera anónimo, pero aquí está plenamente identificado.\",\n          \"isCorrect\": false,\n          \"text\": \"El anonimato del empleado\"\n        },\n        {\n          \"feedback\": \"No hay un grupo unánime aquí, sino una relación uno a uno con un superior.\",\n          \"isCorrect\": false,\n          \"text\": \"La falta de un disidente\"\n        }\n      ],\n      \"question\": \"¿Qué factor aumenta la probabilidad de obediencia?\"\n    },\n    {\n      \"context\": \"En un parque, ves un cartel que dice 'No tirar basura'. Sin embargo, el suelo está lleno de papeles y latas, así que decides tirar tu servilleta al suelo también.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! A veces lo que vemos que otros hacen (norma descriptiva) tiene más peso que lo que se supone que debemos hacer.\",\n          \"isCorrect\": true,\n          \"text\": \"La norma descriptiva venció a la prescriptiva\"\n        },\n        {\n          \"feedback\": \"La norma prescriptiva es el cartel de 'No tirar basura', y en este caso, la ignoraste.\",\n          \"isCorrect\": false,\n          \"text\": \"Seguiste la norma prescriptiva del parque\"\n        },\n        {\n          \"feedback\": \"No hay una autoridad dándote una orden directa para tirar basura.\",\n          \"isCorrect\": false,\n          \"text\": \"Es un caso de obediencia por proximidad\"\n        },\n        {\n          \"feedback\": \"La conformidad interna significaría que ahora crees que tirar basura es lo correcto, lo cual no es necesariamente cierto.\",\n          \"isCorrect\": false,\n          \"text\": \"Es un ejemplo de conformidad interna\"\n        }\n      ],\n      \"question\": \"¿Por qué decidiste tirar la basura al suelo?\"\n    },\n    {\n      \"context\": \"Estás en una reunión de trabajo donde todos apoyan un plan que sabes que fallará. Justo antes de que aceptes, un compañero levanta la mano y señala un error en el plan.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Gran observación! Un solo disidente es suficiente para romper el 'hechizo' de la unanimidad y darte valor para hablar.\",\n          \"isCorrect\": true,\n          \"text\": \"Te sentirás más libre de expresar tu duda\"\n        },\n        {\n          \"feedback\": \"Al contrario, cuando alguien más rompe el consenso, la presión grupal cae drásticamente.\",\n          \"isCorrect\": false,\n          \"text\": \"Sentirás más presión para callar\"\n        },\n        {\n          \"feedback\": \"No necesitas que la mayoría esté de acuerdo contigo, solo necesitas que el grupo deje de ser unánime.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo hablarás si la mayoría lo apoya\"\n        },\n        {\n          \"feedback\": \"La desindividuación no aplica aquí porque la voz del compañero te devuelve la conciencia de tu propia opinión.\",\n          \"isCorrect\": false,\n          \"text\": \"Ignorarás al compañero por desindividuación\"\n        }\n      ],\n      \"question\": \"¿Cómo afecta la acción de tu compañero a tu decisión?\"\n    },\n    {\n      \"context\": \"Un entrenador de gimnasio te pide que hagas 5 flexiones. Luego 10. Después de un mes, te pide que entrenes 3 horas diarias y aceptaste sin cuestionarlo.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Cierto! Es mucho más difícil decir que no después de haber aceptado pequeñas peticiones previas. El compromiso se construye paso a paso.\",\n          \"isCorrect\": true,\n          \"text\": \"Escalada de compromiso\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad ocurre en grupos, pero aquí es un trato directo entre tú y el entrenador.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"La influencia informacional es por falta de datos, no por la repetición de actos.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"La desindividuación implica pérdida de identidad, lo cual no encaja con el esfuerzo personal del entrenamiento.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Qué mecanismo explica que aceptes este ritmo?\"\n    },\n    {\n      \"context\": \"Caminas por una calle concurrida y ves a una persona mayor tropezar y caer. Notas que docenas de personas pasan de largo mirando sus teléfonos, así que tú también sigues caminando.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! Al haber tanta gente, cada individuo siente que su responsabilidad personal es menor, asumiendo que otro ayudará.\",\n          \"isCorrect\": true,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"La obediencia requiere una autoridad. Aquí nadie te ordenó ignorar a la persona.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La escalada de compromiso se refiere a pasos graduales en una tarea, no a la inacción en una emergencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Escalada de compromiso\"\n        },\n        {\n          \"feedback\": \"Aunque la norma descriptiva influye, el mecanismo central que detiene la acción en grupos grandes es la falta de responsabilidad individual.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma prescriptiva\"\n        }\n      ],\n      \"question\": \"¿Qué fenómeno psicológico ocurrió aquí?\"\n    },\n    {\n      \"context\": \"Durante un festival masivo, una multitud empieza a saltar las vallas de seguridad. Personas que normalmente respetan las reglas se unen al caos, sintiéndose anónimas entre la masa.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Logrado! El anonimato y la energía del grupo reducen la autoconciencia, haciendo que hagamos cosas que solos jamás intentaríamos.\",\n          \"isCorrect\": true,\n          \"text\": \"Desindividuación\"\n        },\n        {\n          \"feedback\": \"La influencia informacional es buscar datos. Aquí la gente no busca información, solo se deja llevar por la excitación.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"La obediencia implica seguir órdenes. Aquí no hay un líder dando instrucciones claras.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La conformidad interna significaría que ahora crees moralmente que saltar vallas es correcto, lo cual es poco probable después del evento.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad interna\"\n        }\n      ],\n      \"question\": \"¿Cómo se llama este efecto de grupo?\"\n    },\n    {\n      \"context\": \"Ves un video en una red social con 2 millones de 'likes'. Aunque el contenido te parece aburrido, dejas un comentario positivo porque parece ser lo que a todos les gusta.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Muy bien! Las redes sociales crean 'cascadas' donde la popularidad visible presiona a los demás a conformarse para encajar en la tendencia.\",\n          \"isCorrect\": true,\n          \"text\": \"Cascada de conformidad\"\n        },\n        {\n          \"feedback\": \"La obediencia es hacia una persona o institución con poder, no hacia una masa de usuarios anónimos.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia jerárquica\"\n        },\n        {\n          \"feedback\": \"No estás buscando información veraz, estás buscando validación social.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional pura\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad explica por qué no ayudamos, no por qué participamos activamente en una tendencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        }\n      ],\n      \"question\": \"¿Qué está motivando tu comentario?\"\n    },\n    {\n      \"context\": \"En una oficina, el gerente envía un video mensaje pidiendo a todos que trabajen el fin de semana. La mayoría de los empleados ignora el mensaje, algo que no harían si el gerente se los pidiera cara a cara.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Correcto! La distancia física debilita el impacto de la autoridad. Es más fácil ignorar una pantalla que a una persona frente a ti.\",\n          \"isCorrect\": true,\n          \"text\": \"La distancia reduce la obediencia\"\n        },\n        {\n          \"feedback\": \"Al contrario, el video aumenta la distancia y reduce la presión de la autoridad.\",\n          \"isCorrect\": false,\n          \"text\": \"El video aumenta la autoridad\"\n        },\n        {\n          \"feedback\": \"La desindividuación haría que se unieran al caos, no que simplemente ignoraran una petición de trabajo.\",\n          \"isCorrect\": false,\n          \"text\": \"Es un caso de desindividuación\"\n        },\n        {\n          \"feedback\": \"La unanimidad se rompe más fácil en persona; aquí el problema es la falta de presencia del líder.\",\n          \"isCorrect\": false,\n          \"text\": \"Faltó un disidente en el grupo\"\n        }\n      ],\n      \"question\": \"¿Por qué bajó el nivel de cumplimiento?\"\n    },\n    {\n      \"context\": \"Un grupo de diseño decide usar un color verde neón para un logo serio. Tú piensas que es horrible, pero cuando el director pregunta, todos asienten. Tú también asientes sin decir nada.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! El silencio suele tomarse como conformidad, lo que refuerza la idea de que todos están de acuerdo cuando quizás no es así.\",\n          \"isCorrect\": true,\n          \"text\": \"El silencio se interpreta como acuerdo\"\n        },\n        {\n          \"feedback\": \"La influencia informacional es cuando crees que ellos saben más. Aquí tú 'sabes' que es feo, pero callas por presión.\",\n          \"isCorrect\": false,\n          \"text\": \"Es influencia informacional\"\n        },\n        {\n          \"feedback\": \"La desindividuación ocurre en masas grandes y excitadas, no en una oficina profesional.\",\n          \"isCorrect\": false,\n          \"text\": \"Ocurrió desindividuación\"\n        },\n        {\n          \"feedback\": \"Las normas prescriptivas son reglas morales o legales, no preferencias de diseño en una reunión.\",\n          \"isCorrect\": false,\n          \"text\": \"Es una norma prescriptiva fuerte\"\n        }\n      ],\n      \"question\": \"¿Qué dinámica de reunión ocurrió aquí?\"\n    },\n    {\n      \"context\": \"Una marca de ropa lanza una colección muy extraña. Al principio nadie la compra, pero cuando ves a varios influencers usándola, empiezas a pensar que realmente se ve bien.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! A diferencia de la externa, aquí sí cambiaste tu juicio personal basándote en lo que el grupo (o los influencers) validaron.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad interna\"\n        },\n        {\n          \"feedback\": \"La conformidad externa es solo actuar para encajar. Aquí realmente empezaste a creer que 'se ve bien'.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad externa\"\n        },\n        {\n          \"feedback\": \"No hay una jerarquía de poder que te obligue a comprar la ropa.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad se aplica a situaciones de ayuda o tareas, no a gustos estéticos.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de cambio experimentaste?\"\n    },\n    {\n      \"context\": \"Un experimento muestra que si a una persona se le pide que administre un castigo leve, es mucho más probable que luego acepte administrar uno fuerte si se le pide de forma sucesiva.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Muy bien! Una vez que cruzas la primera línea pequeña, las siguientes parecen menos graves. Es la trampa de los pequeños pasos.\",\n          \"isCorrect\": true,\n          \"text\": \"Compromiso gradual\"\n        },\n        {\n          \"feedback\": \"La influencia normativa explica por qué queremos gustar, no por qué escalamos en acciones dañinas.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"La norma descriptiva es ver lo que otros hacen. Aquí se trata de tus propias acciones pasadas.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma descriptiva\"\n        },\n        {\n          \"feedback\": \"La desindividuación requiere anonimato, pero el sujeto suele estar solo con el experimentador.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Cuál es el motor de este comportamiento?\"\n    },\n    {\n      \"context\": \"Imagina que eres parte de un jurado. Ocho personas dicen que el acusado es culpable, pero tú tienes dudas. De repente, otra persona del jurado dice: 'Yo tampoco estoy convencido'.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Excelente! La unanimidad es una fuerza poderosa, pero es frágil. Un solo aliado reduce el costo social de ser diferente.\",\n          \"isCorrect\": true,\n          \"text\": \"Te será más fácil mantener tu duda\"\n        },\n        {\n          \"feedback\": \"La presión para conformarse disminuye cuando el grupo deja de ser un bloque unánime.\",\n          \"isCorrect\": false,\n          \"text\": \"Sentirás más miedo a los otros ocho\"\n        },\n        {\n          \"feedback\": \"No necesitas ser mayoría, solo necesitas que no haya un consenso total en tu contra.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo hablarás si logras ser mayoría\"\n        },\n        {\n          \"feedback\": \"La obediencia es hacia el juez; la relación con los otros jurados es de conformidad.\",\n          \"isCorrect\": false,\n          \"text\": \"Es un caso de obediencia ciega\"\n        }\n      ],\n      \"question\": \"¿Qué efecto tiene ese aliado en ti?\"\n    }\n  ]\n}",
      "outputTokens": 5723,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "es-psychology-social-conformity-1",
      "userPrompt": "LESSON_TITLE: Conformidad y Obediencia Social\nLESSON_DESCRIPTION: Comprendiendo como la presion social y la autoridad influyen en nuestras decisiones, desde situaciones cotidianas hasta dilemas eticos\nCHAPTER_TITLE: Influencia Social\nCOURSE_TITLE: Psicologia Social\nLANGUAGE: es\n\nBACKGROUND_STEPS:\n1. La Pregunta Post-Guerra: Despues de la Segunda Guerra Mundial, el mundo pregunto: como pudo gente ordinaria participar en atrocidades? La psicologia social busco entender el poder de la presion grupal sobre la moral individual.\n2. Los Estudios de Asch: Solomon Asch diseno experimentos elegantes en los 1950s. Mostro que personas inteligentes negaban la evidencia de sus propios ojos cuando un grupo unanime decia lo contrario.\n3. El Shock de Milgram: Stanley Milgram llevo esto mas lejos con sus experimentos de obediencia. Revelo que la autoridad percibida podia hacer que personas normales administraran lo que creian eran descargas electricas peligrosas.\n\nEXPLANATION_STEPS:\n1. Definicion de Conformidad: La conformidad es el cambio de comportamiento o creencias para coincidir con un grupo. Puede ser externa (actuar igual) o interna (realmente creer lo que el grupo cree).\n2. Influencia Normativa: La influencia normativa surge del deseo de aceptacion social. Nos conformamos para evitar rechazo, incluso cuando sabemos que el grupo esta equivocado.\n3. Influencia Informacional: La influencia informacional surge cuando usamos al grupo como fuente de informacion. En situaciones ambiguas, asumimos que otros saben mas que nosotros.\n4. Obediencia a la Autoridad: La obediencia es conformidad hacia una autoridad. Difiere de la conformidad horizontal porque hay una jerarquia de poder explicita.\n5. Tipos de Normas: Las normas descriptivas describen lo que la gente hace. Las normas prescriptivas describen lo que deberia hacer. Ambas influyen el comportamiento de maneras diferentes.\n\nMECHANICS_STEPS:\n1. El Poder de la Unanimidad: La unanimidad amplifica la conformidad dramaticamente. Un solo disidente reduce la presion a conformarse — no necesitas mayoria, solo alguien que rompa el consenso.\n2. Proximidad y Autoridad: La proximidad de la autoridad aumenta la obediencia. En experimentos, la obediencia caia drasticamente cuando el experimentador daba ordenes por telefono en vez de en persona.\n3. Escalada de Compromiso: El compromiso gradual atrapa a las personas. Pequenas concesiones llevan a mayores — es mas facil decir 'no' al principio que despues de varios 'si'.\n4. Difusion de Responsabilidad: La difusion de responsabilidad ocurre en grupos. Cuando todos son responsables, nadie se siente responsable. Asignar roles especificos contrarresta este efecto.\n5. Desindividuacion: La desindividuacion en grupos reduce la autoconciencia. Anonimato mas excitacion grupal pueden llevar a comportamientos que el individuo solo nunca consideraria.\n\nEXAMPLES_STEPS:\n1. Dinamicas de Reunion: En reuniones de trabajo, el silencio ante una mala idea se interpreta como acuerdo. La primera persona que habla ancla la discusion, y los demas se conforman por temor a parecer diferentes.\n2. Cascadas en Redes: Las redes sociales amplifican la conformidad. Los 'likes' visibles crean cascadas — contenido popular se vuelve mas popular, no necesariamente porque sea mejor, sino porque otros ya lo aprobaron.\n3. Tendencias de Moda: La moda demuestra conformidad en accion. Tendencias se propagan porque vestirse diferente tiene costos sociales. La originalidad tiene limites definidos por el grupo.\n4. Efecto Espectador: En emergencias medicas, la difusion de responsabilidad hace que nadie actue. Cada persona espera que otro tome la iniciativa, resultando en inaccion colectiva."
    },
    {
      "duration": 39984.15187500001,
      "inputTokens": 2917,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"You bought a concert ticket for $100 months ago. On the day of the show, a friend offers you $100 for it. Even though you aren't that excited anymore, you refuse to sell, feeling like losing the ticket is much worse than getting the cash.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The psychological pain of losing that ticket feels about twice as intense as the joy of gaining the equivalent cash.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion makes the 'loss' of the ticket hurt more than the 'gain' of cash.\"\n        },\n        {\n          \"feedback\": \"Actually, anchoring is about the first number you see influencing your price. This is about the emotional weight of giving something up.\",\n          \"isCorrect\": false,\n          \"text\": \"You are anchored to the original $100 price point.\"\n        },\n        {\n          \"feedback\": \"Close, but present bias usually makes us want things *now*. Here, you're avoiding a sense of loss, which is the core of loss aversion.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias is making you value the immediate concert more than the money.\"\n        },\n        {\n          \"feedback\": \"System 2 is for logic and math. This emotional refusal to trade is a classic example of our intuitive System 1 biases.\",\n          \"isCorrect\": false,\n          \"text\": \"Your System 2 is calculating the long-term value of the experience.\"\n        }\n      ],\n      \"question\": \"Why does keeping the ticket feel like the priority?\"\n    },\n    {\n      \"context\": \"A real estate agent shows you a run-down, overpriced house first. Then, they show you a slightly better house at a lower price. Suddenly, the second house looks like a fantastic deal, even though it's still quite expensive.\",\n      \"options\": [\n        {\n          \"feedback\": \"You've got it! That first high price became your 'anchor,' making everything else look cheap by comparison.\",\n          \"isCorrect\": true,\n          \"text\": \"The high price of the first house served as an anchor.\"\n        },\n        {\n          \"feedback\": \"Social proof involves following what others do. This scenario is about how numbers influence your perception of value.\",\n          \"isCorrect\": false,\n          \"text\": \"You are following the social proof of the real estate agent.\"\n        },\n        {\n          \"feedback\": \"Framing is about how a single choice is described. This is about how one piece of information sets the scale for the next.\",\n          \"isCorrect\": false,\n          \"text\": \"The agent used framing to make the second house look better.\"\n        },\n        {\n          \"feedback\": \"Availability heuristics are about how easily examples come to mind. This is a comparison between two specific data points.\",\n          \"isCorrect\": false,\n          \"text\": \"The availability heuristic makes you fear losing the second house.\"\n        }\n      ],\n      \"question\": \"What explains your sudden change in perception?\"\n    },\n    {\n      \"context\": \"You genuinely want to save for a vacation next year. However, when you see a limited-edition pair of sneakers today, you buy them instantly, ignoring your savings goal.\",\n      \"options\": [\n        {\n          \"feedback\": \"Social proof is about what others are doing. This is an internal struggle between your current self and your future self.\",\n          \"isCorrect\": false,\n          \"text\": \"You are being influenced by social proof in the sneaker community.\"\n        },\n        {\n          \"feedback\": \"Heuristics are mental shortcuts for solving problems. This is about valuing immediate pleasure over future rewards.\",\n          \"isCorrect\": false,\n          \"text\": \"You are using a heuristic to decide that sneakers are more valuable.\"\n        },\n        {\n          \"feedback\": \"Spot on! Present bias makes the immediate reward of the sneakers feel much more 'real' than a vacation months away.\",\n          \"isCorrect\": true,\n          \"text\": \"Present bias causes you to overweight immediate gratification.\"\n        },\n        {\n          \"feedback\": \"Loss aversion would make you afraid to lose the money you've already saved. This is about the lure of something new.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion makes you fear missing out on the sneakers.\"\n        }\n      ],\n      \"question\": \"Which concept describes this struggle?\"\n    },\n    {\n      \"context\": \"A grocery store labels ground beef as '80% lean' instead of '20% fat.' Most customers choose the '80% lean' package, even though the content is identical.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The positive description of 'lean' feels better than the negative 'fat,' even if the math is the same.\",\n          \"isCorrect\": true,\n          \"text\": \"The 'lean' label frames the choice in a more positive light.\"\n        },\n        {\n          \"feedback\": \"Anchoring involves a specific number influencing a later estimate. This is about how the same information is presented.\",\n          \"isCorrect\": false,\n          \"text\": \"The number 80 acts as an anchor for quality.\"\n        },\n        {\n          \"feedback\": \"Choice architecture is about the environment of the choice. Framing is about the description of the choice itself.\",\n          \"isCorrect\": false,\n          \"text\": \"This is an example of complex choice architecture.\"\n        },\n        {\n          \"feedback\": \"System 2 would actually notice the math is the same. System 1 is what reacts to the positive or negative wording.\",\n          \"isCorrect\": false,\n          \"text\": \"System 2 is quickly calculating the health benefits.\"\n        }\n      ],\n      \"question\": \"Why do customers prefer the 'lean' label?\"\n    },\n    {\n      \"context\": \"While walking through a mall, you smell freshly baked cinnamon rolls and buy one without thinking. Later, while doing your taxes, you spend hours carefully calculating deductions.\",\n      \"options\": [\n        {\n          \"feedback\": \"Classic! The rolls were a System 1 'fast' choice, while taxes require the 'slow' and analytical System 2.\",\n          \"isCorrect\": true,\n          \"text\": \"The roll was a System 1 decision; taxes are System 2.\"\n        },\n        {\n          \"feedback\": \"Actually, System 1 is the intuitive, automatic one. System 2 is the one that does the heavy lifting for math.\",\n          \"isCorrect\": false,\n          \"text\": \"The roll was a System 2 decision; taxes are System 1.\"\n        },\n        {\n          \"feedback\": \"Heuristics help us make quick guesses. While you might use them, the main distinction here is the mode of thinking being used.\",\n          \"isCorrect\": false,\n          \"text\": \"Both decisions relied on different heuristics.\"\n        },\n        {\n          \"feedback\": \"Present bias explains the roll, but it doesn't explain the focus and effort required for the taxes.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias is the only factor in both situations.\"\n        }\n      ],\n      \"question\": \"Which systems were used for these two tasks?\"\n    },\n    {\n      \"context\": \"A company wants more employees to join its retirement plan. Instead of asking them to check a box to join, they automatically enroll everyone and ask them to check a box if they want to leave.\",\n      \"options\": [\n        {\n          \"feedback\": \"You've got it! By making 'enrolled' the default, people are much more likely to stay in because it requires no extra effort.\",\n          \"isCorrect\": true,\n          \"text\": \"They changed the default option in the choice architecture.\"\n        },\n        {\n          \"feedback\": \"A commitment device is something the user chooses to restrict their own future behavior. This was a choice made by the company.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a commitment device used by the employees.\"\n        },\n        {\n          \"feedback\": \"Social proof would be telling employees that everyone else is joining. This is about how the choice is structured.\",\n          \"isCorrect\": false,\n          \"text\": \"The company is using social proof to increase enrollment.\"\n        },\n        {\n          \"feedback\": \"Anchoring is about numbers and estimates. This is about the path of least resistance in a decision.\",\n          \"isCorrect\": false,\n          \"text\": \"This is an anchoring bias related to salary.\"\n        }\n      ],\n      \"question\": \"Why did enrollment increase so significantly?\"\n    },\n    {\n      \"context\": \"After seeing several news reports about shark attacks, you decide to cancel your beach vacation, even though the statistical probability of a shark attack is lower than being hit by lightning.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! Because the shark attacks are easy to remember (available), you assume they are more likely to happen than they really are.\",\n          \"isCorrect\": true,\n          \"text\": \"The availability heuristic is influencing your risk assessment.\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about fearing the loss of something you have. This is about miscalculating the odds of an event.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion makes you fear losing your life.\"\n        },\n        {\n          \"feedback\": \"Framing is about how the choice is described. Here, your own memory is what's distorting the choice.\",\n          \"isCorrect\": false,\n          \"text\": \"The news used framing to make sharks seem more dangerous.\"\n        },\n        {\n          \"feedback\": \"System 2 would look at the actual statistics. Your System 1 is reacting to the scary images in the news.\",\n          \"isCorrect\": false,\n          \"text\": \"Your System 2 is prioritizing safety over leisure.\"\n        }\n      ],\n      \"question\": \"What is causing this fear of the beach?\"\n    },\n    {\n      \"context\": \"A school cafeteria puts the fruit bowl right at the beginning of the lunch line and moves the cookies to a separate, hard-to-reach counter. Fruit sales go up by 30%.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes! This is a classic nudge. It doesn't ban cookies, but it makes the healthier choice more convenient.\",\n          \"isCorrect\": true,\n          \"text\": \"The school is using a nudge by altering the choice architecture.\"\n        },\n        {\n          \"feedback\": \"A mandate would be banning cookies entirely. A nudge keeps the options open but guides the behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"The school is issuing a mandate for healthy eating.\"\n        },\n        {\n          \"feedback\": \"Social proof would involve showing kids what other kids are eating. This is about physical placement.\",\n          \"isCorrect\": false,\n          \"text\": \"This is social proof because the fruit is seen first.\"\n        },\n        {\n          \"feedback\": \"Anchoring involves numbers. This is about the ease of access and the order of presentation.\",\n          \"isCorrect\": false,\n          \"text\": \"The fruit acts as an anchor for the rest of the meal.\"\n        }\n      ],\n      \"question\": \"How did the cafeteria change behavior?\"\n    },\n    {\n      \"context\": \"To stop yourself from scrolling on your phone late at night, you use an app that locks all social media after 10 PM. You set this up at 9 AM when you feel very productive.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! You are using your morning 'rational' self to lock in your evening 'impulsive' self.\",\n          \"isCorrect\": true,\n          \"text\": \"You are using a commitment device to fight present bias.\"\n        },\n        {\n          \"feedback\": \"Actually, this is a way to *fight* present bias. By locking the phone, you ensure your future self follows your current goals.\",\n          \"isCorrect\": false,\n          \"text\": \"This is an example of present bias in action.\"\n        },\n        {\n          \"feedback\": \"Nudging is usually done by someone else (the choice architect). When you do it to yourself with a rule, it's a commitment device.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a nudge provided by the app developer.\"\n        },\n        {\n          \"feedback\": \"Framing is about language. This is about a mechanical restriction on your future options.\",\n          \"isCorrect\": false,\n          \"text\": \"You are framing your sleep as more important than social media.\"\n        }\n      ],\n      \"question\": \"What is this strategy called?\"\n    },\n    {\n      \"context\": \"A hotel puts a sign in the bathroom: '80% of guests in this room reuse their towels to help the environment.' This is more effective than a sign that just says 'Please protect the planet.'\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes! We are social creatures. Knowing what 'most people' do creates a powerful urge to fit in.\",\n          \"isCorrect\": true,\n          \"text\": \"The sign uses social proof to influence behavior.\"\n        },\n        {\n          \"feedback\": \"While 80% is a number, the power comes from the fact that it's about other *people*, not just an arbitrary starting point.\",\n          \"isCorrect\": false,\n          \"text\": \"The 80% figure acts as an anchor for the guests.\"\n        },\n        {\n          \"feedback\": \"Loss aversion would involve telling guests what they would *lose* if they didn't reuse towels. This is about what others are doing.\",\n          \"isCorrect\": false,\n          \"text\": \"It triggers loss aversion regarding environmental resources.\"\n        },\n        {\n          \"feedback\": \"System 2 would analyze the environmental impact. System 1 reacts to the social pressure of the group norm.\",\n          \"isCorrect\": false,\n          \"text\": \"It forces guests to use System 2 thinking.\"\n        }\n      ],\n      \"question\": \"Why is the first sign more effective?\"\n    },\n    {\n      \"context\": \"An investor sees their stock has dropped 20%. Instead of selling it to prevent further loss, they hold onto it for years, hoping it will get back to the price they paid, even though other stocks are performing much better.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfect! Admitting the loss feels twice as bad as the potential joy of a gain elsewhere, so they irrationally hold on.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion makes it difficult to 'realize' the loss.\"\n        },\n        {\n          \"feedback\": \"Present bias would likely make them sell for cash now. Holding on for a 'break-even' point is about the pain of losing.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias makes them focus on the current price.\"\n        },\n        {\n          \"feedback\": \"The availability heuristic is about memory. This is about the emotional weight of a financial loss.\",\n          \"isCorrect\": false,\n          \"text\": \"The availability heuristic makes them remember high prices.\"\n        },\n        {\n          \"feedback\": \"Actually, classical economics suggests they *should* sell if there's a better option. This behavior proves we aren't always rational.\",\n          \"isCorrect\": false,\n          \"text\": \"This is the 'rational utility maximizer' behavior in action.\"\n        }\n      ],\n      \"question\": \"What explains this common investor mistake?\"\n    },\n    {\n      \"context\": \"A coffee shop offers three sizes: Small ($2.00), Medium ($4.50), and Large ($5.00). Most people choose the Large, thinking it's a bargain compared to the Medium.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! By making the Medium almost as expensive as the Large, they've 'nudged' you to see the Large as the best value.\",\n          \"isCorrect\": true,\n          \"text\": \"The Medium size is a decoy in the choice architecture.\"\n        },\n        {\n          \"feedback\": \"Loss aversion would be if you were afraid of losing your coffee. This is about choosing the best 'deal' based on the options provided.\",\n          \"isCorrect\": false,\n          \"text\": \"The customers are suffering from loss aversion.\"\n        },\n        {\n          \"feedback\": \"Social proof would be a sign saying 'Most people buy the Large.' This is about the prices themselves.\",\n          \"isCorrect\": false,\n          \"text\": \"This is an example of social proof in pricing.\"\n        },\n        {\n          \"feedback\": \"System 2 might calculate the price per ounce, but the shop is hoping your System 1 just sees 'only 50 cents more!'.\",\n          \"isCorrect\": false,\n          \"text\": \"System 2 is accurately calculating the best value.\"\n        }\n      ],\n      \"question\": \"How is the shop influencing your choice?\"\n    },\n    {\n      \"context\": \"Classical economics often models humans as 'Econs' who never make mistakes and always choose the best option. Why do behavioral economists disagree with this model?\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes! Behavioral economics is built on the reality that our brains use shortcuts that lead to predictable errors.\",\n          \"isCorrect\": true,\n          \"text\": \"They believe humans have systematic biases and use heuristics.\"\n        },\n        {\n          \"feedback\": \"Behavioral economists actually believe we are *predictably* irrational—we make the same kinds of mistakes over and over.\",\n          \"isCorrect\": false,\n          \"text\": \"They believe humans are too unpredictable to model at all.\"\n        },\n        {\n          \"feedback\": \"Classical economics assumes people have perfect willpower. Behavioral economics shows we often struggle with things like present bias.\",\n          \"isCorrect\": false,\n          \"text\": \"They believe humans have unlimited willpower and focus.\"\n        },\n        {\n          \"feedback\": \"Actually, the 'Econ' model assumes perfect calculation. Behavioral economics shows we rely on System 1 intuition.\",\n          \"isCorrect\": false,\n          \"text\": \"They believe humans only use System 2 for every decision.\"\n        }\n      ],\n      \"question\": \"What is the core disagreement here?\"\n    },\n    {\n      \"context\": \"You are offered a bet: a 50% chance to win $110 and a 50% chance to lose $100. Even though the math says you should take it, most people refuse. If the win was increased to $200, they finally agree.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The potential win has to be much larger than the loss to overcome the psychological 'sting' of losing $100.\",\n          \"isCorrect\": true,\n          \"text\": \"Losses weigh more heavily than gains (Loss Aversion).\"\n        },\n        {\n          \"feedback\": \"Anchoring is about an initial number. This is about the balance of risk and the emotional impact of losing.\",\n          \"isCorrect\": false,\n          \"text\": \"The $100 acts as an anchor for the $110.\"\n        },\n        {\n          \"feedback\": \"Framing would be if the bet was described as 'a 50% survival rate of your cash.' This is about the actual values.\",\n          \"isCorrect\": false,\n          \"text\": \"The bet is framed poorly for the participant.\"\n        },\n        {\n          \"feedback\": \"Heuristics are shortcuts. This is a fundamental emotional asymmetry in how we value gains and losses.\",\n          \"isCorrect\": false,\n          \"text\": \"A heuristic is telling you that bets are always bad.\"\n        }\n      ],\n      \"question\": \"Why is the $110 win not enough for most?\"\n    },\n    {\n      \"context\": \"A government wants to increase the number of people who pay their taxes on time. They send out a letter stating: '9 out of 10 people in your town pay their taxes on time.'\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! By highlighting the normal behavior of the community, they use our desire to conform to increase compliance.\",\n          \"isCorrect\": true,\n          \"text\": \"They are using social proof as a nudge.\"\n        },\n        {\n          \"feedback\": \"Present bias would be offering a discount for paying today. This is about social comparison.\",\n          \"isCorrect\": false,\n          \"text\": \"They are helping people overcome present bias.\"\n        },\n        {\n          \"feedback\": \"A commitment device is a voluntary restriction. This is an external piece of information designed to influence you.\",\n          \"isCorrect\": false,\n          \"text\": \"The letter acts as a commitment device.\"\n        },\n        {\n          \"feedback\": \"Loss aversion would be threatening a fine. This is a positive (or neutral) statement about group behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"The 9 out of 10 figure triggers loss aversion.\"\n        }\n      ],\n      \"question\": \"What mechanism are they using?\"\n    }\n  ]\n}",
      "outputTokens": 6031,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-interdisciplinary-behavioral-economics-1",
      "userPrompt": "LESSON_TITLE: Behavioral Economics Foundations\nLESSON_DESCRIPTION: Understanding how cognitive biases and heuristics systematically influence economic decisions, and how choice architecture can improve outcomes\nCHAPTER_TITLE: Decision Making\nCOURSE_TITLE: Behavioral Economics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Rationality Assumption: Classical economics assumed people are rational utility maximizers. But psychologists Daniel Kahneman and Amos Tversky documented systematic patterns where humans deviate from rationality in predictable ways.\n2. A Nobel-Winning Collision: Their research earned Kahneman the 2002 Nobel Prize in Economics — the first psychologist to win it. Behavioral economics was born from this collision of psychology and economic theory.\n3. From Theory to Practice: Richard Thaler expanded these insights into practical applications. His concept of 'nudging' showed how small changes in choice architecture could improve decisions without restricting freedom.\n\nEXPLANATION_STEPS:\n1. Loss Aversion: Loss aversion means losses hurt roughly twice as much as equivalent gains feel good. This asymmetry explains why people take irrational risks to avoid losses but not to achieve gains.\n2. Anchoring Bias: Anchoring occurs when we rely too heavily on the first piece of information encountered. An arbitrary initial number influences subsequent estimates, even when unrelated to the judgment.\n3. Present Bias: Present bias leads us to overweight immediate rewards compared to future ones. We know we should save for retirement, but the pleasure of spending now feels more real.\n4. Framing Effects: Framing effects mean how a choice is presented affects decisions. '90% survival rate' sounds better than '10% mortality rate' — identical information, different emotional response.\n5. Dual Systems: System 1 thinking is fast, automatic, and intuitive. System 2 is slow, deliberate, and analytical. Most decisions use System 1, which is efficient but prone to biases.\n\nMECHANICS_STEPS:\n1. Heuristics in Action: Heuristics are mental shortcuts that usually work but sometimes fail. Availability heuristic: judging probability by how easily examples come to mind, not actual frequency.\n2. Choice Architecture: Choice architecture structures how options are presented. The default, number of options, and order of presentation all influence which option people choose.\n3. Nudge Mechanics: Nudges are subtle changes that steer behavior without forbidding options. Putting healthy food at eye level in cafeterias is a nudge — junk food is still available but less convenient.\n4. Commitment Devices: Commitment devices help overcome present bias. Automatic savings deductions work because they make the rational future choice before present bias can override it.\n5. Social Proof Nudges: Social proof leverages conformity for behavior change. Telling hotel guests that 'most guests reuse towels' increases reuse more than environmental appeals alone.\n\nEXAMPLES_STEPS:\n1. Investment Behavior: Investors hold losing stocks too long and sell winners too early. Loss aversion makes the pain of realizing a loss feel worse than the pleasure of locking in a gain.\n2. Pricing Psychology: Stores price items at $9.99 instead of $10 because our brains anchor on the left digit. This 'left-digit bias' affects perception more than the actual penny saved.\n3. Gym Economics: Gym memberships exploit present bias — we overestimate future motivation when signing up, then fail to attend. The gym profits from our systematic overconfidence about future behavior.\n4. Default Effects: Default options are powerful. Countries with opt-out organ donation have 90%+ participation; opt-in countries have 15%. Same choice, different framing, vastly different outcomes."
    }
  ],
  "taskId": "activity-review"
}
