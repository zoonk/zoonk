{
  "generatedAt": "2026-01-17T21:28:17.796Z",
  "modelId": "openai/gpt-5.1-thinking",
  "outputs": [
    {
      "duration": 70619.4535,
      "inputTokens": 2833,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A ride-sharing app moves credits between drivers and riders after each trip. Sometimes the server crashes mid-update, leaving totals wrong for both.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity is about all-or-nothing. That’s key, but without durability a crash could still lose committed changes, and without consistency you could still get invalid totals.\",\n          \"isCorrect\": false,\n          \"text\": \"Only atomicity is needed to avoid wrong totals\"\n        },\n        {\n          \"feedback\": \"Durability keeps committed changes after crashes, but here we also must avoid half-applied updates. That all-or-nothing guarantee is atomicity.\",\n          \"isCorrect\": false,\n          \"text\": \"Only durability is needed to avoid wrong totals\"\n        },\n        {\n          \"feedback\": \"Isolation is about how concurrent operations interact, not about a single crash mid-update. It won’t by itself stop half-applied transfers.\",\n          \"isCorrect\": false,\n          \"text\": \"Only isolation is needed to avoid wrong totals\"\n        },\n        {\n          \"feedback\": \"You need at least atomicity (no half-applied move) and durability (survive crashes). Together they ensure the transfer isn’t left in a broken state.\",\n          \"isCorrect\": true,\n          \"text\": \"Atomicity and durability are both crucial here\"\n        }\n      ],\n      \"question\": \"Which properties matter most here?\"\n    },\n    {\n      \"context\": \"A logistics database has a rule that a warehouse’s stored weight cannot exceed its capacity. After a series of stock moves, one warehouse shows weight above capacity.\",\n      \"options\": [\n        {\n          \"feedback\": \"Consistency is about never leaving the database in a state that violates rules like capacity limits. If that rule is broken, consistency failed.\",\n          \"isCorrect\": true,\n          \"text\": \"The consistency property was violated\"\n        },\n        {\n          \"feedback\": \"Atomicity ensures whole transactions succeed or fail, but a fully applied transaction can still break a business rule if consistency checks are weak.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity was violated\"\n        },\n        {\n          \"feedback\": \"Isolation deals with how concurrent transactions see each other’s changes, not directly with rule violations in a final state.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation was violated\"\n        },\n        {\n          \"feedback\": \"Durability is about surviving crashes. The problem here is the state is invalid, not that it disappeared after a crash.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability was violated\"\n        }\n      ],\n      \"question\": \"What went wrong with the rule?\"\n    },\n    {\n      \"context\": \"A ticketing site runs two discount transactions at once for the same user: one applies a coupon, the other adds loyalty points. Each works fine alone, but together the user ends up with a negative balance briefly.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is a concurrency anomaly: each transaction is valid alone, but interleaving creates a weird state. That’s exactly what isolation controls.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation is too weak; interleaving broke things\"\n        },\n        {\n          \"feedback\": \"Atomicity is fine: each discount either fully applies or doesn’t. The issue is how they overlap, not partial completion.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity failed; discounts were only half applied\"\n        },\n        {\n          \"feedback\": \"Consistency rules seem okay individually; the problem is their combination when run at the same time, not the rules themselves.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency rules are incorrect\"\n        },\n        {\n          \"feedback\": \"Durability is about changes surviving crashes. The scenario doesn’t mention crashes or lost data, just odd intermediate states.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability is too strong and caused negatives\"\n        }\n      ],\n      \"question\": \"Which ACID aspect is the issue?\"\n    },\n    {\n      \"context\": \"An online game updates player scores and rankings. During a data center power loss, some completed matches disappear from the ranking table but scores were updated.\",\n      \"options\": [\n        {\n          \"feedback\": \"Durability promises that once a transaction commits, its effects survive crashes. Losing completed matches means that promise wasn’t met.\",\n          \"isCorrect\": true,\n          \"text\": \"Durability was not guaranteed properly\"\n        },\n        {\n          \"feedback\": \"Atomicity is about all-or-nothing inside a transaction. The issue is that committed results didn’t survive a crash, which is durability.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity must have been broken\"\n        },\n        {\n          \"feedback\": \"Isolation is about concurrent play updates interfering, not about crash recovery.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation must have been too low\"\n        },\n        {\n          \"feedback\": \"Consistency is about valid states. Here the problem is changes vanished, not that constraints were broken while present.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency constraints are mis-specified\"\n        }\n      ],\n      \"question\": \"Which property failed in the crash?\"\n    },\n    {\n      \"context\": \"A grocery app checks out an order: it reduces inventory, charges the card, and creates a shipment record. Later they find some orders where inventory dropped and cards were charged, but no shipment exists.\",\n      \"options\": [\n        {\n          \"feedback\": \"The steps clearly didn’t behave as a single all-or-nothing unit. That’s exactly what atomicity is supposed to guarantee.\",\n          \"isCorrect\": true,\n          \"text\": \"Atomicity is not being enforced\"\n        },\n        {\n          \"feedback\": \"Isolation is about interactions between different checkouts, not missing shipment records within one order.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation is too weak for checkouts\"\n        },\n        {\n          \"feedback\": \"Durability is about data surviving crashes, not about missing part of the logical workflow within one transaction.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability is not implemented\"\n        },\n        {\n          \"feedback\": \"Consistency focuses on rules like “no negative stock.” The core issue here is partial completion of a logical unit, i.e., atomicity.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency rules are incomplete\"\n        }\n      ],\n      \"question\": \"What core guarantee is missing?\"\n    },\n    {\n      \"context\": \"A financial system logs each transaction to a file before applying updates to account balances. After a crash, it replays or undoes operations based on that file.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is the classic pattern: write-ahead logging records intent first so the system can redo or undo changes consistently after a crash.\",\n          \"isCorrect\": true,\n          \"text\": \"It’s using write-ahead logging\"\n        },\n        {\n          \"feedback\": \"Two-phase commit is about coordinating across multiple systems, not basic crash recovery within one database.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s using two-phase commit\"\n        },\n        {\n          \"feedback\": \"Indexing speeds lookups but doesn’t help with replaying or undoing after crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s using indexing strategies\"\n        },\n        {\n          \"feedback\": \"Sharding splits data across nodes; it’s unrelated to the “log then apply” crash recovery described here.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s using sharding for safety\"\n        }\n      ],\n      \"question\": \"Which mechanism is described?\"\n    },\n    {\n      \"context\": \"Two warehouse transactions run: T1 updates row A then needs row B. T2 updated row B and now needs row A. Both are waiting on each other’s locks and nothing progresses.\",\n      \"options\": [\n        {\n          \"feedback\": \"Each holds a lock the other needs. That circular wait is the textbook definition of a deadlock.\",\n          \"isCorrect\": true,\n          \"text\": \"They are stuck in a deadlock\"\n        },\n        {\n          \"feedback\": \"Starvation is when one keeps waiting while others proceed; here both are blocked by each other, not by a long queue.\",\n          \"isCorrect\": false,\n          \"text\": \"They are experiencing starvation\"\n        },\n        {\n          \"feedback\": \"Row-level locking is the technique being used, not the problem. The issue is the cycle created by those locks.\",\n          \"isCorrect\": false,\n          \"text\": \"They are stuck due to row-level locking\"\n        },\n        {\n          \"feedback\": \"Dirty reads involve reading uncommitted data. Here, no one is reading; both are just blocked on locks.\",\n          \"isCorrect\": false,\n          \"text\": \"They are suffering from dirty reads\"\n        }\n      ],\n      \"question\": \"What situation is this?\"\n    },\n    {\n      \"context\": \"In a photo-sharing app, posting a photo writes to several tables: photos, tags, notifications. The app wraps all of this in a single database transaction.\",\n      \"options\": [\n        {\n          \"feedback\": \"Grouping related updates so they either all succeed or all fail is exactly how you use transactions to keep complex operations consistent.\",\n          \"isCorrect\": true,\n          \"text\": \"To ensure all related changes happen together\"\n        },\n        {\n          \"feedback\": \"Transactions can span multiple operations; they’re not limited to just one table or one statement.\",\n          \"isCorrect\": false,\n          \"text\": \"Because transactions can only affect one table\"\n        },\n        {\n          \"feedback\": \"Transactions aren’t mainly a speed feature; they’re about correctness, though they can help reduce overhead in some cases.\",\n          \"isCorrect\": false,\n          \"text\": \"Primarily to make the app faster\"\n        },\n        {\n          \"feedback\": \"The main point isn’t crash avoidance, but ensuring a crash doesn’t leave a half-posted photo. That’s atomicity and durability at work.\",\n          \"isCorrect\": false,\n          \"text\": \"Mainly to avoid any chance of crashes\"\n        }\n      ],\n      \"question\": \"Why use one transaction here?\"\n    },\n    {\n      \"context\": \"A reporting job reads sales data while new orders are being inserted. The job is fine with seeing only committed rows and not seeing each other’s uncommitted work.\",\n      \"options\": [\n        {\n          \"feedback\": \"Read Committed lets you see only committed changes and avoids dirty reads while still allowing concurrency. That matches the job’s needs.\",\n          \"isCorrect\": true,\n          \"text\": \"Use Read Committed for a good balance\"\n        },\n        {\n          \"feedback\": \"Serializable is safest but adds heavy locking/overhead, often more than a reporting job needs.\",\n          \"isCorrect\": false,\n          \"text\": \"Use Serializable to be absolutely safe\"\n        },\n        {\n          \"feedback\": \"Read Uncommitted allows dirty reads, so the report could show data that later rolls back.\",\n          \"isCorrect\": false,\n          \"text\": \"Use Read Uncommitted for maximum speed\"\n        },\n        {\n          \"feedback\": \"Repeatable Read is stronger than needed if you just want to avoid uncommitted data and don’t mind some anomalies.\",\n          \"isCorrect\": false,\n          \"text\": \"Use Repeatable Read to avoid any anomaly\"\n        }\n      ],\n      \"question\": \"Which isolation level fits best?\"\n    },\n    {\n      \"context\": \"A stock trading system must ensure trades aren’t lost during crashes and every executed trade is recorded exactly once, without duplicates or omissions.\",\n      \"options\": [\n        {\n          \"feedback\": \"Durability ensures committed trades survive crashes; atomicity makes sure a trade is either fully recorded or not at all. Both are essential here.\",\n          \"isCorrect\": true,\n          \"text\": \"Durability and atomicity together are vital\"\n        },\n        {\n          \"feedback\": \"Isolation helps with concurrent trades but doesn’t by itself stop loss or duplication due to crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation alone is the main concern\"\n        },\n        {\n          \"feedback\": \"Consistency ensures valid states, but the focus here is not violating constraints; it’s not losing or duplicating trades.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency alone is sufficient\"\n        },\n        {\n          \"feedback\": \"Replication spreads data across systems but doesn’t replace ACID guarantees inside each transaction.\",\n          \"isCorrect\": false,\n          \"text\": \"Replication makes ACID less important\"\n        }\n      ],\n      \"question\": \"Which properties are most critical?\"\n    },\n    {\n      \"context\": \"A food delivery system uses transactions. A restaurant’s balance briefly goes negative inside a transaction, but by commit time it’s positive and all rules are satisfied.\",\n      \"options\": [\n        {\n          \"feedback\": \"Consistency is about the state at transaction boundaries. Temporary violations inside are OK if the final committed state obeys all rules.\",\n          \"isCorrect\": true,\n          \"text\": \"It’s fine if the final state is valid\"\n        },\n        {\n          \"feedback\": \"Consistency doesn’t forbid temporary internal violations as long as the committed state respects all constraints.\",\n          \"isCorrect\": false,\n          \"text\": \"Any temporary rule violation is forbidden\"\n        },\n        {\n          \"feedback\": \"Atomicity doesn’t require intermediate states to be valid; it just ensures all-or-nothing at commit or rollback.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity is broken by this behavior\"\n        },\n        {\n          \"feedback\": \"Isolation hides intermediate writes from other transactions; it doesn’t require every internal state to be valid.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation is violated by temporary negatives\"\n        }\n      ],\n      \"question\": \"Is this consistent behavior?\"\n    },\n    {\n      \"context\": \"In an inventory app, a long-running report holds shared locks on many rows. An update transaction needs exclusive locks on some of the same rows and is blocked for a long time.\",\n      \"options\": [\n        {\n          \"feedback\": \"Shared locks let others read but not write; exclusive locks are needed for updates. The wait happens because the updater can’t get exclusive locks.\",\n          \"isCorrect\": true,\n          \"text\": \"Shared vs exclusive locks cause this wait\"\n        },\n        {\n          \"feedback\": \"Deadlocks require a cycle of waiting. Here it’s just one transaction waiting behind another, not a circular dependency.\",\n          \"isCorrect\": false,\n          \"text\": \"This is clearly a deadlock\"\n        },\n        {\n          \"feedback\": \"Durability is about crash survival, not about who blocks whom during concurrent access.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability is the main cause\"\n        },\n        {\n          \"feedback\": \"Read Uncommitted would avoid locks but allow dirty reads, changing semantics in a risky way.\",\n          \"isCorrect\": false,\n          \"text\": \"Using Read Uncommitted would be just as safe\"\n        }\n      ],\n      \"question\": \"Why is the update blocked?\"\n    },\n    {\n      \"context\": \"A payment system starts a transaction, debits an account, credits another, then hits an error before commit. It issues a rollback.\",\n      \"options\": [\n        {\n          \"feedback\": \"Rollback uses the log to undo each change, restoring the database to the state before the transaction began.\",\n          \"isCorrect\": true,\n          \"text\": \"All changes from this transaction are undone\"\n        },\n        {\n          \"feedback\": \"Rollback doesn’t only cancel the last change; it reverses the whole transaction’s effects.\",\n          \"isCorrect\": false,\n          \"text\": \"Only the last change is canceled\"\n        },\n        {\n          \"feedback\": \"Rollback doesn’t affect other committed transactions; it’s scoped to this one.\",\n          \"isCorrect\": false,\n          \"text\": \"All previous transactions are undone\"\n        },\n        {\n          \"feedback\": \"Rollback doesn’t leave partial results; that would violate atomicity. It must restore the prior state.\",\n          \"isCorrect\": false,\n          \"text\": \"Some changes may still remain visible\"\n        }\n      ],\n      \"question\": \"What does rollback guarantee?\"\n    },\n    {\n      \"context\": \"Two analytics jobs read from a table while a maintenance task is updating some rows. One job reads uncommitted values; the other only sees committed ones.\",\n      \"options\": [\n        {\n          \"feedback\": \"Seeing uncommitted changes is the definition of a dirty read and only happens at very low isolation like Read Uncommitted.\",\n          \"isCorrect\": true,\n          \"text\": \"The first job is doing dirty reads\"\n        },\n        {\n          \"feedback\": \"Phantom reads involve rows appearing/disappearing between queries, not reading uncommitted values.\",\n          \"isCorrect\": false,\n          \"text\": \"The first job sees phantom reads\"\n        },\n        {\n          \"feedback\": \"Non-repeatable reads are about a value changing between two reads, but still committed, not uncommitted.\",\n          \"isCorrect\": false,\n          \"text\": \"The first job sees non-repeatable reads\"\n        },\n        {\n          \"feedback\": \"Lost updates involve overwriting someone else’s change, not just reading values.\",\n          \"isCorrect\": false,\n          \"text\": \"The first job is causing lost updates\"\n        }\n      ],\n      \"question\": \"What anomaly does the first job show?\"\n    },\n    {\n      \"context\": \"A ride-booking app uses a very strong isolation level for selecting available cars, but finds the system slows down at peak times with many users searching simultaneously.\",\n      \"options\": [\n        {\n          \"feedback\": \"Higher isolation like Serializable reduces anomalies but adds locking/overhead, which can slow heavily concurrent searches.\",\n          \"isCorrect\": true,\n          \"text\": \"Strong isolation is trading speed for safety\"\n        },\n        {\n          \"feedback\": \"Atomicity doesn’t significantly change performance for many concurrent reads.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity is causing the slowdown\"\n        },\n        {\n          \"feedback\": \"Durability is mostly about disk/log I/O and isn’t the usual cause when read queries slow under concurrency.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability is the main slowdown source\"\n        },\n        {\n          \"feedback\": \"Indexing helps speed queries; here the bottleneck is likely contention from high isolation, not lack of indexes.\",\n          \"isCorrect\": false,\n          \"text\": \"Lack of indexes is the direct cause\"\n        }\n      ],\n      \"question\": \"Why does higher isolation hurt performance?\"\n    },\n    {\n      \"context\": \"A marketplace app stores orders and payments in separate databases. It wants the overall process (order + payment) to behave like a single, all-or-nothing unit from the business perspective.\",\n      \"options\": [\n        {\n          \"feedback\": \"From the business view, both databases’ operations form one logical transaction that should fully succeed or fully fail together.\",\n          \"isCorrect\": true,\n          \"text\": \"Treat both steps as one logical transaction\"\n        },\n        {\n          \"feedback\": \"Making each step independent risks one succeeding while the other fails, leaving inconsistent business state.\",\n          \"isCorrect\": false,\n          \"text\": \"Keep them as independent operations\"\n        },\n        {\n          \"feedback\": \"Disabling durability increases risk; it doesn’t help create all-or-nothing behavior across systems.\",\n          \"isCorrect\": false,\n          \"text\": \"Turn off durability to simplify things\"\n        },\n        {\n          \"feedback\": \"Ignoring failures is the opposite of atomicity and will lead to mismatched orders and payments.\",\n          \"isCorrect\": false,\n          \"text\": \"Ignore failures to avoid partial states\"\n        }\n      ],\n      \"question\": \"What principle should guide the design?\"\n    },\n    {\n      \"context\": \"An airline booking system must prevent two people from buying the same seat at the same time, while still handling thousands of searches per minute.\",\n      \"options\": [\n        {\n          \"feedback\": \"You need transactions to coordinate seat selection and purchase so each seat is either sold once or not at all, even under heavy concurrency.\",\n          \"isCorrect\": true,\n          \"text\": \"Use transactions to protect seat selection\"\n        },\n        {\n          \"feedback\": \"Just logging doesn’t stop conflicting concurrent writes; it only helps after something goes wrong.\",\n          \"isCorrect\": false,\n          \"text\": \"Rely only on detailed logging\"\n        },\n        {\n          \"feedback\": \"Turning off isolation would invite race conditions where multiple sales of the same seat can slip through.\",\n          \"isCorrect\": false,\n          \"text\": \"Allow no isolation for maximum speed\"\n        },\n        {\n          \"feedback\": \"Caching improves speed but can show stale seat data and doesn’t itself enforce one-sale-only rules.\",\n          \"isCorrect\": false,\n          \"text\": \"Cache seat data and skip transactions\"\n        }\n      ],\n      \"question\": \"What mechanism best prevents double-booking?\"\n    },\n    {\n      \"context\": \"A bank runs monthly interest calculations in a transaction. Each account’s new balance is computed so that no account ends negative and total money in the system stays consistent with the rules.\",\n      \"options\": [\n        {\n          \"feedback\": \"Each transaction must move the database from one rule-respecting state to another. Enforcing that is the whole point of consistency.\",\n          \"isCorrect\": true,\n          \"text\": \"This illustrates the consistency property\"\n        },\n        {\n          \"feedback\": \"Durability is about surviving crashes; here the emphasis is on rule-respecting states, not persistence.\",\n          \"isCorrect\": false,\n          \"text\": \"This illustrates durability\"\n        },\n        {\n          \"feedback\": \"Isolation matters if others run at the same time, but the key idea described is about legal states, not concurrency.\",\n          \"isCorrect\": false,\n          \"text\": \"This illustrates isolation\"\n        },\n        {\n          \"feedback\": \"Atomicity is about all-or-nothing. The focus here is on valid final states given business rules, which is consistency.\",\n          \"isCorrect\": false,\n          \"text\": \"This illustrates atomicity\"\n        }\n      ],\n      \"question\": \"Which ACID property is highlighted?\"\n    }\n  ]\n}",
      "outputTokens": 3646,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-cs-database-transactions-acid-1",
      "userPrompt": "LESSON_TITLE: Database Transactions and ACID\nLESSON_DESCRIPTION: Understanding database transactions and ACID properties for maintaining data integrity in concurrent systems\nCHAPTER_TITLE: Data Integrity\nCOURSE_TITLE: Database Systems\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Corruption Problem: Before databases had transactions, a power failure during a bank transfer could leave money in limbo — deducted from one account but never credited to another. Data inconsistency was the norm.\n2. Gray's Breakthrough: Jim Gray at IBM tackled this chaos in the 1970s. His insight: group related operations together and guarantee they either all succeed or all fail. No partial states allowed.\n3. The ACID Standard: The ACID properties emerged as the gold standard for reliable data operations. They transformed databases from fragile systems into ones businesses could trust with critical data.\n\nEXPLANATION_STEPS:\n1. Atomicity: Atomicity means 'all or nothing.' A transaction either completes entirely or has no effect at all. There's no partial completion — if any part fails, everything rolls back.\n2. Consistency: Consistency ensures transactions bring the database from one valid state to another. Rules defined in the schema (like account balance >= 0) are never violated.\n3. Isolation: Isolation means concurrent transactions don't interfere with each other. Each transaction sees a consistent snapshot, as if it were running alone.\n4. Durability: Durability guarantees that once a transaction commits, its changes survive system crashes. The database uses write-ahead logging to ensure committed data isn't lost.\n5. Isolation Levels: Isolation levels trade off between consistency and performance. Serializable is safest but slowest; Read Committed is faster but allows some anomalies.\n\nMECHANICS_STEPS:\n1. Transaction Lifecycle: A transaction begins with BEGIN, then executes statements. Changes are held in a buffer, invisible to other transactions until COMMIT makes them permanent.\n2. Write-Ahead Logging: Write-ahead logging records changes before applying them. If a crash occurs mid-transaction, the log allows the database to either complete or undo the changes during recovery.\n3. Locking Mechanisms: Locks prevent concurrent access conflicts. When a transaction modifies a row, it acquires an exclusive lock. Other transactions must wait until the lock releases.\n4. Deadlock Detection: Deadlocks occur when two transactions each hold a lock the other needs. The database detects this circular wait and aborts one transaction to break the cycle.\n5. Rollback Process: ROLLBACK undoes all changes made during the transaction. The database uses the log to reverse each operation in the opposite order it was applied.\n\nEXAMPLES_STEPS:\n1. Banking Transfers: Banking transfers are the classic example. Moving $100 from savings to checking must debit one and credit the other atomically — or neither should happen.\n2. E-commerce Orders: E-commerce checkout involves inventory reduction, payment processing, and order creation. All must succeed together, or the customer gets charged without receiving their product.\n3. Airline Reservations: Airline booking systems face extreme concurrency — thousands of users trying to book the same seats. Transactions prevent double-booking while maintaining performance.\n4. Social Media Posts: Social media platforms use transactions for complex operations like posting a photo with tags, location, and notifications — all must be recorded consistently."
    },
    {
      "duration": 61980.317542000004,
      "inputTokens": 2851,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A streaming service wants to charge college students less than working professionals for the same subscription, even though delivery costs are identical. They hope total profit will rise.\",\n      \"options\": [\n        {\n          \"feedback\": \"Cost isn’t changing. The goal is to capture more willingness to pay by segmenting groups with different sensitivities to price.\",\n          \"isCorrect\": true,\n          \"text\": \"Extract more surplus from groups with different price sensitivity\"\n        },\n        {\n          \"feedback\": \"If costs are the same, cost-based pricing doesn’t explain different prices here.\",\n          \"isCorrect\": false,\n          \"text\": \"Reflect higher costs of serving different customer groups\"\n        },\n        {\n          \"feedback\": \"Lower prices for students don’t normally reduce total profit if segments are chosen well.\",\n          \"isCorrect\": false,\n          \"text\": \"Sacrifice profit on students to gain social goodwill\"\n        },\n        {\n          \"feedback\": \"Reducing competition isn’t about charging different prices to different buyers of the same product.\",\n          \"isCorrect\": false,\n          \"text\": \"Discourage competitors by confusing them with many prices\"\n        }\n      ],\n      \"question\": \"Why vary prices by segment?\"\n    },\n    {\n      \"context\": \"A software firm sells online licenses. If they offer a cheap version in a poor country and a high-priced version in a rich country, they worry buyers will resell access across borders.\",\n      \"options\": [\n        {\n          \"feedback\": \"Preventing low-price buyers from reselling to high-price buyers is crucial; otherwise higher prices can’t be sustained.\",\n          \"isCorrect\": true,\n          \"text\": \"They must block low-price buyers from reselling to high-price buyers\"\n        },\n        {\n          \"feedback\": \"Legal contracts help, but the core economic issue is resale, not just contracts.\",\n          \"isCorrect\": false,\n          \"text\": \"They only need different contracts in each country\"\n        },\n        {\n          \"feedback\": \"More versions can help segment demand, but it doesn’t by itself stop cross-border resales.\",\n          \"isCorrect\": false,\n          \"text\": \"They just need to add more product versions globally\"\n        },\n        {\n          \"feedback\": \"Currency differences don’t stop someone from buying cheap and reselling expensive.\",\n          \"isCorrect\": false,\n          \"text\": \"They rely on exchange rates to stop cross-border trading\"\n        }\n      ],\n      \"question\": \"Key requirement here?\"\n    },\n    {\n      \"context\": \"A theme park charges different ticket prices: adults, children, and seniors. Rides and shows are identical for all.\",\n      \"options\": [\n        {\n          \"feedback\": \"Costs per visitor aren’t that different; the main idea is different willingness to pay across groups.\",\n          \"isCorrect\": true,\n          \"text\": \"They’re exploiting different willingness to pay in each group\"\n        },\n        {\n          \"feedback\": \"Costs don’t typically change much across these visitors for the same access.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re matching prices to very different costs per visitor\"\n        },\n        {\n          \"feedback\": \"Regulation doesn’t usually require seniors’ discounts; it’s often a business choice.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re following a legal rule to discount for seniors\"\n        },\n        {\n          \"feedback\": \"They’re not changing the product, just the price for the same access.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re compensating for quality differences in tickets\"\n        }\n      ],\n      \"question\": \"What best explains this pricing?\"\n    },\n    {\n      \"context\": \"An online course platform offers: Basic (videos only), Standard (videos + quizzes), and Pro (videos, quizzes, mentoring) at rising prices.\",\n      \"options\": [\n        {\n          \"feedback\": \"This lets people reveal how much they value extras; higher-WTP users move to higher tiers.\",\n          \"isCorrect\": true,\n          \"text\": \"It’s a menu so users self-select by how much they value extras\"\n        },\n        {\n          \"feedback\": \"The Basic tier exists partly to make higher tiers look more attractive, not to push everyone down.\",\n          \"isCorrect\": false,\n          \"text\": \"They mainly want everyone to choose the cheapest basic plan\"\n        },\n        {\n          \"feedback\": \"They’re not segmenting by cost of delivery; content overlap is large across tiers.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re strictly aligning price with each version’s cost\"\n        },\n        {\n          \"feedback\": \"This doesn’t reduce choice; it increases it by offering versions to pick from.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re trying to reduce user choice to force one package\"\n        }\n      ],\n      \"question\": \"What strategy is this?\"\n    },\n    {\n      \"context\": \"A ride-hailing app raises prices sharply during a rainy rush hour. Many people still order rides, but a few cancel because of the surge.\",\n      \"options\": [\n        {\n          \"feedback\": \"Demand hardly falls when price rises, so riders here are relatively insensitive to price.\",\n          \"isCorrect\": true,\n          \"text\": \"Demand is inelastic; higher prices barely reduce quantity\"\n        },\n        {\n          \"feedback\": \"If demand were very elastic, a big price jump would cause large drop in rides.\",\n          \"isCorrect\": false,\n          \"text\": \"Demand is highly elastic; a slight rise kills most demand\"\n        },\n        {\n          \"feedback\": \"Perfectly inelastic demand means no riders would cancel at all.\",\n          \"isCorrect\": false,\n          \"text\": \"Demand is perfectly inelastic; quantity never changes\"\n        },\n        {\n          \"feedback\": \"Models aren’t needed to see that many still buy despite higher prices.\",\n          \"isCorrect\": false,\n          \"text\": \"We can’t say anything about elasticity in this case\"\n        }\n      ],\n      \"question\": \"What does this suggest?\"\n    },\n    {\n      \"context\": \"A laptop brand sells the same model at $900 to casual buyers and $1,300 to business clients. Business buyers complain but still pay and rarely switch brands.\",\n      \"options\": [\n        {\n          \"feedback\": \"Small quantity response to high price signals inelastic demand, so the firm can charge more.\",\n          \"isCorrect\": true,\n          \"text\": \"Business buyers have more inelastic demand than casual buyers\"\n        },\n        {\n          \"feedback\": \"Elastic business demand would imply many would switch when prices are higher.\",\n          \"isCorrect\": false,\n          \"text\": \"Business buyers have very elastic demand\"\n        },\n        {\n          \"feedback\": \"Perfect elasticity would mean they refuse to pay even slightly more.\",\n          \"isCorrect\": false,\n          \"text\": \"Business buyers face perfectly elastic demand\"\n        },\n        {\n          \"feedback\": \"Identical preferences would not explain willingness to pay such different prices.\",\n          \"isCorrect\": false,\n          \"text\": \"Both groups have identical willingness to pay\"\n        }\n      ],\n      \"question\": \"What’s implied about demand?\"\n    },\n    {\n      \"context\": \"A boutique gym considers charging each member exactly the most they are personally willing to pay for the same membership access, based on detailed data and interviews.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is the idea of pricing each person at their maximum WTP, capturing almost all surplus.\",\n          \"isCorrect\": true,\n          \"text\": \"They’re aiming for first-degree price discrimination\"\n        },\n        {\n          \"feedback\": \"Second-degree uses menus of plans, not tailor-made price per person.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re using second-degree price discrimination\"\n        },\n        {\n          \"feedback\": \"Third-degree uses broad groups (students, seniors), not individuals.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re using third-degree price discrimination\"\n        },\n        {\n          \"feedback\": \"Uniform pricing is charging everyone the same price, the opposite here.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re using simple uniform pricing\"\n        }\n      ],\n      \"question\": \"Which type is this aiming at?\"\n    },\n    {\n      \"context\": \"A coffee shop offers a regular coffee for $3 and a large for $3.50. Many customers choose the large even if they don’t really need the extra coffee.\",\n      \"options\": [\n        {\n          \"feedback\": \"The small makes the large look like a bargain, nudging higher-WTP buyers to upgrade.\",\n          \"isCorrect\": true,\n          \"text\": \"The small cup helps make the large look more attractive\"\n        },\n        {\n          \"feedback\": \"They’re not mainly trying to cut caffeine; they’re guiding price-sensitive choices.\",\n          \"isCorrect\": false,\n          \"text\": \"They want to reduce customers’ caffeine consumption\"\n        },\n        {\n          \"feedback\": \"Lowering the large price without a reference point might earn less revenue.\",\n          \"isCorrect\": false,\n          \"text\": \"They could earn more by lowering the large price further\"\n        },\n        {\n          \"feedback\": \"Identical prices would remove the comparison that drives many to upgrade.\",\n          \"isCorrect\": false,\n          \"text\": \"They should price both sizes the same to be neutral\"\n        }\n      ],\n      \"question\": \"Why keep both sizes?\"\n    },\n    {\n      \"context\": \"An online retailer notices that visitors on old devices often leave when prices are high, while visitors on new, expensive phones are more likely to buy anyway.\",\n      \"options\": [\n        {\n          \"feedback\": \"Device type is a signal of likely income and price sensitivity, helping segment demand.\",\n          \"isCorrect\": true,\n          \"text\": \"Use device type as a signal of different price sensitivity\"\n        },\n        {\n          \"feedback\": \"Using device type purely to limit payment options doesn’t exploit demand differences.\",\n          \"isCorrect\": false,\n          \"text\": \"Restrict old-device users to prepaid cards only\"\n        },\n        {\n          \"feedback\": \"Same price everywhere wastes the chance to match price to sensitivity.\",\n          \"isCorrect\": false,\n          \"text\": \"Keep identical prices regardless of device type\"\n        },\n        {\n          \"feedback\": \"Shipping distance is unrelated to the device used to browse.\",\n          \"isCorrect\": false,\n          \"text\": \"Base the price only on shipping distance\"\n        }\n      ],\n      \"question\": \"How can they segment here?\"\n    },\n    {\n      \"context\": \"A music platform offers: Single song: $1.50; Monthly subscription (unlimited songs): $9. A typical user listens to dozens of songs per month.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bundling many songs into one subscription lets the platform capture more total willingness to pay.\",\n          \"isCorrect\": true,\n          \"text\": \"They bundle songs to capture more total willingness to pay\"\n        },\n        {\n          \"feedback\": \"Subscription isn’t mainly about production cost; digital copies are cheap.\",\n          \"isCorrect\": false,\n          \"text\": \"They bundle songs mainly to reflect production cost\"\n        },\n        {\n          \"feedback\": \"Single-song-only would leave money on the table from heavy users.\",\n          \"isCorrect\": false,\n          \"text\": \"They should only sell songs individually, not bundles\"\n        },\n        {\n          \"feedback\": \"Subscriptions don’t raise resale risk; users access content, not transfer it.\",\n          \"isCorrect\": false,\n          \"text\": \"Bundles increase arbitrage risk, so they are avoided\"\n        }\n      ],\n      \"question\": \"What’s the logic of this bundle?\"\n    },\n    {\n      \"context\": \"A hotel offers non-refundable rooms at a low price and fully refundable rooms at a higher price. Travelers with strict plans pick non-refundable; uncertain travelers pay more.\",\n      \"options\": [\n        {\n          \"feedback\": \"The menu lets customers reveal how strongly they value flexibility and self-select into prices.\",\n          \"isCorrect\": true,\n          \"text\": \"It’s second-degree discrimination via a menu of flexibility options\"\n        },\n        {\n          \"feedback\": \"All-or-nothing by individual would be first-degree, not multiple versions.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s first-degree discrimination, pricing each person uniquely\"\n        },\n        {\n          \"feedback\": \"Segments are chosen by behavior, not by identity labels alone.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s third-degree discrimination by age or occupation\"\n        },\n        {\n          \"feedback\": \"This actually encourages choice by giving multiple options.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s designed to eliminate customer choice\"\n        }\n      ],\n      \"question\": \"What type of pricing is this?\"\n    },\n    {\n      \"context\": \"A theater cuts ticket prices by 30% on weekday afternoons. The venue is half-empty then, but almost full at full price on weekend nights.\",\n      \"options\": [\n        {\n          \"feedback\": \"People who can attend weekdays are more price sensitive; time is being used to segment demand.\",\n          \"isCorrect\": true,\n          \"text\": \"They use time of day to separate more price-sensitive patrons\"\n        },\n        {\n          \"feedback\": \"They already have spare seats; lowering price isn’t to reduce demand.\",\n          \"isCorrect\": false,\n          \"text\": \"They want to reduce overcrowding on weekdays\"\n        },\n        {\n          \"feedback\": \"The cost per seat is similar; the difference is in willingness to pay.\",\n          \"isCorrect\": false,\n          \"text\": \"Weekday shows are much more expensive to run\"\n        },\n        {\n          \"feedback\": \"Uniform pricing would miss extra buyers who only come at lower prices.\",\n          \"isCorrect\": false,\n          \"text\": \"They should charge the same price every day\"\n        }\n      ],\n      \"question\": \"What’s the role of timing here?\"\n    },\n    {\n      \"context\": \"An airline considers allowing passengers who buy very cheap tickets to transfer their tickets freely to others, hoping to attract more bargain hunters.\",\n      \"options\": [\n        {\n          \"feedback\": \"Easy transfer lets low-price buyers resell to high-WTP travelers, undermining higher fares.\",\n          \"isCorrect\": true,\n          \"text\": \"Transferability raises arbitrage risk and weakens discrimination\"\n        },\n        {\n          \"feedback\": \"Making resale easier doesn’t help keep business and leisure prices separate.\",\n          \"isCorrect\": false,\n          \"text\": \"Transferability helps keep segments strictly separated\"\n        },\n        {\n          \"feedback\": \"Arbitrage, not queuing, is the main concern with reselling tickets.\",\n          \"isCorrect\": false,\n          \"text\": \"The main concern is longer boarding lines\"\n        },\n        {\n          \"feedback\": \"It doesn’t reduce monitoring; it actually complicates pricing control.\",\n          \"isCorrect\": false,\n          \"text\": \"It greatly reduces the need to monitor who uses tickets\"\n        }\n      ],\n      \"question\": \"What risk does this create?\"\n    },\n    {\n      \"context\": \"A cloud storage service uses an algorithm to adjust prices daily. On days with many sign-ups, prices go up a bit; on slow days, discounts appear on the homepage.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is dynamic pricing—changing prices in real time as demand signals come in.\",\n          \"isCorrect\": true,\n          \"text\": \"They’re using dynamic pricing based on demand signals\"\n        },\n        {\n          \"feedback\": \"Second-degree is about menus of versions, not frequent small price shifts.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s second-degree discrimination using different versions\"\n        },\n        {\n          \"feedback\": \"This is the opposite of fixed pricing; prices move with demand.\",\n          \"isCorrect\": false,\n          \"text\": \"They use fixed prices that never respond to demand\"\n        },\n        {\n          \"feedback\": \"This is about price adjustment, not simply cost-sharing bundles.\",\n          \"isCorrect\": false,\n          \"text\": \"They rely mainly on product bundling, not timing\"\n        }\n      ],\n      \"question\": \"What pricing approach is this?\"\n    },\n    {\n      \"context\": \"A software firm charges $40 to students and $400 to corporations for the same product key. Many students would never buy it at $400, but firms will.\",\n      \"options\": [\n        {\n          \"feedback\": \"Students are more price sensitive, so low student prices plus high firm prices can raise total profit.\",\n          \"isCorrect\": true,\n          \"text\": \"Students form a more elastic segment than corporations\"\n        },\n        {\n          \"feedback\": \"If students were less sensitive, there’d be less need for a large discount.\",\n          \"isCorrect\": false,\n          \"text\": \"Students are less price sensitive than corporations\"\n        },\n        {\n          \"feedback\": \"Perfectly inelastic demand means price changes wouldn’t change student purchases.\",\n          \"isCorrect\": false,\n          \"text\": \"Student demand is perfectly inelastic\"\n        },\n        {\n          \"feedback\": \"Same elasticity would imply less justification for such a huge price gap.\",\n          \"isCorrect\": false,\n          \"text\": \"Both groups have the same price elasticity\"\n        }\n      ],\n      \"question\": \"What explains the big discount?\"\n    },\n    {\n      \"context\": \"A bar runs happy hour 4–6pm with half-price drinks, then normal prices later. People who can leave work early flock to happy hour; late workers still come later at full price.\",\n      \"options\": [\n        {\n          \"feedback\": \"Time separation causes more price-sensitive, flexible customers to self-select into the cheap slot.\",\n          \"isCorrect\": true,\n          \"text\": \"They separate segments by time flexibility and sensitivity\"\n        },\n        {\n          \"feedback\": \"It’s not mainly to avoid fines; it’s a demand-segmentation tool.\",\n          \"isCorrect\": false,\n          \"text\": \"They must legally lower prices at that time\"\n        },\n        {\n          \"feedback\": \"Costs per drink don’t jump at 6pm; willingness to pay does.\",\n          \"isCorrect\": false,\n          \"text\": \"Costs are much higher later, so prices must rise\"\n        },\n        {\n          \"feedback\": \"They actually want crowds at both times if pricing is set well.\",\n          \"isCorrect\": false,\n          \"text\": \"They prefer one of the time slots to be empty\"\n        }\n      ],\n      \"question\": \"What’s the economic idea here?\"\n    },\n    {\n      \"context\": \"A ski resort is deciding whether to charge a single ticket price for everyone or to offer student, adult, and senior prices for the same lift access.\",\n      \"options\": [\n        {\n          \"feedback\": \"More segments can let the resort better match prices to willingness to pay and increase profit.\",\n          \"isCorrect\": true,\n          \"text\": \"Multiple prices by group can increase profit if segments differ\"\n        },\n        {\n          \"feedback\": \"Single pricing is simpler but usually leaves surplus uncollected.\",\n          \"isCorrect\": false,\n          \"text\": \"A single uniform price always maximizes profit\"\n        },\n        {\n          \"feedback\": \"Costs per skier don’t differ enough to justify big price gaps by cost.\",\n          \"isCorrect\": false,\n          \"text\": \"Group prices should only reflect different operating costs\"\n        },\n        {\n          \"feedback\": \"More segments can improve efficiency when done well, not always harm it.\",\n          \"isCorrect\": false,\n          \"text\": \"More price segments always reduce economic efficiency\"\n        }\n      ],\n      \"question\": \"What’s a likely effect of segmentation?\"\n    }\n  ]\n}",
      "outputTokens": 3140,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-economics-price-discrimination-1",
      "userPrompt": "LESSON_TITLE: Price Discrimination Strategies\nLESSON_DESCRIPTION: Understanding how firms use price discrimination to maximize profits by charging different prices to different customer segments\nCHAPTER_TITLE: Pricing Strategy\nCOURSE_TITLE: Microeconomics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Pricing Puzzle: Why do seniors get discounts while business travelers pay premium? Why does software cost different amounts in different countries? Economists discovered the logic behind seemingly arbitrary pricing.\n2. Pigou's Insight: Arthur Pigou formalized price discrimination theory in the 1920s. He showed that charging different prices to different customers could actually be economically efficient under certain conditions.\n3. The Data Revolution: The rise of big data transformed price discrimination from crude segmentation to personalized pricing. Every click, purchase, and search helps companies estimate your willingness to pay.\n\nEXPLANATION_STEPS:\n1. Definition: Price discrimination means charging different prices for the same product to different customers. It's not about cost differences — it's about extracting more consumer surplus.\n2. First-Degree: First-degree discrimination charges each customer their maximum willingness to pay. It's theoretically perfect but practically impossible without mind-reading. Haggling approximates it.\n3. Second-Degree: Second-degree discrimination offers different versions at different prices. Customers self-select based on their preferences — like choosing between economy and business class.\n4. Third-Degree: Third-degree discrimination segments customers into groups with different elasticities. Charge more to inelastic groups (business travelers), less to elastic groups (tourists).\n5. Elasticity Connection: Price elasticity of demand determines pricing power. If demand barely changes with price (inelastic), firms can charge more. If demand is sensitive (elastic), prices must stay low.\n\nMECHANICS_STEPS:\n1. Preventing Arbitrage: To price discriminate, a firm must prevent arbitrage — customers who get the low price reselling to those who'd pay more. Physical services naturally prevent this; digital goods require DRM.\n2. Segmentation Signals: Market segmentation identifies groups with different price sensitivities. Age, location, purchase timing, and usage patterns all signal willingness to pay.\n3. Menu Design: Menu pricing creates product versions that appeal to different segments. The 'basic' version exists partly to make the 'premium' version look valuable by comparison.\n4. Dynamic Adjustment: Dynamic pricing adjusts prices in real-time based on demand signals. High demand triggers price increases; low demand triggers discounts. Algorithms optimize continuously.\n5. Bundling Strategy: Bundling combines products to extract more surplus. Cable TV bundles make you pay for channels you don't want because the package captures more total willingness to pay.\n\nEXAMPLES_STEPS:\n1. Airline Pricing: Airlines are masters of price discrimination. The same seat costs $200 or $2000 depending on when you book, whether you stay Saturday, and if you're flying for business or leisure.\n2. Movie Tickets: Movie theaters charge different prices for matinees, seniors, and students. They're segmenting customers by time flexibility and price sensitivity.\n3. Educational Discounts: Academic software discounts are dramatic — students might pay $50 for software that costs businesses $500. The assumption: students can't afford full price but will become paying customers later.\n4. Happy Hour Economics: Happy hour pricing segments customers by time availability. Those who can drink at 4pm are often more price-sensitive than the 8pm crowd willing to pay full price."
    },
    {
      "duration": 74404.70554200001,
      "inputTokens": 3047,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Um pesquisador afirma ter criado uma maquina que pega calor de um reservatorio quente, nao libera nada para o ambiente e transforma 100% desse calor em trabalho util.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso viola a primeira lei: sem fluxo de energia de saida (calor rejeitado) e sem mudanca de energia interna, nao ha como gerar trabalho do nada.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel se a temperatura da fonte quente for altissima\"\n        },\n        {\n          \"feedback\": \"Nao e questao de tecnologia: a primeira lei impede criar trabalho sem que a energia saia em alguma forma (outro calor ou mudanca de energia interna).\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel, mas exigiria materiais ainda inexistentes\"\n        },\n        {\n          \"feedback\": \"Um motor termico real SEMPRE precisa rejeitar parte do calor; converter 100% em trabalho quebraria o balanco de energia.\",\n          \"isCorrect\": true,\n          \"text\": \"Impossivel: violaria a conservacao de energia\"\n        },\n        {\n          \"feedback\": \"A eficiencia pode ser baixa, mas aqui o problema e que ele afirma eficiencia de 100%, nao de 0%.\",\n          \"isCorrect\": false,\n          \"text\": \"Impossivel porque nenhum motor consegue gerar qualquer trabalho\"\n        }\n      ],\n      \"question\": \"Essa maquina pode existir?\"\n    },\n    {\n      \"context\": \"Uma caixa isolada recebe 500 J de energia eletrica de um aquecedor interno e nao troca calor com o ambiente. Depois de algum tempo, tudo esta em repouso novamente, sem movimento de partes.\",\n      \"options\": [\n        {\n          \"feedback\": \"A energia nao sumiu, foi armazenada em outra forma, como aumento de energia interna (temperatura).\",\n          \"isCorrect\": false,\n          \"text\": \"Foi parcialmente destruida ao aquecer o ar\"\n        },\n        {\n          \"feedback\": \"A energia foi totalmente destruida quando cessou o funcionamento do aquecedor.\",\n          \"isCorrect\": false,\n          \"text\": \"Foi totalmente destruida ao desligar o aquecedor\"\n        },\n        {\n          \"feedback\": \"Toda energia eletrica virou aumento de energia interna (por exemplo, temperatura maior) ja que nao houve saida de calor ou trabalho.\",\n          \"isCorrect\": true,\n          \"text\": \"Foi convertida em energia interna na forma de calor\"\n        },\n        {\n          \"feedback\": \"Parte pode virar luz, mas, em uma caixa, essa luz tambem acaba virando energia interna; o saldo final esta todo ali, nao “perdido no espaco”.\",\n          \"isCorrect\": false,\n          \"text\": \"Foi perdida em forma de luz que escapou da caixa\"\n        }\n      ],\n      \"question\": \"Para onde foi a energia?\"\n    },\n    {\n      \"context\": \"Dois blocos metalicos, A e B, estao em contato termico. A esta mais quente que B. Eles sao deixados em contato por muito tempo, isolados do resto do ambiente.\",\n      \"options\": [\n        {\n          \"feedback\": \"O calor flui do quente para o frio ate a temperatura igualar. Ai cessa a troca liquida de energia termica entre eles.\",\n          \"isCorrect\": true,\n          \"text\": \"O fluxo de calor zera quando atingem mesma temperatura\"\n        },\n        {\n          \"feedback\": \"Temperatura igual nao garante mesma energia interna; isso depende tambem de massa e material.\",\n          \"isCorrect\": false,\n          \"text\": \"O fluxo some apenas quando tiverem mesma energia total\"\n        },\n        {\n          \"feedback\": \"Apos o equilibrio, pode haver flutuacoes microscopicas, mas nao ha fluxo liquido macroscópico.\",\n          \"isCorrect\": false,\n          \"text\": \"Sempre ha fluxo de calor, so diminui com o tempo\"\n        },\n        {\n          \"feedback\": \"A direcao se inverte so se trabalho externo for feito; espontaneamente nao ocorre de frio para quente.\",\n          \"isCorrect\": false,\n          \"text\": \"O fluxo se inverte e passa a ir do frio para o quente\"\n        }\n      ],\n      \"question\": \"Quando o calor para de fluir?\"\n    },\n    {\n      \"context\": \"Uma fabrica quer decidir qual fluido usar em um motor termico entre um reservatorio quente e um frio fixos. Todos os fluidos sao viaveis tecnicamente.\",\n      \"options\": [\n        {\n          \"feedback\": \"O limite maximo de eficiencia entre duas temperaturas e dado pelo ciclo de Carnot e independe do material, desde que seja reversivel.\",\n          \"isCorrect\": true,\n          \"text\": \"O limite maximo e o mesmo para todos os fluidos\"\n        },\n        {\n          \"feedback\": \"Materiais perfeitos nao permitem quebrar o limite de Carnot, apenas se aproximar dele.\",\n          \"isCorrect\": false,\n          \"text\": \"Um fluido “perfeito” pode ultrapassar o limite de Carnot\"\n        },\n        {\n          \"feedback\": \"Ele nao afeta o limite teorico, mas influencia a eficiencia real e praticidade.\",\n          \"isCorrect\": false,\n          \"text\": \"O fluido dobra o limite maximo se tiver alto calor especifico\"\n        },\n        {\n          \"feedback\": \"Mais ciclos ajudam a chegar perto da eficiencia maxima, mas nao mudam o limite teorico.\",\n          \"isCorrect\": false,\n          \"text\": \"Muitos ciclos por segundo aumentam a eficiencia maxima\"\n        }\n      ],\n      \"question\": \"O que define a eficiencia maxima?\"\n    },\n    {\n      \"context\": \"Um tecnico afirma que, se construir um motor muito bem lubrificado e sem atrito, ele podera ter um ciclo com eficiencia maior que a de Carnot entre as mesmas temperaturas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sem atrito, voce so remove perdas adicionais, mas ainda esta limitado pela segunda lei e pela eficiencia de Carnot.\",\n          \"isCorrect\": true,\n          \"text\": \"Impossivel: nem sem atrito supera Carnot\"\n        },\n        {\n          \"feedback\": \"Motor ate poderia chegar mais perto de Carnot, mas nao ultrapassar; essa ideia ignora a segunda lei.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel, mas exigiria ciclos extremamente lentos\"\n        },\n        {\n          \"feedback\": \"Mesmo com perdas internas, ha um teto teorico; atrito so afasta dele, nao define o proprio teto.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel porque atrito e o unico limite de eficiencia\"\n        },\n        {\n          \"feedback\": \"Temperatura alta ajuda, mas a comparacao aqui e com outro motor nas mesmas temperaturas.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel se a fonte quente estiver muito mais quente\"\n        }\n      ],\n      \"question\": \"Atrito zera o limite de Carnot?\"\n    },\n    {\n      \"context\": \"Uma pessoa diz: “Braco baguncado significa sempre mais calor.” Ela esta misturando entropia com temperatura.\",\n      \"options\": [\n        {\n          \"feedback\": \"Alta entropia esta ligada a energia mais dispersa, nao necessariamente a temperatura mais alta.\",\n          \"isCorrect\": true,\n          \"text\": \"Entropia e dispersao/probabilidade, nao so calor\"\n        },\n        {\n          \"feedback\": \"Entropia esta ligada a probabilidade de microestados, nao apenas a “pouca materia”.\",\n          \"isCorrect\": false,\n          \"text\": \"Entropia so aumenta quando ha pouca materia envolvida\"\n        },\n        {\n          \"feedback\": \"Sistemas podem ter muita energia organizada (baixa entropia) ou energia bem dispersa (alta entropia).\",\n          \"isCorrect\": false,\n          \"text\": \"Mais energia sempre significa maior entropia\"\n        },\n        {\n          \"feedback\": \"Ordem visual baguncada e so uma analogia fraca; o conceito e estatistico, nao estetico.\",\n          \"isCorrect\": false,\n          \"text\": \"Entropia mede o quao feio ou desorganizado algo parece\"\n        }\n      ],\n      \"question\": \"O que entropia realmente mede?\"\n    },\n    {\n      \"context\": \"Dois recipientes com gas ideal: um pequeno e quente, outro grande e frio. O gas quente tem temperatura maior, mas menos moleculas no total.\",\n      \"options\": [\n        {\n          \"feedback\": \"Temperatura e energia cinetica media; o gas pequeno pode ter T alta, mas energia total menor que o grande e frio.\",\n          \"isCorrect\": true,\n          \"text\": \"Temperatura nao diz quanta energia total o gas tem\"\n        },\n        {\n          \"feedback\": \"Calor e transferencia; aqui estamos comparando estados, nao fluxo.\",\n          \"isCorrect\": false,\n          \"text\": \"Calor e a energia total armazenada no gas\"\n        },\n        {\n          \"feedback\": \"Se a energia total fosse igual, o grande provavelmente teria temperatura menor, mas isso nao define em geral.\",\n          \"isCorrect\": false,\n          \"text\": \"Tem sempre a mesma energia total que o grande\"\n        },\n        {\n          \"feedback\": \"As moleculas se movem mais depressa no gas quente, justamente o contrario disso.\",\n          \"isCorrect\": false,\n          \"text\": \"Temperatura baixa significa moleculas com maior velocidade\"\n        }\n      ],\n      \"question\": \"Qual a diferenca chave aqui?\"\n    },\n    {\n      \"context\": \"Uma chaleira esquenta agua em um fogao eletrico. Apos o aquecimento, a cozinha ainda esta fria em relacao à agua na chaleira.\",\n      \"options\": [\n        {\n          \"feedback\": \"O calor flui espontaneamente da agua quente para o ar mais frio, aumentando a entropia total.\",\n          \"isCorrect\": true,\n          \"text\": \"O calor flui da agua quente para o ar frio\"\n        },\n        {\n          \"feedback\": \"So com bomba de calor ou outro trabalho externo o fluxo iria do ar frio para agua quente.\",\n          \"isCorrect\": false,\n          \"text\": \"O ar frio envia calor para a agua mais quente espontaneamente\"\n        },\n        {\n          \"feedback\": \"Conducao ocorre no metal; para o ar dominante e conveccao, nao conducao.\",\n          \"isCorrect\": false,\n          \"text\": \"O calor flui do ar para a agua por conducao\"\n        },\n        {\n          \"feedback\": \"Enquanto houver diferenca de temperatura, ha fluxo liquido; so zera no equilibrio.\",\n          \"isCorrect\": false,\n          \"text\": \"Nao ha fluxo de calor, pois o ar e um isolante\"\n        }\n      ],\n      \"question\": \"Como o calor se comporta?\"\n    },\n    {\n      \"context\": \"Uma empresa projeta uma geladeira que, segundo o panfleto, resfria o interior sem gastar energia eletrica, apenas “usando o frio natural do ambiente”. O ambiente e a cozinha, ligeiramente mais quente que o interior desejado.\",\n      \"options\": [\n        {\n          \"feedback\": \"Para mover calor do mais frio para o mais quente, e preciso trabalho externo. Sem isso, viola a segunda lei.\",\n          \"isCorrect\": true,\n          \"text\": \"Impossivel: precisa de trabalho para bombear calor\"\n        },\n        {\n          \"feedback\": \"Apenas isolamento nao resfria abaixo da temperatura do ambiente, so reduz aquecimento.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel se o isolamento termico for perfeito\"\n        },\n        {\n          \"feedback\": \"Nao ha “fonte de frio”; o frio e so falta de calor. Mover calor exige energia.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel porque o frio do ambiente e uma fonte de energia\"\n        },\n        {\n          \"feedback\": \"Eficiencia alta ainda exige alguma entrada de trabalho; 0 energia continua impossivel.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel com eficiencia superior a 100%\"\n        }\n      ],\n      \"question\": \"Essa geladeira faz sentido?\"\n    },\n    {\n      \"context\": \"Um cientista propõe um experimento: em uma sala isolada, um corpo quente ao lado de um corpo frio. Ele espera observar, espontaneamente, o corpo frio aquecer o quente sem nenhuma maquina intermediaria.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spontaneamente, o calor flui do quente para o frio; o contrario exige trabalho externo.\",\n          \"isCorrect\": true,\n          \"text\": \"Nao ocorrera: viola a segunda lei\"\n        },\n        {\n          \"feedback\": \"O mais provavel e que ambos alcancem uma temperatura intermediaria, nao o frio esquentar o quente.\",\n          \"isCorrect\": false,\n          \"text\": \"O quente ficara ainda mais quente, o frio mais frio\"\n        },\n        {\n          \"feedback\": \"Pode haver flutuacoes microscopicas, mas o fluxo liquido e sempre quente→frio.\",\n          \"isCorrect\": false,\n          \"text\": \"O frio pode aquecer o quente por flutuacao macroscopica\"\n        },\n        {\n          \"feedback\": \"Nao ha armazenamento de calor “a espera”; o quente vai perder energia ao frio.\",\n          \"isCorrect\": false,\n          \"text\": \"O calor ficara armazenado no corpo frio, sem fluxo\"\n        }\n      ],\n      \"question\": \"Qual sera o resultado?\"\n    },\n    {\n      \"context\": \"Um engenheiro aumenta a temperatura da fonte quente de uma usina termica, mantendo a temperatura da fonte fria igual. Ele mantem o mesmo tipo de ciclo termico, apenas com materiais adequados.\",\n      \"options\": [\n        {\n          \"feedback\": \"O limite de Carnot depende da razao entre as temperaturas; maior diferenca, maior eficiencia maxima teorica.\",\n          \"isCorrect\": true,\n          \"text\": \"A eficiencia maxima teorica aumenta\"\n        },\n        {\n          \"feedback\": \"A temperatura maior tende a elevar, nao reduzir, o limite de eficiencia.\",\n          \"isCorrect\": false,\n          \"text\": \"A eficiencia maxima teorica diminui\"\n        },\n        {\n          \"feedback\": \"A potencia pode mudar, mas a eficiencia maxima definida por Carnot certamente se altera com a nova temperatura.\",\n          \"isCorrect\": false,\n          \"text\": \"A eficiencia maxima permanece exatamente igual\"\n        },\n        {\n          \"feedback\": \"Potencia e eficiencia sao conceitos diferentes; aquecer nao garante potencia maxima.\",\n          \"isCorrect\": false,\n          \"text\": \"A potencia gerada torna-se automaticamente maxima\"\n        }\n      ],\n      \"question\": \"O que muda no limite teorico?\"\n    },\n    {\n      \"context\": \"Uma casa usa aquecedores eletricos simples. O dono considera trocar por uma bomba de calor para aquecer no inverno, usando a mesma energia eletrica disponivel.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bomba de calor usa o trabalho eletrico para mover calor de fora para dentro, podendo entregar mais calor que um aquecedor resistivo.\",\n          \"isCorrect\": true,\n          \"text\": \"A bomba de calor pode fornecer mais calor util\"\n        },\n        {\n          \"feedback\": \"Resistores nao sao mais eficientes; eles so convertem direto eletricidade em calor, sem “ampliar” com calor externo.\",\n          \"isCorrect\": false,\n          \"text\": \"A resistencia eletrica sempre gera mais calor por watt\"\n        },\n        {\n          \"feedback\": \"A segunda lei nao proibe mover calor do frio para o quente, desde que se forneca trabalho.\",\n          \"isCorrect\": false,\n          \"text\": \"E proibido aquecer com bomba de calor pela 2a lei\"\n        },\n        {\n          \"feedback\": \"Uma bomba de calor transfere calor, nao reduz a temperatura interna.\",\n          \"isCorrect\": false,\n          \"text\": \"A bomba de calor so resfria, nunca aquece\"\n        }\n      ],\n      \"question\": \"Qual vantagem teorica da bomba?\"\n    },\n    {\n      \"context\": \"Um estudante compara: “Calor e temperatura sao a mesma coisa, so palavras diferentes. Se algo tem muito calor, significa que esta quente.”\",\n      \"options\": [\n        {\n          \"feedback\": \"Calor e transferencia de energia; temperatura e o nivel de agitacao termica. Muito material frio pode ter mais energia total que pouco material quente.\",\n          \"isCorrect\": true,\n          \"text\": \"Confusao: calor e fluxo, temperatura e estado\"\n        },\n        {\n          \"feedback\": \"Nao basta estar mais quente para “ter mais calor”; voce precisa considerar massa e capacidade termica.\",\n          \"isCorrect\": false,\n          \"text\": \"Mais quente sempre tem mais calor total\"\n        },\n        {\n          \"feedback\": \"Temperatura nao mede massa; e energia cinetica media por particula, nao quantidade total.\",\n          \"isCorrect\": false,\n          \"text\": \"Temperatura mede quanta materia ha no corpo\"\n        },\n        {\n          \"feedback\": \"Calor nao e “frio negativo”; e sempre transferencia de energia termica.\",\n          \"isCorrect\": false,\n          \"text\": \"Calor e o oposto exato de frio\"\n        }\n      ],\n      \"question\": \"Qual o erro na frase?\"\n    },\n    {\n      \"context\": \"Um pesquisador tenta criar um “motor humano” que converta toda a energia quimica dos alimentos em trabalho mecanico, sem liberar calor para o ambiente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Organismos e maquinas reais sempre produzem calor; 100% em trabalho violaria limites de eficiencia impostos pela segunda lei.\",\n          \"isCorrect\": true,\n          \"text\": \"Impossivel: sempre havera producao de calor\"\n        },\n        {\n          \"feedback\": \"Mesmo com tecnologia, a segunda lei impede eficiencia de 100%; o limite nao e so tecnologico.\",\n          \"isCorrect\": false,\n          \"text\": \"Possivel com tecnologia biomedica suficiente\"\n        },\n        {\n          \"feedback\": \"Reduzir temperatura demais prejudicaria reacoes bioquimicas; e nao resolveria o limite termodinamico.\",\n          \"isCorrect\": false,\n          \"text\": \"Basta resfriar o corpo ate bem perto do zero absoluto\"\n        },\n        {\n          \"feedback\": \"Liberar calor a noite nao elimina perdas: o processo total ainda tem entropia crescente.\",\n          \"isCorrect\": false,\n          \"text\": \"Basta liberar o calor apenas durante a noite\"\n        }\n      ],\n      \"question\": \"Esse motor e viavel?\"\n    },\n    {\n      \"context\": \"Um cientista afirma ter observado, em uma experiencia controlada, um processo isolado no qual a entropia total do sistema diminuiu de forma macroscópica e repetivel, sem aporte de trabalho.\",\n      \"options\": [\n        {\n          \"feedback\": \"A diminuicao macroscópica espontanea da entropia em sistema isolado contradiz diretamente a segunda lei.\",\n          \"isCorrect\": true,\n          \"text\": \"Algo esta errado: viola a segunda lei\"\n        },\n        {\n          \"feedback\": \"Flutuacoes pequenas podem ocorrer, mas nao sao macroscópicas nem repetiveis de forma controlada.\",\n          \"isCorrect\": false,\n          \"text\": \"Flutuacoes macroscópicas sao comuns em gases reais\"\n        },\n        {\n          \"feedback\": \"A segunda lei nao se limita a solidos; vale tambem para fluidos.\",\n          \"isCorrect\": false,\n          \"text\": \"Nao vale para fluidos, apenas para solidos cristalinos\"\n        },\n        {\n          \"feedback\": \"A segunda lei e estatistica, mas extremamente robusta; o resultado indica erro ou interpretacao equivocada.\",\n          \"isCorrect\": false,\n          \"text\": \"Mostra que a segunda lei so vale em media, sem excecoes\"\n        }\n      ],\n      \"question\": \"Como avaliar o experimento?\"\n    },\n    {\n      \"context\": \"Uma panela com agua ferve em um fogao a gas. O fundo da panela esquenta direto na chama; o liquido circula; e parte do calor sai em forma de radiacao luminosa infravermelha.\",\n      \"options\": [\n        {\n          \"feedback\": \"O metal conduz calor, a agua circula por conveccao e a radiacao infravermelha transporta energia na forma de ondas eletromagneticas.\",\n          \"isCorrect\": true,\n          \"text\": \"Conducao no fundo, conveccao na agua, radiacao ao ar\"\n        },\n        {\n          \"feedback\": \"A agua circulante e claramente conveccao, nao conducao.\",\n          \"isCorrect\": false,\n          \"text\": \"Conducao domina no metal e tambem dentro da agua\"\n        },\n        {\n          \"feedback\": \"A chama e principalmente conveccao e radiacao, nao “apenas” radiacao.\",\n          \"isCorrect\": false,\n          \"text\": \"Toda transferencia aqui e unicamente por radiacao\"\n        },\n        {\n          \"feedback\": \"A radiacao infravermelha nao exige meio material; ocorre sim em ambientes comuns.\",\n          \"isCorrect\": false,\n          \"text\": \"Radiacao nao ocorre em temperaturas tao baixas\"\n        }\n      ],\n      \"question\": \"Que mecanismos atuam?\"\n    },\n    {\n      \"context\": \"Dois gases iguais sao colocados em recipientes identicos. Um sofre compresso rapida isolante (sem troca de calor); o outro sofre compressao lenta mantendo a temperatura constante, em contato com um banho termico.\",\n      \"options\": [\n        {\n          \"feedback\": \"Compressao rapida e adiabática aumenta T; na isotermica, o banho retira calor para manter T constante.\",\n          \"isCorrect\": true,\n          \"text\": \"No adiabatico, T sobe; no isotermico, T fica igual\"\n        },\n        {\n          \"feedback\": \"Isotermico, por definicao, mantem T constante se o banho for ideal.\",\n          \"isCorrect\": false,\n          \"text\": \"A compressao isotermica tambem eleva a temperatura\"\n        },\n        {\n          \"feedback\": \"Se ha contato com banho termico infinito, ha sim troca de calor para manter T.\",\n          \"isCorrect\": false,\n          \"text\": \"Nenhum dos dois troca calor com o ambiente\"\n        },\n        {\n          \"feedback\": \"Mesmo adiabatico pode mudar temperatura via trabalho, so nao troca calor.\",\n          \"isCorrect\": false,\n          \"text\": \"No adiabatico, a temperatura diminui sempre\"\n        }\n      ],\n      \"question\": \"Como muda a temperatura?\"\n    }\n  ]\n}",
      "outputTokens": 3856,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "pt-physics-thermodynamics-laws-1",
      "userPrompt": "LESSON_TITLE: Leis da Termodinamica\nLESSON_DESCRIPTION: Compreendendo as leis da termodinamica e como elas governam a transferencia de energia e os limites de eficiencia em todos os processos fisicos\nCHAPTER_TITLE: Termodinamica\nCOURSE_TITLE: Fisica Geral\nLANGUAGE: pt\n\nBACKGROUND_STEPS:\n1. O Sonho Impossivel: No seculo XIX, engenheiros queriam construir maquinas a vapor mais eficientes. Sadi Carnot percebeu que havia um limite fundamental — nenhuma maquina poderia converter todo calor em trabalho.\n2. As Leis Universais: Rudolf Clausius e Lord Kelvin formalizaram as leis da termodinamica. Elas explicam por que o cafe esfria, por que precisamos comer, e por que o universo caminha para a desordem.\n3. Solidez da Teoria: A termodinamica e uma das teorias mais robustas da fisica. Einstein disse que, de todas as teorias, ela e a menos provavel de ser derrubada por descobertas futuras.\n\nEXPLANATION_STEPS:\n1. Primeira Lei: A primeira lei diz que energia nao se cria nem se destroi — apenas se transforma. Toda energia que entra em um sistema deve sair ou ser armazenada. E um balanco contabil universal.\n2. Segunda Lei: A segunda lei afirma que processos espontaneos aumentam a entropia total. Calor flui do quente para o frio naturalmente, nunca ao contrario sem trabalho externo.\n3. Entropia: Entropia mede a dispersao de energia entre microestados possiveis. Sistemas evoluem para configuracoes mais provaveis — e configuracoes de alta entropia sao vastamente mais provaveis.\n4. Equilibrio Termico: Equilibrio termico ocorre quando dois sistemas em contato param de trocar energia liquida. Eles atingem a mesma temperatura, mas nao necessariamente a mesma energia.\n5. Calor vs Temperatura: Calor e a transferencia de energia termica entre sistemas. Temperatura mede a energia cinetica media das moleculas. Calor alto com temperatura baixa e possivel (muito material, movimento lento).\n\nMECHANICS_STEPS:\n1. Ciclo do Motor Termico: Em um motor termico, calor flui da fonte quente para a fria. Parte dessa energia e capturada como trabalho. O resto e desperdicado como calor para o ambiente.\n2. Limite de Carnot: O ciclo de Carnot define a eficiencia maxima teorica. Depende apenas das temperaturas das fontes quente e fria. Quanto maior a diferenca, maior a eficiencia possivel.\n3. Bomba de Calor: Bombas de calor invertem o fluxo natural. Usam trabalho para mover calor do frio para o quente — como a geladeira que remove calor do interior e o despeja no ambiente.\n4. Tipos de Processos: Processos isotermicos mantem temperatura constante. Processos adiabaticos nao trocam calor com o ambiente. Cada tipo segue equacoes especificas de expansao e compressao.\n5. Mecanismos de Transferencia: A conducao, conveccao e radiacao sao os tres mecanismos de transferencia de calor. Cada um domina em situacoes diferentes — metais conduzem, liquidos convectam, o sol irradia.\n\nEXAMPLES_STEPS:\n1. A Geladeira: A geladeira e uma bomba de calor que move energia do interior frio para o exterior quente. Isso requer trabalho — por isso ela consome eletricidade continuamente.\n2. Motores de Combustao: Motores de carro convertem energia quimica do combustivel em movimento. Mas pelo menos 60-70% da energia e perdida como calor — os limites termodinamicos sao implacaveis.\n3. Geracao de Energia: Usinas termeletricas queimam combustivel para gerar vapor que move turbinas. A eficiencia tipica e 30-40% — a maior parte da energia se dissipa no ambiente.\n4. O Corpo Humano: Seu corpo e uma maquina termica. Converte energia dos alimentos em trabalho e calor. Febre significa que o termostato interno foi reconfigurado para uma temperatura mais alta."
    },
    {
      "duration": 62593.710458000016,
      "inputTokens": 2988,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"En un grupo de amigos, todos empiezan a decir que una película aburrida fue “increíble”. Tú piensas que fue mala, pero sonríes y dices que te gustó para no quedar como aguafiestas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Esto describe más bien obediencia a una autoridad, y aquí no hay jerarquía, solo pares.\",\n          \"isCorrect\": false,\n          \"text\": \"Es obediencia, porque sigues órdenes de tus amigos\"\n        },\n        {\n          \"feedback\": \"Aquí es conformidad, pero solo de conducta externa, no cambiaste realmente tu opinión interna.\",\n          \"isCorrect\": true,\n          \"text\": \"Es conformidad externa por influencia normativa\"\n        },\n        {\n          \"feedback\": \"La influencia informacional es cuando dudas de tu juicio y crees que los otros saben más; aquí solo quieres aceptación.\",\n          \"isCorrect\": false,\n          \"text\": \"Es influencia informacional, confías en su criterio\"\n        },\n        {\n          \"feedback\": \"Te importa sí ser aceptado: actúas para evitar rechazo, eso es justamente influencia normativa.\",\n          \"isCorrect\": false,\n          \"text\": \"No hay influencia social, porque no te importa ser aceptado\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia domína aquí?\"\n    },\n    {\n      \"context\": \"En una ciudad nueva, ves a varias personas cruzar una calle sin semáforo en un punto específico. No estás seguro de si es legal, pero los imitas pensando que ellos deben saber cómo funciona allí.\",\n      \"options\": [\n        {\n          \"feedback\": \"Buscas pistas sobre la realidad en el comportamiento de otros; eso es influencia informacional.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional en una situación ambigua\"\n        },\n        {\n          \"feedback\": \"La influencia normativa se centra en evitar rechazo; aquí el foco es “ellos saben más que yo”.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa para ser aceptado socialmente\"\n        },\n        {\n          \"feedback\": \"No hay órdenes ni jerarquía; por tanto no es obediencia a la autoridad.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad que marca la norma\"\n        },\n        {\n          \"feedback\": \"Sí hay influencia: tu decisión depende de lo que hacen los demás.\",\n          \"isCorrect\": false,\n          \"text\": \"No hay influencia social, decides totalmente solo\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia ocurre?\"\n    },\n    {\n      \"context\": \"En una empresa, todo el equipo apoya un plan arriesgado. Una persona piensa que fallará y lo dice en la reunión. Aun así, el resto mantiene su apoyo. La persona crítica se mantiene firme.\",\n      \"options\": [\n        {\n          \"feedback\": \"Un solo disidente reduce la presión a conformarse, incluso si no convence a la mayoría.\",\n          \"isCorrect\": true,\n          \"text\": \"La unanimidad se rompe y baja la presión a conformarse\"\n        },\n        {\n          \"feedback\": \"El grupo puede seguir equivocado, pero la simple ruptura de la unanimidad ya cambia la dinámica.\",\n          \"isCorrect\": false,\n          \"text\": \"Nada cambia hasta que haya mayoría en contra\"\n        },\n        {\n          \"feedback\": \"La voz minoritaria sí importa, aunque solo sea para dar apoyo psicológico a otros que dudan.\",\n          \"isCorrect\": false,\n          \"text\": \"La minoría no tiene ningún efecto psicológico real\"\n        },\n        {\n          \"feedback\": \"El disenso suele generar alivio en quienes dudan, no tanto miedo a ser el siguiente señalado.\",\n          \"isCorrect\": false,\n          \"text\": \"Se incrementa el miedo a ser criticado por los demás\"\n        }\n      ],\n      \"question\": \"¿Qué efecto tiene ese disenso?\"\n    },\n    {\n      \"context\": \"Un jefe envía por correo una instrucción dudosa. En otra ocasión, la misma persona da la instrucción mirándote a los ojos en su oficina, insistiendo en que actúes rápido.\",\n      \"options\": [\n        {\n          \"feedback\": \"La cercanía física y personal de la autoridad suele aumentar la obediencia.\",\n          \"isCorrect\": true,\n          \"text\": \"La orden en persona aumenta la obediencia\"\n        },\n        {\n          \"feedback\": \"La distancia tiende a disminuir, no aumentar, el impacto de la autoridad.\",\n          \"isCorrect\": false,\n          \"text\": \"La orden por correo genera más obediencia\"\n        },\n        {\n          \"feedback\": \"La presencia física cambia la presión percibida, incluso si el contenido es igual.\",\n          \"isCorrect\": false,\n          \"text\": \"Da igual el canal, solo importa el contenido\"\n        },\n        {\n          \"feedback\": \"La proximidad suele intensificar la presión social, no reducirla.\",\n          \"isCorrect\": false,\n          \"text\": \"Ver al jefe reduce la presión y la obediencia\"\n        }\n      ],\n      \"question\": \"¿Qué situación fomenta más obediencia?\"\n    },\n    {\n      \"context\": \"Una activista consigue primero que vecinos firmen una petición simbólica. Meses después les pide participar en protestas costosas en tiempo y reputación, y muchos aceptan.\",\n      \"options\": [\n        {\n          \"feedback\": \"Pequeños compromisos iniciales facilitan aceptar demandas mayores después: escalada de compromiso.\",\n          \"isCorrect\": true,\n          \"text\": \"Es un ejemplo de escalada gradual de compromiso\"\n        },\n        {\n          \"feedback\": \"Aquí sí hay cierta presión grupal, pero la clave es el aumento progresivo de las demandas, no la moda.\",\n          \"isCorrect\": false,\n          \"text\": \"Es simplemente seguir una moda del barrio\"\n        },\n        {\n          \"feedback\": \"No es tanto sobre reparto de culpa, sino sobre ir subiendo el nivel de implicación.\",\n          \"isCorrect\": false,\n          \"text\": \"Hay sobre todo difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"La gente no adopta automáticamente creencias extremas; el punto central es la progresión de acciones.\",\n          \"isCorrect\": false,\n          \"text\": \"Muestra cómo la gente cambia de creencias de golpe\"\n        }\n      ],\n      \"question\": \"¿Qué mecanismo explica esto?\"\n    },\n    {\n      \"context\": \"En una reunión virtual con cámaras apagadas, el chat se llena de comentarios agresivos que nadie haría cara a cara. Muchos se suman a las burlas sin pensarlo mucho.\",\n      \"options\": [\n        {\n          \"feedback\": \"Anonimato + ambiente grupal intenso reduce autocontrol y fomenta actos que solos no harían.\",\n          \"isCorrect\": true,\n          \"text\": \"Desindividuación favorecida por anonimato y grupo\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad existe, pero la pérdida de identidad personal es lo central aquí.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo se trata de difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"No hay obediencia a una autoridad; no se ve una figura jerárquica dando órdenes.\",\n          \"isCorrect\": false,\n          \"text\": \"Es principalmente obediencia a una autoridad fuerte\"\n        },\n        {\n          \"feedback\": \"No parece ser una búsqueda de información; ya saben que los comentarios son agresivos.\",\n          \"isCorrect\": false,\n          \"text\": \"Predomina la influencia informacional del grupo\"\n        }\n      ],\n      \"question\": \"¿Qué fenómeno se observa?\"\n    },\n    {\n      \"context\": \"Un gerente dice en voz alta: “Creo que el plan A es el único sensato”. Luego pregunta al equipo qué opina. Nadie ofrece alternativas, aunque varios tienen dudas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Silencio puede leerse como acuerdo; muchos callan por presión social y deseo de no parecer conflictivos.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad por influencia normativa y jerarquía\"\n        },\n        {\n          \"feedback\": \"Aquí las dudas internas indican que no están convencidos; solo alinean su conducta externa.\",\n          \"isCorrect\": false,\n          \"text\": \"Es conformidad interna, todos cambian sus creencias\"\n        },\n        {\n          \"feedback\": \"No es tanto búsqueda de verdad, sino miedo a destacar frente al jefe.\",\n          \"isCorrect\": false,\n          \"text\": \"Es pura influencia informacional del gerente\"\n        },\n        {\n          \"feedback\": \"La mayoría sí se siente responsable, pero teme expresar desacuerdo.\",\n          \"isCorrect\": false,\n          \"text\": \"Nadie se siente responsable de las decisiones del plan\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia domina?\"\n    },\n    {\n      \"context\": \"En una campaña de salud, los carteles dicen: “La mayoría ya recicla sus residuos”. En otra ciudad, los carteles dicen: “Deberías reciclar tus residuos”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Lo que la gente hace son normas descriptivas; lo que debería hacer, normas prescriptivas.\",\n          \"isCorrect\": true,\n          \"text\": \"Primero descriptiva, luego prescriptiva\"\n        },\n        {\n          \"feedback\": \"Tienen efectos distintos; no son simplemente dos formas del mismo tipo de norma.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambas son solo normas descriptivas\"\n        },\n        {\n          \"feedback\": \"Ninguna de las frases prohíbe explícitamente; se centran en conducta, no en castigos.\",\n          \"isCorrect\": false,\n          \"text\": \"Primero prescriptiva, segunda es una prohibición\"\n        },\n        {\n          \"feedback\": \"Las dos sí presionan socialmente, aunque de modos distintos.\",\n          \"isCorrect\": false,\n          \"text\": \"Ninguna influye realmente en el comportamiento\"\n        }\n      ],\n      \"question\": \"¿Qué tipos de norma usan?\"\n    },\n    {\n      \"context\": \"En una sala de espera, alguien empieza a tirar papeles al suelo. Poco a poco, otros hacen lo mismo, pensando: “Aquí todos tiran basura, no pasa nada”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Se guían por lo que observan que otros hacen: norma descriptiva que legitima la conducta.\",\n          \"isCorrect\": true,\n          \"text\": \"La norma descriptiva refuerza tirar basura\"\n        },\n        {\n          \"feedback\": \"Aquí la norma no surge de un deber moral explícito, sino de la observación del comportamiento.\",\n          \"isCorrect\": false,\n          \"text\": \"Es una norma prescriptiva explícita\"\n        },\n        {\n          \"feedback\": \"Se ve una forma de conformidad a la conducta observable, no un rechazo conjunto a la norma.\",\n          \"isCorrect\": false,\n          \"text\": \"Es un ejemplo de rebelión contra la norma social\"\n        },\n        {\n          \"feedback\": \"Quienes se suman sí sienten que “si todos lo hacen, está bien”, es decir, hay influencia social.\",\n          \"isCorrect\": false,\n          \"text\": \"No hay influencia social, cada quien decide aislado\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de norma guía el acto?\"\n    },\n    {\n      \"context\": \"Una persona sabe que cierto chiste es ofensivo, pero se ríe cuando el grupo lo celebra para evitar que la vean como “aguafiestas”. Por dentro sigue pensando que es inaceptable.\",\n      \"options\": [\n        {\n          \"feedback\": \"Su conducta cambia, pero su creencia no; eso es conformidad externa, principalmente normativa.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad externa sin cambio de creencias\"\n        },\n        {\n          \"feedback\": \"Si fuera interna, aceptaría el chiste como correcto; aquí no ocurre eso.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad interna, cambia su moral\"\n        },\n        {\n          \"feedback\": \"No busca información sobre si el chiste es correcto; ya lo considera ofensivo.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad informacional por duda moral\"\n        },\n        {\n          \"feedback\": \"La risa fingida muestra que sí le importa el juicio del grupo.\",\n          \"isCorrect\": false,\n          \"text\": \"No hay conformidad, actúa según sus valores\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de conformidad es?\"\n    },\n    {\n      \"context\": \"Un supervisor ordena a un empleado aplicar una política injusta a un cliente. El empleado obedece pensando: “Si algo sale mal, es responsabilidad de mi jefe, no mía”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Cuando la responsabilidad se percibe repartida o delegada, la gente se siente menos personalmente culpable.\",\n          \"isCorrect\": true,\n          \"text\": \"Difusión/delegación de responsabilidad aumenta obediencia\"\n        },\n        {\n          \"feedback\": \"La escalada implica pequeños pasos crecientes; aquí el foco es el desplazamiento de culpa.\",\n          \"isCorrect\": false,\n          \"text\": \"Es escalada de compromiso del empleado\"\n        },\n        {\n          \"feedback\": \"La presión viene de la autoridad, no tanto del deseo de pertenecer al grupo de pares.\",\n          \"isCorrect\": false,\n          \"text\": \"Es sobre todo influencia normativa entre iguales\"\n        },\n        {\n          \"feedback\": \"No parece un esfuerzo por averiguar qué es correcto, sino por justificar la obediencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Es influencia informacional para decidir lo moral\"\n        }\n      ],\n      \"question\": \"¿Qué mecanismo facilita la obediencia?\"\n    },\n    {\n      \"context\": \"En una protesta nocturna, muchas personas llevan máscaras y ropa similar. El ambiente es tenso; algunos empiezan a destruir mobiliario urbano y otros, que nunca harían eso solos, los imitan.\",\n      \"options\": [\n        {\n          \"feedback\": \"Pérdida de identidad individual + anonimato + excitación grupal = desindividuación.\",\n          \"isCorrect\": true,\n          \"text\": \"Desindividuación en un contexto anónimo y tenso\"\n        },\n        {\n          \"feedback\": \"Hay presión del grupo, pero lo específico es la pérdida de autocontrol vinculada al anonimato.\",\n          \"isCorrect\": false,\n          \"text\": \"Simple influencia normativa sin otros factores\"\n        },\n        {\n          \"feedback\": \"No se ve una autoridad formal dando órdenes; es un fenómeno entre iguales.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia clara a una autoridad visible\"\n        },\n        {\n          \"feedback\": \"No parece una búsqueda de información sobre qué es correcto, sino contagio emocional.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional sobre qué hacer\"\n        }\n      ],\n      \"question\": \"¿Qué fenómeno se ve aquí?\"\n    },\n    {\n      \"context\": \"Una plataforma muestra cuántas personas ya han reservado un curso en línea. Un usuario indeciso decide comprar pensando: “Si tanta gente lo eligió, debe ser bueno”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Usa la conducta de otros como señal de calidad: clara influencia informacional basada en norma descriptiva.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional apoyada en norma descriptiva\"\n        },\n        {\n          \"feedback\": \"El foco principal no es ser aceptado personalmente, sino inferir qué curso es mejor.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa para ser parte del grupo\"\n        },\n        {\n          \"feedback\": \"No hay figuras de poder ordenando; la decisión no es por jerarquía.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad de la plataforma\"\n        },\n        {\n          \"feedback\": \"Los números visibles sí influyen en su decisión; no actúa totalmente independiente.\",\n          \"isCorrect\": false,\n          \"text\": \"No hay influencia social, decide solo por el temario\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia opera?\"\n    },\n    {\n      \"context\": \"En una empresa, un proyecto dañino fue aprobado en una gran reunión donde nadie habló en contra. Años después, varios asistentes dicen: “No era mi decisión, todos estábamos de acuerdo”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Cuando “todos” son responsables, cada uno siente menos peso personal: difusión de responsabilidad.\",\n          \"isCorrect\": true,\n          \"text\": \"Difusión de responsabilidad en decisiones grupales\"\n        },\n        {\n          \"feedback\": \"La desindividuación se da más en contextos de anonimato y pérdida de identidad personal pública.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación por estar en una empresa grande\"\n        },\n        {\n          \"feedback\": \"Puede haber modas de opinión, pero la clave aquí es la dilución de la culpa individual.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo es seguir una moda corporativa pasajera\"\n        },\n        {\n          \"feedback\": \"No parece que hubiera obediencia clara a una autoridad; se enfatiza el “todos” más que el “jefe”.\",\n          \"isCorrect\": false,\n          \"text\": \"Pura obediencia a una figura de autoridad\"\n        }\n      ],\n      \"question\": \"¿Qué explica la falta de culpa?\"\n    },\n    {\n      \"context\": \"Un médico joven duda de la indicación de un médico muy prestigioso, pero decide seguirla sin cuestionar, aun creyendo que quizá sea riesgosa.\",\n      \"options\": [\n        {\n          \"feedback\": \"Obedece a una figura jerárquica, priorizando la autoridad sobre su propio juicio.\",\n          \"isCorrect\": true,\n          \"text\": \"Obediencia a la autoridad médica superior\"\n        },\n        {\n          \"feedback\": \"La conformidad entre colegas sería más horizontal; aquí la relación es claramente vertical.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad horizontal con sus colegas médicos\"\n        },\n        {\n          \"feedback\": \"No está buscando información neutra, sino sometiéndose a la orden del superior.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional pura sin jerarquía\"\n        },\n        {\n          \"feedback\": \"Él sí siente responsabilidad, por eso duda; lo que pesa es la orden de la autoridad.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad sin influencia jerárquica\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia predomina?\"\n    },\n    {\n      \"context\": \"En una clase, al principio nadie participa. El profesor hace una pregunta difícil; un estudiante se atreve a decir “no estoy de acuerdo con la explicación”. Después, otros empiezan a cuestionar también.\",\n      \"options\": [\n        {\n          \"feedback\": \"Romper el silencio y la apariencia de consenso reduce la presión a seguir la mayoría.\",\n          \"isCorrect\": true,\n          \"text\": \"Un solo disidente reduce la conformidad del grupo\"\n        },\n        {\n          \"feedback\": \"La opinión del primero importa mucho; no es indiferente quién rompe el silencio.\",\n          \"isCorrect\": false,\n          \"text\": \"No cambia nada hasta que haya varios disidentes\"\n        },\n        {\n          \"feedback\": \"La diversidad de opiniones puede mejorar la discusión, no necesariamente empeorarla.\",\n          \"isCorrect\": false,\n          \"text\": \"El disenso solo genera caos y confusión\"\n        },\n        {\n          \"feedback\": \"Más voces críticas tienden a acercarse a un análisis más cuidadoso, no a más obediencia.\",\n          \"isCorrect\": false,\n          \"text\": \"El disenso hace que todos obedezcan más al profesor\"\n        }\n      ],\n      \"question\": \"¿Qué muestra este caso?\"\n    }\n  ]\n}",
      "outputTokens": 3345,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "es-psychology-social-conformity-1",
      "userPrompt": "LESSON_TITLE: Conformidad y Obediencia Social\nLESSON_DESCRIPTION: Comprendiendo como la presion social y la autoridad influyen en nuestras decisiones, desde situaciones cotidianas hasta dilemas eticos\nCHAPTER_TITLE: Influencia Social\nCOURSE_TITLE: Psicologia Social\nLANGUAGE: es\n\nBACKGROUND_STEPS:\n1. La Pregunta Post-Guerra: Despues de la Segunda Guerra Mundial, el mundo pregunto: como pudo gente ordinaria participar en atrocidades? La psicologia social busco entender el poder de la presion grupal sobre la moral individual.\n2. Los Estudios de Asch: Solomon Asch diseno experimentos elegantes en los 1950s. Mostro que personas inteligentes negaban la evidencia de sus propios ojos cuando un grupo unanime decia lo contrario.\n3. El Shock de Milgram: Stanley Milgram llevo esto mas lejos con sus experimentos de obediencia. Revelo que la autoridad percibida podia hacer que personas normales administraran lo que creian eran descargas electricas peligrosas.\n\nEXPLANATION_STEPS:\n1. Definicion de Conformidad: La conformidad es el cambio de comportamiento o creencias para coincidir con un grupo. Puede ser externa (actuar igual) o interna (realmente creer lo que el grupo cree).\n2. Influencia Normativa: La influencia normativa surge del deseo de aceptacion social. Nos conformamos para evitar rechazo, incluso cuando sabemos que el grupo esta equivocado.\n3. Influencia Informacional: La influencia informacional surge cuando usamos al grupo como fuente de informacion. En situaciones ambiguas, asumimos que otros saben mas que nosotros.\n4. Obediencia a la Autoridad: La obediencia es conformidad hacia una autoridad. Difiere de la conformidad horizontal porque hay una jerarquia de poder explicita.\n5. Tipos de Normas: Las normas descriptivas describen lo que la gente hace. Las normas prescriptivas describen lo que deberia hacer. Ambas influyen el comportamiento de maneras diferentes.\n\nMECHANICS_STEPS:\n1. El Poder de la Unanimidad: La unanimidad amplifica la conformidad dramaticamente. Un solo disidente reduce la presion a conformarse — no necesitas mayoria, solo alguien que rompa el consenso.\n2. Proximidad y Autoridad: La proximidad de la autoridad aumenta la obediencia. En experimentos, la obediencia caia drasticamente cuando el experimentador daba ordenes por telefono en vez de en persona.\n3. Escalada de Compromiso: El compromiso gradual atrapa a las personas. Pequenas concesiones llevan a mayores — es mas facil decir 'no' al principio que despues de varios 'si'.\n4. Difusion de Responsabilidad: La difusion de responsabilidad ocurre en grupos. Cuando todos son responsables, nadie se siente responsable. Asignar roles especificos contrarresta este efecto.\n5. Desindividuacion: La desindividuacion en grupos reduce la autoconciencia. Anonimato mas excitacion grupal pueden llevar a comportamientos que el individuo solo nunca consideraria.\n\nEXAMPLES_STEPS:\n1. Dinamicas de Reunion: En reuniones de trabajo, el silencio ante una mala idea se interpreta como acuerdo. La primera persona que habla ancla la discusion, y los demas se conforman por temor a parecer diferentes.\n2. Cascadas en Redes: Las redes sociales amplifican la conformidad. Los 'likes' visibles crean cascadas — contenido popular se vuelve mas popular, no necesariamente porque sea mejor, sino porque otros ya lo aprobaron.\n3. Tendencias de Moda: La moda demuestra conformidad en accion. Tendencias se propagan porque vestirse diferente tiene costos sociales. La originalidad tiene limites definidos por el grupo.\n4. Efecto Espectador: En emergencias medicas, la difusion de responsabilidad hace que nadie actue. Cada persona espera que otro tome la iniciativa, resultando en inaccion colectiva."
    },
    {
      "duration": 68690.10762499998,
      "inputTokens": 2886,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A company offers employees a bonus: either a guaranteed $500 now or a 60% chance to win $1,000. Later, it offers a loss: either a sure $500 salary cut or a 60% chance of a $1,000 cut.\",\n      \"options\": [\n        {\n          \"feedback\": \"This fits expected value logic, but many people switch from risk‑averse in gains to risk‑seeking in losses because losses feel especially painful.\",\n          \"isCorrect\": false,\n          \"text\": \"People will be equally risk‑averse in both choices.\"\n        },\n        {\n          \"feedback\": \"This reverses typical patterns. People are usually more willing to gamble to avoid a loss than to chase a similar‑size gain.\",\n          \"isCorrect\": false,\n          \"text\": \"People are more risk‑seeking for gains than for losses.\"\n        },\n        {\n          \"feedback\": \"This ignores the loss/gain asymmetry. People react more strongly to losses than gains, shifting risk attitudes between the two cases.\",\n          \"isCorrect\": false,\n          \"text\": \"Risk attitudes won’t change between gain and loss.\"\n        },\n        {\n          \"feedback\": \"Loss aversion means people tend to avoid risk when it comes to gains, but accept more risk to avoid a loss of similar size.\",\n          \"isCorrect\": true,\n          \"text\": \"More risk‑averse for gains, more risk‑seeking for losses.\"\n        }\n      ],\n      \"question\": \"How do attitudes to risk shift?\"\n    },\n    {\n      \"context\": \"A charity email first asks, “Could you donate $200?” Then it says, “Even $20 helps.” Another email skips the first question and only asks for $20.\",\n      \"options\": [\n        {\n          \"feedback\": \"Anchoring is about the first number shaping later judgments. Here the initial $200 sets a high anchor that makes $20 feel smaller.\",\n          \"isCorrect\": true,\n          \"text\": \"The $200 request anchors people, making $20 feel small.\"\n        },\n        {\n          \"feedback\": \"There is no penalty or loss here. It’s the initial number, not endowment, that shapes perceptions.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s the endowment effect: people fear losing $200.\"\n        },\n        {\n          \"feedback\": \"Social proof would mention what others donate. The scenario doesn’t say anything about others’ behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s social proof: people copy others’ donations.\"\n        },\n        {\n          \"feedback\": \"Present bias is about now vs later rewards, not about relative size of asked amounts in one moment.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s present bias: people prefer spending now.\"\n        }\n      ],\n      \"question\": \"What bias is at work here?\"\n    },\n    {\n      \"context\": \"A savings app shows: “Save $5 a day” vs “Save $150 a month” for the same plan. More people enroll when they see the $5/day message.\",\n      \"options\": [\n        {\n          \"feedback\": \"Both describe the same amount, but the $5/day frame feels smaller and more manageable, changing how the option is perceived.\",\n          \"isCorrect\": true,\n          \"text\": \"It’s a framing effect on how the same cost feels.\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about losses vs gains, not about alternative descriptions of the same payment pattern.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s loss aversion about losing $150 each month.\"\n        },\n        {\n          \"feedback\": \"Anchoring is about an initial number affecting later estimates, not two simultaneous descriptions of one option.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s anchoring on the lower number, $5.\"\n        },\n        {\n          \"feedback\": \"Present bias involves now vs future benefits. Here the key is the description, not timing of rewards.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s present bias toward daily choices.\"\n        }\n      ],\n      \"question\": \"Why does $5/day work better?\"\n    },\n    {\n      \"context\": \"A city wants more residents to choose renewable energy. All plans stay available, but the default plan is switched from “standard” to “100% renewable,” which residents can change anytime.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is a classic default nudge: changing the pre‑selected option steers choices while preserving full freedom.\",\n          \"isCorrect\": true,\n          \"text\": \"A default‑based nudge in the choice architecture.\"\n        },\n        {\n          \"feedback\": \"No options are removed; people can still pick standard energy. So it doesn’t restrict freedom.\",\n          \"isCorrect\": false,\n          \"text\": \"A restriction that removes non‑green options.\"\n        },\n        {\n          \"feedback\": \"Social proof would highlight what most people choose, which isn’t mentioned here.\",\n          \"isCorrect\": false,\n          \"text\": \"A social proof message about popular choices.\"\n        },\n        {\n          \"feedback\": \"Commitment devices lock in future behavior; here people can switch anytime, so nothing is pre‑committed.\",\n          \"isCorrect\": false,\n          \"text\": \"A commitment device that locks in green choices.\"\n        }\n      ],\n      \"question\": \"What tool is the city using?\"\n    },\n    {\n      \"context\": \"A freelancer plans to save for taxes. Each month, they intend to move money into savings but usually spend it instead when payments arrive.\",\n      \"options\": [\n        {\n          \"feedback\": \"Loss aversion is about pain of losses, not about failing to follow through on long‑term plans when money arrives.\",\n          \"isCorrect\": false,\n          \"text\": \"Mainly loss aversion about giving money up.\"\n        },\n        {\n          \"feedback\": \"Present bias makes immediate spending feel more compelling than future tax needs, so they keep delaying saving.\",\n          \"isCorrect\": true,\n          \"text\": \"Present bias crowding out long‑term tax saving.\"\n        },\n        {\n          \"feedback\": \"Anchoring would be about an initial number shaping later estimates, which isn’t the issue here.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring on the first income amount each month.\"\n        },\n        {\n          \"feedback\": \"A framing effect would involve how the saving choice is described, which we don’t see here.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing the money as “extra” rather than tax.\"\n        }\n      ],\n      \"question\": \"What explains this behavior?\"\n    },\n    {\n      \"context\": \"To fix their tax problem, the freelancer sets up a system: 25% of each payment is automatically moved into a separate account the moment it arrives.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is a commitment device: they pre‑decide the wise action and automate it before in‑the‑moment temptations hit.\",\n          \"isCorrect\": true,\n          \"text\": \"A commitment device to pre‑commit to saving.\"\n        },\n        {\n          \"feedback\": \"A nudge tweaks the environment but doesn’t lock a rule in the same way. Here they bind themselves to a future action.\",\n          \"isCorrect\": false,\n          \"text\": \"Just a gentle nudge with no commitment.\"\n        },\n        {\n          \"feedback\": \"A default is typically set by the choice architect for everyone, not a custom rule the person imposes on themselves.\",\n          \"isCorrect\": false,\n          \"text\": \"Only a default; it’s not about commitment.\"\n        },\n        {\n          \"feedback\": \"Availability is about what examples come to mind; this is about structure, not memory of events.\",\n          \"isCorrect\": false,\n          \"text\": \"Making tax memories more available to mind.\"\n        }\n      ],\n      \"question\": \"What tool are they using now?\"\n    },\n    {\n      \"context\": \"A manager asks two teams to evaluate the same safety policy. One brief says it “prevents 10 injuries per year.” The other says it “reduces a 15‑injury risk to 5.”\",\n      \"options\": [\n        {\n          \"feedback\": \"It’s a framing effect: different descriptions of the same outcome can lead to different emotional responses and choices.\",\n          \"isCorrect\": true,\n          \"text\": \"The different descriptions create framing effects.\"\n        },\n        {\n          \"feedback\": \"Loss aversion needs losses vs gains; here the key is alternate wording, not just fear of loss.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s only loss aversion about injuries.\"\n        },\n        {\n          \"feedback\": \"Anchoring would rely on an initial number biasing later estimates, which isn’t central here.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s anchoring on the number 15 for risk.\"\n        },\n        {\n          \"feedback\": \"Present bias is about time (now vs later), which the scenario doesn’t emphasize.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s present bias about short‑term safety.\"\n        }\n      ],\n      \"question\": \"What may explain different reactions?\"\n    },\n    {\n      \"context\": \"A game show asks contestants to guess the number of jelly beans in a huge jar. Before guessing, they spin a wheel that stops on 40 or 80, which is clearly unrelated.\",\n      \"options\": [\n        {\n          \"feedback\": \"Anchoring: the random wheel number becomes a reference point, pulling people’s guesses toward 40 or 80.\",\n          \"isCorrect\": true,\n          \"text\": \"Anchoring on the random wheel number.\"\n        },\n        {\n          \"feedback\": \"Availability is about ease of recall, not random numbers on a wheel.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability: they recall similar sized jars.\"\n        },\n        {\n          \"feedback\": \"Present bias is about immediate vs delayed rewards, not numerical estimates.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias: they want to win quickly.\"\n        },\n        {\n          \"feedback\": \"Framing is about how the option is described, not about a prior irrelevant number.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing: the jar is framed as “huge.”\"\n        }\n      ],\n      \"question\": \"What shapes their guesses?\"\n    },\n    {\n      \"context\": \"A student chooses between studying for an important exam and watching a favorite show. They care about their future career but keep choosing the show night after night.\",\n      \"options\": [\n        {\n          \"feedback\": \"Present bias makes the immediate pleasure of the show outweigh the distant career benefit, even if they “know better.”\",\n          \"isCorrect\": true,\n          \"text\": \"Present bias favoring immediate entertainment.\"\n        },\n        {\n          \"feedback\": \"Anchoring concerns an initial reference number, not a conflict between now and later rewards.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring on their current low grade.\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about pain from losses; here it’s more about procrastination due to immediate temptations.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion about losing free time.\"\n        },\n        {\n          \"feedback\": \"Social proof would involve copying others; the scenario doesn’t mention peers’ behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof from friends also watching.\"\n        }\n      ],\n      \"question\": \"Which bias best fits?\"\n    },\n    {\n      \"context\": \"An app offers two ways to encourage walking: (A) show that “most users walk 8,000 steps a day,” or (B) silently set 8,000 steps as the default daily goal when users sign up.\",\n      \"options\": [\n        {\n          \"feedback\": \"Using what “most users” do is classic social proof, leveraging our tendency to follow the crowd.\",\n          \"isCorrect\": true,\n          \"text\": \"(A) is social proof using others’ behavior.\"\n        },\n        {\n          \"feedback\": \"The default goal mainly reflects default effects; the message about what most do is the real social proof.\",\n          \"isCorrect\": false,\n          \"text\": \"(B) is social proof via the default goal.\"\n        },\n        {\n          \"feedback\": \"Neither description frames equivalent outcomes differently, so framing isn’t central here.\",\n          \"isCorrect\": false,\n          \"text\": \"Both are framing effects, not social proof.\"\n        },\n        {\n          \"feedback\": \"Present bias is about time; these tools work mainly via norms (A) and defaults (B), not timing.\",\n          \"isCorrect\": false,\n          \"text\": \"Both mainly combat present bias only.\"\n        }\n      ],\n      \"question\": \"Which option uses social proof?\"\n    },\n    {\n      \"context\": \"A new investor holds a stock that has dropped 25%. They tell themselves, “It’s not a real loss until I sell,” and refuse to sell even when better opportunities appear.\",\n      \"options\": [\n        {\n          \"feedback\": \"Loss aversion makes realizing a loss feel very painful, so they avoid selling, even if it’s rational to move on.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion makes realized losses feel worse.\"\n        },\n        {\n          \"feedback\": \"Anchoring on the purchase price can matter, but the key here is the strong pain of locking in a loss.\",\n          \"isCorrect\": false,\n          \"text\": \"Mainly anchoring on the original price.\"\n        },\n        {\n          \"feedback\": \"Present bias is about time preferences, not reluctance to realize a financial loss.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias about wanting a quick rebound.\"\n        },\n        {\n          \"feedback\": \"Availability would be about recall of similar events; here it’s the emotional asymmetry of loss vs gain.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability of scary market crashes.\"\n        }\n      ],\n      \"question\": \"What keeps them from selling?\"\n    },\n    {\n      \"context\": \"A website wants more people to opt into two‑factor authentication for security. They keep all options the same but reorder settings so that two‑factor is first, highlighted, and pre‑checked.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is choice architecture: arranging order, salience, and default (pre‑checked) to steer choices without bans.\",\n          \"isCorrect\": true,\n          \"text\": \"Using choice architecture with a secure default.\"\n        },\n        {\n          \"feedback\": \"Commitment devices usually involve binding future actions, like contracts or auto‑deductions, not just layout.\",\n          \"isCorrect\": false,\n          \"text\": \"A commitment device forcing future logins.\"\n        },\n        {\n          \"feedback\": \"Present bias is about time; here the main lever is how options are structured on the page.\",\n          \"isCorrect\": false,\n          \"text\": \"Mainly present bias around convenience now.\"\n        },\n        {\n          \"feedback\": \"Loss aversion might make security threats scary, but nothing is framed as a loss here; structure does the work.\",\n          \"isCorrect\": false,\n          \"text\": \"Triggering loss aversion about hacking.\"\n        }\n      ],\n      \"question\": \"What strategy is being used?\"\n    },\n    {\n      \"context\": \"A traveler picks hotels by scanning online reviews. They judge risk of theft in a city mainly from one vivid story they read, ignoring crime statistics showing it’s rare.\",\n      \"options\": [\n        {\n          \"feedback\": \"Availability heuristic: the vivid story is easy to recall, so it seems more frequent than it really is.\",\n          \"isCorrect\": true,\n          \"text\": \"They rely on a vivid example that feels frequent.\"\n        },\n        {\n          \"feedback\": \"Anchoring would be about a number or initial value, not a memorable story.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring on the first hotel’s low rating.\"\n        },\n        {\n          \"feedback\": \"Framing concerns wording; here the key is ease of recall of one incident, not how options are described.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing: the review uses scary language.\"\n        },\n        {\n          \"feedback\": \"Present bias isn’t about probability judgments; it’s about now vs later rewards or costs.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias: they fear losing luggage now.\"\n        }\n      ],\n      \"question\": \"Which heuristic is at play?\"\n    },\n    {\n      \"context\": \"A saving app asks users to choose a retirement plan. One screen shows “Plan A: 90% chance of enough money.” Another version says “Plan A: 10% risk of running short.”\",\n      \"options\": [\n        {\n          \"feedback\": \"Same probabilities, but people react more strongly to “risk of running short” than “chance of enough” due to framing.\",\n          \"isCorrect\": true,\n          \"text\": \"Framing identical odds as success vs risk.\"\n        },\n        {\n          \"feedback\": \"Anchoring would involve an initial reference value; here it’s wording, not numbers, that shift feelings.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring people on the number 10.\"\n        },\n        {\n          \"feedback\": \"Loss aversion can amplify the fear of “risk,” but the core mechanism is the positive vs negative frame.\",\n          \"isCorrect\": false,\n          \"text\": \"Pure loss aversion with no framing effect.\"\n        },\n        {\n          \"feedback\": \"Availability is about recall of examples; the scenario doesn’t mention that.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability: they recall broke retirees.\"\n        }\n      ],\n      \"question\": \"Why might choices differ?\"\n    },\n    {\n      \"context\": \"During an online checkout, the box “Add purchase protection insurance” is pre‑checked. Customers can uncheck it with one click, but many leave it as is.\",\n      \"options\": [\n        {\n          \"feedback\": \"This is a default effect: the pre‑selected option becomes the path of least resistance, so many accept it.\",\n          \"isCorrect\": true,\n          \"text\": \"The default option nudges people to buy it.\"\n        },\n        {\n          \"feedback\": \"Social proof would tell them what others do; there’s no such message here.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof: they think most people add it.\"\n        },\n        {\n          \"feedback\": \"Present bias is about timing of costs/benefits; the key here is pre‑selection, not time preferences.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias: they fear loss right now.\"\n        },\n        {\n          \"feedback\": \"Commitment devices usually help stick to plans; this is a one‑time choice shaped by defaults.\",\n          \"isCorrect\": false,\n          \"text\": \"A commitment device to always buy insurance.\"\n        }\n      ],\n      \"question\": \"What explains the high uptake?\"\n    },\n    {\n      \"context\": \"A person answers a quick survey while distracted. The questions are simple, and they go with their gut. Later, a complex financial decision pops up, but they use the same quick style of thinking.\",\n      \"options\": [\n        {\n          \"feedback\": \"System 1 is fast and intuitive. It works fine for simple surveys but can be risky for complex financial choices.\",\n          \"isCorrect\": true,\n          \"text\": \"They’re relying on fast, intuitive System 1.\"\n        },\n        {\n          \"feedback\": \"System 2 would involve slow, careful analysis, which doesn’t match the distracted, “go with gut” behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re engaging slow, analytic System 2.\"\n        },\n        {\n          \"feedback\": \"Present bias is about time, not about which mental system (fast vs slow) is used.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias, not differences in thinking modes.\"\n        },\n        {\n          \"feedback\": \"Availability is about memory of examples, not speed/effort of thinking itself.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability of past financial mistakes.\"\n        }\n      ],\n      \"question\": \"Which system dominates here?\"\n    },\n    {\n      \"context\": \"Someone knows about their own present bias and lack of self‑control with online shopping. To limit future splurges, they ask their bank to lower their card limit and disable credit increases.\",\n      \"options\": [\n        {\n          \"feedback\": \"They’re voluntarily restricting future options to protect their long‑term interests — a classic commitment device.\",\n          \"isCorrect\": true,\n          \"text\": \"Using a commitment device to bind future self.\"\n        },\n        {\n          \"feedback\": \"A nudge keeps options open and just steers choices; reducing limits actually removes some future options.\",\n          \"isCorrect\": false,\n          \"text\": \"Just a soft nudge with no constraint.\"\n        },\n        {\n          \"feedback\": \"Social proof would involve what others do; this is self‑imposed, not norm‑based.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof: copying frugal friends.\"\n        },\n        {\n          \"feedback\": \"Framing is about wording. Here the main point is pre‑committing while fully lucid about their bias.\",\n          \"isCorrect\": false,\n          \"text\": \"A framing effect from how the bank labels limits.\"\n        }\n      ],\n      \"question\": \"What are they putting in place?\"\n    }\n  ]\n}",
      "outputTokens": 3653,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-interdisciplinary-behavioral-economics-1",
      "userPrompt": "LESSON_TITLE: Behavioral Economics Foundations\nLESSON_DESCRIPTION: Understanding how cognitive biases and heuristics systematically influence economic decisions, and how choice architecture can improve outcomes\nCHAPTER_TITLE: Decision Making\nCOURSE_TITLE: Behavioral Economics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Rationality Assumption: Classical economics assumed people are rational utility maximizers. But psychologists Daniel Kahneman and Amos Tversky documented systematic patterns where humans deviate from rationality in predictable ways.\n2. A Nobel-Winning Collision: Their research earned Kahneman the 2002 Nobel Prize in Economics — the first psychologist to win it. Behavioral economics was born from this collision of psychology and economic theory.\n3. From Theory to Practice: Richard Thaler expanded these insights into practical applications. His concept of 'nudging' showed how small changes in choice architecture could improve decisions without restricting freedom.\n\nEXPLANATION_STEPS:\n1. Loss Aversion: Loss aversion means losses hurt roughly twice as much as equivalent gains feel good. This asymmetry explains why people take irrational risks to avoid losses but not to achieve gains.\n2. Anchoring Bias: Anchoring occurs when we rely too heavily on the first piece of information encountered. An arbitrary initial number influences subsequent estimates, even when unrelated to the judgment.\n3. Present Bias: Present bias leads us to overweight immediate rewards compared to future ones. We know we should save for retirement, but the pleasure of spending now feels more real.\n4. Framing Effects: Framing effects mean how a choice is presented affects decisions. '90% survival rate' sounds better than '10% mortality rate' — identical information, different emotional response.\n5. Dual Systems: System 1 thinking is fast, automatic, and intuitive. System 2 is slow, deliberate, and analytical. Most decisions use System 1, which is efficient but prone to biases.\n\nMECHANICS_STEPS:\n1. Heuristics in Action: Heuristics are mental shortcuts that usually work but sometimes fail. Availability heuristic: judging probability by how easily examples come to mind, not actual frequency.\n2. Choice Architecture: Choice architecture structures how options are presented. The default, number of options, and order of presentation all influence which option people choose.\n3. Nudge Mechanics: Nudges are subtle changes that steer behavior without forbidding options. Putting healthy food at eye level in cafeterias is a nudge — junk food is still available but less convenient.\n4. Commitment Devices: Commitment devices help overcome present bias. Automatic savings deductions work because they make the rational future choice before present bias can override it.\n5. Social Proof Nudges: Social proof leverages conformity for behavior change. Telling hotel guests that 'most guests reuse towels' increases reuse more than environmental appeals alone.\n\nEXAMPLES_STEPS:\n1. Investment Behavior: Investors hold losing stocks too long and sell winners too early. Loss aversion makes the pain of realizing a loss feel worse than the pleasure of locking in a gain.\n2. Pricing Psychology: Stores price items at $9.99 instead of $10 because our brains anchor on the left digit. This 'left-digit bias' affects perception more than the actual penny saved.\n3. Gym Economics: Gym memberships exploit present bias — we overestimate future motivation when signing up, then fail to attend. The gym profits from our systematic overconfidence about future behavior.\n4. Default Effects: Default options are powerful. Countries with opt-out organ donation have 90%+ participation; opt-in countries have 15%. Same choice, different framing, vastly different outcomes."
    }
  ],
  "taskId": "activity-review"
}
