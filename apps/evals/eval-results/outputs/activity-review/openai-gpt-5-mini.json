{
  "generatedAt": "2026-01-17T21:28:01.589Z",
  "modelId": "openai/gpt-5-mini",
  "outputs": [
    {
      "duration": 71472.11054199998,
      "inputTokens": 2833,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A small e-commerce startup once lost product counts after a server crash mid-checkout, leaving inventory inconsistent and angry customers.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — grouping operations into one unit prevents those partial, inconsistent results that break trust.\",\n          \"isCorrect\": true,\n          \"text\": \"To avoid partial updates that leave data inconsistent\"\n        },\n        {\n          \"feedback\": \"Not quite — performance tuning is important, but it doesn't by itself stop partial or half-applied changes.\",\n          \"isCorrect\": false,\n          \"text\": \"To improve raw database performance\"\n        },\n        {\n          \"feedback\": \"Close but different — audit logs help trace events later, but they don't prevent inconsistent states during failures.\",\n          \"isCorrect\": false,\n          \"text\": \"To create an audit trail of every change\"\n        },\n        {\n          \"feedback\": \"No — a nicer UI helps users, but it won't guarantee multiple related updates complete together.\",\n          \"isCorrect\": false,\n          \"text\": \"To make the user interface simpler and friendlier\"\n        }\n      ],\n      \"question\": \"Why use grouped operations?\"\n    },\n    {\n      \"context\": \"A government registry must ensure records never violate legal rules, even if many updates happen at once.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — the point is to ensure each completed operation preserves system-wide rules and valid states.\",\n          \"isCorrect\": true,\n          \"text\": \"To guarantee database rules stay valid after each operation\"\n        },\n        {\n          \"feedback\": \"Not really — scaling is a separate challenge; consistency is about correctness, not capacity.\",\n          \"isCorrect\": false,\n          \"text\": \"To scale the system to more users easily\"\n        },\n        {\n          \"feedback\": \"Close but off-target — fixing UI bugs doesn't ensure the stored data follows business rules.\",\n          \"isCorrect\": false,\n          \"text\": \"To prevent user-interface bugs from appearing\"\n        },\n        {\n          \"feedback\": \"No — offline mode is about connectivity, not about automatically keeping data valid during updates.\",\n          \"isCorrect\": false,\n          \"text\": \"To enable offline operation without conflicts\"\n        }\n      ],\n      \"question\": \"What problem is solved?\"\n    },\n    {\n      \"context\": \"A developer proposes grouping related updates so they either all happen or none do, to avoid partial outcomes.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — that's the core insight: make related operations atomic so partial states can't occur.\",\n          \"isCorrect\": true,\n          \"text\": \"Ensuring the whole group either succeeds or is rolled back\"\n        },\n        {\n          \"feedback\": \"Not exactly — running operations faster doesn't prevent them from being only partially applied on failure.\",\n          \"isCorrect\": false,\n          \"text\": \"Speeding up each individual operation\"\n        },\n        {\n          \"feedback\": \"Close but different — grouping doesn't by itself handle concurrent interference between groups.\",\n          \"isCorrect\": false,\n          \"text\": \"Automatically serializing every operation regardless of need\"\n        },\n        {\n          \"feedback\": \"No — it doesn't primarily provide a human-readable log; that's a separate mechanism.\",\n          \"isCorrect\": false,\n          \"text\": \"Creating a plain-text history of actions for auditors\"\n        }\n      ],\n      \"question\": \"What's the key idea?\"\n    },\n    {\n      \"context\": \"An online ticket seller must reserve seats and charge a card. If charging succeeds but reservation fails, the buyer is billed without a seat.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — atomicity ensures both actions complete together or neither does, preventing that partial billing without reservation.\",\n          \"isCorrect\": true,\n          \"text\": \"All-or-nothing: both payment and reservation happen or neither\"\n        },\n        {\n          \"feedback\": \"Not quite — isolation is about concurrent visibility, not about grouping steps into one unit.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation: transactions run without seeing others' changes\"\n        },\n        {\n          \"feedback\": \"Close but different — durability ensures it stays after a crash, not that both actions happen together.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability: once committed, changes survive crashes\"\n        },\n        {\n          \"feedback\": \"No — consistency ensures rules hold, but it doesn't guarantee grouping multiple operations into one outcome.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency: data rules are preserved automatically\"\n        }\n      ],\n      \"question\": \"What does atomicity guarantee?\"\n    },\n    {\n      \"context\": \"A points system must never let a user's balance drop below zero. An update would violate that rule if not checked.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — consistency means the database moves from one valid state to another following defined rules like non-negative balances.\",\n          \"isCorrect\": true,\n          \"text\": \"Transactions preserve schema and business rules, keeping states valid\"\n        },\n        {\n          \"feedback\": \"Not exactly — atomicity is about complete-or-none, not about enforcing rules across states.\",\n          \"isCorrect\": false,\n          \"text\": \"Each transaction is guaranteed to be atomic\"\n        },\n        {\n          \"feedback\": \"Close, but isolation deals with concurrent visibility, not rule enforcement.\",\n          \"isCorrect\": false,\n          \"text\": \"Concurrent transactions can't see intermediate changes\"\n        },\n        {\n          \"feedback\": \"No — durability is about surviving crashes, not about preventing rule violations.\",\n          \"isCorrect\": false,\n          \"text\": \"Changes are never lost after commit (durability)\"\n        }\n      ],\n      \"question\": \"What's consistency?\"\n    },\n    {\n      \"context\": \"Two clerks update the same order at once in a busy system; one should not see half-finished work from the other.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — isolation makes each transaction behave as if it ran alone, avoiding interference from concurrent operations.\",\n          \"isCorrect\": true,\n          \"text\": \"Each transaction sees a consistent view as if running alone\"\n        },\n        {\n          \"feedback\": \"Not exactly — atomicity is about all-or-nothing, not isolation from others.\",\n          \"isCorrect\": false,\n          \"text\": \"Transactions always commit instantly without rollback\"\n        },\n        {\n          \"feedback\": \"Close but no — durability concerns crash survival, not concurrent visibility rules.\",\n          \"isCorrect\": false,\n          \"text\": \"All committed changes survive crashes reliably\"\n        },\n        {\n          \"feedback\": \"No — consistency enforces rules, but doesn't alone prevent seeing concurrent partial changes.\",\n          \"isCorrect\": false,\n          \"text\": \"Every update automatically satisfies business constraints\"\n        }\n      ],\n      \"question\": \"What's isolation about?\"\n    },\n    {\n      \"context\": \"After a sale commits, a power outage occurs. The team expects the sale to remain recorded.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — durability guarantees committed changes persist across crashes, typically via logging to durable storage.\",\n          \"isCorrect\": true,\n          \"text\": \"Once committed, changes survive crashes and won't be lost\"\n        },\n        {\n          \"feedback\": \"Not really — isolation is about concurrency, not surviving crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Other transactions can't see this change until later\"\n        },\n        {\n          \"feedback\": \"Close but off — atomicity prevents partial commits, but durability ensures persistence after commit.\",\n          \"isCorrect\": false,\n          \"text\": \"Transactions are all-or-nothing, so partial commits can't exist\"\n        },\n        {\n          \"feedback\": \"No — consistency enforces valid states, but doesn't promise persistence through failures.\",\n          \"isCorrect\": false,\n          \"text\": \"All database rules stay valid after each operation\"\n        }\n      ],\n      \"question\": \"What does durability guarantee?\"\n    },\n    {\n      \"context\": \"A marketplace considers using the strictest isolation to prevent any anomalies, but worries about slow response times.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — higher isolation like serializable reduces anomalies but costs throughput and latency; lower levels trade safety for speed.\",\n          \"isCorrect\": true,\n          \"text\": \"Higher isolation reduces anomalies but slows throughput; lower improves speed\"\n        },\n        {\n          \"feedback\": \"Not correct — isolation levels change correctness trade-offs, not just logging behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation affects only logging and recovery mechanisms\"\n        },\n        {\n          \"feedback\": \"Close, but the opposite — higher isolation doesn't speed things up, it typically slows them down.\",\n          \"isCorrect\": false,\n          \"text\": \"Higher isolation always improves performance\"\n        },\n        {\n          \"feedback\": \"No — isolation levels don't refer to backup frequency; they're about concurrent behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation levels determine how often backups run\"\n        }\n      ],\n      \"question\": \"What's the isolation tradeoff?\"\n    },\n    {\n      \"context\": \"Suppose transactions are atomic and durable, but business rules aren't enforced during updates.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — you can still end up with committed but invalid states if consistency rules are skipped.\",\n          \"isCorrect\": true,\n          \"text\": \"Committed data may violate business rules, producing invalid states\"\n        },\n        {\n          \"feedback\": \"Not quite — deadlocks relate to locking cycles, not missing rule checks.\",\n          \"isCorrect\": false,\n          \"text\": \"Deadlocks will be automatically prevented\"\n        },\n        {\n          \"feedback\": \"Close but wrong — isolation concerns concurrency anomalies, not missing constraint enforcement.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation will still ensure no concurrent anomalies occur\"\n        },\n        {\n          \"feedback\": \"No — performance isn't the core issue here; correctness is compromised.\",\n          \"isCorrect\": false,\n          \"text\": \"Only system performance will be affected\"\n        }\n      ],\n      \"question\": \"If consistency missing, then?\"\n    },\n    {\n      \"context\": \"A web app buffers changes locally until the user clicks 'Save'; other users can't see these edits yet.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — changes typically become visible to others only when the transaction is committed.\",\n          \"isCorrect\": true,\n          \"text\": \"Changes become visible to others when the transaction commits\"\n        },\n        {\n          \"feedback\": \"Not correct — BEGIN just starts a transaction but doesn't make buffered changes public.\",\n          \"isCorrect\": false,\n          \"text\": \"As soon as the transaction begins (BEGIN)\"\n        },\n        {\n          \"feedback\": \"No — visibility doesn't happen after the first statement; intermediate updates remain private until commit.\",\n          \"isCorrect\": false,\n          \"text\": \"After the first successful statement in the transaction\"\n        },\n        {\n          \"feedback\": \"Incorrect — automatic buffer flushes don't necessarily make changes visible without a commit.\",\n          \"isCorrect\": false,\n          \"text\": \"When the local buffer flushes to disk automatically\"\n        }\n      ],\n      \"question\": \"When are buffered changes visible?\"\n    },\n    {\n      \"context\": \"A crash happens while a multi-step update was half-applied, but a log of intended changes exists on disk.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — the log allows the system to replay or undo actions so the database reaches a consistent state after recovery.\",\n          \"isCorrect\": true,\n          \"text\": \"The log lets recovery replay or undo operations to restore consistency\"\n        },\n        {\n          \"feedback\": \"Not really — logs are about recovery correctness, not just auditing for humans.\",\n          \"isCorrect\": false,\n          \"text\": \"The log is only for auditors to inspect later\"\n        },\n        {\n          \"feedback\": \"No — write-ahead logs don't make changes visible earlier to other transactions by themselves.\",\n          \"isCorrect\": false,\n          \"text\": \"The log makes the changes immediately visible to other users\"\n        },\n        {\n          \"feedback\": \"Incorrect — logs don't prevent deadlocks; they help recovery from crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"The log eliminates the possibility of deadlocks\"\n        }\n      ],\n      \"question\": \"Why keep a write-ahead log?\"\n    },\n    {\n      \"context\": \"Two transactions each modify rows the other needs; both wait for the other to release locks.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — databases detect circular waits and abort one transaction to resolve the deadlock.\",\n          \"isCorrect\": true,\n          \"text\": \"The system detects the cycle and aborts one transaction to break it\"\n        },\n        {\n          \"feedback\": \"Not typically — letting them wait forever would hang the system and is avoided.\",\n          \"isCorrect\": false,\n          \"text\": \"Both transactions wait indefinitely until manual intervention\"\n        },\n        {\n          \"feedback\": \"Unlikely — restarting both could repeat the deadlock; aborting one is simpler and common.\",\n          \"isCorrect\": false,\n          \"text\": \"The database restarts both transactions automatically\"\n        },\n        {\n          \"feedback\": \"No — simply increasing timeouts doesn't solve circular waits reliably.\",\n          \"isCorrect\": false,\n          \"text\": \"The database increases lock timeouts until someone proceeds\"\n        }\n      ],\n      \"question\": \"How are deadlocks usually resolved?\"\n    },\n    {\n      \"context\": \"A user cancels an order mid-process; the system must erase interim changes so no partial data remains.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — rollback uses the log to undo each change in reverse order so no partial effects remain.\",\n          \"isCorrect\": true,\n          \"text\": \"Rollback reverses logged changes in the opposite order they were applied\"\n        },\n        {\n          \"feedback\": \"Not right — checkpoints snapshot state but rollback uses logs to undo recent actions.\",\n          \"isCorrect\": false,\n          \"text\": \"Rollback restores the last full checkpoint image\"\n        },\n        {\n          \"feedback\": \"No — rollback doesn't permanently lock rows; it reverts changes and frees locks.\",\n          \"isCorrect\": false,\n          \"text\": \"Rollback locks the rows forever to prevent reuse\"\n        },\n        {\n          \"feedback\": \"Incorrect — rollback doesn't delete rows physically beyond undoing their changes via logs.\",\n          \"isCorrect\": false,\n          \"text\": \"Rollback physically deletes modified rows from disk\"\n        }\n      ],\n      \"question\": \"How does rollback work?\"\n    },\n    {\n      \"context\": \"A multiplayer game charges a player then must decrement an item in inventory. Both must occur together to avoid cheating.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — atomicity is the main property ensuring both charge and inventory update happen as one unit.\",\n          \"isCorrect\": true,\n          \"text\": \"Atomicity: both payment and inventory change occur together\"\n        },\n        {\n          \"feedback\": \"Not exactly — isolation prevents seeing others' partial work, but doesn't guarantee both steps are grouped.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation: players can't see each other's in-progress changes\"\n        },\n        {\n          \"feedback\": \"Close but different — durability ensures the committed result sticks after crashes, not the grouping.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability: once saved, the purchase won't be lost after a crash\"\n        },\n        {\n          \"feedback\": \"No — consistency enforces rules like non-negative stock but doesn't alone ensure the two actions are atomic.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency: database rules like non-negative stock are maintained\"\n        }\n      ],\n      \"question\": \"Which property prevents split purchase?\"\n    },\n    {\n      \"context\": \"A seat-booking site must let many users search and reserve seats concurrently without double-booking.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — isolation and proper locking avoid two users seeing the same seat free and both booking it.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation (with locking) prevents concurrent double-booking\"\n        },\n        {\n          \"feedback\": \"Not quite — atomicity keeps single bookings whole but doesn't by itself prevent concurrent conflicts.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity alone prevents double-booking every time\"\n        },\n        {\n          \"feedback\": \"No — durability keeps bookings after crashes but doesn't stop two users booking the same seat concurrently.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability guarantees bookings survive crashes\"\n        },\n        {\n          \"feedback\": \"Incorrect — consistency enforces rules but doesn't manage concurrent access by itself.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency prevents rule violations like overbooking\"\n        }\n      ],\n      \"question\": \"What prevents double-booking?\"\n    },\n    {\n      \"context\": \"Two agents both see “one unit left” under a loose isolation level; both succeed in buying it, causing oversell.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — using too-low isolation allows visibility anomalies that can lead to overselling; stronger isolation avoids it.\",\n          \"isCorrect\": true,\n          \"text\": \"Insufficient isolation level allowed a concurrency anomaly (oversell)\"\n        },\n        {\n          \"feedback\": \"Not right — durability isn't the cause; it's about crash survival, not concurrent visibility.\",\n          \"isCorrect\": false,\n          \"text\": \"A lack of durability caused the oversell\"\n        },\n        {\n          \"feedback\": \"No — atomicity ensures each purchase is all-or-nothing, but doesn't prevent them from observing the same initial availability.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity failure caused both purchases to complete partially\"\n        },\n        {\n          \"feedback\": \"Incorrect — rollback only undoes a single transaction; it doesn't prevent the initial concurrent view causing oversell.\",\n          \"isCorrect\": false,\n          \"text\": \"An ineffective rollback process caused the problem\"\n        }\n      ],\n      \"question\": \"Why did oversell happen?\"\n    },\n    {\n      \"context\": \"A marketplace commits orders quickly for throughput but occasionally observes strange inventory mismatches after crashes and heavy concurrency.\",\n      \"options\": [\n        {\n          \"feedback\": \"Good — trading off isolation and strict checks for speed can let anomalies slip through under heavy concurrency and crashes.\",\n          \"isCorrect\": true,\n          \"text\": \"Using weaker isolation for speed can let rare anomalies and mismatches occur\"\n        },\n        {\n          \"feedback\": \"Not really — durability and logging still protect committed data from being lost after crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Speed trade-offs remove durability guarantees entirely\"\n        },\n        {\n          \"feedback\": \"Close but off — atomicity still applies per transaction; the issue is cross-transaction anomalies.\",\n          \"isCorrect\": false,\n          \"text\": \"It means transactions are no longer atomic individually\"\n        },\n        {\n          \"feedback\": \"No — deadlocks are about stalls, not occasional mismatches after concurrency and crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"This indicates a frequent deadlock problem\"\n        }\n      ],\n      \"question\": \"What's risk of prioritizing speed?\"\n    }\n  ]\n}",
      "outputTokens": 4777,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-cs-database-transactions-acid-1",
      "userPrompt": "LESSON_TITLE: Database Transactions and ACID\nLESSON_DESCRIPTION: Understanding database transactions and ACID properties for maintaining data integrity in concurrent systems\nCHAPTER_TITLE: Data Integrity\nCOURSE_TITLE: Database Systems\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Corruption Problem: Before databases had transactions, a power failure during a bank transfer could leave money in limbo — deducted from one account but never credited to another. Data inconsistency was the norm.\n2. Gray's Breakthrough: Jim Gray at IBM tackled this chaos in the 1970s. His insight: group related operations together and guarantee they either all succeed or all fail. No partial states allowed.\n3. The ACID Standard: The ACID properties emerged as the gold standard for reliable data operations. They transformed databases from fragile systems into ones businesses could trust with critical data.\n\nEXPLANATION_STEPS:\n1. Atomicity: Atomicity means 'all or nothing.' A transaction either completes entirely or has no effect at all. There's no partial completion — if any part fails, everything rolls back.\n2. Consistency: Consistency ensures transactions bring the database from one valid state to another. Rules defined in the schema (like account balance >= 0) are never violated.\n3. Isolation: Isolation means concurrent transactions don't interfere with each other. Each transaction sees a consistent snapshot, as if it were running alone.\n4. Durability: Durability guarantees that once a transaction commits, its changes survive system crashes. The database uses write-ahead logging to ensure committed data isn't lost.\n5. Isolation Levels: Isolation levels trade off between consistency and performance. Serializable is safest but slowest; Read Committed is faster but allows some anomalies.\n\nMECHANICS_STEPS:\n1. Transaction Lifecycle: A transaction begins with BEGIN, then executes statements. Changes are held in a buffer, invisible to other transactions until COMMIT makes them permanent.\n2. Write-Ahead Logging: Write-ahead logging records changes before applying them. If a crash occurs mid-transaction, the log allows the database to either complete or undo the changes during recovery.\n3. Locking Mechanisms: Locks prevent concurrent access conflicts. When a transaction modifies a row, it acquires an exclusive lock. Other transactions must wait until the lock releases.\n4. Deadlock Detection: Deadlocks occur when two transactions each hold a lock the other needs. The database detects this circular wait and aborts one transaction to break the cycle.\n5. Rollback Process: ROLLBACK undoes all changes made during the transaction. The database uses the log to reverse each operation in the opposite order it was applied.\n\nEXAMPLES_STEPS:\n1. Banking Transfers: Banking transfers are the classic example. Moving $100 from savings to checking must debit one and credit the other atomically — or neither should happen.\n2. E-commerce Orders: E-commerce checkout involves inventory reduction, payment processing, and order creation. All must succeed together, or the customer gets charged without receiving their product.\n3. Airline Reservations: Airline booking systems face extreme concurrency — thousands of users trying to book the same seats. Transactions prevent double-booking while maintaining performance.\n4. Social Media Posts: Social media platforms use transactions for complex operations like posting a photo with tags, location, and notifications — all must be recorded consistently."
    },
    {
      "duration": 63683.50016700002,
      "inputTokens": 2851,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A concert promoter considers charging steep prices to die-hard fans and cheap ones to casual listeners.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — charging different prices to different customers extracts more consumer surplus and raises profit.\",\n          \"isCorrect\": true,\n          \"text\": \"To capture more consumer surplus and raise profit\"\n        },\n        {\n          \"feedback\": \"Not quite — covering production costs isn't the main motivation for varying prices among buyers.\",\n          \"isCorrect\": false,\n          \"text\": \"To match prices to differing production costs\"\n        },\n        {\n          \"feedback\": \"Good goal but wrong here — fairness is rarely the firm's primary pricing motive.\",\n          \"isCorrect\": false,\n          \"text\": \"To make ticketing fair across income groups\"\n        },\n        {\n          \"feedback\": \"Not the main reason — discouraging competition is a different strategic aim.\",\n          \"isCorrect\": false,\n          \"text\": \"To prevent new competitors from entering the market\"\n        }\n      ],\n      \"question\": \"What's the firm's goal?\"\n    },\n    {\n      \"context\": \"An online shoe store uses browsing history to set individualized offers for each visitor.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — data helps estimate each buyer's willingness to pay, enabling tailored prices.\",\n          \"isCorrect\": true,\n          \"text\": \"Estimate individual willingness to pay for tailored prices\"\n        },\n        {\n          \"feedback\": \"No — data doesn't change how shoes are produced or their marginal cost.\",\n          \"isCorrect\": false,\n          \"text\": \"Reduce manufacturing or delivery costs\"\n        },\n        {\n          \"feedback\": \"Not accurate — data can help limit, but not eliminate, resale arbitrage.\",\n          \"isCorrect\": false,\n          \"text\": \"Completely eliminate chances of resale arbitrage\"\n        },\n        {\n          \"feedback\": \"Wrong direction — data is used to differentiate, not to make prices uniform.\",\n          \"isCorrect\": false,\n          \"text\": \"Make one universal price for all customers\"\n        }\n      ],\n      \"question\": \"What does the data allow?\"\n    },\n    {\n      \"context\": \"A small museum charges tourists a higher entry fee than locals even though supply costs are identical.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — it's the same product sold at different prices to different customers, not cost-based.\",\n          \"isCorrect\": true,\n          \"text\": \"Same good, different prices to extract more surplus\"\n        },\n        {\n          \"feedback\": \"No — if costs were driving prices, locals and tourists would face similar markups.\",\n          \"isCorrect\": false,\n          \"text\": \"Prices reflect higher service costs for tourists\"\n        },\n        {\n          \"feedback\": \"Not the main point — fairness isn't what defines the pricing practice.\",\n          \"isCorrect\": false,\n          \"text\": \"An attempt to be socially equitable across residents\"\n        },\n        {\n          \"feedback\": \"No — charging different prices isn't primarily about encouraging long-term use here.\",\n          \"isCorrect\": false,\n          \"text\": \"A loyalty program disguised as pricing\"\n        }\n      ],\n      \"question\": \"What pricing practice is this?\"\n    },\n    {\n      \"context\": \"At a used-car lot, each buyer negotiates individually and ends up paying a different amount.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — personalized bargaining aims to extract each buyer’s maximum willingness to pay.\",\n          \"isCorrect\": true,\n          \"text\": \"First-degree (personalized bargaining)\"\n        },\n        {\n          \"feedback\": \"No — selling versions or packages is second-degree, not haggling.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree (menus and self-selection)\"\n        },\n        {\n          \"feedback\": \"Not right — third-degree uses group segmentation, not individual haggling.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree (group-based prices)\"\n        },\n        {\n          \"feedback\": \"This describes bundling, which combines goods rather than haggling.\",\n          \"isCorrect\": false,\n          \"text\": \"Bundling strategy (package deals)\"\n        }\n      ],\n      \"question\": \"Which type is this?\"\n    },\n    {\n      \"context\": \"A video service offers Basic, Standard, and Premium tiers; users pick one based on needs.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — tiered options let customers self-select based on preferences and willingness to pay.\",\n          \"isCorrect\": true,\n          \"text\": \"Second-degree: menu pricing and self-selection\"\n        },\n        {\n          \"feedback\": \"No — first-degree would charge each viewer their exact maximum price.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree personalized pricing\"\n        },\n        {\n          \"feedback\": \"Not quite — third-degree would separate identifiable groups like students vs adults.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree group-based pricing\"\n        },\n        {\n          \"feedback\": \"This is about combining products, not tiered versions.\",\n          \"isCorrect\": false,\n          \"text\": \"A bundling approach across services\"\n        }\n      ],\n      \"question\": \"Which price strategy fits?\"\n    },\n    {\n      \"context\": \"A cinema sells student, adult, and senior tickets because these groups react differently to price.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — segmenting by groups with different price sensitivities is third-degree discrimination.\",\n          \"isCorrect\": true,\n          \"text\": \"Third-degree: group segmentation by elasticity\"\n        },\n        {\n          \"feedback\": \"No — second-degree is about self-selection menus, not predetermined groups.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree self-selection\"\n        },\n        {\n          \"feedback\": \"Wrong — first-degree would price each individual separately.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree individualized pricing\"\n        },\n        {\n          \"feedback\": \"This option confuses pricing with product cost differences, which isn't central here.\",\n          \"isCorrect\": false,\n          \"text\": \"Because different groups impose different service costs\"\n        }\n      ],\n      \"question\": \"What's the principle behind this pricing?\"\n    },\n    {\n      \"context\": \"A waterfront parking lot barely loses customers after a big fee hike.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — when demand barely changes with price, demand is inelastic and higher prices raise revenue.\",\n          \"isCorrect\": true,\n          \"text\": \"Demand is inelastic; raise prices to increase revenue\"\n        },\n        {\n          \"feedback\": \"No — if demand were elastic, raising price would lose revenue.\",\n          \"isCorrect\": false,\n          \"text\": \"Demand is elastic; they should lower prices\"\n        },\n        {\n          \"feedback\": \"Not directly — bundling may help, but elasticity explains the result.\",\n          \"isCorrect\": false,\n          \"text\": \"They should bundle parking with other services\"\n        },\n        {\n          \"feedback\": \"Not the main lesson — the change in quantity sold matters for revenue decisions.\",\n          \"isCorrect\": false,\n          \"text\": \"Supply constraints caused the stable bookings\"\n        }\n      ],\n      \"question\": \"What explains this outcome?\"\n    },\n    {\n      \"context\": \"A digital textbook vendor wants students to get low prices but prevent resale of PDFs to professionals.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — technical controls and verification prevent low-price copies from being resold to higher-paying buyers.\",\n          \"isCorrect\": true,\n          \"text\": \"Use DRM and access controls to stop arbitrage\"\n        },\n        {\n          \"feedback\": \"Discounting more won't stop resale — resellers could still repost copies.\",\n          \"isCorrect\": false,\n          \"text\": \"Lower all prices so resale no longer profits\"\n        },\n        {\n          \"feedback\": \"Creating many versions helps segmentation but doesn't stop copying on its own.\",\n          \"isCorrect\": false,\n          \"text\": \"Offer multiple file formats to confuse resellers\"\n        },\n        {\n          \"feedback\": \"Refund policies don't prevent resale of digital copies.\",\n          \"isCorrect\": false,\n          \"text\": \"Provide generous refunds to discouraged resellers\"\n        }\n      ],\n      \"question\": \"How limit resale arbitrage?\"\n    },\n    {\n      \"context\": \"A commuter train offers morning express passes and cheap off-peak fares; they're tracking when customers travel.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — timing and usage reveal who values speed over price, signaling willingness to pay.\",\n          \"isCorrect\": true,\n          \"text\": \"Time-of-use signals willingness to pay and price sensitivity\"\n        },\n        {\n          \"feedback\": \"No — brand preference isn't what's being measured by travel time choices.\",\n          \"isCorrect\": false,\n          \"text\": \"Measuring brand loyalty among riders\"\n        },\n        {\n          \"feedback\": \"Supply-side costs don't vary much by time here, so that's not the reason.\",\n          \"isCorrect\": false,\n          \"text\": \"Higher operational costs during peak times explain prices\"\n        },\n        {\n          \"feedback\": \"Product quality is constant; it's customers' schedules that differ.\",\n          \"isCorrect\": false,\n          \"text\": \"Different physical service quality across times\"\n        }\n      ],\n      \"question\": \"What signal are they using?\"\n    },\n    {\n      \"context\": \"A café sells a $2 black coffee and a $6 specialty latte; many customers choose the latte.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — the basic option makes the premium look valuable and lets price-sensitive people choose cheaper items.\",\n          \"isCorrect\": true,\n          \"text\": \"Basic option makes premium attractive and enables self-selection\"\n        },\n        {\n          \"feedback\": \"No — the basic item isn't mainly to reduce costs; it's strategic pricing.\",\n          \"isCorrect\": false,\n          \"text\": \"To cut the café’s ingredient costs overall\"\n        },\n        {\n          \"feedback\": \"Confusing customers is risky; firms use basic versions to clarify choices, not confuse.\",\n          \"isCorrect\": false,\n          \"text\": \"To intentionally confuse customers into buying costly items\"\n        },\n        {\n          \"feedback\": \"Targeting only elites wouldn't explain offering a cheap basic alternative.\",\n          \"isCorrect\": false,\n          \"text\": \"To target only high-paying customers\"\n        }\n      ],\n      \"question\": \"Why offer a cheap basic option?\"\n    },\n    {\n      \"context\": \"A delivery app raises prices during a blizzard when many users request rides.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — dynamic pricing algorithms raise prices in response to high real-time demand signals.\",\n          \"isCorrect\": true,\n          \"text\": \"Algorithmic dynamic pricing reacting to high demand\"\n        },\n        {\n          \"feedback\": \"No — production costs don't spike just because demand rises for rides.\",\n          \"isCorrect\": false,\n          \"text\": \"Because drivers’ costs suddenly increased\"\n        },\n        {\n          \"feedback\": \"Competitor prices may matter, but the rapid surge is demand-driven.\",\n          \"isCorrect\": false,\n          \"text\": \"Only to match competitors’ fares in storms\"\n        },\n        {\n          \"feedback\": \"Regulations might limit changes, but the mechanism is demand-responsive algorithms.\",\n          \"isCorrect\": false,\n          \"text\": \"Because of new regulatory requirements\"\n        }\n      ],\n      \"question\": \"What's driving the higher fares?\"\n    },\n    {\n      \"context\": \"A suite sells three apps together cheaper than separately to households with varied needs.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — bundling captures more of different customers' total willingness to pay across products.\",\n          \"isCorrect\": true,\n          \"text\": \"Bundle to extract more total willingness to pay from varied users\"\n        },\n        {\n          \"feedback\": \"No — bundling isn't primarily about lowering development costs.\",\n          \"isCorrect\": false,\n          \"text\": \"To significantly reduce development costs\"\n        },\n        {\n          \"feedback\": \"Bundling can increase adoption, but the pricing motive is extracting surplus.\",\n          \"isCorrect\": false,\n          \"text\": \"To force users to try every feature\"\n        },\n        {\n          \"feedback\": \"Resale value isn't the central idea behind bundling for profit extraction.\",\n          \"isCorrect\": false,\n          \"text\": \"To increase the product's resale market price\"\n        }\n      ],\n      \"question\": \"Why bundle these apps?\"\n    },\n    {\n      \"context\": \"A restaurant offers buffet for $15 and à la carte for $30; customers self-select based on appetite.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — menu options differing by usage reveal willingness to pay, classic second-degree discrimination.\",\n          \"isCorrect\": true,\n          \"text\": \"Second-degree: menu lets customers self-select by usage\"\n        },\n        {\n          \"feedback\": \"No — group segmentation would set prices by identifiable groups, not consumption level.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree by customer group characteristics\"\n        },\n        {\n          \"feedback\": \"Not individualized enough for first-degree pricing, which would charge each diner differently.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree individualized pricing\"\n        },\n        {\n          \"feedback\": \"Bundling is combining products; buffet vs à la carte is about menu design, not bundling.\",\n          \"isCorrect\": false,\n          \"text\": \"A bundling strategy\"\n        }\n      ],\n      \"question\": \"Which discrimination type is buffet vs à la carte?\"\n    },\n    {\n      \"context\": \"An online antique seller runs auctions where each buyer bids different amounts for the same vase.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — auctions let sellers approach each buyer's maximum willingness to pay, approximating first-degree pricing.\",\n          \"isCorrect\": true,\n          \"text\": \"First-degree approximation via individualized bids\"\n        },\n        {\n          \"feedback\": \"No — offering fixed versions would be second-degree, not auctions.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree menu pricing\"\n        },\n        {\n          \"feedback\": \"Third-degree would price based on identifiable group categories, not bids.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree group-based pricing\"\n        },\n        {\n          \"feedback\": \"Bundles combine items; an auction sells one item to the highest bidder.\",\n          \"isCorrect\": false,\n          \"text\": \"Bundling multiple antiques together\"\n        }\n      ],\n      \"question\": \"What pricing is the auction like?\"\n    },\n    {\n      \"context\": \"A festival uses transferable wristbands; some buyers resell cheap student bands to high-paying visitors.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — resale (arbitrage) undermines group pricing because low-price buyers can sell to high-price ones.\",\n          \"isCorrect\": true,\n          \"text\": \"Resale/arbitrage undermines segment-specific pricing\"\n        },\n        {\n          \"feedback\": \"No — cost differences aren't the core barrier here; resale is the issue.\",\n          \"isCorrect\": false,\n          \"text\": \"High production costs prevent effective segmentation\"\n        },\n        {\n          \"feedback\": \"Offering multiple versions doesn't stop resale of transferable bands.\",\n          \"isCorrect\": false,\n          \"text\": \"Adding more ticket tiers will solve the problem\"\n        },\n        {\n          \"feedback\": \"Lowering prices everywhere would remove segmentation benefits but isn't the central obstacle.\",\n          \"isCorrect\": false,\n          \"text\": \"Lowering all prices eliminates the arbitrage incentive\"\n        }\n      ],\n      \"question\": \"What's the main problem for targeting prices?\"\n    },\n    {\n      \"context\": \"A software firm gives heavy student discounts verified by university email and restricts business features in that edition.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — combining eligibility signals and product restrictions prevents resale and ensures the discount reaches the intended group.\",\n          \"isCorrect\": true,\n          \"text\": \"Use verification plus feature-limited versions to target discounts\"\n        },\n        {\n          \"feedback\": \"No — simply cutting price without checks would let students resell licenses to firms.\",\n          \"isCorrect\": false,\n          \"text\": \"Just lower the student price without restrictions\"\n        },\n        {\n          \"feedback\": \"Bundling unrelated apps doesn't verify student status or stop resale.\",\n          \"isCorrect\": false,\n          \"text\": \"Bundle extra apps to make student offers appealing\"\n        },\n        {\n          \"feedback\": \"Generous refunds won't stop students selling licenses to higher-paying buyers.\",\n          \"isCorrect\": false,\n          \"text\": \"Offer long refund windows for student purchases\"\n        }\n      ],\n      \"question\": \"How enforce student pricing?\"\n    },\n    {\n      \"context\": \"A college bookstore raises textbook prices and total revenue falls sharply.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — large drops in sales after a price hike indicate elastic demand; revenue falls when price rise reduces quantity a lot.\",\n          \"isCorrect\": true,\n          \"text\": \"Demand is elastic; the price rise reduced revenue\"\n        },\n        {\n          \"feedback\": \"No — if demand were inelastic, revenue would have increased after the hike.\",\n          \"isCorrect\": false,\n          \"text\": \"Demand is inelastic; revenue should have risen\"\n        },\n        {\n          \"feedback\": \"Arbitrage might play a role but can't explain a big immediate drop in local sales.\",\n          \"isCorrect\": false,\n          \"text\": \"Resale arbitrage caused the revenue fall\"\n        },\n        {\n          \"feedback\": \"Bundling unrelated products wouldn’t explain the immediate response in textbook sales.\",\n          \"isCorrect\": false,\n          \"text\": \"They need to bundle textbooks with other goods\"\n        }\n      ],\n      \"question\": \"What should they infer?\"\n    },\n    {\n      \"context\": \"A boutique plans to offer personalized discounts but must decide if it's worth the cost of tracking customer behavior.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly — the core trade-off is whether extra revenue from personalized prices exceeds data and enforcement costs.\",\n          \"isCorrect\": true,\n          \"text\": \"Weigh extra revenue against data collection and enforcement costs\"\n        },\n        {\n          \"feedback\": \"Only legal risk isn't the full picture; costs versus benefits determine feasibility.\",\n          \"isCorrect\": false,\n          \"text\": \"Just avoid legal risks; that's the main decision\"\n        },\n        {\n          \"feedback\": \"Competitor reactions matter, but the immediate trade-off is internal costs and gains.\",\n          \"isCorrect\": false,\n          \"text\": \"Assume competitors will match prices automatically\"\n        },\n        {\n          \"feedback\": \"Production expenses are separate; personalization focuses on pricing, not manufacturing.\",\n          \"isCorrect\": false,\n          \"text\": \"Cut production costs to fund personalization\"\n        }\n      ],\n      \"question\": \"What's the key trade-off?\"\n    }\n  ]\n}",
      "outputTokens": 4211,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-economics-price-discrimination-1",
      "userPrompt": "LESSON_TITLE: Price Discrimination Strategies\nLESSON_DESCRIPTION: Understanding how firms use price discrimination to maximize profits by charging different prices to different customer segments\nCHAPTER_TITLE: Pricing Strategy\nCOURSE_TITLE: Microeconomics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Pricing Puzzle: Why do seniors get discounts while business travelers pay premium? Why does software cost different amounts in different countries? Economists discovered the logic behind seemingly arbitrary pricing.\n2. Pigou's Insight: Arthur Pigou formalized price discrimination theory in the 1920s. He showed that charging different prices to different customers could actually be economically efficient under certain conditions.\n3. The Data Revolution: The rise of big data transformed price discrimination from crude segmentation to personalized pricing. Every click, purchase, and search helps companies estimate your willingness to pay.\n\nEXPLANATION_STEPS:\n1. Definition: Price discrimination means charging different prices for the same product to different customers. It's not about cost differences — it's about extracting more consumer surplus.\n2. First-Degree: First-degree discrimination charges each customer their maximum willingness to pay. It's theoretically perfect but practically impossible without mind-reading. Haggling approximates it.\n3. Second-Degree: Second-degree discrimination offers different versions at different prices. Customers self-select based on their preferences — like choosing between economy and business class.\n4. Third-Degree: Third-degree discrimination segments customers into groups with different elasticities. Charge more to inelastic groups (business travelers), less to elastic groups (tourists).\n5. Elasticity Connection: Price elasticity of demand determines pricing power. If demand barely changes with price (inelastic), firms can charge more. If demand is sensitive (elastic), prices must stay low.\n\nMECHANICS_STEPS:\n1. Preventing Arbitrage: To price discriminate, a firm must prevent arbitrage — customers who get the low price reselling to those who'd pay more. Physical services naturally prevent this; digital goods require DRM.\n2. Segmentation Signals: Market segmentation identifies groups with different price sensitivities. Age, location, purchase timing, and usage patterns all signal willingness to pay.\n3. Menu Design: Menu pricing creates product versions that appeal to different segments. The 'basic' version exists partly to make the 'premium' version look valuable by comparison.\n4. Dynamic Adjustment: Dynamic pricing adjusts prices in real-time based on demand signals. High demand triggers price increases; low demand triggers discounts. Algorithms optimize continuously.\n5. Bundling Strategy: Bundling combines products to extract more surplus. Cable TV bundles make you pay for channels you don't want because the package captures more total willingness to pay.\n\nEXAMPLES_STEPS:\n1. Airline Pricing: Airlines are masters of price discrimination. The same seat costs $200 or $2000 depending on when you book, whether you stay Saturday, and if you're flying for business or leisure.\n2. Movie Tickets: Movie theaters charge different prices for matinees, seniors, and students. They're segmenting customers by time flexibility and price sensitivity.\n3. Educational Discounts: Academic software discounts are dramatic — students might pay $50 for software that costs businesses $500. The assumption: students can't afford full price but will become paying customers later.\n4. Happy Hour Economics: Happy hour pricing segments customers by time availability. Those who can drink at 4pm are often more price-sensitive than the 8pm crowd willing to pay full price."
    },
    {
      "duration": 71102.16991699996,
      "inputTokens": 3047,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Você tenta projetar uma máquina térmica ideal que converta todo calor de uma fonte quente em trabalho sem perdas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo — a segunda lei impede conversões completas: sempre há aumento líquido de entropia que exige descarte de calor.\",\n          \"isCorrect\": true,\n          \"text\": \"É impossível devido ao aumento de entropia\"\n        },\n        {\n          \"feedback\": \"Quase, mas a conservação de energia (primeira lei) só exige balanço; o problema é a direção dos fluxos (segunda lei).\",\n          \"isCorrect\": false,\n          \"text\": \"Porque energia não pode ser criada\"\n        },\n        {\n          \"feedback\": \"Atrito causa perdas reais, mas mesmo sem atrito não se alcança 100% por restrições termodinâmicas.\",\n          \"isCorrect\": false,\n          \"text\": \"Por perdas como atrito e resistência\"\n        },\n        {\n          \"feedback\": \"Materiais limitam performance prática, mas a barreira fundamental é termodinâmica, não só materiais.\",\n          \"isCorrect\": false,\n          \"text\": \"Por limitações dos materiais usados\"\n        }\n      ],\n      \"question\": \"Por que não há máquina perfeita?\"\n    },\n    {\n      \"context\": \"Você observa uma xícara de café quente esfriando numa cozinha fria sem ninguém mexer nela.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo — calor flui espontaneamente do quente para o frio, aumentando a entropia total.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque calor flui naturalmente do quente ao frio\"\n        },\n        {\n          \"feedback\": \"A energia total se conserva, mas isso não impede a direção do fluxo; logo, não é só a primeira lei.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a energia se perde durante o processo\"\n        },\n        {\n          \"feedback\": \"Isolamento impediria, mas o fato fundamental é a direção espontânea do fluxo térmico.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque não há isolamento suficiente\"\n        },\n        {\n          \"feedback\": \"Equilíbrio térmico é o estado final, não a razão inicial do fluxo; a direção é ditada pela entropia.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque os sistemas tendem ao equilíbrio imediato\"\n        }\n      ],\n      \"question\": \"Por que o café esfria?\"\n    },\n    {\n      \"context\": \"Alguém afirma que uma nova descoberta vai seguramente derrubar toda a termodinâmica clássica.\",\n      \"options\": [\n        {\n          \"feedback\": \"Boa intuição: a termodinâmica é extremamente robusta, baseada em princípios estatísticos e observações macroscópicas.\",\n          \"isCorrect\": true,\n          \"text\": \"Muito improvável — é uma teoria extremamente robusta\"\n        },\n        {\n          \"feedback\": \"Não: as leis termodinâmicas não são derivadas apenas de leis microscópicas fracas; são muito confirmadas.\",\n          \"isCorrect\": false,\n          \"text\": \"Sim, porque elas são apenas aproximações antigas\"\n        },\n        {\n          \"feedback\": \"A termodinâmica lida com probabilidades e macroscopia, então resultados práticos já a confirmam amplamente.\",\n          \"isCorrect\": false,\n          \"text\": \"Só em situações quânticas muito exóticas\"\n        },\n        {\n          \"feedback\": \"Descobertas podem ampliar entendimentos, mas derrubar inteiramente as leis é inconsistente com evidências.\",\n          \"isCorrect\": false,\n          \"text\": \"Acontece frequentemente na física moderna\"\n        }\n      ],\n      \"question\": \"A termodinâmica pode ser refutada?\"\n    },\n    {\n      \"context\": \"Você precisa justificar a importância de estudar limites de eficiência ao propor uma planta de energia.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato — conhecer limites evita expectativas irreais e orienta otimizações práticas dentro das restrições físicas.\",\n          \"isCorrect\": true,\n          \"text\": \"Mostra limites reais e orienta otimização prática\"\n        },\n        {\n          \"feedback\": \"Saber as leis não gera energia grátis; mas o foco é além de questões apenas políticas ou econômicas.\",\n          \"isCorrect\": false,\n          \"text\": \"Serve só para debates econômicos e políticos\"\n        },\n        {\n          \"feedback\": \"Leis não proíbem inovação, mas não são apenas teoremas sem aplicação; elas guiam engenharia real.\",\n          \"isCorrect\": false,\n          \"text\": \"É mais filosofia que engenharia prática\"\n        },\n        {\n          \"feedback\": \"Estudar limites não supre a necessidade de mais combustíveis; é sobre eficiência, não recursos.\",\n          \"isCorrect\": false,\n          \"text\": \"Ajuda a encontrar mais combustível disponível\"\n        }\n      ],\n      \"question\": \"Por que estudar eficiência?\"\n    },\n    {\n      \"context\": \"Um paciente coloca um aquecedor elétrico e uma bateria grande ao lado de um recipiente; o sistema é fechado e isolado.\",\n      \"options\": [\n        {\n          \"feedback\": \"Boa — a energia total do sistema permanece constante; calor e trabalho só se transformam entre formas.\",\n          \"isCorrect\": true,\n          \"text\": \"Energia total do sistema se conserva sempre\"\n        },\n        {\n          \"feedback\": \"Entropia geralmente aumenta; não é necessariamente conservada em processos irreversíveis.\",\n          \"isCorrect\": false,\n          \"text\": \"Entropia sempre se conserva também\"\n        },\n        {\n          \"feedback\": \"Temperatura pode mudar; conservação de energia não implica temperatura constante.\",\n          \"isCorrect\": false,\n          \"text\": \"Temperatura do sistema fica fixa\"\n        },\n        {\n          \"feedback\": \"Calor pode aparecer ou sumir localmente, mas sempre há balanço de energia global.\",\n          \"isCorrect\": false,\n          \"text\": \"Calor pode ser criado sem fonte externa\"\n        }\n      ],\n      \"question\": \"O que vale sempre?\"\n    },\n    {\n      \"context\": \"Dois recipientes com gases diferentes são misturados e o número de microestados possíveis cresce muito.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato — entropia mede a dispersão da energia entre microestados e a probabilidade de configurações.\",\n          \"isCorrect\": true,\n          \"text\": \"Medida da dispersão de energia entre microestados\"\n        },\n        {\n          \"feedback\": \"\\\"Desordem\\\" é uma metáfora vaga; melhor dizer que é sobre probabilidade e distribuição de energia.\",\n          \"isCorrect\": false,\n          \"text\": \"Medida direta da desordem bagunçada\"\n        },\n        {\n          \"feedback\": \"Energia livre disponível diminui em muitos processos, mas entropia não é igual à energia não disponível.\",\n          \"isCorrect\": false,\n          \"text\": \"Quantidade de energia não utilizável apenas\"\n        },\n        {\n          \"feedback\": \"Temperatura não é entropia; são conceitos distintos relacionados mas diferentes.\",\n          \"isCorrect\": false,\n          \"text\": \"A média de energia cinética das moléculas\"\n        }\n      ],\n      \"question\": \"O que a entropia mede?\"\n    },\n    {\n      \"context\": \"Dois blocos: um muito grande e frio, outro pequeno e quente, são colocados em contato térmico.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo — o fluxo de calor é determinado pela diferença de temperatura, não pela quantidade total de energia.\",\n          \"isCorrect\": true,\n          \"text\": \"Temperatura direciona o fluxo de calor\"\n        },\n        {\n          \"feedback\": \"A massa afeta quanto calor é trocado, mas não a direção espontânea do fluxo.\",\n          \"isCorrect\": false,\n          \"text\": \"A quantidade total de calor determina a direção\"\n        },\n        {\n          \"feedback\": \"Entropia influencia probabilidades, mas a direção imediata é temperatura para temperatura.\",\n          \"isCorrect\": false,\n          \"text\": \"A entropia local decide o sentido do fluxo\"\n        },\n        {\n          \"feedback\": \"Capacidade calorífica muda a velocidade, não a direção; a direção é sempre do mais quente ao mais frio.\",\n          \"isCorrect\": false,\n          \"text\": \"A maior massa sempre perde calor\"\n        }\n      ],\n      \"question\": \"O que determina a direção do calor?\"\n    },\n    {\n      \"context\": \"Duas caixas em contato trocam energia até pararem de trocar calor líquido; porém suas energias internas são diferentes.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato — equilíbrio térmico significa mesma temperatura; energias internas podem diferir por tamanhos ou materiais.\",\n          \"isCorrect\": true,\n          \"text\": \"Elas têm a mesma temperatura, não necessariamente mesma energia\"\n        },\n        {\n          \"feedback\": \"Se tivessem mesma energia, seriam iguais apenas em casos especiais de capacidades térmicas iguais.\",\n          \"isCorrect\": false,\n          \"text\": \"Significa mesma energia interna sempre\"\n        },\n        {\n          \"feedback\": \"Entropia pode estar em máximo global, mas o critério imediato é equipamento igual de temperatura.\",\n          \"isCorrect\": false,\n          \"text\": \"Significa entropia total mínima\"\n        },\n        {\n          \"feedback\": \"Parar de trocar calor não garante ausência de outras trocas (partículas, trabalho), mas temperatura igual é chave.\",\n          \"isCorrect\": false,\n          \"text\": \"Significa que não há diferenças microscópicas\"\n        }\n      ],\n      \"question\": \"O que é equilíbrio térmico?\"\n    },\n    {\n      \"context\": \"Você sente o calor do sol numa nave espacial fora da atmosfera e percebe que não há ar para mover.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito — no vácuo, a transferência dominante é por radiação eletromagnética.\",\n          \"isCorrect\": true,\n          \"text\": \"Radiação domina sem ar presente\"\n        },\n        {\n          \"feedback\": \"Convecção exige fluido; no espaço não há massa de ar para transportar calor.\",\n          \"isCorrect\": false,\n          \"text\": \"Convecção seria dominante aqui\"\n        },\n        {\n          \"feedback\": \"Condução requer meio sólido conectando corpos; no espaço vazio isso falha.\",\n          \"isCorrect\": false,\n          \"text\": \"Condução é o principal mecanismo no vácuo\"\n        },\n        {\n          \"feedback\": \"Uma mistura de condução e convecção aconteceria, mas radiação domina claramente no espaço.\",\n          \"isCorrect\": false,\n          \"text\": \"Condução e convecção juntos dominam\"\n        }\n      ],\n      \"question\": \"Qual mecanismo domina no espaço?\"\n    },\n    {\n      \"context\": \"Um motor opera entre fontes a 500 K e 300 K; quer melhorar eficiência sem mudar combustível.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato — aumentar a temperatura quente ou reduzir a fria melhora a eficiência de Carnot.\",\n          \"isCorrect\": true,\n          \"text\": \"Aumentar Th ou reduzir Tc aumenta eficiência\"\n        },\n        {\n          \"feedback\": \"Apenas aumentar ambas temperaturas nem sempre aumenta eficiência; depende da razão Tc/Th.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumentar ambas as temperaturas melhora sempre\"\n        },\n        {\n          \"feedback\": \"Diminuir Th reduziria eficiência; elevar Tc é o contrário do que precisa.\",\n          \"isCorrect\": false,\n          \"text\": \"Diminuir Th para reduzir perdas\"\n        },\n        {\n          \"feedback\": \"Mudar apenas o combustível sem alterar temperaturas não muda o limite de Carnot.\",\n          \"isCorrect\": false,\n          \"text\": \"Mudar combustível sempre aumenta eficiência máxima\"\n        }\n      ],\n      \"question\": \"Como melhorar eficiência de Carnot?\"\n    },\n    {\n      \"context\": \"Você tenta recuperar todo o calor rejeitado por um motor para transformá‑lo em trabalho extra.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo — a segunda lei exige descarte de parte do calor; tentar convertê‑lo todo violaria o aumento de entropia.\",\n          \"isCorrect\": true,\n          \"text\": \"Não é possível por causa da segunda lei (entropia)\"\n        },\n        {\n          \"feedback\": \"A conservação de energia não impede recaptura parcial, mas a direção espontânea dificulta conversão total.\",\n          \"isCorrect\": false,\n          \"text\": \"A primeira lei proíbe recuperar qualquer calor\"\n        },\n        {\n          \"feedback\": \"Perdas mecânicas existem, mas mesmo sem elas a limitação termodinâmica permanece.\",\n          \"isCorrect\": false,\n          \"text\": \"Só por perdas mecânicas reais, não por lei física\"\n        },\n        {\n          \"feedback\": \"Materiais podem limitar recuperação, mas o limite fundamental é termodinâmico, não só material.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque materiais não suportam altas temperaturas\"\n        }\n      ],\n      \"question\": \"Por que não converter todo o calor rejeitado?\"\n    },\n    {\n      \"context\": \"Ao abrir a porta da geladeira frequentemente, mais trabalho é requerido do compressor.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo — ar quente entra, e o sistema precisa mover calor do interior frio para o exterior, gastando mais trabalho.\",\n          \"isCorrect\": true,\n          \"text\": \"Entrou ar quente; há mais calor para remover, exigindo trabalho\"\n        },\n        {\n          \"feedback\": \"A primeira lei apenas exige balanço; aqui o trabalho extra vem de mover calor contra o gradiente térmico.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a geladeira cria calor do nada\"\n        },\n        {\n          \"feedback\": \"Isolamento ruim afeta, mas a razão física é o fluxo de calor adicional que precisa ser bombeado para fora.\",\n          \"isCorrect\": false,\n          \"text\": \"Só porque o isolamento ficou pior\"\n        },\n        {\n          \"feedback\": \"O motor não fica mais eficiente; ele simplesmente precisa trabalhar mais para restaurar o estado frio.\",\n          \"isCorrect\": false,\n          \"text\": \"O compressor funciona mais rápido sem gastar mais energia\"\n        }\n      ],\n      \"question\": \"Por que abrir a geladeira gasta mais energia?\"\n    },\n    {\n      \"context\": \"Você comprime rapidamente um gás em um cilindro bem isolado (sem troca de calor com o ambiente).\",\n      \"options\": [\n        {\n          \"feedback\": \"Correto — numa compressão adiabática a energia interna aumenta e a temperatura sobe sem troca de calor.\",\n          \"isCorrect\": true,\n          \"text\": \"Temperatura sobe; não há troca de calor (adiabático)\"\n        },\n        {\n          \"feedback\": \"Isotérmico manteria temperatura constante, mas compressão rápida e isolada é adiabática, não isotérmica.\",\n          \"isCorrect\": false,\n          \"text\": \"Temperatura fica constante (isotérmico)\"\n        },\n        {\n          \"feedback\": \"A temperatura não costuma diminuir numa compressão sem resfriamento externo.\",\n          \"isCorrect\": false,\n          \"text\": \"Temperatura diminui pela compressão\"\n        },\n        {\n          \"feedback\": \"Mesmo com isolamento, parte do trabalho pode escapar; mas idealmente é adiabático aqui.\",\n          \"isCorrect\": false,\n          \"text\": \"O calor é liberado rapidamente ao ambiente\"\n        }\n      ],\n      \"question\": \"O que acontece na compressão adiabática?\"\n    },\n    {\n      \"context\": \"Você segura uma colher metálica numa panela quente; pelo cabo você sente calor subindo.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato — em sólidos e metais a condução é o mecanismo dominante de transferência de calor.\",\n          \"isCorrect\": true,\n          \"text\": \"Condução é o mecanismo dominante na colher\"\n        },\n        {\n          \"feedback\": \"Convecção exige movimento de fluido; a colher não tem fluido fluindo dentro dela.\",\n          \"isCorrect\": false,\n          \"text\": \"Convecção domina nesse caso\"\n        },\n        {\n          \"feedback\": \"Radiação existe, mas entre panela e colher a condução interna do metal é a principal via.\",\n          \"isCorrect\": false,\n          \"text\": \"Radiação é a principal via aqui\"\n        },\n        {\n          \"feedback\": \"Combinação de todos, mas na colher metálica a condução é claramente predominante.\",\n          \"isCorrect\": false,\n          \"text\": \"Condução e radiação equally dominam\"\n        }\n      ],\n      \"question\": \"Qual mecanismo na colher?\"\n    },\n    {\n      \"context\": \"Você compara um motor real com um ciclo de Carnot ideal operando entre as mesmas temperaturas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo — irreversibilidades como atrito e gradientes de temperatura reduzem a eficiência real abaixo da de Carnot.\",\n          \"isCorrect\": true,\n          \"text\": \"Irreversibilidades tornam a eficiência real menor que Carnot\"\n        },\n        {\n          \"feedback\": \"A conservação de energia não explica a diferença de eficiência; Carnot é um limite termodinâmico, não garantido na prática.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a primeira lei impede motores reais serem eficientes\"\n        },\n        {\n          \"feedback\": \"Efeitos quânticos não são a razão principal para motores macroscópicos serem menos eficientes.\",\n          \"isCorrect\": false,\n          \"text\": \"Devido a efeitos quânticos em materiais\"\n        },\n        {\n          \"feedback\": \"Materiais limitam, mas mesmo motores ideais sem perdas não alcançariam além do limite de Carnot.\",\n          \"isCorrect\": false,\n          \"text\": \"Somente por uso de materiais inadequados\"\n        }\n      ],\n      \"question\": \"Por que motores reais perdem para Carnot?\"\n    },\n    {\n      \"context\": \"Você come antes de uma corrida; parte da energia dos alimentos vira trabalho e grande parte vira calor.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correto — transformações biológicas também seguem limites termodinâmicos: nem toda energia pode virar trabalho útil.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque parte da energia é sempre dissipada como calor\"\n        },\n        {\n          \"feedback\": \"Não é só falta de vontade: leis termodinâmicas impõem que nem tudo vira trabalho útil.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque o corpo não sabe converter energia direito\"\n        },\n        {\n          \"feedback\": \"Temperatura corporal é controlada, mas o princípio é que converter 100% seria impossível por entropia.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a temperatura do corpo é muito baixa\"\n        },\n        {\n          \"feedback\": \"A digestão não viola a primeira lei, mas a segunda impõe perdas inevitáveis como calor.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a energia química some durante digestão\"\n        }\n      ],\n      \"question\": \"Por que o corpo não é 100% eficiente?\"\n    },\n    {\n      \"context\": \"Duas usinas: uma opera com vapor a 600 K e ambiente a 300 K; outra opera a 500 K com ambiente a 300 K.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo — maior diferença entre fonte quente e fria permite maior eficiência de Carnot, portanto tende a ser mais eficiente.\",\n          \"isCorrect\": true,\n          \"text\": \"A usina com 600 K tende a ser mais eficiente\"\n        },\n        {\n          \"feedback\": \"Eficiência também depende de muito mais fatores, mas termo­dina­mi­camente maior Th dá vantagem.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambas têm a mesma eficiência termo-dinâmica\"\n        },\n        {\n          \"feedback\": \"Maior temperatura não reduz eficiência; geralmente a aumenta dentro de limites de projeto.\",\n          \"isCorrect\": false,\n          \"text\": \"A de 500 K será mais eficiente por ser mais estável\"\n        },\n        {\n          \"feedback\": \"Combustível e projeto influenciam, mas entre os dados, 600 K oferece potencial maior de eficiência.\",\n          \"isCorrect\": false,\n          \"text\": \"Sem dados sobre combustíveis não dá pra dizer nada\"\n        }\n      ],\n      \"question\": \"Qual usina é mais eficiente?\"\n    }\n  ]\n}",
      "outputTokens": 4733,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "pt-physics-thermodynamics-laws-1",
      "userPrompt": "LESSON_TITLE: Leis da Termodinamica\nLESSON_DESCRIPTION: Compreendendo as leis da termodinamica e como elas governam a transferencia de energia e os limites de eficiencia em todos os processos fisicos\nCHAPTER_TITLE: Termodinamica\nCOURSE_TITLE: Fisica Geral\nLANGUAGE: pt\n\nBACKGROUND_STEPS:\n1. O Sonho Impossivel: No seculo XIX, engenheiros queriam construir maquinas a vapor mais eficientes. Sadi Carnot percebeu que havia um limite fundamental — nenhuma maquina poderia converter todo calor em trabalho.\n2. As Leis Universais: Rudolf Clausius e Lord Kelvin formalizaram as leis da termodinamica. Elas explicam por que o cafe esfria, por que precisamos comer, e por que o universo caminha para a desordem.\n3. Solidez da Teoria: A termodinamica e uma das teorias mais robustas da fisica. Einstein disse que, de todas as teorias, ela e a menos provavel de ser derrubada por descobertas futuras.\n\nEXPLANATION_STEPS:\n1. Primeira Lei: A primeira lei diz que energia nao se cria nem se destroi — apenas se transforma. Toda energia que entra em um sistema deve sair ou ser armazenada. E um balanco contabil universal.\n2. Segunda Lei: A segunda lei afirma que processos espontaneos aumentam a entropia total. Calor flui do quente para o frio naturalmente, nunca ao contrario sem trabalho externo.\n3. Entropia: Entropia mede a dispersao de energia entre microestados possiveis. Sistemas evoluem para configuracoes mais provaveis — e configuracoes de alta entropia sao vastamente mais provaveis.\n4. Equilibrio Termico: Equilibrio termico ocorre quando dois sistemas em contato param de trocar energia liquida. Eles atingem a mesma temperatura, mas nao necessariamente a mesma energia.\n5. Calor vs Temperatura: Calor e a transferencia de energia termica entre sistemas. Temperatura mede a energia cinetica media das moleculas. Calor alto com temperatura baixa e possivel (muito material, movimento lento).\n\nMECHANICS_STEPS:\n1. Ciclo do Motor Termico: Em um motor termico, calor flui da fonte quente para a fria. Parte dessa energia e capturada como trabalho. O resto e desperdicado como calor para o ambiente.\n2. Limite de Carnot: O ciclo de Carnot define a eficiencia maxima teorica. Depende apenas das temperaturas das fontes quente e fria. Quanto maior a diferenca, maior a eficiencia possivel.\n3. Bomba de Calor: Bombas de calor invertem o fluxo natural. Usam trabalho para mover calor do frio para o quente — como a geladeira que remove calor do interior e o despeja no ambiente.\n4. Tipos de Processos: Processos isotermicos mantem temperatura constante. Processos adiabaticos nao trocam calor com o ambiente. Cada tipo segue equacoes especificas de expansao e compressao.\n5. Mecanismos de Transferencia: A conducao, conveccao e radiacao sao os tres mecanismos de transferencia de calor. Cada um domina em situacoes diferentes — metais conduzem, liquidos convectam, o sol irradia.\n\nEXAMPLES_STEPS:\n1. A Geladeira: A geladeira e uma bomba de calor que move energia do interior frio para o exterior quente. Isso requer trabalho — por isso ela consome eletricidade continuamente.\n2. Motores de Combustao: Motores de carro convertem energia quimica do combustivel em movimento. Mas pelo menos 60-70% da energia e perdida como calor — os limites termodinamicos sao implacaveis.\n3. Geracao de Energia: Usinas termeletricas queimam combustivel para gerar vapor que move turbinas. A eficiencia tipica e 30-40% — a maior parte da energia se dissipa no ambiente.\n4. O Corpo Humano: Seu corpo e uma maquina termica. Converte energia dos alimentos em trabalho e calor. Febre significa que o termostato interno foi reconfigurado para uma temperatura mais alta."
    },
    {
      "duration": 74131.72745900002,
      "inputTokens": 2988,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Un comité decide por unanimidad un plan arriesgado y nadie lo cuestiona, aunque algunos tienen dudas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exacto. Estudiar la influencia social ayuda a entender cómo decisiones ordinarias se vuelven dañinas y cómo prevenirlo.\",\n          \"isCorrect\": true,\n          \"text\": \"Para entender cómo personas normales pueden tomar decisiones dañinas\"\n        },\n        {\n          \"feedback\": \"No exactamente. No se trata de culpar a individuos débiles; se trata de procesos sociales que moldean decisiones.\",\n          \"isCorrect\": false,\n          \"text\": \"Para demostrar que la gente es moralmente débil\"\n        },\n        {\n          \"feedback\": \"Eso es distinto. Predecir elecciones usa otras herramientas; la influencia social explica conformidad y obediencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Principalmente para predecir resultados electorales\"\n        },\n        {\n          \"feedback\": \"No: ese enunciado sugiere un fin de control. La disciplina busca explicación y prevención, no solo control.\",\n          \"isCorrect\": false,\n          \"text\": \"Para justificar el control social por autoridades\"\n        }\n      ],\n      \"question\": \"¿Por qué estudiar influencia social?\"\n    },\n    {\n      \"context\": \"En una plaza, varias personas ignoran a alguien herido; una persona más joven se pregunta por qué nadie actúa.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bien. La investigación busca explicar por qué la gente no interviene y cómo diseñar respuestas que aumenten la ayuda.\",\n          \"isCorrect\": true,\n          \"text\": \"Para comprender y reducir la inacción colectiva en emergencias\"\n        },\n        {\n          \"feedback\": \"No sólo para identificar héroes; interesa el proceso por el que nadie actúa, no datos sobre individuos valientes.\",\n          \"isCorrect\": false,\n          \"text\": \"Para identificar quiénes serán los héroes en una emergencia\"\n        },\n        {\n          \"feedback\": \"Parcialmente cierto pero limitado: el foco no es solo medir cuántos ayudan, sino entender las causas sociales.\",\n          \"isCorrect\": false,\n          \"text\": \"Para cuantificar la frecuencia de la ayuda pública\"\n        },\n        {\n          \"feedback\": \"Eso no captura la motivación principal: no se estudia para validar normas existentes, sino para comprenderlas.\",\n          \"isCorrect\": false,\n          \"text\": \"Para confirmar que la gente siempre sigue normas sociales\"\n        }\n      ],\n      \"question\": \"¿Qué problema explica esta investigación?\"\n    },\n    {\n      \"context\": \"En una reunión alguien sonríe y asiente mientras piensa distinto, pero no lo dice en voz alta.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. Actuar en público sin cambiar creencias es conformidad externa — acomodas la conducta pero no la opinión.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad externa: cambio de conducta sin creerlo\"\n        },\n        {\n          \"feedback\": \"No: internalizar implica cambiar la creencia, no solo la acción pública.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad interna: ahora cree lo que muestra\"\n        },\n        {\n          \"feedback\": \"Ambas no aplican: aquí falta el verdadero cambio de creencia que define la conformidad interna.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambas: simultáneamente interna y externa\"\n        },\n        {\n          \"feedback\": \"Tampoco: negar tanto la conducta como la creencia sería no conformidad.\",\n          \"isCorrect\": false,\n          \"text\": \"No se está conformando ni exterior ni interiormente\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de conformidad es esto?\"\n    },\n    {\n      \"context\": \"En una ciudad extranjera, una persona duda del camino y sigue al grupo que marcha confiado.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. En situaciones ambiguas usamos a otros como fuente de información; eso es influencia informacional.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional: el grupo sirve como información fiable\"\n        },\n        {\n          \"feedback\": \"No: buscar aceptación social sería seguir aunque se sepa la respuesta correcta; aquí hay ambigüedad.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa: busca aprobación social\"\n        },\n        {\n          \"feedback\": \"No es obediencia: no hay autoridad clara dando órdenes.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia: seguir a una figura de autoridad\"\n        },\n        {\n          \"feedback\": \"Aunque parecido, la desindividuación implica anonimato y pérdida de autoconciencia, no esto.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación: anonimato en multitudes\"\n        }\n      ],\n      \"question\": \"¿Qué explica seguir al grupo aquí?\"\n    },\n    {\n      \"context\": \"Un empleado cumple una orden que sabe es cuestionable porque su jefe se lo pide directamente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. La obediencia implica seguir a una autoridad; es distinta de la presión entre iguales.\",\n          \"isCorrect\": true,\n          \"text\": \"Obediencia: respuesta a una autoridad jerárquica\"\n        },\n        {\n          \"feedback\": \"No: la conformidad suele ocurrir entre pares, no por órdenes jerárquicas.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad entre pares: presión horizontal\"\n        },\n        {\n          \"feedback\": \"No necesariamente: aquí hay una jerarquía, así que no es solo influencia informacional.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional: creer que la autoridad sabe más\"\n        },\n        {\n          \"feedback\": \"No aplica: la desindividuación no requiere una orden explícita de un superior.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación por anonimato en el grupo\"\n        }\n      ],\n      \"question\": \"¿Qué concepto explica la obediencia?\"\n    },\n    {\n      \"context\": \"Un cartel dice \\\"No tirar basura\\\" pero la mayoría de la calle arroja latas al suelo.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. La norma descriptiva describe lo que la gente hace y explica por qué la gente imita esa conducta.\",\n          \"isCorrect\": true,\n          \"text\": \"Norma descriptiva: describe lo que la gente realmente hace\"\n        },\n        {\n          \"feedback\": \"No: la norma prescriptiva es el cartel que indica lo que debería hacerse, no lo que se hace.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma prescriptiva: la norma escrita de conducta correcta\"\n        },\n        {\n          \"feedback\": \"Ambas influyen, pero aquí el comportamiento sigue la práctica observable, no la señal moral.\",\n          \"isCorrect\": false,\n          \"text\": \"Ambas por igual afectan igualmente el comportamiento\"\n        },\n        {\n          \"feedback\": \"No: la conformidad no es un tipo de norma, sino un resultado de normas sociales.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad: es una norma social en sí misma\"\n        }\n      ],\n      \"question\": \"¿Qué norma explica que tiren basura?\"\n    },\n    {\n      \"context\": \"Un equipo opina lo mismo hasta que una persona discrepa en voz alta.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. Romper la unanimidad con un disidente reduce la presión para conformarse con el grupo.\",\n          \"isCorrect\": true,\n          \"text\": \"Romper la unanimidad reduce la conformidad del resto\"\n        },\n        {\n          \"feedback\": \"No: la presión no aumenta por tener un disidente; suele aliviarla.\",\n          \"isCorrect\": false,\n          \"text\": \"La presión aumenta cuando alguien discrepa\"\n        },\n        {\n          \"feedback\": \"No siempre. La presencia del disidente no es irrelevante; suele tener un efecto grande.\",\n          \"isCorrect\": false,\n          \"text\": \"No tiene efecto; la gente sigue conformándose igual\"\n        },\n        {\n          \"feedback\": \"Sólo si el disidente tiene autoridad; de lo contrario no importa. Esto es una confusión común.\",\n          \"isCorrect\": false,\n          \"text\": \"Sólo funciona si el disidente es una figura de autoridad\"\n        }\n      ],\n      \"question\": \"¿Qué efecto tiene un disidente?\"\n    },\n    {\n      \"context\": \"Un supervisor ordena en persona realizar una tarea arriesgada; otro día lo ordena por email.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bien visto. La cercanía física de la autoridad suele aumentar la obediencia comparada con órdenes remotas.\",\n          \"isCorrect\": true,\n          \"text\": \"La orden en persona generará más obediencia que por email\"\n        },\n        {\n          \"feedback\": \"No: la comunicación remota suele reducir la sensación de autoridad inmediata y la obediencia.\",\n          \"isCorrect\": false,\n          \"text\": \"El email generará más obediencia que en persona\"\n        },\n        {\n          \"feedback\": \"No necesariamente igual: la proximidad física cambia la presión y el cumplimiento.\",\n          \"isCorrect\": false,\n          \"text\": \"No hay diferencia entre ambos métodos\"\n        },\n        {\n          \"feedback\": \"La remuneración no es el factor clave aquí; la proximidad sí influye más en obediencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Depende solo del salario del empleado\"\n        }\n      ],\n      \"question\": \"¿Cuál escenario aumenta obediencia?\"\n    },\n    {\n      \"context\": \"Una campaña pide primero una firma luego una donación grande, y la mayoría termina contribuyendo más.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exacto. Pequeños compromisos iniciales facilitan aceptar peticiones mayores por coherencia y escalada.\",\n          \"isCorrect\": true,\n          \"text\": \"La escalada de compromiso facilita aceptar peticiones mayores luego\"\n        },\n        {\n          \"feedback\": \"No sólo por dinero; es un proceso psicológico de coherencia, no olvido de la donación previa.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque olvidan que ya donaron antes\"\n        },\n        {\n          \"feedback\": \"No: no es simplemente por norma descriptiva, sino por progresión gradual que atrapa al individuo.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque siguen una norma descriptiva del grupo automáticamente\"\n        },\n        {\n          \"feedback\": \"No: no se debe a anonimato sino a la estrategia de aumentar gradualmente la petición.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque la anonimidad del donante impulsa más donaciones\"\n        }\n      ],\n      \"question\": \"¿Qué explica aceptar mayores peticiones?\"\n    },\n    {\n      \"context\": \"En un vagón lleno, una persona se desmaya y todos miran pero nadie se acerca a ayudar.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. La difusión de responsabilidad hace que cada persona espere que otro intervenga, reduciendo la acción.\",\n          \"isCorrect\": true,\n          \"text\": \"Difusión de responsabilidad: cada uno espera que otro actúe\"\n        },\n        {\n          \"feedback\": \"No es que sean expertos; el fenómeno ocurre incluso con personas competentes por la misma razón social.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque todos asumen que otros son profesionales médicos\"\n        },\n        {\n          \"feedback\": \"No suelen evaluar correctamente la gravedad; la principal causa social es la difusión, no la seriedad.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque la situación no parece lo suficientemente grave\"\n        },\n        {\n          \"feedback\": \"No es desindividuación: ahí el anonimato provoca conducta extrema, no la inacción por espera de otros.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación: anonimato lleva a la pasividad grupal\"\n        }\n      ],\n      \"question\": \"¿Por qué nadie ayuda en el vagón?\"\n    },\n    {\n      \"context\": \"En una protesta, participantes con pasamontañas adoptan comportamientos más agresivos que solos.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. La desindividuación reduce autoconciencia y frena normas personales, favoreciendo actos que no harían solos.\",\n          \"isCorrect\": true,\n          \"text\": \"Desindividuación reduce autoconciencia y facilita conductas extremas\"\n        },\n        {\n          \"feedback\": \"No necesariamente: la ideología puede explicar parte, pero la máscara y multitud cambian la autorregulación.\",\n          \"isCorrect\": false,\n          \"text\": \"Sólo por radicalización ideológica previa\"\n        },\n        {\n          \"feedback\": \"La autoridad no ordena esas acciones aquí; el anonimato y excitación grupal son más explicativos.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque un líder les dio órdenes directas\"\n        },\n        {\n          \"feedback\": \"No es la difusión de responsabilidad en sí; la desindividuación explica la pérdida de control individual.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad genera la agresividad\"\n        }\n      ],\n      \"question\": \"¿Qué explica el cambio de conducta?\"\n    },\n    {\n      \"context\": \"En una reunión, nadie critica una mala idea. ¿Qué intervención reducirá la conformidad?\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. La votación anónima reduce la presión normativa y permite expresar desacuerdo sin costo social.\",\n          \"isCorrect\": true,\n          \"text\": \"Solicitar una votación anónima para decidir\"\n        },\n        {\n          \"feedback\": \"No: si el líder expresa apoyo primero suele anclar y aumentar la conformidad en el grupo.\",\n          \"isCorrect\": false,\n          \"text\": \"Que el líder exprese su opinión primero\"\n        },\n        {\n          \"feedback\": \"Decir que el silencio equivale a acuerdo sólo refuerza la idea y no facilita la expresión de dudas.\",\n          \"isCorrect\": false,\n          \"text\": \"Mantener el silencio y tomarlo por acuerdo\"\n        },\n        {\n          \"feedback\": \"Pedir al primero que hable suele anclar la discusión en su opinión, incrementando la conformidad.\",\n          \"isCorrect\": false,\n          \"text\": \"Pedir que la primera persona ancle la discusión\"\n        }\n      ],\n      \"question\": \"¿Cómo reducir conformidad en la reunión?\"\n    },\n    {\n      \"context\": \"En una nueva app, los posts muestran el número de 'me gusta' públicamente y algunos contenidos explotan en popularidad.\",\n      \"options\": [\n        {\n          \"feedback\": \"Bien. Las señales visibles funcionan como prueba social: la norma descriptiva y la información social crean cascadas.\",\n          \"isCorrect\": true,\n          \"text\": \"Las señales públicas actúan como prueba social y generan cascadas\"\n        },\n        {\n          \"feedback\": \"No sólo el algoritmo: la visibilidad de aprobación altera la conducta humana y amplifica popularidad.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo el algoritmo decide qué se vuelve popular\"\n        },\n        {\n          \"feedback\": \"La calidad importa, pero las aprobaciones visibles pueden hacer que contenido mediocre crezca igualmente.\",\n          \"isCorrect\": false,\n          \"text\": \"Sólo la calidad del contenido explica la explosión popular\"\n        },\n        {\n          \"feedback\": \"No se trata de pago; la dinámica social por aprobaciones visibles es clave.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque los creadores pagaron por promoción\"\n        }\n      ],\n      \"question\": \"¿Qué causa estas cascadas?\"\n    },\n    {\n      \"context\": \"Una persona quiere ser original en su estilo pero teme ser juzgada y termina imitando a la mayoría.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exacto. El costo social de destacar impulsa la conformidad por influencia normativa: buscar aceptación y evitar rechazo.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia normativa: evitar el costo social de diferenciarse\"\n        },\n        {\n          \"feedback\": \"No es informacional: no está buscando info sobre qué es correcto, sino aceptación social.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional: piensa que otros saben mejor\"\n        },\n        {\n          \"feedback\": \"La desindividuación no aplica: aquí hay preocupación por identidad y juicio social, no anonimato.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación por estar en un grupo grande\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad no explica elección de vestimenta; es un fenómeno distinto.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad entre los observadores\"\n        }\n      ],\n      \"question\": \"¿Qué explica imitar la moda?\"\n    },\n    {\n      \"context\": \"Un colega acepta pequeñas concesiones éticas y luego participa en una práctica más grave.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. Evitar escaladas requiere negarse temprano y establecer normas claras para impedir compromisos graduales.\",\n          \"isCorrect\": true,\n          \"text\": \"Rechazar temprano y dejar normas claras para evitar escaladas\"\n        },\n        {\n          \"feedback\": \"Castigar después suele llegar tarde; la prevención temprana es más eficaz.\",\n          \"isCorrect\": false,\n          \"text\": \"Esperar y castigar solo cuando el daño sea grande\"\n        },\n        {\n          \"feedback\": \"Rotar autoridades no evita que pequeñas concesiones acumulen obediencia y compromiso.\",\n          \"isCorrect\": false,\n          \"text\": \"Cambiar frecuentemente la autoridad responsable\"\n        },\n        {\n          \"feedback\": \"Ocultar decisiones no previene la progresión; la transparencia y límites sí ayudan.\",\n          \"isCorrect\": false,\n          \"text\": \"Dispersar las decisiones para que nadie las note\"\n        }\n      ],\n      \"question\": \"¿Cómo prevenir una escalada ética?\"\n    },\n    {\n      \"context\": \"En una calle oscura, una persona observa a varios peatones y decide seguir la dirección que toma la mayoría.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. En ambigüedad, confiar en la mayoría como fuente de información es influencia informacional.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional: la mayoría sirve como guía en ambigüedad\"\n        },\n        {\n          \"feedback\": \"No: seguir por miedo al rechazo sería influencia normativa, no buscar información.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa: teme ser rechazado si va otra ruta\"\n        },\n        {\n          \"feedback\": \"No aplica obediencia: no hay figura de autoridad dictando la ruta.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a una autoridad que marca el camino\"\n        },\n        {\n          \"feedback\": \"Tampoco es difusión de responsabilidad; aquí se busca orientación sobre qué hacer.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad entre los peatones\"\n        }\n      ],\n      \"question\": \"¿Qué impulso guía a la persona?\"\n    },\n    {\n      \"context\": \"En un chat con miles observando un caso de emergencia, nadie llama a emergencias hasta que alguien nombra a uno por su nombre y le pide que actúe.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto. Nombrar a una persona asigna responsabilidad y contrarresta la difusión que inhibe la acción.\",\n          \"isCorrect\": true,\n          \"text\": \"Nombrar a alguien específico reduce la difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"Enviar emoticonos o reacciones visibles no obliga a nadie a actuar; mantiene la pasividad.\",\n          \"isCorrect\": false,\n          \"text\": \"Reaccionar con emoticonos obliga a que alguien actúe\"\n        },\n        {\n          \"feedback\": \"Llamar al grupo no es eficaz; sin una persona designada, la responsabilidad continúa difusa.\",\n          \"isCorrect\": false,\n          \"text\": \"Pedir al grupo en general que llame a emergencias\"\n        },\n        {\n          \"feedback\": \"Esperar al moderador suele demorar la acción; lo efectivo es asignar responsabilidad inmediata.\",\n          \"isCorrect\": false,\n          \"text\": \"Esperar que un moderador decida intervenir\"\n        }\n      ],\n      \"question\": \"¿Cómo reducir inacción online?\"\n    }\n  ]\n}",
      "outputTokens": 4957,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "es-psychology-social-conformity-1",
      "userPrompt": "LESSON_TITLE: Conformidad y Obediencia Social\nLESSON_DESCRIPTION: Comprendiendo como la presion social y la autoridad influyen en nuestras decisiones, desde situaciones cotidianas hasta dilemas eticos\nCHAPTER_TITLE: Influencia Social\nCOURSE_TITLE: Psicologia Social\nLANGUAGE: es\n\nBACKGROUND_STEPS:\n1. La Pregunta Post-Guerra: Despues de la Segunda Guerra Mundial, el mundo pregunto: como pudo gente ordinaria participar en atrocidades? La psicologia social busco entender el poder de la presion grupal sobre la moral individual.\n2. Los Estudios de Asch: Solomon Asch diseno experimentos elegantes en los 1950s. Mostro que personas inteligentes negaban la evidencia de sus propios ojos cuando un grupo unanime decia lo contrario.\n3. El Shock de Milgram: Stanley Milgram llevo esto mas lejos con sus experimentos de obediencia. Revelo que la autoridad percibida podia hacer que personas normales administraran lo que creian eran descargas electricas peligrosas.\n\nEXPLANATION_STEPS:\n1. Definicion de Conformidad: La conformidad es el cambio de comportamiento o creencias para coincidir con un grupo. Puede ser externa (actuar igual) o interna (realmente creer lo que el grupo cree).\n2. Influencia Normativa: La influencia normativa surge del deseo de aceptacion social. Nos conformamos para evitar rechazo, incluso cuando sabemos que el grupo esta equivocado.\n3. Influencia Informacional: La influencia informacional surge cuando usamos al grupo como fuente de informacion. En situaciones ambiguas, asumimos que otros saben mas que nosotros.\n4. Obediencia a la Autoridad: La obediencia es conformidad hacia una autoridad. Difiere de la conformidad horizontal porque hay una jerarquia de poder explicita.\n5. Tipos de Normas: Las normas descriptivas describen lo que la gente hace. Las normas prescriptivas describen lo que deberia hacer. Ambas influyen el comportamiento de maneras diferentes.\n\nMECHANICS_STEPS:\n1. El Poder de la Unanimidad: La unanimidad amplifica la conformidad dramaticamente. Un solo disidente reduce la presion a conformarse — no necesitas mayoria, solo alguien que rompa el consenso.\n2. Proximidad y Autoridad: La proximidad de la autoridad aumenta la obediencia. En experimentos, la obediencia caia drasticamente cuando el experimentador daba ordenes por telefono en vez de en persona.\n3. Escalada de Compromiso: El compromiso gradual atrapa a las personas. Pequenas concesiones llevan a mayores — es mas facil decir 'no' al principio que despues de varios 'si'.\n4. Difusion de Responsabilidad: La difusion de responsabilidad ocurre en grupos. Cuando todos son responsables, nadie se siente responsable. Asignar roles especificos contrarresta este efecto.\n5. Desindividuacion: La desindividuacion en grupos reduce la autoconciencia. Anonimato mas excitacion grupal pueden llevar a comportamientos que el individuo solo nunca consideraria.\n\nEXAMPLES_STEPS:\n1. Dinamicas de Reunion: En reuniones de trabajo, el silencio ante una mala idea se interpreta como acuerdo. La primera persona que habla ancla la discusion, y los demas se conforman por temor a parecer diferentes.\n2. Cascadas en Redes: Las redes sociales amplifican la conformidad. Los 'likes' visibles crean cascadas — contenido popular se vuelve mas popular, no necesariamente porque sea mejor, sino porque otros ya lo aprobaron.\n3. Tendencias de Moda: La moda demuestra conformidad en accion. Tendencias se propagan porque vestirse diferente tiene costos sociales. La originalidad tiene limites definidos por el grupo.\n4. Efecto Espectador: En emergencias medicas, la difusion de responsabilidad hace que nadie actue. Cada persona espera que otro tome la iniciativa, resultando en inaccion colectiva."
    },
    {
      "duration": 70847.95508300001,
      "inputTokens": 2886,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A city wants more residents to recycle. They’re debating between big fines or rearranging bin placement near entrances.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — arranging options nudges choices without punishment; it steers behavior by changing the environment.\",\n          \"isCorrect\": true,\n          \"text\": \"Change bin placement to make recycling easiest\"\n        },\n        {\n          \"feedback\": \"Wrong — fines restrict or punish; they may work but aren’t the subtle nudge choice architecture achieves.\",\n          \"isCorrect\": false,\n          \"text\": \"Introduce large fines for not recycling\"\n        },\n        {\n          \"feedback\": \"Wrong — education helps awareness but often fails to change habits as strongly as design changes.\",\n          \"isCorrect\": false,\n          \"text\": \"Run an educational ad campaign\"\n        },\n        {\n          \"feedback\": \"Wrong — incentives can work, but making the default convenient is usually cheaper and less intrusive.\",\n          \"isCorrect\": false,\n          \"text\": \"Pay people a small amount per recycled bag\"\n        }\n      ],\n      \"question\": \"Why small tweaks help?\"\n    },\n    {\n      \"context\": \"You’re offered a bet: win $100 with 50% chance, or lose $100 with 50% chance. Faced with losing $100 already, many accept riskier bets.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — loss aversion makes people risk-seeking to avoid realizing losses; they gamble to try to escape the loss.\",\n          \"isCorrect\": true,\n          \"text\": \"They take bigger risks to try to avoid losses\"\n        },\n        {\n          \"feedback\": \"No — that shows risk aversion, which is opposite; loss aversion pushes the opposite in loss domains.\",\n          \"isCorrect\": false,\n          \"text\": \"They become more conservative to prevent further loss\"\n        },\n        {\n          \"feedback\": \"No — being risk-seeking for gains is unlikely; people usually avoid risk when ahead.\",\n          \"isCorrect\": false,\n          \"text\": \"They become risk-seeking to pursue further gains\"\n        },\n        {\n          \"feedback\": \"No — choices shift predictably; people aren’t indifferent in these situations.\",\n          \"isCorrect\": false,\n          \"text\": \"They treat gains and losses symmetrically\"\n        }\n      ],\n      \"question\": \"What does loss aversion cause?\"\n    },\n    {\n      \"context\": \"A seller lists a house at $499,000 and buyers’ offers cluster near that number even if market value is different.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — the initial listing acts as an anchor that skews subsequent estimates and offers.\",\n          \"isCorrect\": true,\n          \"text\": \"The initial price anchors buyers’ offers\"\n        },\n        {\n          \"feedback\": \"No — availability is about memorable examples, not an initial number shaping estimates.\",\n          \"isCorrect\": false,\n          \"text\": \"Buyers recall recent sales more and mimic them\"\n        },\n        {\n          \"feedback\": \"No — framing would be about wording, not the first numeric cue influencing value judgments.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s a framing effect from the listing description\"\n        },\n        {\n          \"feedback\": \"No — present bias concerns time preferences, not first-number influence.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s caused by present bias toward immediate numbers\"\n        }\n      ],\n      \"question\": \"Which mechanism explains this?\"\n    },\n    {\n      \"context\": \"A young worker wants to save but keeps spending. Her employer can offer a payroll savings option.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — automatic payroll deductions are a commitment device: they lock in future saving before present bias can override it.\",\n          \"isCorrect\": true,\n          \"text\": \"Set savings to automatic payroll deductions\"\n        },\n        {\n          \"feedback\": \"No — a pamphlet won’t overcome the temptation of immediate spending as effectively as commitment devices.\",\n          \"isCorrect\": false,\n          \"text\": \"Send an informational brochure on compound interest\"\n        },\n        {\n          \"feedback\": \"No — matching raises incentives but still requires action; it’s helpful but less powerful than automatic defaults.\",\n          \"isCorrect\": false,\n          \"text\": \"Offer employer matching for voluntary contributions\"\n        },\n        {\n          \"feedback\": \"No — penalties may deter, but they’re coercive and can backfire; they’re not the classic commitment device here.\",\n          \"isCorrect\": false,\n          \"text\": \"Charge a fee if they miss monthly savings targets\"\n        }\n      ],\n      \"question\": \"Best way to ensure saving?\"\n    },\n    {\n      \"context\": \"A patient is told two options: treatment A has a 90% survival rate; treatment B has a 10% mortality rate. Both are identical.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — positive survival framing usually increases acceptance by evoking less fear than mortality wording.\",\n          \"isCorrect\": true,\n          \"text\": \"Patients prefer the 90% survival framing\"\n        },\n        {\n          \"feedback\": \"No — the numerical info is identical; differences come from emotional framing, not math.\",\n          \"isCorrect\": false,\n          \"text\": \"They view both options the same way\"\n        },\n        {\n          \"feedback\": \"No — loss aversion is about gains vs losses, but this is specifically about presentation of identical stats.\",\n          \"isCorrect\": false,\n          \"text\": \"They avoid both because of loss aversion\"\n        },\n        {\n          \"feedback\": \"No — anchoring would need an initial number to bias the other estimate, which isn’t the issue here.\",\n          \"isCorrect\": false,\n          \"text\": \"They’re anchored by the first percentage and choose it\"\n        }\n      ],\n      \"question\": \"Which frame is preferred?\"\n    },\n    {\n      \"context\": \"You shop quickly for groceries while hungry; later you file taxes slowly and carefully.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — fast, instinctive shopping uses System 1; it excels in speed but invites shortcuts and biases.\",\n          \"isCorrect\": true,\n          \"text\": \"Shopping uses System 1; taxes use System 2\"\n        },\n        {\n          \"feedback\": \"No — taxes require deliberation, so System 1 wouldn’t be typical for that task.\",\n          \"isCorrect\": false,\n          \"text\": \"Both tasks use System 1 equally\"\n        },\n        {\n          \"feedback\": \"No — shopping often engages intuition; System 2 for shopping would be unusual.\",\n          \"isCorrect\": false,\n          \"text\": \"Shopping uses System 2; taxes use System 1\"\n        },\n        {\n          \"feedback\": \"No — claiming neither system applies ignores the dual-process idea that matches everyday behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"Neither system is involved in these tasks\"\n        }\n      ],\n      \"question\": \"Which thinking system fits?\"\n    },\n    {\n      \"context\": \"After a widely publicized bridge collapse, people avoid driving over bridges despite statistics showing it's still safe.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — the availability heuristic makes vivid events seem more probable because they’re easy to recall.\",\n          \"isCorrect\": true,\n          \"text\": \"They overestimate risk due to availability heuristic\"\n        },\n        {\n          \"feedback\": \"No — anchoring needs an initial number; vivid stories altering perceived frequency are availability-based.\",\n          \"isCorrect\": false,\n          \"text\": \"This is anchoring on the first report\"\n        },\n        {\n          \"feedback\": \"No — present bias is about time preference, unrelated to risk perception spikes after news events.\",\n          \"isCorrect\": false,\n          \"text\": \"This stems from present bias favoring immediate avoidance\"\n        },\n        {\n          \"feedback\": \"No — loss aversion explains reluctance to accept losses, but the ease of recall explains probability misestimation.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s pure loss aversion at work\"\n        }\n      ],\n      \"question\": \"Why avoid bridges now?\"\n    },\n    {\n      \"context\": \"A cafe wants more customers to choose a low-calorie sandwich from a long menu.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — placing the healthy sandwich at the top or as default makes it more likely to be chosen.\",\n          \"isCorrect\": true,\n          \"text\": \"Feature the healthy sandwich prominently and first\"\n        },\n        {\n          \"feedback\": \"No — adding more choices often increases choice overload and can reduce selection probability.\",\n          \"isCorrect\": false,\n          \"text\": \"Add several variations of the healthy sandwich\"\n        },\n        {\n          \"feedback\": \"No — making it pricier usually reduces uptake; nudges aim to steer without price hikes.\",\n          \"isCorrect\": false,\n          \"text\": \"Increase price of other sandwiches instead\"\n        },\n        {\n          \"feedback\": \"No — detailed calorie disclaimers increase information but don’t shift choices as much as presentation order.\",\n          \"isCorrect\": false,\n          \"text\": \"Show large calorie labels beside every item\"\n        }\n      ],\n      \"question\": \"How to nudge healthier choice?\"\n    },\n    {\n      \"context\": \"In a school cafeteria, placing fruit at checkout increases fruit sales while cookies remain available on a side shelf.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — that’s a nudge: subtle environmental change that steers choices without removing options.\",\n          \"isCorrect\": true,\n          \"text\": \"This is a nudge: subtle, noncoercive steering\"\n        },\n        {\n          \"feedback\": \"No — it’s not a mandate; mandating would remove choice entirely, unlike this example.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a legal mandate restricting choices\"\n        },\n        {\n          \"feedback\": \"No — a direct financial incentive would be offering discounts, which isn’t described here.\",\n          \"isCorrect\": false,\n          \"text\": \"This is a price subsidy for fruit purchases\"\n        },\n        {\n          \"feedback\": \"No — completely removing cookies would be prohibition, which is different from a nudge.\",\n          \"isCorrect\": false,\n          \"text\": \"This is prohibition of unhealthy snacks\"\n        }\n      ],\n      \"question\": \"What describes the cafeteria change?\"\n    },\n    {\n      \"context\": \"Someone sets up a gym app to auto-charge if they skip workouts and donate skipped fees to charity.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — precommitting money and creating costs for lapses helps counter present bias and supports follow-through.\",\n          \"isCorrect\": true,\n          \"text\": \"It’s an effective commitment device against present bias\"\n        },\n        {\n          \"feedback\": \"No — this isn’t primarily social proof; it’s personal commitment via penalties or loss.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s mainly social proof influencing behavior\"\n        },\n        {\n          \"feedback\": \"No — simply charging money without linking to behavior wouldn’t create the same commitment effect.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s just a financial penalty with no behavioral benefit\"\n        },\n        {\n          \"feedback\": \"No — while it changes incentives, calling it a default misses that it’s active commitment, not a passive setting.\",\n          \"isCorrect\": false,\n          \"text\": \"It works because of default settings on payments\"\n        }\n      ],\n      \"question\": \"Why does this work?\"\n    },\n    {\n      \"context\": \"An energy company sends bills saying “You used more than 70% of neighbors.” Consumption drops.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — social proof uses conformity: people adjust to match perceived social norms.\",\n          \"isCorrect\": true,\n          \"text\": \"Social proof prompts people to conform to neighbors’ behavior\"\n        },\n        {\n          \"feedback\": \"No — financial cost info alone doesn’t explain conformity-based reductions; social comparison is key.\",\n          \"isCorrect\": false,\n          \"text\": \"People respond mainly to cost-saving tips on the bill\"\n        },\n        {\n          \"feedback\": \"No — legal threats would reduce use but aren’t present here; this is persuasive, not coercive.\",\n          \"isCorrect\": false,\n          \"text\": \"They were responding to implied penalties from the company\"\n        },\n        {\n          \"feedback\": \"No — availability heuristic is about recall of vivid events, not neighbor comparisons.\",\n          \"isCorrect\": false,\n          \"text\": \"This is availability bias from recent energy news\"\n        }\n      ],\n      \"question\": \"Why did consumption drop?\"\n    },\n    {\n      \"context\": \"An investor refuses to sell a stock that has lost value, hoping it will rebound, while selling profitable stocks quickly.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — loss aversion makes realizing losses painful, so investors hold losers too long and sell winners early.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion explains holding losers and selling winners\"\n        },\n        {\n          \"feedback\": \"No — anchoring might affect price estimates but doesn’t fully explain the hold/ sell pattern described.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring to purchase price explains this behavior\"\n        },\n        {\n          \"feedback\": \"No — present bias affects time preference, but the hold/sell asymmetry is better captured by loss aversion.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias causes the investor’s choices\"\n        },\n        {\n          \"feedback\": \"No — availability would involve recent vivid market stories, not the emotional pain of losses.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic makes them cling to that stock\"\n        }\n      ],\n      \"question\": \"Which bias fits this behavior?\"\n    },\n    {\n      \"context\": \"A retailer prices a jacket at $199 instead of $200; customers react strongly to the $199 tag.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — the left-digit bias makes the leftmost digit disproportionately influence perception of price.\",\n          \"isCorrect\": true,\n          \"text\": \"Left-digit (left-digit) bias shifts perceived price downward\"\n        },\n        {\n          \"feedback\": \"No — anchoring could play a role, but the left-digit effect explains why $199 feels much cheaper than $200.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring on the listed price explains it\"\n        },\n        {\n          \"feedback\": \"No — framing would be about wording, not the psychological impact of the leftmost digit.\",\n          \"isCorrect\": false,\n          \"text\": \"This is purely a framing effect from marketing copy\"\n        },\n        {\n          \"feedback\": \"No — availability is about recall of examples, unrelated to price endings.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic causes shoppers to notice $199 more\"\n        }\n      ],\n      \"question\": \"Why $199 sells better?\"\n    },\n    {\n      \"context\": \"A gym sells annual memberships at sign-up with low attendance after people realize they don’t go.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct — present bias and overoptimism at signup lead people to overestimate future attendance.\",\n          \"isCorrect\": true,\n          \"text\": \"Gym exploits present bias; people overestimate future motivation\"\n        },\n        {\n          \"feedback\": \"No — loss aversion would make them keep coming to avoid losses, not sign up and skip.\",\n          \"isCorrect\": false,\n          \"text\": \"Gym relies on loss aversion to keep members attending\"\n        },\n        {\n          \"feedback\": \"No — anchoring to membership price doesn’t explain overestimation of future attendance.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s mainly anchoring to advertised class schedules\"\n        },\n        {\n          \"feedback\": \"No — social proof could help retention but doesn’t explain the signup-then-skip dynamic.\",\n          \"isCorrect\": false,\n          \"text\": \"They depend on social proof from other members\"\n        }\n      ],\n      \"question\": \"What concept explains this?\"\n    },\n    {\n      \"context\": \"A country switches from opt-in to opt-out organ donation and sees participation jump from 15% to over 90%.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — defaults harness inertia and implied recommendation; changing the default drastically alters behavior.\",\n          \"isCorrect\": true,\n          \"text\": \"The default effect: inertia and implied recommendation drive participation\"\n        },\n        {\n          \"feedback\": \"No — coercion would restrict choice; defaults keep freedom intact while changing the status quo.\",\n          \"isCorrect\": false,\n          \"text\": \"This is because people were coerced into donating\"\n        },\n        {\n          \"feedback\": \"No — preferences haven’t necessarily changed; the structure changed how easy the choice is.\",\n          \"isCorrect\": false,\n          \"text\": \"People’s underlying preferences suddenly changed toward donation\"\n        },\n        {\n          \"feedback\": \"No — lack of information alone doesn’t explain such a massive jump; the default matters more.\",\n          \"isCorrect\": false,\n          \"text\": \"It happened because people finally learned the benefits of donation\"\n        }\n      ],\n      \"question\": \"Why did participation jump?\"\n    },\n    {\n      \"context\": \"A public health team wants to boost vaccination rates. They can (A) send facts, (B) schedule appointments by default, (C) fine the unvaccinated, or (D) post statistics only.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — combining default appointments with social cues reduces friction and leverages social proof, increasing turnout without coercion.\",\n          \"isCorrect\": true,\n          \"text\": \"Automatically schedule appointments and note most neighbors attended\"\n        },\n        {\n          \"feedback\": \"No — facts help but often fail to overcome inertia and present bias without structural changes.\",\n          \"isCorrect\": false,\n          \"text\": \"Send detailed informational pamphlets to all homes\"\n        },\n        {\n          \"feedback\": \"No — fines are coercive and can provoke resistance; they’re not subtle nudges.\",\n          \"isCorrect\": false,\n          \"text\": \"Introduce monetary fines for not vaccinating\"\n        },\n        {\n          \"feedback\": \"No — raw statistics alone rarely change behavior as effectively as defaults plus social proof.\",\n          \"isCorrect\": false,\n          \"text\": \"Publish vaccination statistics on billboards\"\n        }\n      ],\n      \"question\": \"Best nudge strategy?\"\n    },\n    {\n      \"context\": \"A client makes a high initial offer in negotiations. You want your team to avoid being pulled toward that number.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right — making independent estimates before seeing any anchor reduces anchoring’s influence on judgments.\",\n          \"isCorrect\": true,\n          \"text\": \"Have team produce independent estimates before seeing offers\"\n        },\n        {\n          \"feedback\": \"No — seeing a higher anchor won’t reduce its effect; it would likely pull estimates upward instead.\",\n          \"isCorrect\": false,\n          \"text\": \"Show an even higher number first to counter the anchor\"\n        },\n        {\n          \"feedback\": \"No — removing options doesn’t address the cognitive pull of the first number presented.\",\n          \"isCorrect\": false,\n          \"text\": \"Limit negotiable items so the anchor matters less\"\n        },\n        {\n          \"feedback\": \"No — asking for justification after seeing the anchor doesn’t prevent the anchor from biasing the initial estimate.\",\n          \"isCorrect\": false,\n          \"text\": \"Ask team to justify a number after they see the initial offer\"\n        }\n      ],\n      \"question\": \"How to reduce anchoring?\"\n    },\n    {\n      \"context\": \"A homeowner must choose between complex mortgage plans. Which situations make nudges weak or ineffective?\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes — when people engage deliberative System 2 thinking, subtle nudges have less sway because choices are considered carefully.\",\n          \"isCorrect\": true,\n          \"text\": \"When decisions trigger careful System 2 deliberation\"\n        },\n        {\n          \"feedback\": \"No — nudges don’t fail only because money is involved; they work across domains when choices are automatic.\",\n          \"isCorrect\": false,\n          \"text\": \"When choices involve large sums of money alone\"\n        },\n        {\n          \"feedback\": \"No — nudges are not always about defaults; sometimes defaults help even for big decisions if people stay passive.\",\n          \"isCorrect\": false,\n          \"text\": \"Only when defaults are absent do nudges fail\"\n        },\n        {\n          \"feedback\": \"No — saying nudges always succeed is false; effectiveness varies with cognitive engagement.\",\n          \"isCorrect\": false,\n          \"text\": \"Nudges always work regardless of context\"\n        }\n      ],\n      \"question\": \"When do nudges fail?\"\n    }\n  ]\n}",
      "outputTokens": 4652,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-interdisciplinary-behavioral-economics-1",
      "userPrompt": "LESSON_TITLE: Behavioral Economics Foundations\nLESSON_DESCRIPTION: Understanding how cognitive biases and heuristics systematically influence economic decisions, and how choice architecture can improve outcomes\nCHAPTER_TITLE: Decision Making\nCOURSE_TITLE: Behavioral Economics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Rationality Assumption: Classical economics assumed people are rational utility maximizers. But psychologists Daniel Kahneman and Amos Tversky documented systematic patterns where humans deviate from rationality in predictable ways.\n2. A Nobel-Winning Collision: Their research earned Kahneman the 2002 Nobel Prize in Economics — the first psychologist to win it. Behavioral economics was born from this collision of psychology and economic theory.\n3. From Theory to Practice: Richard Thaler expanded these insights into practical applications. His concept of 'nudging' showed how small changes in choice architecture could improve decisions without restricting freedom.\n\nEXPLANATION_STEPS:\n1. Loss Aversion: Loss aversion means losses hurt roughly twice as much as equivalent gains feel good. This asymmetry explains why people take irrational risks to avoid losses but not to achieve gains.\n2. Anchoring Bias: Anchoring occurs when we rely too heavily on the first piece of information encountered. An arbitrary initial number influences subsequent estimates, even when unrelated to the judgment.\n3. Present Bias: Present bias leads us to overweight immediate rewards compared to future ones. We know we should save for retirement, but the pleasure of spending now feels more real.\n4. Framing Effects: Framing effects mean how a choice is presented affects decisions. '90% survival rate' sounds better than '10% mortality rate' — identical information, different emotional response.\n5. Dual Systems: System 1 thinking is fast, automatic, and intuitive. System 2 is slow, deliberate, and analytical. Most decisions use System 1, which is efficient but prone to biases.\n\nMECHANICS_STEPS:\n1. Heuristics in Action: Heuristics are mental shortcuts that usually work but sometimes fail. Availability heuristic: judging probability by how easily examples come to mind, not actual frequency.\n2. Choice Architecture: Choice architecture structures how options are presented. The default, number of options, and order of presentation all influence which option people choose.\n3. Nudge Mechanics: Nudges are subtle changes that steer behavior without forbidding options. Putting healthy food at eye level in cafeterias is a nudge — junk food is still available but less convenient.\n4. Commitment Devices: Commitment devices help overcome present bias. Automatic savings deductions work because they make the rational future choice before present bias can override it.\n5. Social Proof Nudges: Social proof leverages conformity for behavior change. Telling hotel guests that 'most guests reuse towels' increases reuse more than environmental appeals alone.\n\nEXAMPLES_STEPS:\n1. Investment Behavior: Investors hold losing stocks too long and sell winners too early. Loss aversion makes the pain of realizing a loss feel worse than the pleasure of locking in a gain.\n2. Pricing Psychology: Stores price items at $9.99 instead of $10 because our brains anchor on the left digit. This 'left-digit bias' affects perception more than the actual penny saved.\n3. Gym Economics: Gym memberships exploit present bias — we overestimate future motivation when signing up, then fail to attend. The gym profits from our systematic overconfidence about future behavior.\n4. Default Effects: Default options are powerful. Countries with opt-out organ donation have 90%+ participation; opt-in countries have 15%. Same choice, different framing, vastly different outcomes."
    }
  ],
  "taskId": "activity-review"
}
