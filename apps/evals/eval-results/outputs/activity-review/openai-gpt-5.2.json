{
  "generatedAt": "2026-01-17T21:24:18.248Z",
  "modelId": "openai/gpt-5.2",
  "outputs": [
    {
      "duration": 64064.79395800001,
      "inputTokens": 2833,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A payroll app updates 3 tables when paying an employee: balances, paystubs, and tax records. The system crashes after balances update but before the other two.\",\n      \"options\": [\n        {\n          \"feedback\": \"That’s consistency: keeping rules/constraints true. The issue here is avoiding a half-finished multi-step update.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency prevents it\"\n        },\n        {\n          \"feedback\": \"Yep. Atomicity is all-or-nothing, so either all 3 updates happen or none do—no half-paid state.\",\n          \"isCorrect\": true,\n          \"text\": \"Atomicity prevents it\"\n        },\n        {\n          \"feedback\": \"Isolation is about concurrent transactions not interfering, not about a single transaction surviving a crash mid-way.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation prevents it\"\n        },\n        {\n          \"feedback\": \"Durability protects changes after COMMIT. Here the crash happened mid-transaction; atomicity is the key property.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability prevents it\"\n        }\n      ],\n      \"question\": \"What property avoids the half-update?\"\n    },\n    {\n      \"context\": \"A database enforces a rule: inventory_count can’t drop below 0. A checkout transaction tries to subtract 2 items when only 1 remains.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity decides all-or-nothing execution, but it doesn’t define what counts as a “valid” state.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity blocks it\"\n        },\n        {\n          \"feedback\": \"Right. Consistency means transactions can’t move the DB into a state that violates declared rules like >= 0.\",\n          \"isCorrect\": true,\n          \"text\": \"Consistency blocks it\"\n        },\n        {\n          \"feedback\": \"Isolation controls how concurrent transactions see each other; it doesn’t define the inventory rule itself.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation blocks it\"\n        },\n        {\n          \"feedback\": \"Durability is about surviving crashes after commit, not about preventing rule violations.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability blocks it\"\n        }\n      ],\n      \"question\": \"Which property enforces the rule?\"\n    },\n    {\n      \"context\": \"Two support agents open the same ticket. Agent A edits the priority, while Agent B edits the description at the same time. Each saves.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity ensures each agent’s save is all-or-nothing, but doesn’t stop their actions from clobbering each other.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity (each save is whole)\"\n        },\n        {\n          \"feedback\": \"Consistency is about meeting constraints (like valid values), not shielding concurrent edits.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency (values stay valid)\"\n        },\n        {\n          \"feedback\": \"Yes. Isolation aims to prevent concurrent transactions from producing weird interference effects.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation (they shouldn’t interfere)\"\n        },\n        {\n          \"feedback\": \"Durability means saved changes persist after commit, not that concurrent saves won’t conflict.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability (saves survive crashes)\"\n        }\n      ],\n      \"question\": \"What property addresses interference?\"\n    },\n    {\n      \"context\": \"A writer clicks “Publish.” The app gets a “success” response. Ten seconds later the server loses power. After reboot, the post is still visible.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity would matter if publish had multiple steps that might partly apply; the key here is surviving a crash after success.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity\"\n        },\n        {\n          \"feedback\": \"Consistency is about rules and invariants, not about persistence after a power loss.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency\"\n        },\n        {\n          \"feedback\": \"Isolation is about concurrency behavior, not whether a committed post survives a crash.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation\"\n        },\n        {\n          \"feedback\": \"Correct. Durability means once the transaction commits, the change won’t disappear even if the system crashes.\",\n          \"isCorrect\": true,\n          \"text\": \"Durability\"\n        }\n      ],\n      \"question\": \"Which property is demonstrated?\"\n    },\n    {\n      \"context\": \"A store’s checkout runs with “fast” settings. Two shoppers view the last item as available and both place orders within milliseconds. One order later gets canceled.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not exactly. Atomicity stops partial checkout, but it doesn’t prevent two checkouts from racing on the same item.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity is too weak\"\n        },\n        {\n          \"feedback\": \"Not quite. Consistency might still hold if the system later cancels/refunds, even though the user experience is bad.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency is missing\"\n        },\n        {\n          \"feedback\": \"Yes. A weaker isolation level can allow anomalies like both transactions thinking the item is available.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation is too weak\"\n        },\n        {\n          \"feedback\": \"Durability is unrelated; the issue happens even without crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability is missing\"\n        }\n      ],\n      \"question\": \"What likely caused the double-sell?\"\n    },\n    {\n      \"context\": \"A transaction updates a row and keeps working. Another transaction tries to update the same row and just waits until the first one finishes.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity is about all-or-nothing results, not about making other transactions wait.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity in action\"\n        },\n        {\n          \"feedback\": \"Consistency is about meeting rules/constraints, not coordinating concurrent access.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency in action\"\n        },\n        {\n          \"feedback\": \"Correct. This is locking: the first transaction holds an exclusive lock, so the second can’t modify until release.\",\n          \"isCorrect\": true,\n          \"text\": \"Exclusive locking behavior\"\n        },\n        {\n          \"feedback\": \"Durability is about crash survival after commit; waiting is a concurrency control mechanism.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability in action\"\n        }\n      ],\n      \"question\": \"Why does the second one wait?\"\n    },\n    {\n      \"context\": \"Two transactions run: T1 locks row A then wants row B. T2 locks row B then wants row A. Both are stuck waiting forever.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity doesn’t detect waiting cycles; it’s about all-or-nothing outcomes.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity issue\"\n        },\n        {\n          \"feedback\": \"Consistency is about valid states and constraints, not circular waiting.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency issue\"\n        },\n        {\n          \"feedback\": \"Isolation uses locks, but the specific stuck-forever pattern is a deadlock that needs detection and resolution.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation alone caused it\"\n        },\n        {\n          \"feedback\": \"Yes. That circular wait is a deadlock; the DB breaks it by aborting one transaction.\",\n          \"isCorrect\": true,\n          \"text\": \"Deadlock; abort one transaction\"\n        }\n      ],\n      \"question\": \"What’s the right diagnosis?\"\n    },\n    {\n      \"context\": \"A database crashes mid-transaction. On restart, it replays a log to finish committed work and undo incomplete work so the data is correct again.\",\n      \"options\": [\n        {\n          \"feedback\": \"Buffers are part of execution, but they don’t guarantee correct recovery after crashes by themselves.\",\n          \"isCorrect\": false,\n          \"text\": \"Buffering changes in memory\"\n        },\n        {\n          \"feedback\": \"Right. Write-ahead logging records intent before applying changes so recovery can redo/undo safely after a crash.\",\n          \"isCorrect\": true,\n          \"text\": \"Write-ahead logging\"\n        },\n        {\n          \"feedback\": \"Locks handle concurrency while running; after a crash, locks are gone and don’t help reconstruct state.\",\n          \"isCorrect\": false,\n          \"text\": \"Locking mechanism\"\n        },\n        {\n          \"feedback\": \"Deadlock detection decides who to abort during circular waits, not how to recover after a crash.\",\n          \"isCorrect\": false,\n          \"text\": \"Deadlock detection\"\n        }\n      ],\n      \"question\": \"What mechanism enables recovery?\"\n    },\n    {\n      \"context\": \"A transaction inserts three records. The third insert fails due to a constraint violation. After ROLLBACK, none of the new records remain.\",\n      \"options\": [\n        {\n          \"feedback\": \"Close, but atomicity is the property; rollback is the action that implements it when something goes wrong.\",\n          \"isCorrect\": false,\n          \"text\": \"Isolation did it\"\n        },\n        {\n          \"feedback\": \"Correct. ROLLBACK undoes all changes from that transaction, restoring the pre-transaction state.\",\n          \"isCorrect\": true,\n          \"text\": \"Rollback undid the transaction\"\n        },\n        {\n          \"feedback\": \"Durability would apply after a commit; here the transaction never successfully committed.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability removed them\"\n        },\n        {\n          \"feedback\": \"Consistency is about the rule being enforced; removing the earlier inserts is atomicity/rollback behavior.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency removed them\"\n        }\n      ],\n      \"question\": \"Why did all inserts disappear?\"\n    },\n    {\n      \"context\": \"A system claims it can skip write-ahead logging and still guarantee committed changes survive power loss, as long as it flushes data “eventually.”\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. Without a log flushed before data changes, a crash can lose committed updates with no reliable way to reconstruct them.\",\n          \"isCorrect\": true,\n          \"text\": \"It can’t guarantee durability reliably\"\n        },\n        {\n          \"feedback\": \"Atomicity is about partial updates; this claim is about surviving crashes after commit, which is durability.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity is the only risk\"\n        },\n        {\n          \"feedback\": \"Isolation can’t make committed bytes survive a power loss; it’s about concurrency visibility, not persistence.\",\n          \"isCorrect\": false,\n          \"text\": \"Higher isolation would fix it\"\n        },\n        {\n          \"feedback\": \"Consistency rules don’t help if the committed state is simply lost due to a crash.\",\n          \"isCorrect\": false,\n          \"text\": \"Constraints would prevent loss\"\n        }\n      ],\n      \"question\": \"Is the durability claim believable?\"\n    },\n    {\n      \"context\": \"A video platform stores a post, tags, and notifications in one transaction. The transaction commits. Immediately after, the app crashes before showing the user “Published.”\",\n      \"options\": [\n        {\n          \"feedback\": \"Not necessarily. If the commit succeeded, durability means the data should remain even if the app crashes afterward.\",\n          \"isCorrect\": false,\n          \"text\": \"The data is probably lost\"\n        },\n        {\n          \"feedback\": \"Correct. Commit makes it permanent; the user UI not updating doesn’t undo the committed transaction.\",\n          \"isCorrect\": true,\n          \"text\": \"The data should still be saved\"\n        },\n        {\n          \"feedback\": \"Isolation affects what other transactions can see while it runs; after commit, isolation isn’t the concern.\",\n          \"isCorrect\": false,\n          \"text\": \"It depends on isolation level\"\n        },\n        {\n          \"feedback\": \"Consistency could still hold either way; the key question is persistence after commit, which is durability.\",\n          \"isCorrect\": false,\n          \"text\": \"It depends on constraints\"\n        }\n      ],\n      \"question\": \"What’s most likely true after reboot?\"\n    },\n    {\n      \"context\": \"A team debates isolation levels. They want maximum throughput for analytics dashboards, and they can tolerate seeing slightly stale data occasionally.\",\n      \"options\": [\n        {\n          \"feedback\": \"Serializable is safest but typically reduces concurrency and throughput due to stronger guarantees.\",\n          \"isCorrect\": false,\n          \"text\": \"Use Serializable for speed\"\n        },\n        {\n          \"feedback\": \"Read Committed is generally faster and can allow some anomalies; that tradeoff can be acceptable for dashboards.\",\n          \"isCorrect\": true,\n          \"text\": \"Use Read Committed\"\n        },\n        {\n          \"feedback\": \"If you require the strongest correctness, you usually pay a performance cost, not gain speed.\",\n          \"isCorrect\": false,\n          \"text\": \"Stronger isolation is always faster\"\n        },\n        {\n          \"feedback\": \"Durability isn’t an isolation level choice; it’s a separate guarantee about committed data surviving crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Turn off durability instead\"\n        }\n      ],\n      \"question\": \"Which isolation choice fits their needs?\"\n    },\n    {\n      \"context\": \"Three transactions run: T1 reads a value, T2 updates and commits, then T1 reads again and sees a different value within the same transaction.\",\n      \"options\": [\n        {\n          \"feedback\": \"Atomicity is about all-or-nothing updates; T1 is seeing a visibility anomaly across time, not a partial update.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity violation\"\n        },\n        {\n          \"feedback\": \"Consistency is about constraints; the values could both satisfy constraints and still change mid-transaction.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency violation\"\n        },\n        {\n          \"feedback\": \"Yes. Isolation aims to make a transaction feel like it runs alone; seeing changes from others mid-transaction breaks that feel.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation issue\"\n        },\n        {\n          \"feedback\": \"Durability is about surviving crashes, not about whether reads change during a transaction.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability issue\"\n        }\n      ],\n      \"question\": \"What kind of problem is this?\"\n    },\n    {\n      \"context\": \"A banking app transfers $100. It debits Account A, then credits Account B. Halfway through, the credit step fails due to a timeout.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. Atomicity ensures you don’t end with money “missing”; the debit must be undone if the credit can’t happen.\",\n          \"isCorrect\": true,\n          \"text\": \"Rollback the whole transfer\"\n        },\n        {\n          \"feedback\": \"Retry only the credit risks double-credit if the credit actually succeeded but the timeout hid it.\",\n          \"isCorrect\": false,\n          \"text\": \"Retry only the credit step\"\n        },\n        {\n          \"feedback\": \"Committing the debit alone breaks the all-or-nothing nature of the transfer and creates a limbo state.\",\n          \"isCorrect\": false,\n          \"text\": \"Commit the debit and log the rest\"\n        },\n        {\n          \"feedback\": \"Ignoring the failure violates the intent of the operation; you’d leave accounts inconsistent from the user’s perspective.\",\n          \"isCorrect\": false,\n          \"text\": \"Do nothing; it will reconcile later\"\n        }\n      ],\n      \"question\": \"What’s the safest response?\"\n    },\n    {\n      \"context\": \"A developer says: “If every transaction is atomic, we don’t need isolation.” Their app has many concurrent users editing shared records.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. Atomicity prevents partial results, but without isolation, concurrent transactions can still interleave and overwrite each other.\",\n          \"isCorrect\": true,\n          \"text\": \"No—atomicity doesn’t stop interference\"\n        },\n        {\n          \"feedback\": \"Not quite. Atomicity is necessary but doesn’t guarantee the final result matches any sensible one-at-a-time order.\",\n          \"isCorrect\": false,\n          \"text\": \"Yes—atomicity is enough for concurrency\"\n        },\n        {\n          \"feedback\": \"Consistency rules can’t prevent all concurrency anomalies; two valid writes can still conflict without isolation.\",\n          \"isCorrect\": false,\n          \"text\": \"Constraints replace isolation\"\n        },\n        {\n          \"feedback\": \"Durability is unrelated to concurrent correctness; it only ensures committed results persist after crashes.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability replaces isolation\"\n        }\n      ],\n      \"question\": \"Is atomicity enough without isolation?\"\n    },\n    {\n      \"context\": \"A database holds changes “in a private workspace” until COMMIT. Another session reads the same rows before the first transaction commits.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not always. Depending on isolation, the other session typically should not see uncommitted changes.\",\n          \"isCorrect\": false,\n          \"text\": \"It will see the uncommitted changes\"\n        },\n        {\n          \"feedback\": \"Correct. Uncommitted changes are usually invisible; COMMIT is what makes them visible to others.\",\n          \"isCorrect\": true,\n          \"text\": \"It shouldn’t see the changes yet\"\n        },\n        {\n          \"feedback\": \"Durability is about crashes after commit, not visibility rules before commit.\",\n          \"isCorrect\": false,\n          \"text\": \"It depends only on durability settings\"\n        },\n        {\n          \"feedback\": \"Deadlock detection is about circular waits, not about read visibility of uncommitted work.\",\n          \"isCorrect\": false,\n          \"text\": \"Deadlock detection decides visibility\"\n        }\n      ],\n      \"question\": \"What should the reader observe?\"\n    },\n    {\n      \"context\": \"An airline site must avoid selling the same seat twice. At peak load, they also want decent speed. The team considers their isolation level.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not necessarily. Atomicity won’t prevent two transactions from both choosing the same seat before either commits.\",\n          \"isCorrect\": false,\n          \"text\": \"Atomicity alone prevents double-booking\"\n        },\n        {\n          \"feedback\": \"Correct. You need sufficient isolation (often via locks/serializable behavior) to stop concurrent seat claims.\",\n          \"isCorrect\": true,\n          \"text\": \"Isolation is key, with a performance tradeoff\"\n        },\n        {\n          \"feedback\": \"Durability prevents losing bookings after a crash, but it doesn’t prevent two users booking the same seat.\",\n          \"isCorrect\": false,\n          \"text\": \"Durability is key\"\n        },\n        {\n          \"feedback\": \"Consistency constraints help, but without isolation you can still get races; you typically need both protection and concurrency control.\",\n          \"isCorrect\": false,\n          \"text\": \"Consistency constraints are enough\"\n        }\n      ],\n      \"question\": \"What’s the core tension here?\"\n    },\n    {\n      \"context\": \"A recovery tool undoes a failed transaction by reversing operations. It starts with the last change and works backward toward the first.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. Undo must follow reverse order to cleanly restore earlier states (like pushing/popping a stack of changes).\",\n          \"isCorrect\": true,\n          \"text\": \"Because rollback reverses effects safely\"\n        },\n        {\n          \"feedback\": \"Not quite. Isolation is about concurrency; reverse-order undo is about correct recovery of a single transaction’s changes.\",\n          \"isCorrect\": false,\n          \"text\": \"Because isolation requires it\"\n        },\n        {\n          \"feedback\": \"Durability is about keeping committed changes; rollback is for uncommitted work, so durability isn’t the reason.\",\n          \"isCorrect\": false,\n          \"text\": \"Because durability requires it\"\n        },\n        {\n          \"feedback\": \"Consistency rules say what states are valid, not the algorithm for undoing a sequence of writes.\",\n          \"isCorrect\": false,\n          \"text\": \"Because consistency requires it\"\n        }\n      ],\n      \"question\": \"Why undo in reverse order?\"\n    }\n  ]\n}",
      "outputTokens": 3280,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-cs-database-transactions-acid-1",
      "userPrompt": "LESSON_TITLE: Database Transactions and ACID\nLESSON_DESCRIPTION: Understanding database transactions and ACID properties for maintaining data integrity in concurrent systems\nCHAPTER_TITLE: Data Integrity\nCOURSE_TITLE: Database Systems\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Corruption Problem: Before databases had transactions, a power failure during a bank transfer could leave money in limbo — deducted from one account but never credited to another. Data inconsistency was the norm.\n2. Gray's Breakthrough: Jim Gray at IBM tackled this chaos in the 1970s. His insight: group related operations together and guarantee they either all succeed or all fail. No partial states allowed.\n3. The ACID Standard: The ACID properties emerged as the gold standard for reliable data operations. They transformed databases from fragile systems into ones businesses could trust with critical data.\n\nEXPLANATION_STEPS:\n1. Atomicity: Atomicity means 'all or nothing.' A transaction either completes entirely or has no effect at all. There's no partial completion — if any part fails, everything rolls back.\n2. Consistency: Consistency ensures transactions bring the database from one valid state to another. Rules defined in the schema (like account balance >= 0) are never violated.\n3. Isolation: Isolation means concurrent transactions don't interfere with each other. Each transaction sees a consistent snapshot, as if it were running alone.\n4. Durability: Durability guarantees that once a transaction commits, its changes survive system crashes. The database uses write-ahead logging to ensure committed data isn't lost.\n5. Isolation Levels: Isolation levels trade off between consistency and performance. Serializable is safest but slowest; Read Committed is faster but allows some anomalies.\n\nMECHANICS_STEPS:\n1. Transaction Lifecycle: A transaction begins with BEGIN, then executes statements. Changes are held in a buffer, invisible to other transactions until COMMIT makes them permanent.\n2. Write-Ahead Logging: Write-ahead logging records changes before applying them. If a crash occurs mid-transaction, the log allows the database to either complete or undo the changes during recovery.\n3. Locking Mechanisms: Locks prevent concurrent access conflicts. When a transaction modifies a row, it acquires an exclusive lock. Other transactions must wait until the lock releases.\n4. Deadlock Detection: Deadlocks occur when two transactions each hold a lock the other needs. The database detects this circular wait and aborts one transaction to break the cycle.\n5. Rollback Process: ROLLBACK undoes all changes made during the transaction. The database uses the log to reverse each operation in the opposite order it was applied.\n\nEXAMPLES_STEPS:\n1. Banking Transfers: Banking transfers are the classic example. Moving $100 from savings to checking must debit one and credit the other atomically — or neither should happen.\n2. E-commerce Orders: E-commerce checkout involves inventory reduction, payment processing, and order creation. All must succeed together, or the customer gets charged without receiving their product.\n3. Airline Reservations: Airline booking systems face extreme concurrency — thousands of users trying to book the same seats. Transactions prevent double-booking while maintaining performance.\n4. Social Media Posts: Social media platforms use transactions for complex operations like posting a photo with tags, location, and notifications — all must be recorded consistently."
    },
    {
      "duration": 81722.576375,
      "inputTokens": 2851,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A museum charges $22 for adults, $12 for students, and $16 for seniors. The exhibits and costs are identical for everyone.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. The key is same product, different customers, and the price gap isn’t explained by serving-cost differences.\",\n          \"isCorrect\": true,\n          \"text\": \"Price discrimination based on customer segments\"\n        },\n        {\n          \"feedback\": \"Not quite. Cost-based pricing would require clear cost differences (like extra services) between groups.\",\n          \"isCorrect\": false,\n          \"text\": \"Cost-based pricing due to different serving costs\"\n        },\n        {\n          \"feedback\": \"Close idea, but bundles are about packaging multiple products together, not charging different groups different prices.\",\n          \"isCorrect\": false,\n          \"text\": \"Bundling to increase total willingness to pay\"\n        },\n        {\n          \"feedback\": \"Not necessarily. Predatory pricing is about pricing low to drive rivals out, not charging different groups different prices.\",\n          \"isCorrect\": false,\n          \"text\": \"Predatory pricing to eliminate competitors\"\n        }\n      ],\n      \"question\": \"What’s the pricing strategy here?\"\n    },\n    {\n      \"context\": \"A car wash sells “Basic” for $10 (no wax) and “Shine” for $18 (includes wax). Most customers buy Shine. The owner admits Basic mainly exists so Shine feels like a better deal.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Second-degree discrimination uses versions so customers self-select; the low tier can anchor the premium tier’s value.\",\n          \"isCorrect\": true,\n          \"text\": \"Second-degree price discrimination (menu/versioning)\"\n        },\n        {\n          \"feedback\": \"Not quite. First-degree would require charging each person their exact maximum willingness to pay.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree price discrimination\"\n        },\n        {\n          \"feedback\": \"Close, but third-degree is about different identifiable groups (like students vs adults), not product versions.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree price discrimination\"\n        },\n        {\n          \"feedback\": \"Wrong target. Dynamic pricing changes over time with demand signals; this is a fixed menu of versions.\",\n          \"isCorrect\": false,\n          \"text\": \"Dynamic pricing\"\n        }\n      ],\n      \"question\": \"Which type best fits?\"\n    },\n    {\n      \"context\": \"A theme park notices locals will skip a visit if prices rise much, but out-of-town tourists usually come anyway once they’ve traveled. The park sets a lower ticket price for locals with proof of address.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Locals are more price-sensitive (elastic), so a lower price sells more; tourists are more inelastic, so they’re charged more.\",\n          \"isCorrect\": true,\n          \"text\": \"Charge more to tourists because demand is more inelastic\"\n        },\n        {\n          \"feedback\": \"Backwards. If tourists were very price-sensitive, raising their price would cause big quantity drops.\",\n          \"isCorrect\": false,\n          \"text\": \"Charge more to tourists because demand is more elastic\"\n        },\n        {\n          \"feedback\": \"Not the core. The motivation here is different elasticities, not different per-customer costs.\",\n          \"isCorrect\": false,\n          \"text\": \"Charge different prices because tourists cost more to serve\"\n        },\n        {\n          \"feedback\": \"Not necessarily. This can be profit-maximizing without being predatory; it’s segmentation, not rival elimination.\",\n          \"isCorrect\": false,\n          \"text\": \"Keep one price to avoid predatory pricing concerns\"\n        }\n      ],\n      \"question\": \"What’s the best pricing logic?\"\n    },\n    {\n      \"context\": \"A concert offers $40 student tickets and $120 regular tickets, both usable for the same seats. Students start buying the $40 tickets and reselling them online for $100.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Resale lets low-price buyers supply high-price buyers, collapsing the firm’s ability to keep segments separate.\",\n          \"isCorrect\": true,\n          \"text\": \"Arbitrage is undermining segmentation\"\n        },\n        {\n          \"feedback\": \"Not really. The issue isn’t menu design; it’s that tickets can be transferred and resold.\",\n          \"isCorrect\": false,\n          \"text\": \"The versions aren’t different enough\"\n        },\n        {\n          \"feedback\": \"No. Elasticity differences can still exist; the problem is the firm can’t enforce who uses which ticket.\",\n          \"isCorrect\": false,\n          \"text\": \"Demand elasticity must be the same for both groups\"\n        },\n        {\n          \"feedback\": \"Not necessarily. Dynamic pricing could exist, but the immediate failure is resale between groups.\",\n          \"isCorrect\": false,\n          \"text\": \"The price changes aren’t frequent enough\"\n        }\n      ],\n      \"question\": \"What’s breaking the strategy?\"\n    },\n    {\n      \"context\": \"A ride-share app raises prices sharply during a sudden storm and drops them once the storm passes. The company says it’s responding to real-time conditions.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Prices are adjusting in response to demand (and often supply) signals in real time—classic dynamic pricing.\",\n          \"isCorrect\": true,\n          \"text\": \"Dynamic pricing driven by demand signals\"\n        },\n        {\n          \"feedback\": \"Not quite. First-degree would require each rider to get a personalized maximum price, not one surge price.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree price discrimination\"\n        },\n        {\n          \"feedback\": \"Wrong mechanism. Bundling is packaging multiple items; this is time-varying price for the same ride.\",\n          \"isCorrect\": false,\n          \"text\": \"Bundling strategy\"\n        },\n        {\n          \"feedback\": \"Close but off. It’s not primarily about identifying stable groups (students, seniors); it’s about conditions right now.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination based on customer groups\"\n        }\n      ],\n      \"question\": \"What’s this called?\"\n    },\n    {\n      \"context\": \"A streaming site charges $6/month in Country A and $14/month in Country B for the same plan. Many users try using a VPN to pretend they’re in Country A.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. If people can “move” purchases across segments (via VPN), the firm can’t keep the high-price market separate.\",\n          \"isCorrect\": true,\n          \"text\": \"They must prevent arbitrage across countries\"\n        },\n        {\n          \"feedback\": \"Not the main point. The firm can still segment even if costs differ, but discrimination hinges on willingness to pay.\",\n          \"isCorrect\": false,\n          \"text\": \"They must prove costs are identical in both countries\"\n        },\n        {\n          \"feedback\": \"Not required. Versioning is one approach, but here the segmentation is geographic, not product-based.\",\n          \"isCorrect\": false,\n          \"text\": \"They must create more product versions\"\n        },\n        {\n          \"feedback\": \"Not necessarily. Personalized pricing is one extreme; country-level pricing can work if arbitrage is blocked.\",\n          \"isCorrect\": false,\n          \"text\": \"They must switch to fully personalized pricing\"\n        }\n      ],\n      \"question\": \"What condition is being challenged?\"\n    },\n    {\n      \"context\": \"A gym offers: (1) $25 for 4 visits/month, (2) $45 unlimited visits. Heavy users pick unlimited; casual users pick the 4-visit plan.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Different packages let customers sort themselves based on usage, revealing willingness to pay without the gym needing to “know” each person.\",\n          \"isCorrect\": true,\n          \"text\": \"Second-degree discrimination via self-selection\"\n        },\n        {\n          \"feedback\": \"Not quite. Third-degree is based on identifiable groups (like age or employer), not usage plans.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination via group pricing\"\n        },\n        {\n          \"feedback\": \"No. First-degree would mean each member gets a unique price tailored to them.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree discrimination via personalized pricing\"\n        },\n        {\n          \"feedback\": \"No. Bundling combines different products; these are usage quantities of the same service.\",\n          \"isCorrect\": false,\n          \"text\": \"Bundling different products together\"\n        }\n      ],\n      \"question\": \"What’s happening here?\"\n    },\n    {\n      \"context\": \"A consultant charges each client a different hourly rate after a long negotiation, aiming to capture as much of each client’s budget as possible.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Negotiation can approximate charging each buyer near their maximum willingness to pay—an imperfect form of first-degree discrimination.\",\n          \"isCorrect\": true,\n          \"text\": \"First-degree price discrimination (imperfect via bargaining)\"\n        },\n        {\n          \"feedback\": \"Not quite. Second-degree would offer a posted menu of versions, not one-on-one negotiated prices.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree discrimination\"\n        },\n        {\n          \"feedback\": \"No. Third-degree is group-based (students vs non-students), not individualized bargaining.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Wrong tool. Dynamic pricing changes with time/conditions; this is personalized by client willingness to pay.\",\n          \"isCorrect\": false,\n          \"text\": \"Dynamic pricing\"\n        }\n      ],\n      \"question\": \"Which type best matches?\"\n    },\n    {\n      \"context\": \"A phone company sells internet alone for $60 or a bundle (internet + streaming + cloud storage) for $75. Many customers only want internet but still buy the bundle.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Bundling can capture more total willingness to pay by packaging items so customers pay for extras they value less.\",\n          \"isCorrect\": true,\n          \"text\": \"Bundling to extract more consumer surplus\"\n        },\n        {\n          \"feedback\": \"Not quite. This isn’t different prices for the exact same product; it’s a package of multiple products.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree price discrimination\"\n        },\n        {\n          \"feedback\": \"No. Menu/versioning is about versions of one product; bundling is combining separate items/services.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree discrimination through versioning\"\n        },\n        {\n          \"feedback\": \"Not necessarily. Predation is about driving out rivals; bundling here is about willingness to pay.\",\n          \"isCorrect\": false,\n          \"text\": \"Predatory pricing\"\n        }\n      ],\n      \"question\": \"Why does the bundle work?\"\n    },\n    {\n      \"context\": \"A coffee shop considers raising the price of drip coffee near a commuter station. The manager believes commuters will still buy it because they’re in a rush.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. If buyers don’t reduce quantity much when price rises, demand is inelastic, giving the seller more pricing power.\",\n          \"isCorrect\": true,\n          \"text\": \"Demand is relatively inelastic\"\n        },\n        {\n          \"feedback\": \"Backwards. Elastic demand would mean commuters cut back a lot if price rises.\",\n          \"isCorrect\": false,\n          \"text\": \"Demand is highly elastic\"\n        },\n        {\n          \"feedback\": \"Not the key. Monopoly power isn’t required; pricing power here comes from low sensitivity to price.\",\n          \"isCorrect\": false,\n          \"text\": \"The shop must be a monopoly\"\n        },\n        {\n          \"feedback\": \"Not necessarily. Higher costs could justify higher prices, but the manager’s logic relies on willingness-to-pay, not costs.\",\n          \"isCorrect\": false,\n          \"text\": \"Costs must be rising sharply\"\n        }\n      ],\n      \"question\": \"What belief supports a higher price?\"\n    },\n    {\n      \"context\": \"A software firm charges businesses $900 and students $90 for the same download. A critic says, “That’s unfair because it has nothing to do with production cost.”\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Price discrimination is about differences in willingness to pay and capturing consumer surplus, not matching different costs.\",\n          \"isCorrect\": true,\n          \"text\": \"Cost differences aren’t required for price discrimination\"\n        },\n        {\n          \"feedback\": \"Not quite. The firm may still earn profit even if some groups pay less; the point is extracting more total surplus.\",\n          \"isCorrect\": false,\n          \"text\": \"It only works if the low-price group is unprofitable\"\n        },\n        {\n          \"feedback\": \"No. It can be very profitable without being first-degree; group pricing is typically third-degree.\",\n          \"isCorrect\": false,\n          \"text\": \"It only works when prices are personalized to each buyer\"\n        },\n        {\n          \"feedback\": \"No. Efficiency can sometimes improve, but discrimination doesn’t automatically imply the output is socially optimal.\",\n          \"isCorrect\": false,\n          \"text\": \"It always guarantees the socially efficient quantity\"\n        }\n      ],\n      \"question\": \"What’s the key correction?\"\n    },\n    {\n      \"context\": \"A stadium wants to charge fans more on playoff nights. It can’t directly observe who is a die-hard fan versus a casual fan, but it can observe purchase timing: early vs last-minute.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. When the firm can’t see “type” directly, it uses signals (like timing) that correlate with willingness to pay.\",\n          \"isCorrect\": true,\n          \"text\": \"Use segmentation signals correlated with price sensitivity\"\n        },\n        {\n          \"feedback\": \"Not quite. Arbitrage prevention matters, but the question is about identifying segments, not stopping resale.\",\n          \"isCorrect\": false,\n          \"text\": \"Only focus on preventing arbitrage\"\n        },\n        {\n          \"feedback\": \"No. A single price ignores useful information; timing can help separate more and less price-sensitive buyers.\",\n          \"isCorrect\": false,\n          \"text\": \"Set one average price to be fair\"\n        },\n        {\n          \"feedback\": \"Too strong. Perfect mind-reading isn’t required; firms can approximate willingness to pay using observable behaviors.\",\n          \"isCorrect\": false,\n          \"text\": \"They need first-degree discrimination to do this\"\n        }\n      ],\n      \"question\": \"How can it segment customers?\"\n    },\n    {\n      \"context\": \"A bakery sells the same cupcakes for $3 each. On slow afternoons it offers “buy 2 get 1 free” to anyone, then removes the deal during busy mornings.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. It’s changing the effective price based on real-time demand conditions—discounting when demand is low.\",\n          \"isCorrect\": true,\n          \"text\": \"Dynamic pricing responds to demand fluctuations\"\n        },\n        {\n          \"feedback\": \"Not quite. This isn’t charging different groups different prices at the same time; it varies by time/conditions.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree discrimination by customer group\"\n        },\n        {\n          \"feedback\": \"No. Versioning would change product attributes; here the cupcake is identical and only timing/price changes.\",\n          \"isCorrect\": false,\n          \"text\": \"Second-degree discrimination via versions\"\n        },\n        {\n          \"feedback\": \"Not necessary. The deal doesn’t require bargaining; it’s a posted price promotion.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree discrimination via negotiation\"\n        }\n      ],\n      \"question\": \"What’s the main mechanism?\"\n    },\n    {\n      \"context\": \"A digital textbook publisher offers regional pricing but finds people share login access with friends abroad. The publisher debates stronger account controls.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. If access can be transferred, low-price buyers can effectively supply high-price buyers, undoing discrimination.\",\n          \"isCorrect\": true,\n          \"text\": \"Tighten controls to prevent arbitrage\"\n        },\n        {\n          \"feedback\": \"Not the core. Better menus help when customers self-select; the issue here is cross-market sharing.\",\n          \"isCorrect\": false,\n          \"text\": \"Create more versions of the textbook\"\n        },\n        {\n          \"feedback\": \"No. The problem isn’t that demand elasticities don’t differ; it’s that the firm can’t enforce segmentation.\",\n          \"isCorrect\": false,\n          \"text\": \"Assume both regions have identical elasticity\"\n        },\n        {\n          \"feedback\": \"Not necessarily. Raising the low price may reduce participation and doesn’t directly solve the leakage between regions.\",\n          \"isCorrect\": false,\n          \"text\": \"Raise the low-price region until sharing stops\"\n        }\n      ],\n      \"question\": \"What’s the most direct fix?\"\n    },\n    {\n      \"context\": \"A movie theater wants more total revenue. It notices retirees often come at 2pm, while most workers can only come at 7pm. It sets a cheaper 2pm ticket.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Time acts like a segment: people with flexible schedules tend to be more price-sensitive, so a lower price fills seats that would otherwise be empty.\",\n          \"isCorrect\": true,\n          \"text\": \"Segment by time because elasticities differ\"\n        },\n        {\n          \"feedback\": \"Not quite. This isn’t about changing the movie; it’s the same showing experience at different times.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s second-degree discrimination via product versions\"\n        },\n        {\n          \"feedback\": \"No. First-degree would require individually tailored prices, not one matinee price.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s first-degree discrimination\"\n        },\n        {\n          \"feedback\": \"Not required. The theater can do this even with competition; the key is different willingness to pay by time.\",\n          \"isCorrect\": false,\n          \"text\": \"It only works if the theater is a monopoly\"\n        }\n      ],\n      \"question\": \"Why would a matinee discount help?\"\n    },\n    {\n      \"context\": \"A cloud service sells a “Starter” plan with slow speeds and a “Pro” plan that’s fast. The slow speeds are cheap to provide, but the company could easily make Starter fast too.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Sometimes “worse” versions are intentionally designed to push high-value users to pay more through self-selection.\",\n          \"isCorrect\": true,\n          \"text\": \"The low tier can be intentionally degraded for self-selection\"\n        },\n        {\n          \"feedback\": \"Not quite. If it were purely cost-based, they’d focus on cost differences, but here they could cheaply upgrade Starter.\",\n          \"isCorrect\": false,\n          \"text\": \"Starter is slower only because it costs more to run fast\"\n        },\n        {\n          \"feedback\": \"No. Third-degree is group pricing; this is versioning within the same customer pool.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s third-degree discrimination by customer group\"\n        },\n        {\n          \"feedback\": \"Wrong. Arbitrage is about resale between buyers; slowing Starter is about separating willingness to pay.\",\n          \"isCorrect\": false,\n          \"text\": \"It’s mainly to prevent resale\"\n        }\n      ],\n      \"question\": \"Why keep Starter “worse”?\"\n    },\n    {\n      \"context\": \"A sports league sells season tickets and single-game tickets. A fan says, “If they were smart, they’d just charge everyone the same per game to be fair.”\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Different packages let high-intensity fans pay more overall while still offering an entry option to casual fans.\",\n          \"isCorrect\": true,\n          \"text\": \"Packages can separate high vs low willingness to pay\"\n        },\n        {\n          \"feedback\": \"Not quite. A single uniform price can leave money on the table if demand sensitivity differs across buyers.\",\n          \"isCorrect\": false,\n          \"text\": \"Uniform pricing always maximizes revenue\"\n        },\n        {\n          \"feedback\": \"No. This doesn’t require perfect information about each fan; self-selection through packages can do a lot.\",\n          \"isCorrect\": false,\n          \"text\": \"It only works if the league knows each fan’s exact WTP\"\n        },\n        {\n          \"feedback\": \"Not the key. Cost differences per ticket are small; the point is extracting more consumer surplus.\",\n          \"isCorrect\": false,\n          \"text\": \"It works only when per-game costs differ a lot\"\n        }\n      ],\n      \"question\": \"What’s the best reply?\"\n    },\n    {\n      \"context\": \"A company tries personalized online prices. After backlash, it switches to three visible tiers instead. Profits fall less than expected because customers sort themselves into tiers.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Tiered menus (second-degree) can approximate personalization by letting customers reveal preferences through choices.\",\n          \"isCorrect\": true,\n          \"text\": \"Second-degree menus can mimic personalization\"\n        },\n        {\n          \"feedback\": \"No. Third-degree is group-based; tiers are open to everyone and rely on self-selection.\",\n          \"isCorrect\": false,\n          \"text\": \"Third-degree segmentation is doing the heavy lifting\"\n        },\n        {\n          \"feedback\": \"Not quite. Arbitrage prevention matters, but the key change is moving from individual targeting to a self-selecting menu.\",\n          \"isCorrect\": false,\n          \"text\": \"The main improvement is stopping arbitrage\"\n        },\n        {\n          \"feedback\": \"Backwards. First-degree is the personalized approach they abandoned; they moved to a less precise method.\",\n          \"isCorrect\": false,\n          \"text\": \"First-degree discrimination is still happening\"\n        }\n      ],\n      \"question\": \"What explains the smaller profit drop?\"\n    },\n    {\n      \"context\": \"A ferry operator charges commuters $9 and occasional tourists $15. A politician proposes a law forcing one uniform $12 fare for everyone. The operator predicts fuller boats on weekdays but fewer tourists overall.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. A single price can raise quantity for one group and lower it for another; discrimination was tailoring prices to different elasticities.\",\n          \"isCorrect\": true,\n          \"text\": \"Uniform pricing changes quantities differently across segments\"\n        },\n        {\n          \"feedback\": \"Not quite. Costs didn’t change; what changes is who buys at which price because willingness to pay differs.\",\n          \"isCorrect\": false,\n          \"text\": \"Uniform pricing mainly affects the operator’s costs\"\n        },\n        {\n          \"feedback\": \"No. If resale isn’t possible (a ferry ride), arbitrage isn’t the central issue in this policy change.\",\n          \"isCorrect\": false,\n          \"text\": \"Uniform pricing mainly prevents arbitrage\"\n        },\n        {\n          \"feedback\": \"Too strong. Discrimination can sometimes expand output for price-sensitive groups; it isn’t automatically “less efficient.”\",\n          \"isCorrect\": false,\n          \"text\": \"Uniform pricing always increases total efficiency\"\n        }\n      ],\n      \"question\": \"What’s the core economic effect?\"\n    }\n  ]\n}",
      "outputTokens": 3863,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-economics-price-discrimination-1",
      "userPrompt": "LESSON_TITLE: Price Discrimination Strategies\nLESSON_DESCRIPTION: Understanding how firms use price discrimination to maximize profits by charging different prices to different customer segments\nCHAPTER_TITLE: Pricing Strategy\nCOURSE_TITLE: Microeconomics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Pricing Puzzle: Why do seniors get discounts while business travelers pay premium? Why does software cost different amounts in different countries? Economists discovered the logic behind seemingly arbitrary pricing.\n2. Pigou's Insight: Arthur Pigou formalized price discrimination theory in the 1920s. He showed that charging different prices to different customers could actually be economically efficient under certain conditions.\n3. The Data Revolution: The rise of big data transformed price discrimination from crude segmentation to personalized pricing. Every click, purchase, and search helps companies estimate your willingness to pay.\n\nEXPLANATION_STEPS:\n1. Definition: Price discrimination means charging different prices for the same product to different customers. It's not about cost differences — it's about extracting more consumer surplus.\n2. First-Degree: First-degree discrimination charges each customer their maximum willingness to pay. It's theoretically perfect but practically impossible without mind-reading. Haggling approximates it.\n3. Second-Degree: Second-degree discrimination offers different versions at different prices. Customers self-select based on their preferences — like choosing between economy and business class.\n4. Third-Degree: Third-degree discrimination segments customers into groups with different elasticities. Charge more to inelastic groups (business travelers), less to elastic groups (tourists).\n5. Elasticity Connection: Price elasticity of demand determines pricing power. If demand barely changes with price (inelastic), firms can charge more. If demand is sensitive (elastic), prices must stay low.\n\nMECHANICS_STEPS:\n1. Preventing Arbitrage: To price discriminate, a firm must prevent arbitrage — customers who get the low price reselling to those who'd pay more. Physical services naturally prevent this; digital goods require DRM.\n2. Segmentation Signals: Market segmentation identifies groups with different price sensitivities. Age, location, purchase timing, and usage patterns all signal willingness to pay.\n3. Menu Design: Menu pricing creates product versions that appeal to different segments. The 'basic' version exists partly to make the 'premium' version look valuable by comparison.\n4. Dynamic Adjustment: Dynamic pricing adjusts prices in real-time based on demand signals. High demand triggers price increases; low demand triggers discounts. Algorithms optimize continuously.\n5. Bundling Strategy: Bundling combines products to extract more surplus. Cable TV bundles make you pay for channels you don't want because the package captures more total willingness to pay.\n\nEXAMPLES_STEPS:\n1. Airline Pricing: Airlines are masters of price discrimination. The same seat costs $200 or $2000 depending on when you book, whether you stay Saturday, and if you're flying for business or leisure.\n2. Movie Tickets: Movie theaters charge different prices for matinees, seniors, and students. They're segmenting customers by time flexibility and price sensitivity.\n3. Educational Discounts: Academic software discounts are dramatic — students might pay $50 for software that costs businesses $500. The assumption: students can't afford full price but will become paying customers later.\n4. Happy Hour Economics: Happy hour pricing segments customers by time availability. Those who can drink at 4pm are often more price-sensitive than the 8pm crowd willing to pay full price."
    },
    {
      "duration": 89762.55775,
      "inputTokens": 3047,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Uma equipe quer construir um gerador que receba apenas calor de um reservatório e devolva 100% como eletricidade, sem aquecer o ambiente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso não é só “difícil”; a segunda lei impede a conversão total de calor em trabalho num ciclo. Sempre há rejeição de calor para uma fonte fria.\",\n          \"isCorrect\": true,\n          \"text\": \"É impossível em princípio, mesmo idealizado\"\n        },\n        {\n          \"feedback\": \"Melhor isolamento reduz perdas por condução/convecção, mas não remove o limite fundamental de eficiência de um motor térmico.\",\n          \"isCorrect\": false,\n          \"text\": \"Dá, se o isolamento térmico for perfeito\"\n        },\n        {\n          \"feedback\": \"Materiais melhores ajudam, mas não anulam a necessidade de rejeitar calor; o limite vem das temperaturas das fontes, não do material.\",\n          \"isCorrect\": false,\n          \"text\": \"Dá, com materiais supercondutores e baixo atrito\"\n        },\n        {\n          \"feedback\": \"Reversível maximiza eficiência, mas ainda assim não chega a 100% a menos que a fonte fria esteja a 0 K (inatingível).\",\n          \"isCorrect\": false,\n          \"text\": \"Dá, se o ciclo for totalmente reversível\"\n        }\n      ],\n      \"question\": \"Qual afirmação faz mais sentido?\"\n    },\n    {\n      \"context\": \"Você deixa uma caneca de café quente na mesa e volta 30 minutos depois. A sala está mais fria que o café estava no início.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo: sem trabalho externo, o calor flui espontaneamente do mais quente para o mais frio, aumentando a entropia total.\",\n          \"isCorrect\": true,\n          \"text\": \"O café esfria porque calor flui do quente ao frio\"\n        },\n        {\n          \"feedback\": \"Temperatura média das moléculas diminui, mas isso acontece porque energia saiu como calor; não é “parar de vibrar”.\",\n          \"isCorrect\": false,\n          \"text\": \"O café esfria porque as moléculas param de vibrar\"\n        },\n        {\n          \"feedback\": \"A primeira lei não diz a direção do processo, só o balanço de energia. Quem dá a direção é a segunda lei.\",\n          \"isCorrect\": false,\n          \"text\": \"O café esfria porque a energia se destrói aos poucos\"\n        },\n        {\n          \"feedback\": \"O ambiente não “puxa” calor por vontade; é a diferença de temperatura que dirige o fluxo líquido.\",\n          \"isCorrect\": false,\n          \"text\": \"O café esfria porque o ambiente puxa calor ativamente\"\n        }\n      ],\n      \"question\": \"Qual é a melhor explicação?\"\n    },\n    {\n      \"context\": \"Um laboratório compara dois motores térmicos: ambos recebem 1000 J de calor da fonte quente. Motor A rejeita 600 J; Motor B rejeita 300 J.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo: eficiência = trabalho/energia recebida. A faz 400 J de trabalho, B faz 700 J, então B é mais eficiente.\",\n          \"isCorrect\": true,\n          \"text\": \"Motor B, porque transforma mais do calor em trabalho\"\n        },\n        {\n          \"feedback\": \"Receber a mesma energia não garante mesma eficiência; o que importa é quanto vira trabalho versus quanto é rejeitado.\",\n          \"isCorrect\": false,\n          \"text\": \"Os dois têm a mesma eficiência, pois recebem 1000 J\"\n        },\n        {\n          \"feedback\": \"Rejeitar mais calor normalmente significa menos trabalho útil, não mais.\",\n          \"isCorrect\": false,\n          \"text\": \"Motor A, porque rejeita mais calor e “se livra” de perdas\"\n        },\n        {\n          \"feedback\": \"Sem as temperaturas das fontes você não acha o limite máximo, mas dá para comparar eficiências usando o balanço de energia.\",\n          \"isCorrect\": false,\n          \"text\": \"Não dá para comparar sem saber as temperaturas\"\n        }\n      ],\n      \"question\": \"Qual motor é mais eficiente?\"\n    },\n    {\n      \"context\": \"Dois reservatórios estão a 500 K (quente) e 300 K (frio). Um time quer estimar a eficiência máxima teórica de um motor ideal entre eles.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correto: a eficiência máxima de Carnot é 1 − Tc/Th = 1 − 300/500 = 0,4 (40%).\",\n          \"isCorrect\": true,\n          \"text\": \"40%\"\n        },\n        {\n          \"feedback\": \"60% seria 1 − Th/Tc, que inverte a razão e dá um valor sem sentido físico para esse caso.\",\n          \"isCorrect\": false,\n          \"text\": \"60%\"\n        },\n        {\n          \"feedback\": \"70% não vem do limite de Carnot para essas temperaturas; seria alto demais para 500 K e 300 K.\",\n          \"isCorrect\": false,\n          \"text\": \"70%\"\n        },\n        {\n          \"feedback\": \"50% só valeria para outra combinação de temperaturas; aqui a razão Tc/Th é 0,6.\",\n          \"isCorrect\": false,\n          \"text\": \"50%\"\n        }\n      ],\n      \"question\": \"Qual é a eficiência máxima?\"\n    },\n    {\n      \"context\": \"Você tem uma caixa térmica perfeita (sem troca de calor com o exterior). Você agita um líquido lá dentro com uma pá acoplada a um motor externo.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso: sem troca de calor (adiabático), o trabalho feito sobre o sistema aumenta sua energia interna, elevando a temperatura.\",\n          \"isCorrect\": true,\n          \"text\": \"A temperatura tende a subir, pois entrou trabalho\"\n        },\n        {\n          \"feedback\": \"Isolamento impede troca de calor, não impede mudança de temperatura por trabalho interno.\",\n          \"isCorrect\": false,\n          \"text\": \"A temperatura fica constante porque não há calor entrando\"\n        },\n        {\n          \"feedback\": \"A entropia pode aumentar mesmo sem troca de calor, por dissipação interna; não precisa diminuir.\",\n          \"isCorrect\": false,\n          \"text\": \"A entropia necessariamente diminui, pois é isolado\"\n        },\n        {\n          \"feedback\": \"Sem troca de calor, a energia não “some”; ela muda de forma dentro do sistema (primeira lei).\",\n          \"isCorrect\": false,\n          \"text\": \"Nada acontece com a energia, pois a caixa é perfeita\"\n        }\n      ],\n      \"question\": \"O que acontece com o líquido?\"\n    },\n    {\n      \"context\": \"Um ar-condicionado “inverte” o fluxo: retira calor do ar de dentro (frio) e joga para fora (quente), consumindo eletricidade.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato: ele usa trabalho para mover calor contra o gradiente natural de temperatura, como uma bomba de calor.\",\n          \"isCorrect\": true,\n          \"text\": \"Usa trabalho para forçar calor do frio para o quente\"\n        },\n        {\n          \"feedback\": \"Sem energia externa, o fluxo espontâneo seria o oposto (do quente para o frio).\",\n          \"isCorrect\": false,\n          \"text\": \"Funciona sem trabalho porque o calor quer sair de dentro\"\n        },\n        {\n          \"feedback\": \"A primeira lei exige conservação de energia, mas não “proíbe” por si só; quem exige trabalho para inverter o fluxo é a segunda lei.\",\n          \"isCorrect\": false,\n          \"text\": \"Viola a primeira lei, por isso precisa eletricidade\"\n        },\n        {\n          \"feedback\": \"Convecção ajuda a transportar calor no ar, mas o ponto central é o trabalho do compressor para bombear calor.\",\n          \"isCorrect\": false,\n          \"text\": \"Só funciona por convecção rápida, não por trabalho\"\n        }\n      ],\n      \"question\": \"Por que ele precisa de eletricidade?\"\n    },\n    {\n      \"context\": \"Duas barras idênticas recebem a mesma quantidade de energia: uma é de alumínio e outra é de água (mesma massa). Depois, a temperatura de uma sobe bem mais.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo: temperatura depende também da capacidade térmica. Com maior calor específico, a água pode receber muito calor com menor aumento de temperatura.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque “calor” e “temperatura” não são a mesma coisa\"\n        },\n        {\n          \"feedback\": \"Pode haver aquecimento por radiação ou condução; o mecanismo não muda a ideia principal: mesma energia não implica mesma variação de T.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque condução sempre aumenta mais a temperatura que radiação\"\n        },\n        {\n          \"feedback\": \"Energia não “prefere” materiais; a diferença está em como ela se distribui nos microestados (capacidade térmica).\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a energia escolhe o material mais “leve”\"\n        },\n        {\n          \"feedback\": \"Aumentar massa geralmente reduz a variação de temperatura para a mesma energia, mas aqui as massas já são iguais.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque um deles tem mais massa, então esquenta mais\"\n        }\n      ],\n      \"question\": \"Qual conceito explica melhor isso?\"\n    },\n    {\n      \"context\": \"Você coloca um termômetro em contato com um bloco de metal e um copo d’água. Após algum tempo, o termômetro marca a mesma temperatura em ambos.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso: equilíbrio térmico significa zero troca líquida de energia por calor, mas as energias internas podem ser bem diferentes.\",\n          \"isCorrect\": true,\n          \"text\": \"Pararam de trocar calor líquido, não “ficaram iguais” em energia\"\n        },\n        {\n          \"feedback\": \"Mesma temperatura não implica mesma energia total; depende de massa e calor específico, entre outros.\",\n          \"isCorrect\": false,\n          \"text\": \"Eles agora têm a mesma energia interna total\"\n        },\n        {\n          \"feedback\": \"Podem estar em equilíbrio térmico sem estar em equilíbrio químico ou mecânico; são conceitos diferentes.\",\n          \"isCorrect\": false,\n          \"text\": \"Eles atingiram equilíbrio químico automaticamente\"\n        },\n        {\n          \"feedback\": \"A segunda lei fala do sentido espontâneo do fluxo, mas não define “igualdade de energia”; o critério é igualdade de temperatura.\",\n          \"isCorrect\": false,\n          \"text\": \"A segunda lei exige que os dois tenham energia igual\"\n        }\n      ],\n      \"question\": \"O que a igualdade de T indica?\"\n    },\n    {\n      \"context\": \"Um projeto tenta aumentar a eficiência de uma usina elevando muito a temperatura da fonte quente, mas mantém praticamente a mesma temperatura do ambiente como fonte fria.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correto: pelo limite de Carnot, aumentar Th (mantendo Tc) aumenta a eficiência máxima possível, pois 1 − Tc/Th cresce.\",\n          \"isCorrect\": true,\n          \"text\": \"A eficiência máxima pode aumentar com Th maior\"\n        },\n        {\n          \"feedback\": \"Mesmo no limite ideal a eficiência não é 100% enquanto Tc > 0 K; sempre há calor rejeitado.\",\n          \"isCorrect\": false,\n          \"text\": \"A eficiência pode chegar a 100% com Th alto o suficiente\"\n        },\n        {\n          \"feedback\": \"A eficiência de Carnot não depende do “tipo” de combustível, mas das temperaturas das fontes.\",\n          \"isCorrect\": false,\n          \"text\": \"Não muda nada: eficiência só depende do combustível\"\n        },\n        {\n          \"feedback\": \"A segunda lei limita a eficiência, mas não diz que ela é fixa; ela depende das temperaturas envolvidas.\",\n          \"isCorrect\": false,\n          \"text\": \"A segunda lei diz que eficiência é sempre a mesma\"\n        }\n      ],\n      \"question\": \"O que muda no limite teórico?\"\n    },\n    {\n      \"context\": \"Você vê uma propaganda: “Nossa geladeira é tão eficiente que remove calor do interior sem jogar calor para o ambiente”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso: se remove calor do interior, esse calor (mais o trabalho do compressor) precisa ir para algum lugar, normalmente o ambiente.\",\n          \"isCorrect\": true,\n          \"text\": \"É inconsistente: o calor removido precisa ser rejeitado\"\n        },\n        {\n          \"feedback\": \"Isolamento reduz entrada de calor, mas não elimina a necessidade de rejeitar para fora o calor que foi bombeado.\",\n          \"isCorrect\": false,\n          \"text\": \"É possível com isolamento perfeito nas paredes\"\n        },\n        {\n          \"feedback\": \"O refrigerante só transporta energia; ele não “faz” o calor desaparecer. Conservação de energia continua valendo.\",\n          \"isCorrect\": false,\n          \"text\": \"É possível se usar um gás refrigerante especial\"\n        },\n        {\n          \"feedback\": \"Radiação existe, mas isso ainda é “jogar calor” para algum lugar. A afirmação nega o destino da energia removida.\",\n          \"isCorrect\": false,\n          \"text\": \"É possível se ela dissipar por radiação invisível\"\n        }\n      ],\n      \"question\": \"O que há de errado na propaganda?\"\n    },\n    {\n      \"context\": \"Um estudante diz: “Entropia é bagunça, então um quarto arrumado tem entropia baixa e pronto”. Você quer responder sem depender de metáforas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Boa: entropia está ligada ao número de microestados compatíveis com o macroestado; mais maneiras de distribuir energia geralmente significa maior entropia.\",\n          \"isCorrect\": true,\n          \"text\": \"Entropia mede quantos microestados são compatíveis com o estado\"\n        },\n        {\n          \"feedback\": \"Entropia não é “energia total”; é uma medida relacionada à dispersão e probabilidade dos arranjos microscópicos.\",\n          \"isCorrect\": false,\n          \"text\": \"Entropia é a quantidade total de energia no sistema\"\n        },\n        {\n          \"feedback\": \"Temperatura e entropia são diferentes: temperatura liga-se à energia cinética média; entropia ao espalhamento/probabilidade.\",\n          \"isCorrect\": false,\n          \"text\": \"Entropia é sinônimo de temperatura\"\n        },\n        {\n          \"feedback\": \"Não é uma “força” que empurra coisas; é uma propriedade que ajuda a prever a direção espontânea dos processos.\",\n          \"isCorrect\": false,\n          \"text\": \"Entropia é uma força que causa o aquecimento\"\n        }\n      ],\n      \"question\": \"Qual definição é mais precisa?\"\n    },\n    {\n      \"context\": \"Você comprime rapidamente um gás em um cilindro bem isolado termicamente. Quase não há tempo para troca de calor com o ambiente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo: processo adiabático tem Q≈0; a compressão faz trabalho sobre o gás, aumentando energia interna e elevando a temperatura.\",\n          \"isCorrect\": true,\n          \"text\": \"É aproximadamente adiabático e a temperatura sobe\"\n        },\n        {\n          \"feedback\": \"Isotérmico exigiria troca de calor para manter T constante; isolado e rápido dificulta isso.\",\n          \"isCorrect\": false,\n          \"text\": \"É isotérmico, então a temperatura não muda\"\n        },\n        {\n          \"feedback\": \"Em adiabático, a temperatura pode mudar; o que não muda é a troca de calor com o ambiente.\",\n          \"isCorrect\": false,\n          \"text\": \"Adiabático significa temperatura constante\"\n        },\n        {\n          \"feedback\": \"Equilíbrio térmico é um estado final de contato prolongado; aqui é um processo rápido e isolado.\",\n          \"isCorrect\": false,\n          \"text\": \"Chega a equilíbrio térmico instantaneamente\"\n        }\n      ],\n      \"question\": \"Que tipo de processo é esse?\"\n    },\n    {\n      \"context\": \"Uma panela de metal com água está no fogão. O fundo aquece primeiro, e depois a água começa a circular, com regiões subindo e descendo.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato: o metal transmite calor principalmente por condução; na água, diferenças de densidade geram movimento e o calor vai por convecção.\",\n          \"isCorrect\": true,\n          \"text\": \"Condução no metal e convecção na água\"\n        },\n        {\n          \"feedback\": \"Radiação existe, mas não é a principal dentro da água líquida; o padrão de circulação indica convecção.\",\n          \"isCorrect\": false,\n          \"text\": \"Radiação no metal e radiação na água\"\n        },\n        {\n          \"feedback\": \"Condução no metal é forte; na água, sem movimento, seria lenta, mas a circulação que você vê é convecção.\",\n          \"isCorrect\": false,\n          \"text\": \"Convecção no metal e condução na água\"\n        },\n        {\n          \"feedback\": \"“Evaporação” pode ocorrer na superfície, mas o transporte dentro do líquido é dominado por convecção.\",\n          \"isCorrect\": false,\n          \"text\": \"Evaporação é o principal mecanismo nos dois\"\n        }\n      ],\n      \"question\": \"Quais mecanismos dominam aí?\"\n    },\n    {\n      \"context\": \"Em um dia frio, você sente calor ao ficar no sol mesmo com o ar gelado. Você está de casaco e quase não há vento.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo: você recebe energia diretamente por radiação eletromagnética do Sol, sem precisar aquecer o ar entre vocês.\",\n          \"isCorrect\": true,\n          \"text\": \"Radiação do Sol aquecendo seu corpo\"\n        },\n        {\n          \"feedback\": \"Condução requer contato direto; com ar parado e casaco, ela é reduzida, mas não explica o aquecimento vindo do Sol.\",\n          \"isCorrect\": false,\n          \"text\": \"Condução do ar frio para sua pele\"\n        },\n        {\n          \"feedback\": \"Convecção envolve movimento do fluido; com pouco vento ela é menor e tenderia a resfriar, não aquecer.\",\n          \"isCorrect\": false,\n          \"text\": \"Convecção do ar aquecido pelo casaco\"\n        },\n        {\n          \"feedback\": \"Evaporação do suor geralmente resfria, pois leva energia embora ao evaporar.\",\n          \"isCorrect\": false,\n          \"text\": \"Evaporação do suor aquecendo a pele\"\n        }\n      ],\n      \"question\": \"Qual mecanismo te aquece mais?\"\n    },\n    {\n      \"context\": \"Um atleta percebe que, quanto mais intenso o treino, mais calor o corpo precisa dissipar, e ainda assim parte da energia vira movimento útil.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso: o corpo converte energia química em trabalho e calor. Pela segunda lei, nenhuma “máquina térmica” transforma tudo em trabalho; sempre há dissipação.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque o corpo é uma máquina térmica com eficiência limitada\"\n        },\n        {\n          \"feedback\": \"A energia dos alimentos não “some”; ela se transforma. A primeira lei impede desaparecimento, não garante eficiência perfeita.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque parte da energia dos alimentos é destruída\"\n        },\n        {\n          \"feedback\": \"Suor ajuda a remover calor, mas não é a causa da ineficiência; é uma resposta para dissipar o calor inevitável.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque o suor rouba energia que poderia virar trabalho\"\n        },\n        {\n          \"feedback\": \"Febre é ajuste de ponto de controle de temperatura; não explica o fato geral de que sempre há calor rejeitado em conversões.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque febre aumenta a eficiência do corpo\"\n        }\n      ],\n      \"question\": \"Por que sempre há calor gerado?\"\n    },\n    {\n      \"context\": \"Um engenheiro diz: “Se eu usar duas fontes na mesma temperatura, ainda consigo um motor que produza trabalho, basta otimizar”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correto: sem diferença de temperatura, não há gradiente para fluxo de calor útil. Um motor térmico precisa de Th > Tc para produzir trabalho líquido.\",\n          \"isCorrect\": true,\n          \"text\": \"Sem diferença de temperatura, não há trabalho líquido\"\n        },\n        {\n          \"feedback\": \"Atrito zero ajuda, mas não cria uma diferença de temperatura. O limite é conceitual, não só de perdas.\",\n          \"isCorrect\": false,\n          \"text\": \"Dá, se eliminar atrito e perdas mecânicas\"\n        },\n        {\n          \"feedback\": \"Aumentar a pressão não substitui a necessidade de duas temperaturas diferentes numa máquina térmica em ciclo.\",\n          \"isCorrect\": false,\n          \"text\": \"Dá, se aumentar muito a pressão do fluido\"\n        },\n        {\n          \"feedback\": \"O problema não é “pouco calor”, é falta de direção preferencial e de possibilidade de extrair trabalho de um único reservatório em ciclo.\",\n          \"isCorrect\": false,\n          \"text\": \"Dá, mas só se a fonte tiver calor suficiente\"\n        }\n      ],\n      \"question\": \"O que falta para o motor funcionar?\"\n    },\n    {\n      \"context\": \"Você abre um frasco de perfume em um canto da sala. Sem ventilador, depois de um tempo o cheiro está por todo o ambiente.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso: as moléculas se espalham para configurações muito mais prováveis (muito mais microestados), aumentando a entropia total.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque o estado “espalhado” é muito mais provável\"\n        },\n        {\n          \"feedback\": \"Elas não “buscam” uniformidade por intenção; o espalhamento vem do movimento aleatório e probabilidade.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque as moléculas querem ficar uniformes\"\n        },\n        {\n          \"feedback\": \"A gravidade atua, mas não é o principal motor do espalhamento lateral no ar; difusão domina.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a gravidade puxa o perfume para todo lado\"\n        },\n        {\n          \"feedback\": \"A primeira lei fala de conservação de energia; não explica por que o cheiro se espalha em vez de se concentrar.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a energia do perfume aumenta com o tempo\"\n        }\n      ],\n      \"question\": \"Qual ideia explica melhor o espalhamento?\"\n    },\n    {\n      \"context\": \"Um ciclo idealizado recebe 500 J de calor, produz 200 J de trabalho e devolve o restante ao reservatório frio. Você quer checar consistência física.\",\n      \"options\": [\n        {\n          \"feedback\": \"Certo: pela primeira lei, Q_in = W + Q_out. Se Q_in=500 e W=200, então Q_out=300 J, fechando o balanço.\",\n          \"isCorrect\": true,\n          \"text\": \"Sim: rejeita 300 J e conserva energia\"\n        },\n        {\n          \"feedback\": \"Isso violaria a primeira lei; trabalho não pode ser maior que o calor recebido num ciclo sem outra entrada de energia.\",\n          \"isCorrect\": false,\n          \"text\": \"Não: deveria produzir mais de 500 J de trabalho\"\n        },\n        {\n          \"feedback\": \"Rejeitar 0 J implicaria 100% de eficiência, o que contradiz a segunda lei para Tc>0 K.\",\n          \"isCorrect\": false,\n          \"text\": \"Não: o correto seria rejeitar 0 J ao reservatório frio\"\n        },\n        {\n          \"feedback\": \"A segunda lei não exige “perda” igual ao trabalho; exige aumento de entropia total e rejeição de calor em motores reais/ideais com Tc>0.\",\n          \"isCorrect\": false,\n          \"text\": \"Não: sempre tem que rejeitar mais calor do que o trabalho\"\n        }\n      ],\n      \"question\": \"Esse ciclo fecha as contas?\"\n    },\n    {\n      \"context\": \"Uma startup promete uma usina com 95% de eficiência elétrica usando vapor entre 700 K (quente) e 300 K (frio).\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato: Carnot dá eficiência máxima 1 − 300/700 ≈ 57%. Qualquer valor acima disso contradiz o limite teórico.\",\n          \"isCorrect\": true,\n          \"text\": \"É impossível: excede o limite de Carnot\"\n        },\n        {\n          \"feedback\": \"Melhoria tecnológica pode chegar mais perto do limite, mas não ultrapassar um limite imposto só pelas temperaturas das fontes.\",\n          \"isCorrect\": false,\n          \"text\": \"É possível com turbinas mais modernas\"\n        },\n        {\n          \"feedback\": \"Operar mais rápido muda potência, não remove o limite de eficiência fixado por Th e Tc.\",\n          \"isCorrect\": false,\n          \"text\": \"É possível se o ciclo for muito rápido\"\n        },\n        {\n          \"feedback\": \"Isolamento reduz perdas parasitas, mas não permite ultrapassar o limite de Carnot.\",\n          \"isCorrect\": false,\n          \"text\": \"É possível com isolamento térmico extremo\"\n        }\n      ],\n      \"question\": \"O que você conclui da promessa?\"\n    }\n  ]\n}",
      "outputTokens": 4472,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "pt-physics-thermodynamics-laws-1",
      "userPrompt": "LESSON_TITLE: Leis da Termodinamica\nLESSON_DESCRIPTION: Compreendendo as leis da termodinamica e como elas governam a transferencia de energia e os limites de eficiencia em todos os processos fisicos\nCHAPTER_TITLE: Termodinamica\nCOURSE_TITLE: Fisica Geral\nLANGUAGE: pt\n\nBACKGROUND_STEPS:\n1. O Sonho Impossivel: No seculo XIX, engenheiros queriam construir maquinas a vapor mais eficientes. Sadi Carnot percebeu que havia um limite fundamental — nenhuma maquina poderia converter todo calor em trabalho.\n2. As Leis Universais: Rudolf Clausius e Lord Kelvin formalizaram as leis da termodinamica. Elas explicam por que o cafe esfria, por que precisamos comer, e por que o universo caminha para a desordem.\n3. Solidez da Teoria: A termodinamica e uma das teorias mais robustas da fisica. Einstein disse que, de todas as teorias, ela e a menos provavel de ser derrubada por descobertas futuras.\n\nEXPLANATION_STEPS:\n1. Primeira Lei: A primeira lei diz que energia nao se cria nem se destroi — apenas se transforma. Toda energia que entra em um sistema deve sair ou ser armazenada. E um balanco contabil universal.\n2. Segunda Lei: A segunda lei afirma que processos espontaneos aumentam a entropia total. Calor flui do quente para o frio naturalmente, nunca ao contrario sem trabalho externo.\n3. Entropia: Entropia mede a dispersao de energia entre microestados possiveis. Sistemas evoluem para configuracoes mais provaveis — e configuracoes de alta entropia sao vastamente mais provaveis.\n4. Equilibrio Termico: Equilibrio termico ocorre quando dois sistemas em contato param de trocar energia liquida. Eles atingem a mesma temperatura, mas nao necessariamente a mesma energia.\n5. Calor vs Temperatura: Calor e a transferencia de energia termica entre sistemas. Temperatura mede a energia cinetica media das moleculas. Calor alto com temperatura baixa e possivel (muito material, movimento lento).\n\nMECHANICS_STEPS:\n1. Ciclo do Motor Termico: Em um motor termico, calor flui da fonte quente para a fria. Parte dessa energia e capturada como trabalho. O resto e desperdicado como calor para o ambiente.\n2. Limite de Carnot: O ciclo de Carnot define a eficiencia maxima teorica. Depende apenas das temperaturas das fontes quente e fria. Quanto maior a diferenca, maior a eficiencia possivel.\n3. Bomba de Calor: Bombas de calor invertem o fluxo natural. Usam trabalho para mover calor do frio para o quente — como a geladeira que remove calor do interior e o despeja no ambiente.\n4. Tipos de Processos: Processos isotermicos mantem temperatura constante. Processos adiabaticos nao trocam calor com o ambiente. Cada tipo segue equacoes especificas de expansao e compressao.\n5. Mecanismos de Transferencia: A conducao, conveccao e radiacao sao os tres mecanismos de transferencia de calor. Cada um domina em situacoes diferentes — metais conduzem, liquidos convectam, o sol irradia.\n\nEXAMPLES_STEPS:\n1. A Geladeira: A geladeira e uma bomba de calor que move energia do interior frio para o exterior quente. Isso requer trabalho — por isso ela consome eletricidade continuamente.\n2. Motores de Combustao: Motores de carro convertem energia quimica do combustivel em movimento. Mas pelo menos 60-70% da energia e perdida como calor — os limites termodinamicos sao implacaveis.\n3. Geracao de Energia: Usinas termeletricas queimam combustivel para gerar vapor que move turbinas. A eficiencia tipica e 30-40% — a maior parte da energia se dissipa no ambiente.\n4. O Corpo Humano: Seu corpo e uma maquina termica. Converte energia dos alimentos em trabalho e calor. Febre significa que o termostato interno foi reconfigurado para uma temperatura mais alta."
    },
    {
      "duration": 75733.54479100001,
      "inputTokens": 2988,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"Estás en un ascensor y alguien dice con seguridad que hoy es martes. Tú sabes que es lunes, pero todos los demás asienten sin dudar.\",\n      \"options\": [\n        {\n          \"feedback\": \"No exactamente: aquí no estás buscando datos nuevos; ya sabes la respuesta. Lo que empuja es encajar y evitar tensión social.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"Sí. Cambiar o callarte para no quedar como “el raro” es presión por aceptación, aunque sepas que el grupo está equivocado.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"Eso implica una jerarquía clara (jefe, policía, profe) dando órdenes. Aquí son pares, no autoridad.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La desindividuación suele requerir anonimato y activación grupal que disminuye la autoconciencia. Un ascensor no suele generar eso.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Qué influencia domina aquí?\"\n    },\n    {\n      \"context\": \"En una caminata nocturna, el grupo duda por qué sendero ir. No hay señalización y tú no conoces la zona. Dos personas dicen “por aquí siempre es”.\",\n      \"options\": [\n        {\n          \"feedback\": \"No: si nadie teme rechazo y lo central es ‘ellos saben más’, la fuerza es informacional, no normativa.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"Sí. En ambigüedad, el grupo funciona como “fuente de verdad” y uno sigue lo que otros parecen saber.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"Falta una figura con poder explícito que ordene. Aquí son compañeros tomando una decisión práctica.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"No es sobre lo que ‘debería’ hacerse moralmente, sino sobre qué camino es correcto. Eso apunta a información, no prescripción.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma prescriptiva\"\n        }\n      ],\n      \"question\": \"¿Qué explica que los sigas?\"\n    },\n    {\n      \"context\": \"En una app del clima, ves que “la mayoría” reporta sol, pero miras por la ventana y está lloviendo fuerte. Igual decides salir sin paraguas para no parecer exagerado.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto: cambias tu conducta para alinearte con el grupo. El detalle clave es que lo haces para no desentonar, no porque la lluvia sea ambigua.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad por influencia normativa\"\n        },\n        {\n          \"feedback\": \"No: tu evidencia es clara (llueve). Si aun así sigues al grupo, no es porque creas que saben más, sino por aceptación social.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad por influencia informacional\"\n        },\n        {\n          \"feedback\": \"La obediencia requiere orden de una autoridad con jerarquía. Aquí solo hay presión de pares/“mayoría”.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"La difusión de responsabilidad trata de sentirse menos responsable en grupo, típico en emergencias o tareas compartidas. Aquí es decisión individual.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de conformidad es?\"\n    },\n    {\n      \"context\": \"Un estudiante copia en un examen porque “todos lo hacen”. No dice que sea correcto, solo que es lo común en su salón.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. Está usando “lo que la gente hace” como guía. Eso describe conducta típica, no lo que debería hacerse.\",\n          \"isCorrect\": true,\n          \"text\": \"Norma descriptiva\"\n        },\n        {\n          \"feedback\": \"No: una norma prescriptiva habla de deberes (“hay que copiar” o “no hay que copiar”). Aquí solo se describe frecuencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma prescriptiva\"\n        },\n        {\n          \"feedback\": \"No necesariamente: puede haber conformidad, pero la pregunta apunta al tipo de norma (describir vs prescribir).\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia\"\n        },\n        {\n          \"feedback\": \"No: la desindividuación requiere anonimato/masa que reduzca autoconciencia; copiar es más una regla social percibida.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Qué norma está usando?\"\n    },\n    {\n      \"context\": \"En una residencia, un cartel dice: “Por respeto, deberías separar la basura”. Mucha gente no lo hace, pero el mensaje apela a lo correcto.\",\n      \"options\": [\n        {\n          \"feedback\": \"No: una norma descriptiva sería “la mayoría separa la basura”. Aquí se habla de lo que se debería hacer.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma descriptiva\"\n        },\n        {\n          \"feedback\": \"Sí. Es una guía moral/social de deber: “esto es lo correcto”, aunque no sea lo más común.\",\n          \"isCorrect\": true,\n          \"text\": \"Norma prescriptiva\"\n        },\n        {\n          \"feedback\": \"No: influencia informacional es ‘ellos saben más’ en ambigüedad. Separar basura no es un problema de información.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"No: la obediencia requiere una autoridad que ordene y sancione. Un cartel apelando a respeto no es jerarquía directa.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de norma es?\"\n    },\n    {\n      \"context\": \"En una junta, todos dicen que un plan es perfecto. Una persona comenta con calma un posible riesgo. De pronto, varios también empiezan a señalar fallas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. Romper la unanimidad reduce mucho la presión: no hace falta mayoría, solo alguien que muestre que disentir es posible.\",\n          \"isCorrect\": true,\n          \"text\": \"Un disidente rompe la unanimidad\"\n        },\n        {\n          \"feedback\": \"No: la difusión de responsabilidad trata de que nadie actúa porque “otro lo hará”. Aquí el tema es expresar desacuerdo.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"No: la escalada de compromiso es quedar atrapado por pequeños “sí” previos. Aquí el cambio ocurre por un disenso visible.\",\n          \"isCorrect\": false,\n          \"text\": \"Escalada de compromiso\"\n        },\n        {\n          \"feedback\": \"No: la desindividuación es más probable con anonimato y excitación grupal; una junta suele aumentar autocontrol, no reducirlo.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Qué cambió la dinámica?\"\n    },\n    {\n      \"context\": \"Un supervisor te pide en persona que falsifiques un número “solo esta vez”. Días después, te lo pide por mensaje. Te sientes más capaz de negarte por mensaje.\",\n      \"options\": [\n        {\n          \"feedback\": \"No: la unanimidad trata de presión de grupo, no de una figura de autoridad acercándose o alejándose.\",\n          \"isCorrect\": false,\n          \"text\": \"Poder de la unanimidad\"\n        },\n        {\n          \"feedback\": \"Sí. La autoridad cercana (cara a cara) suele aumentar obediencia; cuando se distancia, es más fácil resistirse.\",\n          \"isCorrect\": true,\n          \"text\": \"La proximidad de la autoridad\"\n        },\n        {\n          \"feedback\": \"No: escalada es caer por pasos. Aquí cambia el canal y con eso la presión de la autoridad.\",\n          \"isCorrect\": false,\n          \"text\": \"Escalada de compromiso\"\n        },\n        {\n          \"feedback\": \"No: la difusión de responsabilidad requiere múltiples personas compartiendo una tarea. Aquí es una orden directa a ti.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        }\n      ],\n      \"question\": \"¿Qué factor te ayuda a negar?\"\n    },\n    {\n      \"context\": \"Aceptas “solo revisar” un documento dudoso. Luego te piden “solo corregir” una cifra. Después te piden firmarlo como aprobado.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. Pequeñas concesiones iniciales hacen que las siguientes parezcan consistentes, y decir “no” se vuelve más difícil con el tiempo.\",\n          \"isCorrect\": true,\n          \"text\": \"Escalada de compromiso\"\n        },\n        {\n          \"feedback\": \"No: la unanimidad es presión por consenso grupal. Aquí el gancho es el paso a paso, aunque sea una sola persona pidiendo.\",\n          \"isCorrect\": false,\n          \"text\": \"Unanimidad\"\n        },\n        {\n          \"feedback\": \"No: esto no es ambigüedad informativa, sino cómo te van llevando a acciones más grandes tras aceptar las pequeñas.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"No: obediencia puede estar presente, pero el mecanismo clave descrito es el “enganche” gradual, no solo jerarquía.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        }\n      ],\n      \"question\": \"¿Qué mecanismo te atrapó?\"\n    },\n    {\n      \"context\": \"En una emergencia en un parque, hay mucha gente mirando. Nadie llama a una ambulancia y tú también dudas porque “seguro alguien ya llamó”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. En grupos grandes, la responsabilidad se diluye: cada quien asume que otro actuará, y eso frena la acción.\",\n          \"isCorrect\": true,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"No: influencia normativa sería actuar para encajar. Aquí el problema es que nadie se siente el responsable principal.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"No: desindividuación implica anonimato + activación que dispara conductas impulsivas. Aquí hay inacción, no descontrol.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        },\n        {\n          \"feedback\": \"No: escalada de compromiso es ir aceptando pasos cada vez mayores. Aquí no hubo pasos previos, solo un grupo observando.\",\n          \"isCorrect\": false,\n          \"text\": \"Escalada de compromiso\"\n        }\n      ],\n      \"question\": \"¿Qué explica la inacción?\"\n    },\n    {\n      \"context\": \"En un equipo, el líder dice: “Tú llamas a emergencias, tú traes el botiquín, tú despejas el área”. La gente actúa más rápido que antes.\",\n      \"options\": [\n        {\n          \"feedback\": \"No: la unanimidad afecta conformidad de opiniones. Aquí se está resolviendo quién hace qué, no buscando consenso.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumenta la unanimidad\"\n        },\n        {\n          \"feedback\": \"Sí. Al asignar roles, se reduce el “alguien lo hará” y cada persona siente una responsabilidad clara.\",\n          \"isCorrect\": true,\n          \"text\": \"Reduce la difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"No: la proximidad de la autoridad puede aumentar obediencia, pero el cambio crucial es especificar responsabilidades.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumenta la proximidad de la autoridad\"\n        },\n        {\n          \"feedback\": \"No: la desindividuación suele empeorar autocontrol. Aquí el rol específico aumenta enfoque y rendición de cuentas.\",\n          \"isCorrect\": false,\n          \"text\": \"Genera desindividuación\"\n        }\n      ],\n      \"question\": \"¿Por qué ahora sí actúan?\"\n    },\n    {\n      \"context\": \"En un concierto, con luces bajas y mucha gente gritando, un grupo empieza a empujar y tú te sorprendes empujando también, aunque normalmente evitarías eso.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. Anonimato y excitación grupal reducen autoconciencia y aumentan conductas que a solas frenarías.\",\n          \"isCorrect\": true,\n          \"text\": \"Desindividuación\"\n        },\n        {\n          \"feedback\": \"No: influencia informacional sería seguir al grupo porque crees que saben algo (p. ej., hay peligro). Aquí es pérdida de autocontrol.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"No: difusión de responsabilidad explica inacción ante ayuda. Aquí hay acción impulsiva, no pasividad.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"No: escalada es un proceso gradual de compromisos. Aquí el cambio es rápido por contexto grupal y anonimato.\",\n          \"isCorrect\": false,\n          \"text\": \"Escalada de compromiso\"\n        }\n      ],\n      \"question\": \"¿Qué te hizo actuar distinto?\"\n    },\n    {\n      \"context\": \"En una empresa, todos usan una contraseña débil porque “así se hace aquí”. Tú sabes que es riesgoso, pero la mantienes para no ser el único distinto.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correcto: cambias conducta por aceptación y evitar fricción, aun sabiendo que la práctica es mala.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad por presión normativa\"\n        },\n        {\n          \"feedback\": \"No: no estás buscando la mejor información; de hecho, ya sabes que es inseguro. Lo que pesa es encajar.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"No: obediencia sería si un superior te ordenara explícitamente usar esa contraseña bajo amenaza. Aquí es más norma del grupo.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"No: una norma prescriptiva diría “deberías usar contraseña débil”. Aquí la idea es “esto es lo que se hace”.\",\n          \"isCorrect\": false,\n          \"text\": \"Norma prescriptiva\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de influencia es?\"\n    },\n    {\n      \"context\": \"Ves un video con miles de “me gusta” y comentarios positivos. No estás seguro si es bueno, pero asumes que debe serlo y lo compartes.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. Cuando la calidad es incierta, usas la reacción de otros como señal de “correcto”, creando cascadas de aprobación.\",\n          \"isCorrect\": true,\n          \"text\": \"Influencia informacional (cascada social)\"\n        },\n        {\n          \"feedback\": \"No: podría haber deseo de encajar, pero el detalle clave es que infieres calidad/verdad a partir de señales sociales.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"No: unanimidad implica presión de un grupo presente. Aquí son señales agregadas, no un grupo mirándote en vivo.\",\n          \"isCorrect\": false,\n          \"text\": \"Unanimidad en un grupo cara a cara\"\n        },\n        {\n          \"feedback\": \"No: obediencia requiere autoridad. “Likes” no son una figura con poder que te ordene actuar.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia\"\n        }\n      ],\n      \"question\": \"¿Qué te llevó a compartirlo?\"\n    },\n    {\n      \"context\": \"En tu grupo de amigos, nadie critica un comentario ofensivo hecho por alguien popular. Varias personas luego dicen en privado que les molestó.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. La gente se alinea en público para evitar rechazo, aunque en privado no esté de acuerdo: eso es conformidad externa.\",\n          \"isCorrect\": true,\n          \"text\": \"Conformidad externa\"\n        },\n        {\n          \"feedback\": \"No: conformidad interna sería que realmente cambian su creencia y les deja de molestar. Aquí sigue molestando en privado.\",\n          \"isCorrect\": false,\n          \"text\": \"Conformidad interna\"\n        },\n        {\n          \"feedback\": \"No: desindividuación suele facilitar conductas impulsivas por anonimato. Aquí hay autocensura social, no pérdida de control.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        },\n        {\n          \"feedback\": \"No: influencia informacional ocurre por ambigüedad. Aquí el problema no es falta de claridad, sino miedo al costo social.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        }\n      ],\n      \"question\": \"¿Qué tipo de cambio ocurrió?\"\n    },\n    {\n      \"context\": \"Una guardia de seguridad te ordena salir de un edificio aunque no ves peligro. Dudas, pero obedeces porque “ella manda aquí”.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. Hay jerarquía explícita: ajustas tu conducta por la autoridad, no por pares al mismo nivel.\",\n          \"isCorrect\": true,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"No: la influencia normativa es presión de aceptación por pares. Aquí la razón es el poder/rol de la guardia.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia normativa\"\n        },\n        {\n          \"feedback\": \"No: informacional sería creer que ella sabe más del peligro. Podría influir, pero la pista clave es “manda aquí” (jerarquía).\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        },\n        {\n          \"feedback\": \"No: escalada de compromiso implica una secuencia de pequeños sí. Aquí es una orden directa en un momento puntual.\",\n          \"isCorrect\": false,\n          \"text\": \"Escalada de compromiso\"\n        }\n      ],\n      \"question\": \"¿Qué explica mejor tu conducta?\"\n    },\n    {\n      \"context\": \"En un proyecto, tu equipo decide algo claramente equivocado. Si alguien más lo cuestiona primero, tú también lo harías. Si nadie dice nada, te callas.\",\n      \"options\": [\n        {\n          \"feedback\": \"Sí. La presencia de un solo disidente reduce el costo social de hablar y rompe la ilusión de consenso.\",\n          \"isCorrect\": true,\n          \"text\": \"La unanimidad sostiene el silencio\"\n        },\n        {\n          \"feedback\": \"No: la difusión de responsabilidad trata de actuar vs no actuar en tareas compartidas, sobre todo en emergencias; aquí es opinar contra el grupo.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"No: obediencia sería una orden de un superior. Aquí el motor es el consenso aparente entre iguales.\",\n          \"isCorrect\": false,\n          \"text\": \"Obediencia a la autoridad\"\n        },\n        {\n          \"feedback\": \"No: desindividuación suele aumentar conductas impulsivas; aquí ocurre lo contrario (inhibición por presión social).\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        }\n      ],\n      \"question\": \"¿Qué factor te frena más?\"\n    },\n    {\n      \"context\": \"Una organización quiere reducir conductas dañinas sin vigilancia constante. Deben decidir si comunicar “la mayoría no lo hace” o “esto está mal hacerlo”.\",\n      \"options\": [\n        {\n          \"feedback\": \"No: decir “está mal” es prescriptivo. Aquí se pide lo contrario: usar lo que la gente hace para guiar conducta.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo mensajes prescriptivos: “deberías…”\"\n        },\n        {\n          \"feedback\": \"Sí. Combinar “no es común” (descriptiva) con “no está bien” (prescriptiva) guía mejor sin depender de castigos.\",\n          \"isCorrect\": true,\n          \"text\": \"Mezclar norma descriptiva y prescriptiva\"\n        },\n        {\n          \"feedback\": \"No: “la mayoría lo hace” puede normalizar la conducta dañina. Las normas descriptivas funcionan si muestran baja frecuencia.\",\n          \"isCorrect\": false,\n          \"text\": \"Decir que muchos lo hacen para que se sienta normal\"\n        },\n        {\n          \"feedback\": \"No: ocultar información no cambia las normas; puede incluso aumentar incertidumbre y dependencia del rumor.\",\n          \"isCorrect\": false,\n          \"text\": \"Evitar cualquier mensaje sobre normas\"\n        }\n      ],\n      \"question\": \"¿Qué mensaje sería más efectivo?\"\n    },\n    {\n      \"context\": \"Te ofrecen participar en una acción poco ética “por una buena causa”. Primero te piden algo mínimo, luego algo más serio, y siempre con una persona con uniforme cerca.\",\n      \"options\": [\n        {\n          \"feedback\": \"No: la difusión explica inacción en grupo, no este aumento progresivo de acciones bajo presión directa.\",\n          \"isCorrect\": false,\n          \"text\": \"Difusión de responsabilidad\"\n        },\n        {\n          \"feedback\": \"No: la desindividuación puede influir en masas, pero aquí el patrón central es avanzar por pasos y la presencia de autoridad.\",\n          \"isCorrect\": false,\n          \"text\": \"Desindividuación\"\n        },\n        {\n          \"feedback\": \"Sí. La escalada te engancha con pequeños sí, y la proximidad de la autoridad aumenta la probabilidad de obedecer.\",\n          \"isCorrect\": true,\n          \"text\": \"Escalada de compromiso + proximidad de autoridad\"\n        },\n        {\n          \"feedback\": \"No: la influencia informacional es por ambigüedad. Aquí no es falta de información, sino presión situacional y jerarquía.\",\n          \"isCorrect\": false,\n          \"text\": \"Influencia informacional\"\n        }\n      ],\n      \"question\": \"¿Qué combinación lo explica mejor?\"\n    }\n  ]\n}",
      "outputTokens": 4022,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "es-psychology-social-conformity-1",
      "userPrompt": "LESSON_TITLE: Conformidad y Obediencia Social\nLESSON_DESCRIPTION: Comprendiendo como la presion social y la autoridad influyen en nuestras decisiones, desde situaciones cotidianas hasta dilemas eticos\nCHAPTER_TITLE: Influencia Social\nCOURSE_TITLE: Psicologia Social\nLANGUAGE: es\n\nBACKGROUND_STEPS:\n1. La Pregunta Post-Guerra: Despues de la Segunda Guerra Mundial, el mundo pregunto: como pudo gente ordinaria participar en atrocidades? La psicologia social busco entender el poder de la presion grupal sobre la moral individual.\n2. Los Estudios de Asch: Solomon Asch diseno experimentos elegantes en los 1950s. Mostro que personas inteligentes negaban la evidencia de sus propios ojos cuando un grupo unanime decia lo contrario.\n3. El Shock de Milgram: Stanley Milgram llevo esto mas lejos con sus experimentos de obediencia. Revelo que la autoridad percibida podia hacer que personas normales administraran lo que creian eran descargas electricas peligrosas.\n\nEXPLANATION_STEPS:\n1. Definicion de Conformidad: La conformidad es el cambio de comportamiento o creencias para coincidir con un grupo. Puede ser externa (actuar igual) o interna (realmente creer lo que el grupo cree).\n2. Influencia Normativa: La influencia normativa surge del deseo de aceptacion social. Nos conformamos para evitar rechazo, incluso cuando sabemos que el grupo esta equivocado.\n3. Influencia Informacional: La influencia informacional surge cuando usamos al grupo como fuente de informacion. En situaciones ambiguas, asumimos que otros saben mas que nosotros.\n4. Obediencia a la Autoridad: La obediencia es conformidad hacia una autoridad. Difiere de la conformidad horizontal porque hay una jerarquia de poder explicita.\n5. Tipos de Normas: Las normas descriptivas describen lo que la gente hace. Las normas prescriptivas describen lo que deberia hacer. Ambas influyen el comportamiento de maneras diferentes.\n\nMECHANICS_STEPS:\n1. El Poder de la Unanimidad: La unanimidad amplifica la conformidad dramaticamente. Un solo disidente reduce la presion a conformarse — no necesitas mayoria, solo alguien que rompa el consenso.\n2. Proximidad y Autoridad: La proximidad de la autoridad aumenta la obediencia. En experimentos, la obediencia caia drasticamente cuando el experimentador daba ordenes por telefono en vez de en persona.\n3. Escalada de Compromiso: El compromiso gradual atrapa a las personas. Pequenas concesiones llevan a mayores — es mas facil decir 'no' al principio que despues de varios 'si'.\n4. Difusion de Responsabilidad: La difusion de responsabilidad ocurre en grupos. Cuando todos son responsables, nadie se siente responsable. Asignar roles especificos contrarresta este efecto.\n5. Desindividuacion: La desindividuacion en grupos reduce la autoconciencia. Anonimato mas excitacion grupal pueden llevar a comportamientos que el individuo solo nunca consideraria.\n\nEXAMPLES_STEPS:\n1. Dinamicas de Reunion: En reuniones de trabajo, el silencio ante una mala idea se interpreta como acuerdo. La primera persona que habla ancla la discusion, y los demas se conforman por temor a parecer diferentes.\n2. Cascadas en Redes: Las redes sociales amplifican la conformidad. Los 'likes' visibles crean cascadas — contenido popular se vuelve mas popular, no necesariamente porque sea mejor, sino porque otros ya lo aprobaron.\n3. Tendencias de Moda: La moda demuestra conformidad en accion. Tendencias se propagan porque vestirse diferente tiene costos sociales. La originalidad tiene limites definidos por el grupo.\n4. Efecto Espectador: En emergencias medicas, la difusion de responsabilidad hace que nadie actue. Cada persona espera que otro tome la iniciativa, resultando en inaccion colectiva."
    },
    {
      "duration": 65083.871625,
      "inputTokens": 2886,
      "output": "{\n  \"questions\": [\n    {\n      \"context\": \"A refund policy says: Option A gives you $20 back for returning an item. Option B charges a $20 restocking fee if you return it. The final money is identical either way.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not quite. That’s the idea of a mental shortcut, but the key here is identical outcomes feeling different because of wording.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"Nice. Same outcome, but the “fee” frame feels like a loss, so people react differently than to a “refund.”\",\n          \"isCorrect\": true,\n          \"text\": \"Framing effects\"\n        },\n        {\n          \"feedback\": \"Close, but anchoring is about a starting number pulling your estimate. Here, no estimate is being made.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Loss aversion matters, but the question is about presentation changing choice even when outcomes match—classic framing.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        }\n      ],\n      \"question\": \"What’s driving the difference?\"\n    },\n    {\n      \"context\": \"You’re negotiating salary. The first number mentioned is $70k, even though you believe the role is worth around $85k. After hearing $70k, your counteroffer shifts lower than planned.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. The first number becomes a reference point that tugs later judgments, even if it’s arbitrary.\",\n          \"isCorrect\": true,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Not quite. Present bias is about now vs later rewards, not how a first number pulls estimates.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"Close, but availability is about vivid examples shaping probability judgments, not negotiations.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about losses hurting more than gains. Here the issue is the starting point shaping your offer.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        }\n      ],\n      \"question\": \"Which bias is at work?\"\n    },\n    {\n      \"context\": \"A friend refuses to sell a cryptocurrency that dropped 40%, saying, “I’ll sell when it gets back to what I paid.” Meanwhile they quickly sell another coin after a small gain.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes. Realizing a loss feels so painful that people take odd risks (like waiting) to avoid locking it in.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Not quite. Anchoring could show up (fixating on purchase price), but the deeper driver is avoiding the pain of a realized loss.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Present bias is about immediate rewards vs future ones. The behavior here is about gains/losses asymmetry.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"Framing is about wording changing choices. Here, it’s the emotional weight of losses driving the decision.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing effects\"\n        }\n      ],\n      \"question\": \"What best explains this?\"\n    },\n    {\n      \"context\": \"You plan to start studying for a certification “next month.” Tonight you choose streaming shows because it feels rewarding right now, even though you still care about passing later.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. Immediate gratification gets overweighted, so future benefits lose the tug-of-war in the moment.\",\n          \"isCorrect\": true,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"Close, but that’s about fast vs slow thinking. Present bias specifically explains why “now” wins over “later.”\",\n          \"isCorrect\": false,\n          \"text\": \"Dual systems (System 1 vs 2)\"\n        },\n        {\n          \"feedback\": \"Not quite. Loss aversion is about losses vs gains. This is timing, not valuation asymmetry.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Availability is about what comes to mind easily shaping probability. This is about self-control across time.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        }\n      ],\n      \"question\": \"What’s the core issue?\"\n    },\n    {\n      \"context\": \"A city wants more residents to pay utility bills on time. It considers four changes: make autopay the default (opt-out), send scary late-fee warnings, add 15 payment plan options, or hide the due date in fine print.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yep. Making the desired action the default is powerful because many people stick with the pre-set option.\",\n          \"isCorrect\": true,\n          \"text\": \"Make autopay the default\"\n        },\n        {\n          \"feedback\": \"Threats can work sometimes, but this isn’t the cleanest “choice architecture” lever and can backfire.\",\n          \"isCorrect\": false,\n          \"text\": \"Send scary late-fee warnings\"\n        },\n        {\n          \"feedback\": \"More options often increases decision friction; too much choice can reduce follow-through.\",\n          \"isCorrect\": false,\n          \"text\": \"Add 15 payment plan options\"\n        },\n        {\n          \"feedback\": \"This is more like obscuring information, not improving choices. Nudges should preserve transparent freedom.\",\n          \"isCorrect\": false,\n          \"text\": \"Hide the due date in fine print\"\n        }\n      ],\n      \"question\": \"Best choice architecture tweak?\"\n    },\n    {\n      \"context\": \"A cafeteria wants to increase fruit purchases without banning cookies. They’re choosing between: moving fruit to eye level, raising cookie prices, removing cookies, or making a rule you must buy fruit first.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. It changes convenience and attention while keeping cookies available—steering without forbidding.\",\n          \"isCorrect\": true,\n          \"text\": \"Move fruit to eye level\"\n        },\n        {\n          \"feedback\": \"That’s not a subtle nudge; it changes incentives directly via price, not just presentation.\",\n          \"isCorrect\": false,\n          \"text\": \"Raise cookie prices\"\n        },\n        {\n          \"feedback\": \"Removing options restricts freedom. Nudges keep choices available.\",\n          \"isCorrect\": false,\n          \"text\": \"Remove cookies\"\n        },\n        {\n          \"feedback\": \"That’s a mandate, not a nudge. It restricts ordering freedom rather than gently steering.\",\n          \"isCorrect\": false,\n          \"text\": \"Require fruit before cookies\"\n        }\n      ],\n      \"question\": \"Which is a nudge?\"\n    },\n    {\n      \"context\": \"Someone wants to save more but keeps spending their paycheck. They set up an automatic transfer to savings that happens immediately on payday, before they see the money in checking.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. It locks in the future-oriented choice before “spend now” impulses get a chance.\",\n          \"isCorrect\": true,\n          \"text\": \"Commitment device\"\n        },\n        {\n          \"feedback\": \"Not quite. Social proof is about copying what others do. This is self-binding, not conformity.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof\"\n        },\n        {\n          \"feedback\": \"Anchoring is about a starting number pulling estimates. No estimating is happening here.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Framing is about wording changing perception. This is a structural tool to overcome present bias.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing effects\"\n        }\n      ],\n      \"question\": \"What is this tool called?\"\n    },\n    {\n      \"context\": \"A hotel tests two notes: (A) “Help the planet—reuse your towel.” (B) “Most guests in this room reuse their towel.” Reuse jumps more under note B.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes. People often use others’ behavior as a guide to what’s normal or expected, so “most guests” is persuasive.\",\n          \"isCorrect\": true,\n          \"text\": \"Social proof\"\n        },\n        {\n          \"feedback\": \"Not quite. Availability is about ease of recall shaping probability, not conformity to a norm.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"Framing can matter, but the key mechanism here is leveraging what others do, not just positive/negative wording.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing effects\"\n        },\n        {\n          \"feedback\": \"Loss aversion would focus on avoiding a loss. The towel message works mainly by “people like you do this.”\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        }\n      ],\n      \"question\": \"What’s the main lever?\"\n    },\n    {\n      \"context\": \"After seeing several news stories about rare shark attacks, a tourist insists the beach is “basically unsafe,” even though statistics show extremely low risk.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. Vivid, memorable examples come to mind easily, so people overestimate how common the event is.\",\n          \"isCorrect\": true,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"Anchoring is about first numbers shaping estimates. Here the distortion comes from memorable stories, not a starting value.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Present bias is about preferring now over later. This is a probability judgment error.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"Loss aversion could amplify fear, but the specific error is using recall ease as a proxy for frequency.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        }\n      ],\n      \"question\": \"What heuristic is this?\"\n    },\n    {\n      \"context\": \"During a busy day, you pick a familiar brand without comparing prices or reading labels. Later, with time, you realize a cheaper equivalent existed.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes. Quick, automatic judgments are efficient but can skip careful comparison—classic fast vs slow thinking split.\",\n          \"isCorrect\": true,\n          \"text\": \"System 1 dominating over System 2\"\n        },\n        {\n          \"feedback\": \"Not quite. Anchoring is about a first value pulling estimates, not defaulting to automatic choices.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Present bias is about time preferences. Here it’s more about cognitive effort and speed.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"Framing is about how options are described. The issue here is minimal deliberation, not wording.\",\n          \"isCorrect\": false,\n          \"text\": \"Framing effects\"\n        }\n      ],\n      \"question\": \"What best explains your choice?\"\n    },\n    {\n      \"context\": \"A medical test can be described as: “It correctly detects the illness 95% of the time” or “It misses the illness 5% of the time.” People trust the test more with the first wording.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly. Identical facts trigger different reactions based on whether they’re presented as success or failure.\",\n          \"isCorrect\": true,\n          \"text\": \"Framing effects\"\n        },\n        {\n          \"feedback\": \"Close, but loss aversion is about valuing losses more than gains. Framing is the broader packaging effect here.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Anchoring would require an initial value pulling an estimate. Here it’s the description, not a starting point.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Availability is about ease of recall. This is about wording changing interpretation, not memory retrieval.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        }\n      ],\n      \"question\": \"Which concept fits?\"\n    },\n    {\n      \"context\": \"An online store wants to reduce returns from impulse purchases. It considers: 1-click checkout, a 24-hour “cooling off” hold before shipping, showing “Only 2 left!” banners, or hiding the cancel button.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. A delay can reduce “buy now” impulses by giving deliberation time and weakening present bias.\",\n          \"isCorrect\": true,\n          \"text\": \"Add a 24-hour cooling-off hold\"\n        },\n        {\n          \"feedback\": \"This amplifies impulsivity by making immediate action easier—likely increasing present-bias-driven buys.\",\n          \"isCorrect\": false,\n          \"text\": \"Use 1-click checkout\"\n        },\n        {\n          \"feedback\": \"Scarcity cues can increase urgency, which often strengthens impulsive decisions rather than reducing them.\",\n          \"isCorrect\": false,\n          \"text\": \"Show “Only 2 left!” banners\"\n        },\n        {\n          \"feedback\": \"That’s dark-pattern friction, not a welfare-improving nudge; it removes easy freedom to undo a choice.\",\n          \"isCorrect\": false,\n          \"text\": \"Hide the cancel button\"\n        }\n      ],\n      \"question\": \"Best way to curb impulsive buys?\"\n    },\n    {\n      \"context\": \"A charity asks for donations. Version A: “Save 200 lives with this program.” Version B: “Without this, 200 people will die.” More people donate with version B.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes. The loss frame (“people will die”) typically feels more urgent and motivating than an equivalent gain frame.\",\n          \"isCorrect\": true,\n          \"text\": \"Loss aversion interacting with framing\"\n        },\n        {\n          \"feedback\": \"Not quite. Anchoring needs an initial number affecting an estimate. Here it’s about gain vs loss presentation.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Availability is about recall ease shaping probability. Donation motivation here is driven by loss framing, not memory.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"Present bias is about now vs later rewards. This effect happens even when timing isn’t the issue.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        }\n      ],\n      \"question\": \"What’s the best explanation?\"\n    },\n    {\n      \"context\": \"A workplace offers two retirement plans. Plan A is the default with a decent contribution rate. Plan B requires extra clicks to enroll but could be better for some. Most employees stay in A without reviewing.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. Defaults are a powerful part of choice architecture because many people stick with the pre-set option.\",\n          \"isCorrect\": true,\n          \"text\": \"Default effect in choice architecture\"\n        },\n        {\n          \"feedback\": \"Close, but anchoring is about estimates shifting from a first number. Here it’s inertia and friction.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Present bias can play a role, but the dominant mechanism is the default and hassle of switching.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        },\n        {\n          \"feedback\": \"This isn’t mainly about copying others; it’s about the structure of options and the path of least resistance.\",\n          \"isCorrect\": false,\n          \"text\": \"Social proof\"\n        }\n      ],\n      \"question\": \"What’s the main driver?\"\n    },\n    {\n      \"context\": \"A manager says, “We should redesign the form because people aren’t rational calculators.” A colleague replies, “But if people aren’t rational, we can’t predict anything.”\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes. The key insight is not randomness; it’s that deviations follow patterns, which lets you design around them.\",\n          \"isCorrect\": true,\n          \"text\": \"Biases are systematic, so behavior is still predictable\"\n        },\n        {\n          \"feedback\": \"That flips it. Classic models assume rationality; behavioral work documents predictable departures from it.\",\n          \"isCorrect\": false,\n          \"text\": \"It supports the idea that people are always rational\"\n        },\n        {\n          \"feedback\": \"Some biases are widespread across contexts; they’re not just quirks of a few individuals.\",\n          \"isCorrect\": false,\n          \"text\": \"It says only a few unusual people have biases\"\n        },\n        {\n          \"feedback\": \"Behavioral insights often guide real interventions like defaults and commitments, so it’s very usable in practice.\",\n          \"isCorrect\": false,\n          \"text\": \"It means we can’t design better choices\"\n        }\n      ],\n      \"question\": \"Which reply best fits the science?\"\n    },\n    {\n      \"context\": \"A bank wants customers to avoid overdraft fees. It can: (A) ban debit cards when balance is low, (B) make low-balance alerts the default, (C) require a class on budgeting, or (D) increase overdraft fees to scare people.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right. Default alerts steer attention and action while preserving freedom—helpful choice architecture without banning.\",\n          \"isCorrect\": true,\n          \"text\": \"Make low-balance alerts the default\"\n        },\n        {\n          \"feedback\": \"That restricts choice rather than gently steering; it’s not a nudge-style approach.\",\n          \"isCorrect\": false,\n          \"text\": \"Ban debit cards when balance is low\"\n        },\n        {\n          \"feedback\": \"Education can help, but it’s slow and often loses to System 1 habits in the moment.\",\n          \"isCorrect\": false,\n          \"text\": \"Require a budgeting class\"\n        },\n        {\n          \"feedback\": \"Higher penalties change incentives, not architecture, and can hit people already struggling the most.\",\n          \"isCorrect\": false,\n          \"text\": \"Increase overdraft fees\"\n        }\n      ],\n      \"question\": \"Most nudge-like policy?\"\n    },\n    {\n      \"context\": \"You’re estimating how long a home renovation will take. The contractor says, “Most jobs like this take 3 weeks.” Even after seeing your project is bigger, you keep expecting about 3–4 weeks.\",\n      \"options\": [\n        {\n          \"feedback\": \"Correct. The initial time estimate becomes a reference point that pulls your later expectations.\",\n          \"isCorrect\": true,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Not quite. Availability is about what examples come to mind, not sticking to the first number offered.\",\n          \"isCorrect\": false,\n          \"text\": \"Availability heuristic\"\n        },\n        {\n          \"feedback\": \"Loss aversion is about avoiding losses. This is an estimation problem driven by a starting value.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Present bias is about preferring now over later, not about how initial estimates distort later judgment.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        }\n      ],\n      \"question\": \"What bias is this?\"\n    },\n    {\n      \"context\": \"A streaming service wants to reduce password sharing. It can either show “70% of users in your area don’t share passwords,” or show scary warnings about account termination. Sharing drops more with the first message.\",\n      \"options\": [\n        {\n          \"feedback\": \"Yes. Describing what most people do sets a norm, and many adjust behavior to match it.\",\n          \"isCorrect\": true,\n          \"text\": \"Social proof nudge\"\n        },\n        {\n          \"feedback\": \"Warnings might work, but that’s deterrence via threat, not leveraging norms.\",\n          \"isCorrect\": false,\n          \"text\": \"Loss aversion\"\n        },\n        {\n          \"feedback\": \"Anchoring is about first numbers affecting estimates. Here the message changes perceived norm, not an estimate.\",\n          \"isCorrect\": false,\n          \"text\": \"Anchoring bias\"\n        },\n        {\n          \"feedback\": \"Present bias is about immediate vs future rewards. The effect here is conformity to social norms.\",\n          \"isCorrect\": false,\n          \"text\": \"Present bias\"\n        }\n      ],\n      \"question\": \"What’s doing the work here?\"\n    }\n  ]\n}",
      "outputTokens": 3446,
      "systemPrompt": "# Role\n\nYou are an expert assessment designer creating a comprehensive **Review** quiz for a learning app. Your mission is to verify whether learners have truly UNDERSTOOD — not merely remembered — all the material from a lesson's content activities.\n\nYou specialize in crafting challenging questions that test logic, problem-solving, and analytical thinking across all content dimensions: WHY (Background), WHAT (Explanation), HOW (Mechanics), and WHERE (Examples).\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n- Connect ideas across different content dimensions\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the material but never read our specific content still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the content** — phrases like \"according to the lesson,\" \"as explained,\" or \"in the examples\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from any activity's steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n5. **Challenge the learner** — this is a final review; only those who fully understood should score well\n\n# Using the Inputs\n\nYou receive content from four activities. Here's how to use each:\n\n## BACKGROUND_STEPS (WHY)\n\nThese explain the origin story, historical context, and motivation behind the topic.\n\n- Test whether learners grasp **why** this topic matters\n- Ask questions about the problems it solves, not the history facts\n- Test understanding of context, motivation, and significance\n\n## EXPLANATION_STEPS (WHAT)\n\nThese define the core concepts, components, and terminology.\n\n- Test whether learners understand **what** the concepts mean\n- Present definitions in new contexts to verify comprehension\n- Test relationships between components\n\n## MECHANICS_STEPS (HOW)\n\nThese explain processes, sequences, and cause-effect chains.\n\n- Test whether learners can trace **how** things work\n- Present novel scenarios and ask for predictions\n- Test understanding of cause-effect relationships\n\n## EXAMPLES_STEPS (WHERE)\n\nThese show real-world applications and everyday contexts.\n\n- Test whether learners can **recognize** the topic in new situations\n- Ask them to identify concepts in unfamiliar domains\n- Test ability to connect abstract concepts to concrete applications\n\n# Question Distribution\n\nGenerate 15-20 questions with thoughtful coverage across all content types:\n\n- **Background (WHY)**: questions on context, motivation, and significance\n- **Explanation (WHAT)**: questions on core concepts and relationships\n- **Mechanics (HOW)**: questions on processes and cause-effect\n- **Examples (WHERE)**: questions on recognition and application\n- **Integration**: questions that synthesize multiple content types\n\nThe exact distribution should reflect the depth and complexity of each content area for this specific topic.\n\n# Difficulty Calibration\n\nThis is a comprehensive review. Questions should be challenging enough that only learners who truly understood the material will score well.\n\n## Difficulty Strategies\n\n1. **Plausible Distractors**: Wrong answers should represent common misconceptions, not obviously wrong choices. Each incorrect option should be something a learner might believe if they partially understood.\n\n2. **Novel Contexts**: Place concepts in scenarios not covered in any activity. If the examples discussed shopping carts, test with something completely different.\n\n3. **Reasoning Required**: Questions should require applying knowledge, not recognizing familiar phrases. Ask \"What would happen if...\" or \"Which situation demonstrates...\"\n\n4. **Integration Questions**: Include questions that require connecting ideas across multiple content types (e.g., understanding WHY something exists to predict HOW it might fail).\n\n5. **Edge Cases**: Test boundary conditions and exceptions that reveal whether learners truly grasped the underlying principles.\n\n## What Makes a Question Too Easy\n\n- The correct answer is obviously right without understanding the material\n- The distractors are obviously wrong (factually absurd or unrelated)\n- The question can be answered by pattern-matching familiar phrases\n- The scenario is identical to one in the activities\n\n## What Makes a Question Too Hard\n\n- The question requires external knowledge not covered in any activity\n- The scenario is so abstract that even understanding wouldn't help\n- Multiple answers could be correct depending on interpretation\n- The question tests trivia rather than understanding\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response.\n\n# Question Structure\n\nEach question must have:\n\n## context (max 300 characters)\n\nA novel scenario that sets up the question. This should:\n\n- Place the learner in a realistic situation they haven't seen\n- Provide enough detail to make the question concrete\n- Avoid referencing the lesson content\n\n## question (max 50 characters)\n\nA short, focused question. This should:\n\n- Be direct and clear\n- Ask about understanding, not recall\n- Avoid meta-language about \"the lesson\" or \"the text\"\n\n## options (exactly 4)\n\nFour answer choices, each with:\n\n- **text** (max 80 characters): The answer choice\n- **feedback**: Why this choice is right (with insight) or wrong (and what would be correct) — max 300 characters\n- **isCorrect** (boolean): Whether this is the correct answer\n\nExactly one option must be correct.\n\n## Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Nice! Transactions guarantee all-or-nothing — exactly what prevents that half-updated state.\"\n- \"Close, but that's isolation, not atomicity. The right pick is [X] since atomicity is about complete-or-nothing.\"\n- \"Easy mix-up! Higher isolation actually slows things down. The answer is [X] — faster means more risk of anomalies.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the activities, if the learner understands the concepts\n- [ ] Tests application, reasoning, or integration — not recall\n- [ ] Scenario is novel — not from any activity\n- [ ] Tone is conversational\n- [ ] All distractors are plausible (represent real misconceptions)\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Difficulty is appropriate for a comprehensive review\n\n# Coverage Checklist\n\nBefore finalizing the full quiz, verify:\n\n- [ ] All major concepts from EXPLANATION_STEPS are tested\n- [ ] Key processes from MECHANICS_STEPS are covered\n- [ ] Context and motivation from BACKGROUND_STEPS are addressed\n- [ ] Application skills from EXAMPLES_STEPS are tested\n- [ ] We have integration questions connecting multiple content types\n- [ ] Scenarios are varied — no repeated contexts\n- [ ] Question count is between 15-20\n\n# Distractor Design\n\nStrong distractors are essential for valid assessment. For each question:\n\n1. **Identify the concept**: What understanding are you testing?\n2. **Map misconceptions**: What do learners commonly get wrong?\n3. **Craft believable alternatives**: Each wrong answer should be something a partially-understanding learner might pick\n\nCommon misconception patterns to use:\n\n- Confusing cause and effect\n- Overgeneralizing a rule\n- Mixing up related concepts\n- Applying the right process to the wrong situation\n- Understanding the \"what\" but not the \"why\"\n\n# Integration Questions\n\nInclude questions that require synthesizing knowledge across content types:\n\n- **WHY + HOW**: Understanding the motivation helps predict process behavior\n- **WHAT + WHERE**: Knowing the definition helps recognize applications\n- **HOW + WHERE**: Understanding the process helps identify real-world instances\n- **WHY + WHAT + HOW**: Full synthesis of context, concept, and process\n\nIntegration questions are often the most revealing — they show whether learners built a connected mental model or memorized isolated facts.\n\n# Output Format\n\nReturn an object with a `questions` array containing 15-20 question objects. Each question has:\n\n- **context**: Novel scenario (max 300 chars)\n- **question**: Short question (max 50 chars)\n- **options**: Array of exactly 4 options, each with:\n  - **text**: Answer choice (max 80 chars)\n  - **feedback**: Why right (with insight) or wrong (and what would be correct) — max 300 chars\n  - **isCorrect**: Boolean (exactly one true per question)\n",
      "testCaseId": "en-interdisciplinary-behavioral-economics-1",
      "userPrompt": "LESSON_TITLE: Behavioral Economics Foundations\nLESSON_DESCRIPTION: Understanding how cognitive biases and heuristics systematically influence economic decisions, and how choice architecture can improve outcomes\nCHAPTER_TITLE: Decision Making\nCOURSE_TITLE: Behavioral Economics\nLANGUAGE: en\n\nBACKGROUND_STEPS:\n1. The Rationality Assumption: Classical economics assumed people are rational utility maximizers. But psychologists Daniel Kahneman and Amos Tversky documented systematic patterns where humans deviate from rationality in predictable ways.\n2. A Nobel-Winning Collision: Their research earned Kahneman the 2002 Nobel Prize in Economics — the first psychologist to win it. Behavioral economics was born from this collision of psychology and economic theory.\n3. From Theory to Practice: Richard Thaler expanded these insights into practical applications. His concept of 'nudging' showed how small changes in choice architecture could improve decisions without restricting freedom.\n\nEXPLANATION_STEPS:\n1. Loss Aversion: Loss aversion means losses hurt roughly twice as much as equivalent gains feel good. This asymmetry explains why people take irrational risks to avoid losses but not to achieve gains.\n2. Anchoring Bias: Anchoring occurs when we rely too heavily on the first piece of information encountered. An arbitrary initial number influences subsequent estimates, even when unrelated to the judgment.\n3. Present Bias: Present bias leads us to overweight immediate rewards compared to future ones. We know we should save for retirement, but the pleasure of spending now feels more real.\n4. Framing Effects: Framing effects mean how a choice is presented affects decisions. '90% survival rate' sounds better than '10% mortality rate' — identical information, different emotional response.\n5. Dual Systems: System 1 thinking is fast, automatic, and intuitive. System 2 is slow, deliberate, and analytical. Most decisions use System 1, which is efficient but prone to biases.\n\nMECHANICS_STEPS:\n1. Heuristics in Action: Heuristics are mental shortcuts that usually work but sometimes fail. Availability heuristic: judging probability by how easily examples come to mind, not actual frequency.\n2. Choice Architecture: Choice architecture structures how options are presented. The default, number of options, and order of presentation all influence which option people choose.\n3. Nudge Mechanics: Nudges are subtle changes that steer behavior without forbidding options. Putting healthy food at eye level in cafeterias is a nudge — junk food is still available but less convenient.\n4. Commitment Devices: Commitment devices help overcome present bias. Automatic savings deductions work because they make the rational future choice before present bias can override it.\n5. Social Proof Nudges: Social proof leverages conformity for behavior change. Telling hotel guests that 'most guests reuse towels' increases reuse more than environmental appeals alone.\n\nEXAMPLES_STEPS:\n1. Investment Behavior: Investors hold losing stocks too long and sell winners too early. Loss aversion makes the pain of realizing a loss feel worse than the pleasure of locking in a gain.\n2. Pricing Psychology: Stores price items at $9.99 instead of $10 because our brains anchor on the left digit. This 'left-digit bias' affects perception more than the actual penny saved.\n3. Gym Economics: Gym memberships exploit present bias — we overestimate future motivation when signing up, then fail to attend. The gym profits from our systematic overconfidence about future behavior.\n4. Default Effects: Default options are powerful. Countries with opt-out organ donation have 90%+ participation; opt-in countries have 15%. Same choice, different framing, vastly different outcomes."
    }
  ],
  "taskId": "activity-review"
}
