{
  "generatedAt": "2026-02-21T23:54:18.677Z",
  "modelId": "anthropic/claude-sonnet-4.6",
  "outputs": [
    {
      "duration": 14494.940166999935,
      "inputTokens": 2285,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Your immune system is your body's personal security force — a layered defense network that identifies threats, neutralizes them, and remembers them for next time. It's not one thing, but many systems working in concert.\",\n      \"title\": \"Your Body's Security Force\"\n    },\n    {\n      \"text\": \"Think of the immune system in three layers: physical barriers that block entry, fast-response generalists that attack anything suspicious, and specialized agents that target specific threats. Each layer has a distinct role.\",\n      \"title\": \"Three Layers of Defense\"\n    },\n    {\n      \"text\": \"Skin, mucus, and tiny hairs in your airways form the first layer. Like castle walls and a moat, they stop most invaders before they even get inside. Saliva and stomach acid add chemical reinforcements.\",\n      \"title\": \"The Outer Walls\"\n    },\n    {\n      \"text\": \"When something slips past those barriers, the innate immune system activates immediately. Think of these cells as security guards on patrol — they don't need to know the specific threat, just that something doesn't belong.\",\n      \"title\": \"The Fast-Response Team\"\n    },\n    {\n      \"text\": \"Macrophages engulf invaders whole. Neutrophils rush to infection sites. Natural killer cells destroy damaged cells. These responders arrive within minutes to hours — fast, aggressive, and non-specific.\",\n      \"title\": \"Meet the First Responders\"\n    },\n    {\n      \"text\": \"If the innate system can't handle it alone, the adaptive immune system steps in. This is your body's specialized unit — it takes days to mobilize, but it's trained to recognize and target one specific enemy precisely.\",\n      \"title\": \"The Specialized Strike Force\"\n    },\n    {\n      \"text\": \"B cells produce antibodies — proteins shaped like custom keys that fit only one specific invader. Once they lock on, they flag the threat for destruction or block it from entering your cells entirely.\",\n      \"title\": \"Antibodies: Custom-Made Weapons\"\n    },\n    {\n      \"text\": \"T cells are the commanders and assassins of your immune response. Helper T cells coordinate the attack; killer T cells directly destroy infected cells — like finding and eliminating enemy agents already inside the walls.\",\n      \"title\": \"T Cells: Commanders and Killers\"\n    },\n    {\n      \"text\": \"After the battle, most immune cells die off — but memory cells stick around for years. If the same invader returns, your body recognizes it instantly and destroys it before you even feel sick. That's immunity.\",\n      \"title\": \"Memory: The Immune System's Superpower\"\n    },\n    {\n      \"text\": \"All these layers constantly communicate through chemical signals called cytokines. Imagine a group chat where cells share intel in real time — coordinating who responds, how strongly, and when to stand down.\",\n      \"title\": \"How the Layers Talk to Each Other\"\n    }\n  ]\n}",
      "outputTokens": 577,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-immune-system-1",
      "userPrompt": "LESSON_TITLE: How the Immune System Works\nLESSON_DESCRIPTION: Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies\nCHAPTER_TITLE: Body Systems\nCOURSE_TITLE: Human Biology\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Invisible War: For millennia, plagues swept through populations unchecked. Why did some survive while others perished? The answer was invisible.\n2. Seeing the Unseen: In the 1800s, scientists discovered microbes. Suddenly, the enemy had a face — and the body's defense system began revealing its secrets.\n3. Mapping the Defense: From Pasteur's vaccines to modern immunology, we've mapped an internal army more sophisticated than any human military."
    },
    {
      "duration": 13596.027249999926,
      "inputTokens": 2265,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Photosynthesis is a plant's built-in food factory. Instead of eating, plants capture light energy and use it to build their own sugar — a process so elegant it powers nearly all life on Earth.\",\n      \"title\": \"Plants That Make Their Own Food\"\n    },\n    {\n      \"text\": \"The action happens inside chloroplasts — tiny structures inside plant cells. Think of them as solar panels combined with kitchens: they absorb sunlight and use that energy to cook up sugar from simple ingredients.\",\n      \"title\": \"Meet the Chloroplast\"\n    },\n    {\n      \"text\": \"Chloroplasts get their green color from chlorophyll, a pigment that absorbs red and blue light while reflecting green back to your eyes. Chlorophyll is the molecule that actually catches the sun's energy — like a catcher's mitt for light.\",\n      \"title\": \"Chlorophyll: The Light Catcher\"\n    },\n    {\n      \"text\": \"Photosynthesis has two main stages. The first, the light reactions, happen when chlorophyll absorbs sunlight and uses that energy to split water molecules apart — releasing oxygen as a byproduct. That's where the air you're breathing comes from.\",\n      \"title\": \"Stage One: Catching Light\"\n    },\n    {\n      \"text\": \"The split water releases electrons that carry energy forward into the second stage. Think of these electrons like charged batteries, ready to power the next phase of construction.\",\n      \"title\": \"Energy Gets Passed Along\"\n    },\n    {\n      \"text\": \"The second stage is carbon fixation — where the plant grabs carbon dioxide from the air and, using the energy from stage one, assembles it into glucose sugar. CO₂ in, sugar out. This is literally how plants build their own bodies.\",\n      \"title\": \"Stage Two: Building Sugar\"\n    },\n    {\n      \"text\": \"The full equation is beautifully simple: water + carbon dioxide + light energy → glucose + oxygen. Six molecules of CO₂ and six of water produce one sugar molecule and six oxygen molecules released into the air.\",\n      \"title\": \"The Recipe in One Line\"\n    },\n    {\n      \"text\": \"Glucose is the plant's all-purpose resource. It fuels growth, powers cellular functions, and forms the building blocks for everything from roots to leaves — the same way flour is the base ingredient in dozens of different foods.\",\n      \"title\": \"What Plants Do With Sugar\"\n    },\n    {\n      \"text\": \"A common mix-up: photosynthesis and respiration sound opposite, but they're not the same process running backward. Photosynthesis stores energy in sugar; respiration releases it. Plants do both — they make food and use food.\",\n      \"title\": \"Don't Confuse It With Respiration\"\n    }\n  ]\n}",
      "outputTokens": 553,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-photosynthesis-1",
      "userPrompt": "LESSON_TITLE: Photosynthesis\nLESSON_DESCRIPTION: Understanding the process by which plants convert light energy into chemical energy, including the role of chloroplasts, light reactions, and carbon fixation\nCHAPTER_TITLE: Plant Biology\nCOURSE_TITLE: Biology Fundamentals\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Mass Mystery: Plants don't eat, yet they grow massive. Where does a tree's mass come from? For centuries, scientists guessed wrong — soil, water, air?\n2. Clues Accumulate: Jan van Helmont's willow experiment showed soil wasn't the answer. Joseph Priestley found plants restore 'injured' air. The puzzle pieces emerged."
    },
    {
      "duration": 15909.765417000046,
      "inputTokens": 2308,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"CRISPR-Cas9 is essentially a molecular find-and-replace tool. Like a word processor that locates a specific word in a massive document and swaps it out, CRISPR finds a precise DNA sequence in billions of base pairs and makes targeted changes.\",\n      \"title\": \"The Molecular Find-and-Replace\"\n    },\n    {\n      \"text\": \"Every CRISPR edit has two main players: the guide RNA and the Cas9 protein. Think of them as a GPS and a pair of scissors working together — one knows where to go, the other does the cutting.\",\n      \"title\": \"The Two Key Players\"\n    },\n    {\n      \"text\": \"Guide RNA is a short, custom-designed genetic sequence that acts as the search term. Scientists program it to match exactly the DNA target they want to edit. It's the address that directs the whole operation to the right location.\",\n      \"title\": \"Guide RNA: The GPS\"\n    },\n    {\n      \"text\": \"Cas9 is a protein that functions like molecular scissors. It travels alongside the guide RNA and, once the right DNA sequence is found, it cuts through both strands of the DNA double helix — a precise, clean break.\",\n      \"title\": \"Cas9: The Scissors\"\n    },\n    {\n      \"text\": \"The guide RNA and Cas9 travel together through the cell's nucleus, scanning DNA like a search engine crawling web pages. When the sequence matches the guide RNA's blueprint, the complex locks on — and Cas9 makes its cut.\",\n      \"title\": \"Scanning and Locking On\"\n    },\n    {\n      \"text\": \"Once DNA is cut, the cell detects a break and rushes to repair it. This is where the actual editing happens — not from CRISPR itself, but from the cell's own repair machinery responding to the break.\",\n      \"title\": \"The Cell Responds to the Break\"\n    },\n    {\n      \"text\": \"Cells repair breaks in two main ways. One method — NHEJ — is fast but sloppy, often disabling the gene entirely. The other — HDR — uses a provided template for a precise rewrite. Scientists choose the method based on their goal.\",\n      \"title\": \"Two Repair Pathways\"\n    },\n    {\n      \"text\": \"If scientists want to simply turn a gene off, they let the sloppy repair introduce small errors. If they want to insert or correct a sequence, they supply a DNA template, which the cell uses as instructions during the careful repair process.\",\n      \"title\": \"Controlling the Outcome\"\n    },\n    {\n      \"text\": \"The guide RNA can be redesigned in days to target any gene in any organism. It's like changing a search term — the scissors stay the same, but the destination changes. This programmability is what makes CRISPR universally powerful.\",\n      \"title\": \"Infinitely Reprogrammable\"\n    },\n    {\n      \"text\": \"A common misconception: CRISPR doesn't directly rewrite DNA like a keyboard. It creates a break and lets the cell do the rewriting. CRISPR is the trigger — the cell's own biology finishes the edit.\",\n      \"title\": \"CRISPR Triggers, Cells Finish\"\n    }\n  ]\n}",
      "outputTokens": 650,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biotech-crispr-1",
      "userPrompt": "LESSON_TITLE: How CRISPR Gene Editing Works\nLESSON_DESCRIPTION: Understanding how CRISPR-Cas9 gene editing works, including the role of guide RNA, the Cas9 protein, and cellular repair mechanisms\nCHAPTER_TITLE: Genetic Engineering\nCOURSE_TITLE: Modern Biotechnology\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Precision Problem: For decades, editing genes was like editing a book with a sledgehammer — imprecise and dangerous. Scientists dreamed of surgical precision.\n2. Nature's Solution: Bacteria had already solved this problem. Their immune system could recognize and cut specific viral DNA. Scientists Jennifer Doudna and Emmanuelle Charpentier saw the potential.\n3. A New Era: In 2012, they adapted bacterial CRISPR into a programmable gene-editing tool. The revolution in genetics had begun."
    },
    {
      "duration": 14814.282790999976,
      "inputTokens": 2314,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A neurotransmissão é a forma como seus neurônios \",\n      \"title\": \"O que é neurotransmissão?\"\n    },\n    {\n      \"text\": \"Cada neurônio tem três partes essenciais: os dendritos (que recebem informações), o corpo celular (que processa) e o axônio (que envia o sinal adiante). Pense em uma antena, um computador e um cabo de transmissão — tudo em uma só célula.\",\n      \"title\": \"As partes de um neurônio\"\n    },\n    {\n      \"text\": \"O sinal começa como eletricidade. Quando um neurônio é ativado, íons entram e saem rapidamente, criando uma onda elétrica chamada potencial de ação. É como um dominó caindo — uma reação em cadeia que percorre o axônio.\",\n      \"title\": \"O sinal elétrico\"\n    },\n    {\n      \"text\": \"No final do axônio, o sinal elétrico para. Aqui começa a parte química: o neurônio libera moléculas chamadas neurotransmissores, que atravessam um pequeníssimo espaço — a sinapse — para alcançar o neurônio seguinte.\",\n      \"title\": \"Elétrico vira químico\"\n    },\n    {\n      \"text\": \"A sinapse é o espaço entre dois neurônios — menor que um milésimo de milímetro. É como uma ponte minúscula onde as mensagens trocam de idioma: de elétrico para químico, e depois de volta para elétrico.\",\n      \"title\": \"A sinapse: a ponte entre neurônios\"\n    },\n    {\n      \"text\": \"Neurotransmissores são moléculas-mensageiras com formatos específicos. Eles só encaixam em receptores compatíveis no neurônio seguinte — como uma chave numa fechadura. Esse encaixe é o que faz a mensagem continuar.\",\n      \"title\": \"Neurotransmissores: chaves e fechaduras\"\n    },\n    {\n      \"text\": \"Dependendo do neurotransmissor, o efeito pode ser diferente. Alguns estimulam o próximo neurônio a disparar (excitatórios). Outros impedem que ele dispare (inibitórios). É o equilíbrio entre os dois que dá precisão ao sistema nervoso.\",\n      \"title\": \"Excitar ou inibir?\"\n    },\n    {\n      \"text\": \"Após a transmissão, os neurotransmissores são reabsorvidos pelo neurônio original ou destruídos por enzimas. Isso limpa a sinapse para o próximo sinal — como apagar um quadro antes de escrever de novo.\",\n      \"title\": \"Limpando a sinapse\"\n    },\n    {\n      \"text\": \"Cada pensamento, emoção ou movimento é uma cascata de milhões de neurotransmissões acontecendo ao mesmo tempo. Entender esse processo é a chave para compreender desde o aprendizado até o efeito dos medicamentos no cérebro.\",\n      \"title\": \"Por que isso importa?\"\n    }\n  ]\n}",
      "outputTokens": 709,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-biology-neurotransmission-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Neurotransmissao\nLESSON_DESCRIPTION: Entendendo como os neuronios se comunicam atraves de sinais eletricos e quimicos, incluindo o papel dos neurotransmissores e sinapses\nCHAPTER_TITLE: Sistema Nervoso\nCOURSE_TITLE: Neurociencia Basica\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. O Misterio do Pensamento: Como o pensamento viaja pelo corpo? Por seculos, cientistas debatiam se era eletricidade, fluidos, ou algo totalmente diferente.\n2. Pistas Eletricas: Luigi Galvani fez pernas de ras se moverem com eletricidade. Santiago Ramon y Cajal mapeou celulas nervosas individuais. O quebra-cabeca comecou a se formar."
    },
    {
      "duration": 16852.715624999953,
      "inputTokens": 2302,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Un mecanismo de consenso es el conjunto de reglas que permite a miles de computadoras, sin conocerse ni confiar entre sí, ponerse de acuerdo sobre una misma verdad. Imagina un partido de fútbol donde todos los árbitros deben llegar al mismo veredicto sin consultarse.\",\n      \"title\": \"¿Qué es un mecanismo de consenso?\"\n    },\n    {\n      \"text\": \"En una blockchain, no hay árbitro central. En cambio, los participantes de la red — llamados nodos — verifican independientemente cada transacción y siguen las mismas reglas para decidir qué es válido. Si la mayoría coincide, esa versión se acepta.\",\n      \"title\": \"La red como árbitro colectivo\"\n    },\n    {\n      \"text\": \"Proof of Work es como un concurso de sudokus gigantes. Antes de añadir un bloque de transacciones, una computadora debe resolver un problema matemático muy difícil. La dificultad garantiza que alguien invirtió esfuerzo real — nadie puede hacer trampa fácilmente.\",\n      \"title\": \"Proof of Work: esfuerzo como garantía\"\n    },\n    {\n      \"text\": \"Las computadoras que compiten para resolver estos problemas se llaman mineros. Al primero que lo logra se le permite añadir el bloque a la cadena y recibe una recompensa. Los demás nodos verifican la solución — comprobarla es fácil, encontrarla no.\",\n      \"title\": \"Mineros: los competidores de la red\"\n    },\n    {\n      \"text\": \"Una transacción se considera válida cuando la mayoría de los nodos la acepta dentro de un bloque confirmado. Piénsalo como una firma colectiva: no basta con que una persona apruebe — necesitas el acuerdo de la mayoría para que sea oficial.\",\n      \"title\": \"Cómo se validan las transacciones\"\n    },\n    {\n      \"text\": \"Mientras más bloques se añaden encima de una transacción, más segura está. Es como sellar una carta dentro de cajas: cada nueva capa hace más difícil alterarla sin que todos lo noten. A esto se le llama 'confirmaciones'.\",\n      \"title\": \"Capas de seguridad: las confirmaciones\"\n    },\n    {\n      \"text\": \"El consenso no requiere que todos los participantes sean honestos — solo que la mayoría lo sea. Si alguien intenta engañar a la red, necesitaría controlar más del 50% del poder de cómputo. Un esfuerzo tan enorme que resulta prácticamente imposible.\",\n      \"title\": \"La fuerza está en la mayoría\"\n    },\n    {\n      \"text\": \"Es fácil confundir el mecanismo de consenso con la blockchain misma. Pero son cosas distintas: la blockchain es la estructura donde se guardan los datos; el consenso es el proceso social y matemático que decide qué datos merecen guardarse.\",\n      \"title\": \"Consenso ≠ blockchain: no confundirlos\"\n    }\n  ]\n}",
      "outputTokens": 704,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "es-tech-blockchain-consensus-1",
      "userPrompt": "LESSON_TITLE: Mecanismos de Consenso en Blockchain\nLESSON_DESCRIPTION: Entendiendo como las redes blockchain logran consenso sin autoridad central, incluyendo Proof of Work y como se validan las transacciones\nCHAPTER_TITLE: Fundamentos de Blockchain\nCOURSE_TITLE: Tecnologias Descentralizadas\nLANGUAGE: es\nBACKGROUND_STEPS:\n1. El Problema del Consenso: En sistemas centralizados, un servidor dice la verdad. Pero sin centro, como pueden miles de computadoras ponerse de acuerdo sobre que transacciones son validas?\n2. Generales y Traidores: Los generales bizantinos enfrentaban el mismo dilema: como coordinar sin saber quien es traidor. Este problema teorico inspiro soluciones practicas."
    },
    {
      "duration": 14835.80687500001,
      "inputTokens": 2253,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A compiler is a translator — it takes code written in a human-friendly language and converts it into instructions a machine can actually run. Think of it like translating a novel from English to Japanese: meaning must be preserved, not just words swapped.\",\n      \"title\": \"The Translator Concept\"\n    },\n    {\n      \"text\": \"Compilers don't translate in one giant leap. They work in distinct phases, each one transforming your code into a progressively more machine-friendly form. Like refining ore into metal into a finished tool — each stage removes impurities and adds structure.\",\n      \"title\": \"A Pipeline of Transformations\"\n    },\n    {\n      \"text\": \"First comes lexical analysis. The compiler reads your source code character by character and groups them into meaningful tokens — keywords, variable names, operators. Imagine shredding a sentence into individual words before you can diagram it grammatically.\",\n      \"title\": \"Phase 1: Breaking It Into Tokens\"\n    },\n    {\n      \"text\": \"Next is parsing. The compiler checks whether your tokens follow the language's grammatical rules and builds a tree structure called an Abstract Syntax Tree (AST). Think of it like diagramming a sentence — revealing the hidden structure beneath the words.\",\n      \"title\": \"Phase 2: Building the Syntax Tree\"\n    },\n    {\n      \"text\": \"Semantic analysis then checks meaning, not just grammar. It asks: does this make sense? Are you adding a number to a number, or a number to a name? It's the difference between grammatically correct nonsense — 'Colorless green ideas sleep' — and something actually meaningful.\",\n      \"title\": \"Phase 3: Checking for Meaning\"\n    },\n    {\n      \"text\": \"With a validated, meaningful tree, the compiler generates an intermediate representation (IR) — a generic, simplified version of your program that isn't tied to any specific machine. Think of IR as a universal blueprint before it's adapted for local building codes.\",\n      \"title\": \"Phase 4: Intermediate Representation\"\n    },\n    {\n      \"text\": \"Finally, the compiler generates target machine code — real instructions for a specific CPU. It also optimizes along the way, eliminating redundancy and improving speed. Like a GPS that finds not just any route, but the fastest one.\",\n      \"title\": \"Phase 5: Generating Machine Code\"\n    },\n    {\n      \"text\": \"The output is a binary executable: a self-contained file your computer can run directly, with no translator present. Your original source code is essentially gone — transformed, not carried along. The machine speaks its own language now.\",\n      \"title\": \"The Final Product\"\n    },\n    {\n      \"text\": \"A key distinction: compilers translate your entire program before running it. This is unlike interpreters, which translate line by line at runtime. Compilation trades a one-time waiting cost for faster execution later — like prepping all your ingredients before cooking vs. chopping as you go.\",\n      \"title\": \"Compile Once, Run Many Times\"\n    }\n  ]\n}",
      "outputTokens": 598,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-cs-compilers-1",
      "userPrompt": "LESSON_TITLE: How Compilers Work\nLESSON_DESCRIPTION: Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation\nCHAPTER_TITLE: Language Implementation\nCOURSE_TITLE: Programming Language Theory\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Machine Code Nightmare: Early programmers wrote in machine code — endless strings of 1s and 0s. One wrong digit meant hours of debugging. There had to be a better way.\n2. Hopper's Vision: Grace Hopper believed computers could understand more human-friendly instructions. Her A-0 system proved that automatic translation was possible."
    },
    {
      "duration": 14848.325124999974,
      "inputTokens": 2288,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Learning in a neural network is a cycle of guessing, measuring mistakes, and adjusting. Like a student who takes a test, reviews wrong answers, and studies better — the network improves by repeatedly correcting itself.\",\n      \"title\": \"Learning as a Correction Cycle\"\n    },\n    {\n      \"text\": \"First, input data travels forward through the network — layer by layer — until it produces an output. Think of it like a recipe passing through stations in a kitchen, each station transforming ingredients until a final dish emerges.\",\n      \"title\": \"The Forward Pass\"\n    },\n    {\n      \"text\": \"Once the network makes a prediction, you compare it to the correct answer. The gap between them is called the loss — a single number measuring how wrong the network was. A bigger gap means a bigger loss.\",\n      \"title\": \"Measuring the Mistake\"\n    },\n    {\n      \"text\": \"The loss function is the scoring system. Imagine a GPS calculating how far off-course you are. It doesn't care how you got lost — just how far you need to travel to reach the right destination.\",\n      \"title\": \"What Is a Loss Function?\"\n    },\n    {\n      \"text\": \"Now the network works backward — from the output toward the input — calculating how much each connection contributed to the mistake. This is backpropagation: tracing blame back through the layers.\",\n      \"title\": \"Backpropagation: Tracing the Blame\"\n    },\n    {\n      \"text\": \"Each connection has a weight — a number controlling how strongly a signal passes through. Think of weights like volume knobs. Backpropagation tells you whether to turn each knob up or down, and by how much.\",\n      \"title\": \"Weights: The Adjustable Knobs\"\n    },\n    {\n      \"text\": \"Gradients are the mathematical signals that guide weight updates. A gradient says: 'If you increase this weight slightly, the loss goes up or down by this much.' It's like a slope telling you which direction is downhill.\",\n      \"title\": \"Gradients: Your Direction Compass\"\n    },\n    {\n      \"text\": \"The network nudges each weight in the direction that reduces loss — a process called gradient descent. Imagine rolling a ball downhill to find the lowest valley. Each update is one small roll toward a better answer.\",\n      \"title\": \"Gradient Descent: Rolling Downhill\"\n    },\n    {\n      \"text\": \"The learning rate controls how big each adjustment step is. Too large and the network overshoots the valley. Too small and learning crawls. Finding the right balance is like adjusting stride length on a tightrope.\",\n      \"title\": \"Learning Rate: Step Size Matters\"\n    },\n    {\n      \"text\": \"This full cycle — forward pass, loss calculation, backpropagation, weight update — repeats thousands or millions of times. Each loop is called an iteration, and with enough iterations, the network gets reliably good.\",\n      \"title\": \"The Training Loop\"\n    }\n  ]\n}",
      "outputTokens": 593,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-ml-backpropagation-1",
      "userPrompt": "LESSON_TITLE: How Neural Networks Learn\nLESSON_DESCRIPTION: Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates\nCHAPTER_TITLE: Neural Network Training\nCOURSE_TITLE: Machine Learning Fundamentals\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Rule Explosion: Early AI systems were hand-programmed with explicit rules. But complex tasks like recognizing faces had too many rules to write manually.\n2. Learning from Data: What if systems could learn from examples instead? The challenge: how do you tell a network of artificial neurons which connections to strengthen?\n3. The Breakthrough: The backpropagation algorithm, refined in the 1980s, solved this. It showed how to assign 'blame' to each connection for mistakes."
    },
    {
      "duration": 15734.708541000029,
      "inputTokens": 2309,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Política monetária é o conjunto de decisões que um banco central toma para controlar a quantidade de dinheiro circulando na economia. Pense nela como um termostato: quando a economia esquenta demais ou esfria, o banco central ajusta a temperatura.\",\n      \"title\": \"O Termostato da Economia\"\n    },\n    {\n      \"text\": \"O principal instrumento é a taxa de juros básica — no Brasil, a Selic. Ela define o 'preço' do dinheiro. Quando juros sobem, emprestar dinheiro fica mais caro. Quando caem, fica mais barato. Simples assim.\",\n      \"title\": \"A Ferramenta Principal: Juros\"\n    },\n    {\n      \"text\": \"Imagine a economia como uma mangueira d'água. A taxa de juros controla a torneira. Juros altos fecham a torneira — menos crédito flui. Juros baixos abrem a torneira — mais dinheiro circula, incentivando gastos e investimentos.\",\n      \"title\": \"A Torneira do Crédito\"\n    },\n    {\n      \"text\": \"Mas como a decisão do banco central chega até você? Por mecanismos de transmissão. Quando a Selic sobe, os bancos repassam isso nos juros do cartão, do financiamento e dos empréstimos. A cadeia vai do banco central até o seu bolso.\",\n      \"title\": \"Como a Decisão Chega até Você\"\n    },\n    {\n      \"text\": \"Há dois grandes objetivos em jogo: controlar a inflação e estimular o crescimento. São como dois pedais — às vezes você precisa frear (juros altos), às vezes acelerar (juros baixos). O desafio é saber quando pisar em qual.\",\n      \"title\": \"Freio e Acelerador\"\n    },\n    {\n      \"text\": \"Além dos juros, bancos centrais têm outras ferramentas. Podem comprar ou vender títulos do governo (operações de mercado aberto) e exigir que bancos guardem mais ou menos reservas — controlando indiretamente quanto dinheiro os bancos podem emprestar.\",\n      \"title\": \"Mais Ferramentas no Cinto\"\n    },\n    {\n      \"text\": \"Existe uma defasagem importante: as decisões de política monetária levam meses para surtir efeito real na economia. É como virar o volante de um navio — a mudança de direção não é instantânea. Por isso, bancos centrais precisam antecipar problemas.\",\n      \"title\": \"Efeitos que Demoram a Chegar\"\n    },\n    {\n      \"text\": \"Quando todos acreditam que o banco central vai controlar a inflação, as pessoas já ajustam seus comportamentos — pedem aumentos menores, cobram preços mais estáveis. Essa confiança, por si só, já é uma ferramenta poderosa de política monetária.\",\n      \"title\": \"O Poder das Expectativas\"\n    }\n  ]\n}",
      "outputTokens": 683,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-economics-monetary-policy-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Politica Monetaria\nLESSON_DESCRIPTION: Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria\nCHAPTER_TITLE: Macroeconomia\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. Era do Caos Financeiro: Antes dos bancos centrais, crises financeiras eram frequentes e devastadoras. Panico bancario podia destruir economias inteiras da noite para o dia.\n2. O Nascimento do Fed: O Federal Reserve surgiu em 1913 apos uma crise brutal. Bancos centrais ganharam poder para estabilizar economias — mas como exatamente?"
    },
    {
      "duration": 15618.705249999999,
      "inputTokens": 2267,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A vaccine is essentially a rehearsal for your immune system. It introduces something that looks like a dangerous pathogen — without the danger — so your body can learn to fight it before the real threat ever arrives.\",\n      \"title\": \"A Dress Rehearsal for Your Immune System\"\n    },\n    {\n      \"text\": \"Your immune system is like a detective agency. When it meets a new threat, it studies the evidence, builds a case, and creates a \\\"wanted poster\\\" — a specialized antibody. Vaccines hand your immune system that poster in advance.\",\n      \"title\": \"Wanted Posters for Pathogens\"\n    },\n    {\n      \"text\": \"Vaccines contain antigens — pieces of a pathogen that trigger recognition without causing disease. This could be a protein from the virus's outer coat, a weakened version of the germ, or even just genetic instructions to make that protein yourself.\",\n      \"title\": \"The Key Ingredient: Antigens\"\n    },\n    {\n      \"text\": \"When your body encounters an antigen, B-cells and T-cells spring into action. B-cells produce antibodies that neutralize the threat. T-cells hunt down infected cells. Together, they're your immune system's strike team.\",\n      \"title\": \"Two Types of Immune Soldiers\"\n    },\n    {\n      \"text\": \"Think of memory cells like experienced veterans. After your immune system fights off an antigen — even a vaccine-delivered one — it keeps memory cells on standby. If the real pathogen appears, these veterans recognize it instantly and respond at full speed.\",\n      \"title\": \"The Memory That Makes Vaccines Work\"\n    },\n    {\n      \"text\": \"Live-attenuated vaccines use weakened pathogens (like the MMR vaccine). Inactivated vaccines use killed germs. Subunit vaccines use just protein fragments. mRNA vaccines deliver genetic instructions. Same goal, different delivery methods.\",\n      \"title\": \"Four Main Types of Vaccines\"\n    },\n    {\n      \"text\": \"mRNA vaccines are like sending your cells a text message: \\\"Build this spike protein, show it to the immune system, then delete the message.\\\" Your DNA is never touched — the instructions are temporary, the immunity is lasting.\",\n      \"title\": \"mRNA Vaccines: A Modern Approach\"\n    },\n    {\n      \"text\": \"Full immunity doesn't arrive overnight. After vaccination, your body needs days to weeks to build its defenses. Some vaccines need multiple doses to fully \\\"train\\\" the immune system — like cramming for an exam versus studying over a semester.\",\n      \"title\": \"Immunity Takes Time to Build\"\n    },\n    {\n      \"text\": \"When enough people are immune — through vaccination or prior infection — a pathogen runs out of hosts and can't spread easily. This protects even those who can't be vaccinated, like newborns or immunocompromised individuals.\",\n      \"title\": \"Herd Immunity: Protection by Numbers\"\n    }\n  ]\n}",
      "outputTokens": 582,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-vaccines-1",
      "userPrompt": "LESSON_TITLE: How Vaccines Work\nLESSON_DESCRIPTION: Understanding how vaccines train the immune system to recognize and fight specific pathogens, including different vaccine types and how immunity develops\nCHAPTER_TITLE: Immunology\nCOURSE_TITLE: Medical Science Basics\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Milkmaid's Secret: Smallpox killed 30% of those infected. Edward Jenner noticed milkmaids who caught cowpox seemed immune. Could a mild infection protect against a deadly one?\n2. From Cowpox to COVID: Jenner's experiment worked. Pasteur extended the principle to other diseases. Vaccination became humanity's most powerful weapon against infectious disease."
    },
    {
      "duration": 16583.820542,
      "inputTokens": 2303,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Una función hash criptográfica es como una picadora de carne matemática: mete cualquier dato —una palabra, un libro entero, un video— y siempre sale un resultado de tamaño fijo llamado 'hash' o 'digest'. Sin importar cuánto pongas, el resultado tiene siempre el mismo largo.\",\n      \"title\": \"¿Qué es exactamente una función hash?\"\n    },\n    {\n      \"text\": \"El hash no tiene tamaño variable: SHA-256 siempre produce 256 bits, sin importar si procesas una letra o la Biblia completa. Es como una caja mágica que aplana cualquier cosa en una ficha del mismo tamaño.\",\n      \"title\": \"Salida de tamaño fijo\"\n    },\n    {\n      \"text\": \"Si tienes el hash, es matemáticamente imposible reconstruir el dato original. Es como un batido de frutas: puedes hacer el batido, pero no puedes deshacer el proceso para recuperar las frutas enteras. A esto se le llama 'función unidireccional'.\",\n      \"title\": \"Sentido único, sin marcha atrás\"\n    },\n    {\n      \"text\": \"Cambia una sola coma en un documento de mil páginas y su hash cambia completamente. Esto se llama 'efecto avalancha': una pequeña perturbación provoca una reacción masiva en la salida. Es la clave de su sensibilidad extrema.\",\n      \"title\": \"El efecto avalancha\"\n    },\n    {\n      \"text\": \"Dos entradas diferentes jamás deberían producir el mismo hash. Aunque matemáticamente posible en teoría, una buena función hash hace que encontrar esa colisión sea computacionalmente imposible en la práctica.\",\n      \"title\": \"Sin colisiones: cada dato, único hash\"\n    },\n    {\n      \"text\": \"También debería ser imposible fabricar un dato diferente que produzca un hash específico. Esto se llama resistencia a la preimagen. Nadie puede 'diseñar' un archivo falso para que coincida con un hash legítimo.\",\n      \"title\": \"Resistencia a la falsificación\"\n    },\n    {\n      \"text\": \"Los algoritmos más conocidos son MD5 (hoy obsoleto), SHA-1 (ya vulnerable) y la familia SHA-2 y SHA-3 (seguros y ampliamente usados). Cada uno varía en longitud del hash y nivel de seguridad matemática.\",\n      \"title\": \"Algoritmos: MD5, SHA-1, SHA-2, SHA-3\"\n    },\n    {\n      \"text\": \"Piensa en el hash como el ADN de un archivo digital: dos personas pueden tener ADN casi idéntico, pero hay diferencias únicas que los identifican. El hash identifica unívocamente un dato sin revelar su contenido completo.\",\n      \"title\": \"El ADN de los datos digitales\"\n    },\n    {\n      \"text\": \"Las funciones hash aparecen en contraseñas almacenadas, firmas digitales, blockchains, certificados SSL y verificación de descargas. Son el ingrediente silencioso que mantiene la seguridad en casi todo lo digital.\",\n      \"title\": \"Presente en toda la seguridad digital\"\n    }\n  ]\n}",
      "outputTokens": 727,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "es-crypto-hash-functions-1",
      "userPrompt": "LESSON_TITLE: Funciones Hash Criptograficas\nLESSON_DESCRIPTION: Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital\nCHAPTER_TITLE: Fundamentos de Criptografia\nCOURSE_TITLE: Seguridad Informatica\nLANGUAGE: es\nBACKGROUND_STEPS:\n1. El Problema de Integridad: Como verificas que un archivo no fue alterado sin compararlo byte por byte? El problema de la integridad de datos parecia no tener solucion eficiente.\n2. Huellas Digitales: Los matematicos descubrieron funciones que comprimen cualquier dato en una 'huella digital' unica. Cambiar un bit del original cambia completamente la huella."
    },
    {
      "duration": 15362.11504100007,
      "inputTokens": 2260,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Plate tectonics is the organizing theory of Earth's surface. Think of the planet's outer shell as a cracked eggshell — those cracks divide it into massive slabs called tectonic plates that are constantly, slowly moving.\",\n      \"title\": \"Earth's Cracked Shell\"\n    },\n    {\n      \"text\": \"Earth has about 7 major plates and several smaller ones. Some carry continents, some carry ocean floor, and some carry both. These plates aren't floating on liquid rock — they ride on a semi-solid layer called the asthenosphere, which flows like extremely slow-moving putty.\",\n      \"title\": \"The Plates Themselves\"\n    },\n    {\n      \"text\": \"What moves these massive slabs? Heat from Earth's core creates convection currents in the mantle — like soup slowly churning in a pot. Plates also slide because their edges sink under their own weight, pulling the rest along. Both forces work together.\",\n      \"title\": \"What Drives the Movement\"\n    },\n    {\n      \"text\": \"Plates move at roughly the speed your fingernails grow — a few centimeters per year. That sounds trivial, but over millions of years, it's enough to open entire oceans and build mountain ranges taller than anything on Earth's surface.\",\n      \"title\": \"Slow but Powerful\"\n    },\n    {\n      \"text\": \"Where plates meet, the real action happens. There are three types of boundaries: plates spreading apart, plates colliding, and plates sliding past each other sideways. Each type produces a completely different set of geological features.\",\n      \"title\": \"Where Plates Meet\"\n    },\n    {\n      \"text\": \"Spreading boundaries pull apart, creating new crust as magma fills the gap — like two conveyor belts moving away from each other. Colliding boundaries do the opposite: one plate dives under the other, or both crumple upward into mountain ranges.\",\n      \"title\": \"Pulling Apart vs. Pushing Together\"\n    },\n    {\n      \"text\": \"When an oceanic plate dives under a continental one — called subduction — it melts back into the mantle. This creates volcanic arcs and deep ocean trenches. The Andes mountains and the Pacific Ring of Fire are textbook examples.\",\n      \"title\": \"When Plates Dive Under\"\n    },\n    {\n      \"text\": \"Sliding boundaries, like California's San Andreas Fault, don't create or destroy crust — plates just grind sideways past each other. This grinding releases enormous energy, making these zones earthquake hotspots.\",\n      \"title\": \"Plates That Grind Sideways\"\n    },\n    {\n      \"text\": \"Plate tectonics is essentially Earth's recycling system. Old crust sinks and melts at subduction zones, while new crust forms at spreading centers. The entire ocean floor gets replaced roughly every 200 million years.\",\n      \"title\": \"Earth's Recycling System\"\n    },\n    {\n      \"text\": \"Mountains, volcanoes, ocean trenches, earthquakes, and even where continents sit — all of it traces back to plate interactions. Plate tectonics isn't just one geological process; it's the master framework that connects nearly all of Earth's surface activity.\",\n      \"title\": \"The Master Framework\"\n    }\n  ]\n}",
      "outputTokens": 655,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-geology-plate-tectonics-1",
      "userPrompt": "LESSON_TITLE: Plate Tectonics\nLESSON_DESCRIPTION: Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create\nCHAPTER_TITLE: Earth's Structure\nCOURSE_TITLE: Earth Science\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Continental Puzzle: South America and Africa fit together like puzzle pieces. Fossils of the same species appear on continents separated by oceans. Coincidence?\n2. Wegener's Vindication: Alfred Wegener proposed continents drift, but couldn't explain how. He was ridiculed. Decades later, seafloor mapping revealed the answer."
    },
    {
      "duration": 16582.865249999915,
      "inputTokens": 2304,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A replicação do DNA é o processo pelo qual a célula duplica todo o seu material genético antes de se dividir. Pense nisso como fotocopiar um livro inteiro — mas com precisão tão alta que erros são raríssimos.\",\n      \"title\": \"O Que É Replicação?\"\n    },\n    {\n      \"text\": \"O processo começa em pontos específicos chamados origens de replicação. É como abrir um zíper: as duas fitas da dupla hélice se separam, formando uma 'bolha' onde a cópia começa.\",\n      \"title\": \"Abrindo o Zíper\"\n    },\n    {\n      \"text\": \"A enzima responsável por abrir a hélice se chama helicase. Ela desenrola e separa as fitas, criando uma região em forma de Y chamada forquilha de replicação — o canteiro de obras onde tudo acontece.\",\n      \"title\": \"A Helicase: Abrindo Caminho\"\n    },\n    {\n      \"text\": \"Com as fitas separadas, outra enzima entra em cena: a DNA polimerase. Ela lê cada fita como um molde e encaixa nucleotídeos complementares — A com T, C com G — construindo a nova fita como montar peças de Lego.\",\n      \"title\": \"DNA Polimerase: A Construtora\"\n    },\n    {\n      \"text\": \"A DNA polimerase tem uma regra: ela só trabalha em um sentido. Por isso, uma fita é copiada de forma contínua (fita líder) e a outra em pequenos fragmentos chamados fragmentos de Okazaki — como costurar um tecido em pedaços.\",\n      \"title\": \"Duas Formas de Copiar\"\n    },\n    {\n      \"text\": \"Antes da polimerase agir, uma enzima chamada primase deposita um pequeno fragmento de RNA chamado primer. É como marcar o ponto de partida numa corrida — a polimerase precisa desse início para começar a construir.\",\n      \"title\": \"O Primer: Ponto de Largada\"\n    },\n    {\n      \"text\": \"No final, os fragmentos de Okazaki são unidos por uma enzima chamada DNA ligase, que 'cola' as peças em uma fita contínua. O resultado: duas moléculas de DNA idênticas à original, cada uma com uma fita antiga e uma nova.\",\n      \"title\": \"Ligando as Peças\"\n    },\n    {\n      \"text\": \"Esse modelo é chamado semiconservativo: cada nova molécula guarda metade do DNA original. É como se ao copiar um livro, metade das páginas sempre fosse do exemplar original — uma herança garantida a cada geração celular.\",\n      \"title\": \"Semiconservativo: Uma Herança\"\n    }\n  ]\n}",
      "outputTokens": 644,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-biology-dna-replication-1",
      "userPrompt": "LESSON_TITLE: Como o DNA se Replica\nLESSON_DESCRIPTION: Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade\nCHAPTER_TITLE: Genetica Molecular\nCOURSE_TITLE: Biologia Celular\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. Alem da Estrutura: Watson e Crick revelaram a estrutura do DNA em 1953. Mas saber a forma nao explicava como a informacao genetica e copiada fielmente a cada divisao celular.\n2. O Molde Perfeito: A dupla helice sugeriu a resposta: cada fita serve de molde para a outra. Mas como exatamente as celulas executam essa copia?"
    }
  ],
  "taskId": "activity-explanation"
}
