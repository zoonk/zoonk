{
  "generatedAt": "2026-02-21T23:54:41.183Z",
  "modelId": "google/gemini-3.1-pro-preview",
  "outputs": [
    {
      "duration": 23833.96900000004,
      "inputTokens": 1924,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Think of your body as a bustling, prosperous city. The immune system is its ultimate security force. It isn't just one thing, but a vast network of physical barriers, patrol guards, and intelligence officers working around the clock to keep invaders out.\",\n      \"title\": \"Your Body's Security System\"\n    },\n    {\n      \"text\": \"Every good fortress needs an outer wall. Your skin is the first line of defense, physically blocking pathogens. Openings like your nose and mouth use sticky mucus and tears—think of them as moats—to trap and wash away intruders before they get inside.\",\n      \"title\": \"Layer One: The Castle Walls\"\n    },\n    {\n      \"text\": \"If an invader breaches the walls—like when you get a paper cut—the innate immune system kicks in. Swarm-like white blood cells rush to the scene. Picture them as Pac-Man, instantly gobbling up any unfamiliar bacteria they encounter on patrol.\",\n      \"title\": \"Layer Two: First Responders\"\n    },\n    {\n      \"text\": \"Some viruses are too clever for the standard patrol guards. That's when your adaptive immune system deploys the special forces: T-cells and B-cells. These elite cells analyze the specific invader and design a custom, highly targeted attack to destroy it.\",\n      \"title\": \"Layer Three: Special Forces\"\n    },\n    {\n      \"text\": \"To stop these clever invaders, B-cells create specialized proteins called antibodies. Imagine them as tiny, custom-fit handcuffs. They float through your bloodstream, locking onto the unique shape of the virus to neutralize it and tag it for destruction.\",\n      \"title\": \"Antibodies: The Handcuffs\"\n    },\n    {\n      \"text\": \"The true superpower of your immune system is its memory. Once it defeats a new enemy, it keeps its \\\"mugshot\\\" on file. If that exact virus ever tries to break in again, your body recognizes it instantly and crushes it before you even feel sick.\",\n      \"title\": \"The Mugshot Database\"\n    }\n  ]\n}",
      "outputTokens": 1678,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-immune-system-1",
      "userPrompt": "LESSON_TITLE: How the Immune System Works\nLESSON_DESCRIPTION: Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies\nCHAPTER_TITLE: Body Systems\nCOURSE_TITLE: Human Biology\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Invisible War: For millennia, plagues swept through populations unchecked. Why did some survive while others perished? The answer was invisible.\n2. Seeing the Unseen: In the 1800s, scientists discovered microbes. Suddenly, the enemy had a face — and the body's defense system began revealing its secrets.\n3. Mapping the Defense: From Pasteur's vaccines to modern immunology, we've mapped an internal army more sophisticated than any human military."
    },
    {
      "duration": 20867.35395800008,
      "inputTokens": 1906,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Photosynthesis is how plants make their own food. Instead of eating, they act like biological solar panels, capturing light from the sun and transforming it into usable chemical energy. It's the ultimate clean-energy manufacturing process.\",\n      \"title\": \"Nature's Solar Panels\"\n    },\n    {\n      \"text\": \"This process happens inside tiny, green factories in plant leaves called chloroplasts. Think of them as microscopic kitchens. They contain chlorophyll, the green pigment that acts like a solar antenna, trapping the sun's energy to power the kitchen.\",\n      \"title\": \"Inside the Chloroplast\"\n    },\n    {\n      \"text\": \"Every recipe needs ingredients. For photosynthesis, the plant pulls in water from its roots and absorbs carbon dioxide from the air. Together with sunlight, these simple ingredients are all the plant needs to cook up a feast.\",\n      \"title\": \"Gathering the Ingredients\"\n    },\n    {\n      \"text\": \"The first half of the process is the \\\"light reaction.\\\" Here, sunlight splits water molecules apart. This releases oxygen into the air (lucky for us!) and creates tiny, fully charged biological batteries to power the next step.\",\n      \"title\": \"Step One: Charging the Batteries\"\n    },\n    {\n      \"text\": \"Next comes \\\"carbon fixation,\\\" often called the Calvin cycle. The plant doesn't need light for this part. It takes the carbon dioxide from the air and uses the energy from its freshly charged batteries to stitch those carbon pieces into sugar.\",\n      \"title\": \"Step Two: Building the Sugar\"\n    },\n    {\n      \"text\": \"The final product is glucose, a type of sugar. But it's more than just a sweet treat—it's essentially bottled sunlight. The plant can use this sugar right away for energy to grow, or store it for later, like a pantry full of canned food.\",\n      \"title\": \"Storing the Sun's Energy\"\n    },\n    {\n      \"text\": \"Whenever you eat a vegetable, or even a piece of meat, you are consuming energy that was originally captured by a plant from the sun. Photosynthesis doesn't just feed the plants; it's the invisible engine that feeds almost the entire planet.\",\n      \"title\": \"The Foundation of Life\"\n    }\n  ]\n}",
      "outputTokens": 1709,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-photosynthesis-1",
      "userPrompt": "LESSON_TITLE: Photosynthesis\nLESSON_DESCRIPTION: Understanding the process by which plants convert light energy into chemical energy, including the role of chloroplasts, light reactions, and carbon fixation\nCHAPTER_TITLE: Plant Biology\nCOURSE_TITLE: Biology Fundamentals\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Mass Mystery: Plants don't eat, yet they grow massive. Where does a tree's mass come from? For centuries, scientists guessed wrong — soil, water, air?\n2. Clues Accumulate: Jan van Helmont's willow experiment showed soil wasn't the answer. Joseph Priestley found plants restore 'injured' air. The puzzle pieces emerged."
    },
    {
      "duration": 29249.082707999973,
      "inputTokens": 1935,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Think of your DNA as a giant instruction manual. CRISPR is like a word processor's \\\"Find and Replace\\\" tool. It allows scientists to search for a specific typo in the genetic text and rewrite it with incredible precision.\",\n      \"title\": \"Nature's Word Processor\"\n    },\n    {\n      \"text\": \"The first part of the system is the guide RNA. Imagine a bloodhound given a specific scent. This guide is programmed to scan the billions of letters in a cell's DNA until it matches with the exact genetic sequence that needs fixing.\",\n      \"title\": \"Guide RNA: The Search Party\"\n    },\n    {\n      \"text\": \"Once the guide RNA locks onto the target, it brings in a protein called Cas9. Think of Cas9 as a pair of microscopic scissors. It snips through the DNA strand exactly at the spot the guide RNA pointed out.\",\n      \"title\": \"Cas9: The Molecular Scissors\"\n    },\n    {\n      \"text\": \"Cutting the DNA might sound destructive, but it is actually a clever trick. By cleanly severing the genetic strand, CRISPR sounds an alarm. It tells the cell, \\\"Hey, there is a break in the code here that needs immediate attention!\\\"\",\n      \"title\": \"Sounding the Alarm\"\n    },\n    {\n      \"text\": \"Here is the secret: CRISPR only makes the cut. Your cell does the actual editing! The cell rushes to repair the broken DNA. Scientists can use this natural repair process to disable a faulty gene or paste in a new, healthy sequence.\",\n      \"title\": \"The Cell's Auto-Correct\"\n    },\n    {\n      \"text\": \"Because it relies on these basic cut-and-paste mechanics, this system works on almost any living thing—from crops to humans. Instead of just treating a disease's symptoms, we can literally rewrite the instructions that cause it.\",\n      \"title\": \"Editing the Source Code\"\n    }\n  ]\n}",
      "outputTokens": 2200,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biotech-crispr-1",
      "userPrompt": "LESSON_TITLE: How CRISPR Gene Editing Works\nLESSON_DESCRIPTION: Understanding how CRISPR-Cas9 gene editing works, including the role of guide RNA, the Cas9 protein, and cellular repair mechanisms\nCHAPTER_TITLE: Genetic Engineering\nCOURSE_TITLE: Modern Biotechnology\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Precision Problem: For decades, editing genes was like editing a book with a sledgehammer — imprecise and dangerous. Scientists dreamed of surgical precision.\n2. Nature's Solution: Bacteria had already solved this problem. Their immune system could recognize and cut specific viral DNA. Scientists Jennifer Doudna and Emmanuelle Charpentier saw the potential.\n3. A New Era: In 2012, they adapted bacterial CRISPR into a programmable gene-editing tool. The revolution in genetics had begun."
    },
    {
      "duration": 22809.485708000022,
      "inputTokens": 1930,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine seu cérebro como uma cidade de 86 bilhões de habitantes muito fofoqueiros. A neurotransmissão é simplesmente a forma como eles conversam, passando mensagens de um para o outro em frações de segundo para fazer você pensar, sentir e agir.\",\n      \"title\": \"Uma Rede de Fofocas\"\n    },\n    {\n      \"text\": \"A mensagem começa sua jornada como um pulso elétrico, viajando super rápido por dentro da célula nervosa (o neurônio). Pense nisso como uma faísca correndo por um pavio de pólvora até chegar na ponta da célula.\",\n      \"title\": \"O Fio Condutor\"\n    },\n    {\n      \"text\": \"Aqui está o problema: os neurônios não se encostam. Existe um minúsculo espaço entre eles chamado de sinapse. É como se a faísca chegasse à beira de um rio. A eletricidade não consegue pular para a outra margem sozinha.\",\n      \"title\": \"A Barreira do Rio\"\n    },\n    {\n      \"text\": \"Para cruzar esse \\\"rio\\\" (a sinapse), a célula libera pequenas moléculas químicas chamadas neurotransmissores. Imagine que a faísca elétrica colocou sua mensagem em milhares de barquinhos químicos que vão flutuar até o outro lado.\",\n      \"title\": \"As Balsas Químicas\"\n    },\n    {\n      \"text\": \"Na outra margem (o próximo neurônio), existem receptores esperando. Eles funcionam como fechaduras. Quando os \\\"barquinhos\\\" químicos chegam, eles precisam ter o formato exato para se encaixar nessas fechaduras e entregar a mensagem.\",\n      \"title\": \"O Encaixe Perfeito\"\n    },\n    {\n      \"text\": \"Assim que as fechaduras se abrem, a mensagem química se transforma de volta em uma faísca elétrica no novo neurônio. O ciclo recomeça! É um revezamento perfeito entre eletricidade (dentro da célula) e química (entre as células).\",\n      \"title\": \"A Corrida Continua\"\n    },\n    {\n      \"text\": \"O mais incrível é que existem vários tipos de neurotransmissores. A dopamina, por exemplo, traz a sensação de recompensa, enquanto a serotonina ajuda a regular o humor. Cada substância química dita o tom da conversa entre seus neurônios.\",\n      \"title\": \"Os Sabores da Mensagem\"\n    }\n  ]\n}",
      "outputTokens": 2020,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-biology-neurotransmission-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Neurotransmissao\nLESSON_DESCRIPTION: Entendendo como os neuronios se comunicam atraves de sinais eletricos e quimicos, incluindo o papel dos neurotransmissores e sinapses\nCHAPTER_TITLE: Sistema Nervoso\nCOURSE_TITLE: Neurociencia Basica\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. O Misterio do Pensamento: Como o pensamento viaja pelo corpo? Por seculos, cientistas debatiam se era eletricidade, fluidos, ou algo totalmente diferente.\n2. Pistas Eletricas: Luigi Galvani fez pernas de ras se moverem com eletricidade. Santiago Ramon y Cajal mapeou celulas nervosas individuais. O quebra-cabeca comecou a se formar."
    },
    {
      "duration": 27632.26579199999,
      "inputTokens": 1920,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Un mecanismo de consenso es el reglamento de la red. Imagina un juego de mesa sin árbitro: para que funcione, todos deben seguir exactamente las mismas reglas para decidir qué jugada es válida. En blockchain, esto define la única verdad.\",\n      \"title\": \"Las reglas del juego\"\n    },\n    {\n      \"text\": \"Cuando alguien envía fondos, la red revisa la transacción. Es como salir a cenar con amigos y que todos anoten en una libreta quién pagó qué. Si alguien intenta gastar dinero que no tiene, el resto del grupo simplemente ignora esa anotación.\",\n      \"title\": \"Revisando las transacciones\"\n    },\n    {\n      \"text\": \"El verdadero reto es organizar el orden. Si ocurren miles de transacciones a la vez, ¿quién decide cuáles van en la siguiente página (bloque) del libro mayor? Si todos escribieran al mismo tiempo, sería un caos. Alguien debe tomar el turno.\",\n      \"title\": \"¿Quién escribe la página?\"\n    },\n    {\n      \"text\": \"Aquí entra la \\\"Prueba de Trabajo\\\" (Proof of Work). Es como un torneo matemático. Para ganarte el derecho a escribir la siguiente página oficial, tu computadora debe competir resolviendo un acertijo criptográfico extremadamente difícil.\",\n      \"title\": \"Proof of Work: El gran torneo\"\n    },\n    {\n      \"text\": \"Piensa en este sistema como armar un Sudoku gigante. Te toma mucho esfuerzo y tiempo encontrar la solución (el trabajo), pero cualquier otra persona puede verificar en un segundo si los números están correctos (la validación).\",\n      \"title\": \"Difícil de hacer, fácil de ver\"\n    },\n    {\n      \"text\": \"Resolver el acertijo gasta mucha electricidad y poder de cómputo. Si el ganador intenta incluir trampas en su página, los demás la rechazarán. Habrá quemado energía para nada. El sistema hace que ser honesto sea la única opción rentable.\",\n      \"title\": \"La honestidad tiene premio\"\n    },\n    {\n      \"text\": \"Una vez validada por todos, la página se sella y se une a las anteriores. Alterarla requeriría rehacer el colosal trabajo matemático de ese bloque y de todos los siguientes. Así es como miles de extraños logran confiar ciegamente en el sistema.\",\n      \"title\": \"Una cadena inquebrantable\"\n    }\n  ]\n}",
      "outputTokens": 1993,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "es-tech-blockchain-consensus-1",
      "userPrompt": "LESSON_TITLE: Mecanismos de Consenso en Blockchain\nLESSON_DESCRIPTION: Entendiendo como las redes blockchain logran consenso sin autoridad central, incluyendo Proof of Work y como se validan las transacciones\nCHAPTER_TITLE: Fundamentos de Blockchain\nCOURSE_TITLE: Tecnologias Descentralizadas\nLANGUAGE: es\nBACKGROUND_STEPS:\n1. El Problema del Consenso: En sistemas centralizados, un servidor dice la verdad. Pero sin centro, como pueden miles de computadoras ponerse de acuerdo sobre que transacciones son validas?\n2. Generales y Traidores: Los generales bizantinos enfrentaban el mismo dilema: como coordinar sin saber quien es traidor. Este problema teorico inspiro soluciones practicas."
    },
    {
      "duration": 24327.831208000076,
      "inputTokens": 1896,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A compiler is like a master translator. It takes code written in a language you understand and translates it entirely into a language the computer's hardware understands, before any program is actually run.\",\n      \"title\": \"The Ultimate Translator\"\n    },\n    {\n      \"text\": \"Imagine reading a book letter by letter. To make sense of it, you group letters into words. The compiler's first job, called \\\"lexical analysis,\\\" groups raw characters of code into meaningful chunks, or \\\"tokens.\\\"\",\n      \"title\": \"Breaking It Down: Tokens\"\n    },\n    {\n      \"text\": \"Next comes the \\\"parser.\\\" Just like a spoken language requires a subject and a verb, programming languages have strict grammar rules. The parser takes your tokens and checks if they form a structurally correct sentence.\",\n      \"title\": \"Checking the Grammar\"\n    },\n    {\n      \"text\": \"\\\"The rock ate a math equation.\\\" That sentence has perfect grammar, but it makes zero sense. The compiler's \\\"semantic analysis\\\" phase checks the logic. It ensures you aren't trying to do impossible things, like dividing by a word.\",\n      \"title\": \"Does It Make Sense?\"\n    },\n    {\n      \"text\": \"Instead of translating directly to machine code, the compiler first creates a rough, universal blueprint. Think of it as translating English into a generic middle language before turning it into Japanese.\",\n      \"title\": \"The Universal Blueprint\"\n    },\n    {\n      \"text\": \"Before finalizing, the compiler acts like a ruthless editor. It looks at your blueprint and finds clever shortcuts to make it run faster or use less memory, all without changing what the program actually does.\",\n      \"title\": \"Trimming the Fat\"\n    },\n    {\n      \"text\": \"Finally, the compiler takes that optimized blueprint and generates the exact instructions required for your specific computer processor. Your human-readable ideas are now a ready-to-execute machine program!\",\n      \"title\": \"The Final Translation\"\n    }\n  ]\n}",
      "outputTokens": 1769,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-cs-compilers-1",
      "userPrompt": "LESSON_TITLE: How Compilers Work\nLESSON_DESCRIPTION: Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation\nCHAPTER_TITLE: Language Implementation\nCOURSE_TITLE: Programming Language Theory\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Machine Code Nightmare: Early programmers wrote in machine code — endless strings of 1s and 0s. One wrong digit meant hours of debugging. There had to be a better way.\n2. Hopper's Vision: Grace Hopper believed computers could understand more human-friendly instructions. Her A-0 system proved that automatic translation was possible."
    },
    {
      "duration": 18713.84379199997,
      "inputTokens": 1929,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A neural network learns much like a musician tuning an instrument. It plays a note, hears how far off it is, adjusts the tuning pegs, and tries again. In machine learning, those tuning pegs are mathematical connections called weights.\",\n      \"title\": \"Learning by Trial and Error\"\n    },\n    {\n      \"text\": \"The process starts with a \\\"forward pass.\\\" The network takes in data, pushes it through its layers of artificial neurons, and spits out a prediction. Imagine a blindfolded chef tasting a new recipe and guessing the missing ingredient.\",\n      \"title\": \"Making a Guess\"\n    },\n    {\n      \"text\": \"Once the guess is made, the network compares it to the correct answer. The difference between the guess and reality is called \\\"loss.\\\" The higher the loss, the worse the prediction. The ultimate goal of learning is to shrink this loss down to zero.\",\n      \"title\": \"Measuring the Mistake\"\n    },\n    {\n      \"text\": \"Through \\\"backpropagation,\\\" the network works backward from the mistake to figure out which specific connections caused the error. It's like tracing a bad dish back to the exact kitchen station that accidentally added too much salt.\",\n      \"title\": \"Assigning the Blame\"\n    },\n    {\n      \"text\": \"Now that the network knows who to blame, it adjusts its internal dials. It uses a concept called a gradient to know exactly which direction to turn each dial—and by how much—to make the next guess slightly more accurate.\",\n      \"title\": \"Turning the Dials\"\n    },\n    {\n      \"text\": \"A single adjustment won't make the network smart. This cycle—guess, measure, trace back, and adjust—happens millions of times. With each cycle, the network's dials get closer to their perfect settings, turning wild guesses into expert predictions.\",\n      \"title\": \"Practice Makes Perfect\"\n    }\n  ]\n}",
      "outputTokens": 1756,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-ml-backpropagation-1",
      "userPrompt": "LESSON_TITLE: How Neural Networks Learn\nLESSON_DESCRIPTION: Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates\nCHAPTER_TITLE: Neural Network Training\nCOURSE_TITLE: Machine Learning Fundamentals\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Rule Explosion: Early AI systems were hand-programmed with explicit rules. But complex tasks like recognizing faces had too many rules to write manually.\n2. Learning from Data: What if systems could learn from examples instead? The challenge: how do you tell a network of artificial neurons which connections to strengthen?\n3. The Breakthrough: The backpropagation algorithm, refined in the 1980s, solved this. It showed how to assign 'blame' to each connection for mistakes."
    },
    {
      "duration": 26337.541749999975,
      "inputTokens": 1922,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A política monetária é como o termostato de uma casa. O banco central ajusta a \\\"temperatura\\\" da economia para evitar que ela congele (recessão) ou superaqueça (inflação). A ferramenta principal para isso é a taxa de juros.\",\n      \"title\": \"O Termostato da Economia\"\n    },\n    {\n      \"text\": \"Pense nos juros como o \\\"preço do dinheiro\\\". Quando o banco central reduz essa taxa, pegar dinheiro emprestado fica barato. É como uma liquidação: as pessoas pegam mais crédito para comprar carros, casas e fazer negócios.\",\n      \"title\": \"O Preço do Dinheiro\"\n    },\n    {\n      \"text\": \"Com juros baixos e dinheiro barato, as empresas contratam mais e os consumidores gastam mais. A economia acelera. Isso é ótimo para crescer, mas tem um efeito colateral: se todos querem comprar muito, os preços sobem.\",\n      \"title\": \"Aquecendo os Motores\"\n    },\n    {\n      \"text\": \"Quando os preços sobem rápido demais (inflação), o banco central aumenta os juros. Agora, pegar empréstimos fica caro, e guardar dinheiro no banco vira um ótimo negócio. As pessoas gastam menos e os preços param de subir.\",\n      \"title\": \"Freando a Inflação\"\n    },\n    {\n      \"text\": \"Essa mudança não acontece na mesma hora. É um efeito dominó: o banco central mexe na taxa principal, que altera os juros dos bancos comuns, que então muda o comportamento de compras de milhões de empresas e famílias.\",\n      \"title\": \"O Efeito Dominó\"\n    },\n    {\n      \"text\": \"Além dos juros, os bancos centrais controlam a quantidade física de dinheiro circulando. Imagine um encanamento: eles podem abrir a torneira para injetar notas na economia, ou fechar a válvula para \\\"secar\\\" o mercado.\",\n      \"title\": \"A Quantidade de Dinheiro\"\n    },\n    {\n      \"text\": \"O grande desafio da política monetária é encontrar o ponto ideal. Dinheiro fácil demais gera inflação descontrolada. Dinheiro restrito demais trava o crescimento. É um malabarismo constante para manter a economia saudável.\",\n      \"title\": \"A Arte do Equilíbrio\"\n    }\n  ]\n}",
      "outputTokens": 1941,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-economics-monetary-policy-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Politica Monetaria\nLESSON_DESCRIPTION: Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria\nCHAPTER_TITLE: Macroeconomia\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. Era do Caos Financeiro: Antes dos bancos centrais, crises financeiras eram frequentes e devastadoras. Panico bancario podia destruir economias inteiras da noite para o dia.\n2. O Nascimento do Fed: O Federal Reserve surgiu em 1913 apos uma crise brutal. Bancos centrais ganharam poder para estabilizar economias — mas como exatamente?"
    },
    {
      "duration": 25263.926457999973,
      "inputTokens": 1900,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Think of a vaccine as a highly realistic fire drill for your immune system. It teaches your body exactly how to respond to a specific threat without ever putting you in actual danger.\",\n      \"title\": \"A Fire Drill for Your Body\"\n    },\n    {\n      \"text\": \"Every virus or bacteria has unique surface proteins called antigens. A vaccine introduces a harmless version of these antigens into your body. It's like giving your security team a mugshot of a criminal before they strike.\",\n      \"title\": \"Handing Out the Mugshot\"\n    },\n    {\n      \"text\": \"Once your immune system sees the \\\"mugshot,\\\" it starts creating antibodies. Think of antibodies as custom-made handcuffs designed to fit only one specific intruder. It takes a couple of weeks to manufacture these perfectly fitted tools.\",\n      \"title\": \"Crafting the Perfect Weapon\"\n    },\n    {\n      \"text\": \"After the practice run, \\\"memory cells\\\" stick around. These cells are your body's permanent security database. If the real virus ever shows up, they instantly print millions of custom handcuffs to stop the infection in its tracks.\",\n      \"title\": \"Keeping the Blueprint\"\n    },\n    {\n      \"text\": \"Traditional vaccines use the whole virus, but either kill it completely or weaken it so much it can't fight back. It’s like practicing martial arts against a dummy instead of a live opponent.\",\n      \"title\": \"Different Types of Simulators\"\n    },\n    {\n      \"text\": \"Newer vaccines, like mRNA, don't use the virus at all. Instead, they deliver temporary instructions showing your cells how to build just the \\\"mugshot\\\" protein. Once your immune system learns the shape, the instructions dissolve.\",\n      \"title\": \"The Instruction Manuals\"\n    },\n    {\n      \"text\": \"Because of this rigorous training, if the actual disease enters your body months or years later, your immune system recognizes it instantly. It crushes the invader before it can multiply, often before you even feel sick.\",\n      \"title\": \"Ready for the Real Threat\"\n    }\n  ]\n}",
      "outputTokens": 1846,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-vaccines-1",
      "userPrompt": "LESSON_TITLE: How Vaccines Work\nLESSON_DESCRIPTION: Understanding how vaccines train the immune system to recognize and fight specific pathogens, including different vaccine types and how immunity develops\nCHAPTER_TITLE: Immunology\nCOURSE_TITLE: Medical Science Basics\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Milkmaid's Secret: Smallpox killed 30% of those infected. Edward Jenner noticed milkmaids who caught cowpox seemed immune. Could a mild infection protect against a deadly one?\n2. From Cowpox to COVID: Jenner's experiment worked. Pasteur extended the principle to other diseases. Vaccination became humanity's most powerful weapon against infectious disease."
    },
    {
      "duration": 25919.825333999936,
      "inputTokens": 1918,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagina una función hash como una licuadora matemática mágica. Puedes meterle una sola palabra, una foto o una enciclopedia entera. La licuadora procesará los datos y siempre te devolverá un bloque de texto del mismo tamaño exacto.\",\n      \"title\": \"Una licuadora matemática\"\n    },\n    {\n      \"text\": \"Una regla de oro del hash es que debe ser determinista. Esto significa que si introduces exactamente los mismos datos mil veces, siempre obtendrás el mismo resultado. Es una receta estricta que jamás varía por accidente.\",\n      \"title\": \"Resultados siempre exactos\"\n    },\n    {\n      \"text\": \"Aquí está la verdadera magia criptográfica: es un camino de un solo sentido. Si alguien intercepta tu código hash, es matemáticamente imposible que deduzca qué datos lo formaron. Es como intentar 'deslicuar' un batido para recuperar la fruta.\",\n      \"title\": \"Imposible de revertir\"\n    },\n    {\n      \"text\": \"A esto se le llama 'efecto avalancha'. Aunque cambies solo una minúscula en un libro de mil páginas, el código hash no cambiará solo un poquito. Se transformará en una cadena de caracteres completamente nueva y distinta a la original.\",\n      \"title\": \"El efecto avalancha\"\n    },\n    {\n      \"text\": \"¿Podrían dos archivos distintos generar el mismo hash? En teoría sí, a esto se le llama 'colisión'. Pero en una buena función criptográfica, las combinaciones son tan vastas que encontrar dos iguales es como ganar la lotería en mil universos.\",\n      \"title\": \"Sin clones accidentales\"\n    },\n    {\n      \"text\": \"Por estas propiedades, los sitios web no guardan tu contraseña real, sino su hash. Cuando inicias sesión, el sistema calcula el hash de lo que escribes y lo compara. Si un hacker roba los datos, solo verá códigos indescifrables.\",\n      \"title\": \"Guardando secretos\"\n    }\n  ]\n}",
      "outputTokens": 1844,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "es-crypto-hash-functions-1",
      "userPrompt": "LESSON_TITLE: Funciones Hash Criptograficas\nLESSON_DESCRIPTION: Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital\nCHAPTER_TITLE: Fundamentos de Criptografia\nCOURSE_TITLE: Seguridad Informatica\nLANGUAGE: es\nBACKGROUND_STEPS:\n1. El Problema de Integridad: Como verificas que un archivo no fue alterado sin compararlo byte por byte? El problema de la integridad de datos parecia no tener solucion eficiente.\n2. Huellas Digitales: Los matematicos descubrieron funciones que comprimen cualquier dato en una 'huella digital' unica. Cambiar un bit del original cambia completamente la huella."
    },
    {
      "duration": 25955.858167,
      "inputTokens": 1899,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Earth might look solid from space, but its outer crust is actually shattered. Think of a hard-boiled egg with a cracked shell. These giant, jagged rock fragments are called tectonic plates, and they cover the entire planet like a mosaic.\",\n      \"title\": \"A Cracked Eggshell\"\n    },\n    {\n      \"text\": \"These rigid plates don't just sit there—they glide. Below the solid crust is a layer of super-heated rock that behaves like thick, flowing caramel. The solid plates float on top of this malleable layer, drifting at the speed your fingernails grow.\",\n      \"title\": \"Floating on a Hot Slush\"\n    },\n    {\n      \"text\": \"What pushes these massive rock slabs? Heat. Earth’s core is extremely hot. It heats the rock above it, making it rise. As it nears the surface, it cools and sinks back down. This circular motion—like a simmering pot of thick soup—drags the plates along.\",\n      \"title\": \"The Boiling Soup Engine\"\n    },\n    {\n      \"text\": \"When underlying currents pull plates in opposite directions, a gap opens up. Magma rises from below to fill the space, cooling to form brand new ocean floors. It’s like a giant, underwater conveyor belt creating fresh crust.\",\n      \"title\": \"Pulling Apart\"\n    },\n    {\n      \"text\": \"What happens when plates crash into each other? Massive geological pile-ups. If two continental plates collide, the crust crumples upward, building towering mountain ranges. Think of the hood of a car crumpling in a slow-motion crash.\",\n      \"title\": \"Head-On Collisions\"\n    },\n    {\n      \"text\": \"Sometimes, a heavier ocean plate collides with a lighter land plate. The heavier one gets shoved underneath, sinking back into the hot mantle to melt. This deep dive creates ocean trenches and fuels explosive volcanoes on the surface.\",\n      \"title\": \"The Deep Dive\"\n    },\n    {\n      \"text\": \"Plates can also grind past each other sideways. Since their edges are jagged, they often get stuck. Tension builds up over centuries until they suddenly snap past one another. That violent release of energy is what we feel as an earthquake.\",\n      \"title\": \"Scraping and Grinding\"\n    },\n    {\n      \"text\": \"Plate tectonics is Earth's ultimate recycling program. Old crust melts away, new crust is born, and mountains are thrust into the sky. Without this constant, hidden churning beneath our feet, Earth would be a flat, geographically dead planet.\",\n      \"title\": \"A Living Planet\"\n    }\n  ]\n}",
      "outputTokens": 2687,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-geology-plate-tectonics-1",
      "userPrompt": "LESSON_TITLE: Plate Tectonics\nLESSON_DESCRIPTION: Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create\nCHAPTER_TITLE: Earth's Structure\nCOURSE_TITLE: Earth Science\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Continental Puzzle: South America and Africa fit together like puzzle pieces. Fossils of the same species appear on continents separated by oceans. Coincidence?\n2. Wegener's Vindication: Alfred Wegener proposed continents drift, but couldn't explain how. He was ridiculed. Decades later, seafloor mapping revealed the answer."
    },
    {
      "duration": 32234.75795800006,
      "inputTokens": 1923,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A replicação é como fazer uma cópia de segurança de um documento muito importante. Antes de uma célula se dividir, ela precisa duplicar todo o seu DNA para que a nova célula receba o manual de instruções completo.\",\n      \"title\": \"Copiando o Manual da Vida\"\n    },\n    {\n      \"text\": \"Imagine o DNA como um casaco bem fechado. A primeira enzima a entrar em ação se chama Helicase. Ela funciona exatamente como o cursor de um zíper, separando as duas fitas da dupla hélice para que a informação possa ser lida.\",\n      \"title\": \"Abrindo o Zíper do DNA\"\n    },\n    {\n      \"text\": \"Com o DNA aberto, entra a enzima DNA Polimerase. Pense nela como uma digitadora muito rápida e atenta. Ela lê a fita original e vai adicionando as peças correspondentes (A com T, C com G) para construir a fita nova.\",\n      \"title\": \"A Máquina de Escrever\"\n    },\n    {\n      \"text\": \"O DNA tem um sentido obrigatório de leitura. Por isso, uma fita é copiada de forma contínua e rápida. A outra, por estar invertida, precisa ser lida e copiada de trás para frente, em vários pequenos pedaços de cada vez.\",\n      \"title\": \"O Desafio da Direção\"\n    },\n    {\n      \"text\": \"Como uma das fitas foi construída em pequenos fragmentos, precisamos unir tudo. É aí que age a enzima Ligase. Ela funciona como uma fita adesiva molecular, colando esses pedacinhos soltos até formar uma fita longa e contínua.\",\n      \"title\": \"A Cola Molecular\"\n    },\n    {\n      \"text\": \"E se a máquina errar uma letra? A própria DNA Polimerase percebe o erro, volta e troca a peça. É como um corretor ortográfico agindo em tempo real para garantir que a cópia seja perfeita, evitando mutações perigosas.\",\n      \"title\": \"O Corretor Ortográfico\"\n    },\n    {\n      \"text\": \"No fim, temos duas moléculas de DNA idênticas. Curiosamente, cada molécula final guarda uma fita do DNA original e uma fita recém-fabricada. É como ter um livro onde metade das páginas é antiga e a outra metade é novinha em folha.\",\n      \"title\": \"Metade Velho, Metade Novo\"\n    }\n  ]\n}",
      "outputTokens": 2413,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-biology-dna-replication-1",
      "userPrompt": "LESSON_TITLE: Como o DNA se Replica\nLESSON_DESCRIPTION: Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade\nCHAPTER_TITLE: Genetica Molecular\nCOURSE_TITLE: Biologia Celular\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. Alem da Estrutura: Watson e Crick revelaram a estrutura do DNA em 1953. Mas saber a forma nao explicava como a informacao genetica e copiada fielmente a cada divisao celular.\n2. O Molde Perfeito: A dupla helice sugeriu a resposta: cada fita serve de molde para a outra. Mas como exatamente as celulas executam essa copia?"
    }
  ],
  "taskId": "activity-explanation"
}
