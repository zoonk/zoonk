{
  "generatedAt": "2026-02-21T23:54:18.669Z",
  "modelId": "anthropic/claude-opus-4.6",
  "outputs": [
    {
      "duration": 16990.58479200001,
      "inputTokens": 2285,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Your immune system is your body's security team. It's a network of cells, tissues, and organs working together to detect and neutralize anything that doesn't belong — bacteria, viruses, fungi, even your own cells when they go rogue.\",\n      \"title\": \"Your Built-In Security Team\"\n    },\n    {\n      \"text\": \"The first line of defense is purely physical. Your skin acts like a fortress wall, your nose hairs are bouncers at the door, and your stomach acid is a moat of destruction. Most invaders never get past these barriers.\",\n      \"title\": \"Walls, Moats, and Bouncers\"\n    },\n    {\n      \"text\": \"If something breaches the walls, your innate immune system kicks in. Think of it as the patrol officers — always on duty, responding fast, but not picky. They attack anything that looks foreign using inflammation, fever, and cells called phagocytes that literally eat invaders.\",\n      \"title\": \"The First Responders\"\n    },\n    {\n      \"text\": \"Phagocytes are the hungry heroes here. Imagine Pac-Man gobbling dots — that's basically what these cells do. They engulf bacteria and debris, digesting them from the inside. No questions asked, no ID required.\",\n      \"title\": \"Pac-Man Cells\"\n    },\n    {\n      \"text\": \"When the patrol can't handle a threat, the adaptive immune system steps in. This is your special forces unit — slower to deploy, but devastatingly precise. It learns the specific identity of each invader.\",\n      \"title\": \"Calling in the Specialists\"\n    },\n    {\n      \"text\": \"T-cells and B-cells are the stars of adaptive immunity. T-cells are like detectives — they identify infected cells and destroy them directly. B-cells are like weapons factories, producing custom-built molecules called antibodies.\",\n      \"title\": \"T-Cells and B-Cells\"\n    },\n    {\n      \"text\": \"Antibodies are Y-shaped proteins designed to lock onto one specific invader, like a key fitting only one lock. Once attached, they flag the invader for destruction or neutralize it directly. Each antibody targets one unique threat.\",\n      \"title\": \"Antibodies: Precision Weapons\"\n    },\n    {\n      \"text\": \"Here's the brilliant part: after fighting off an invader, your immune system creates memory cells. These are like detailed criminal files. If the same pathogen returns, your body recognizes it instantly and responds way faster.\",\n      \"title\": \"The Memory Advantage\"\n    },\n    {\n      \"text\": \"All these layers work as a coordinated system. Barriers block, innate cells buy time, adaptive cells deliver targeted strikes, and memory cells prepare for the future. Each layer covers what the previous one might miss.\",\n      \"title\": \"Layers Working Together\"\n    },\n    {\n      \"text\": \"You see this system at work every day. A cut that heals without infection? That's your barriers plus inflammation. A cold that clears up in a week? That's your adaptive system learning, fighting, and remembering — all without you lifting a finger.\",\n      \"title\": \"Spotting It in Real Life\"\n    }\n  ]\n}",
      "outputTokens": 638,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-immune-system-1",
      "userPrompt": "LESSON_TITLE: How the Immune System Works\nLESSON_DESCRIPTION: Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies\nCHAPTER_TITLE: Body Systems\nCOURSE_TITLE: Human Biology\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Invisible War: For millennia, plagues swept through populations unchecked. Why did some survive while others perished? The answer was invisible.\n2. Seeing the Unseen: In the 1800s, scientists discovered microbes. Suddenly, the enemy had a face — and the body's defense system began revealing its secrets.\n3. Mapping the Defense: From Pasteur's vaccines to modern immunology, we've mapped an internal army more sophisticated than any human military."
    },
    {
      "duration": 18839.57500000007,
      "inputTokens": 2265,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Photosynthesis is a plant's way of making its own food using sunlight. Think of it like a tiny solar-powered kitchen inside every leaf — capturing light and cooking it into sugar that fuels the plant's life.\",\n      \"title\": \"Nature's Solar-Powered Kitchen\"\n    },\n    {\n      \"text\": \"The magic happens inside chloroplasts — small green structures in leaf cells. Picture them as little solar panels. They contain chlorophyll, the green pigment that absorbs sunlight, which is why leaves look green.\",\n      \"title\": \"Meet the Chloroplasts\"\n    },\n    {\n      \"text\": \"Here's the simple recipe: carbon dioxide from the air + water from the soil + sunlight → glucose (sugar) + oxygen. Plants breathe in CO₂, soak up water, and use light to transform them into food.\",\n      \"title\": \"The Recipe\"\n    },\n    {\n      \"text\": \"Photosynthesis has two main stages, like a relay race with two runners. The first runner grabs the energy. The second runner uses that energy to build sugar. They depend on each other completely.\",\n      \"title\": \"A Two-Stage Process\"\n    },\n    {\n      \"text\": \"Stage one is the light reactions — they happen in the chloroplast's inner membranes. Sunlight hits chlorophyll and gets converted into chemical energy (ATP and NADPH). Water molecules get split, releasing oxygen as a byproduct.\",\n      \"title\": \"Stage 1: Capturing the Light\"\n    },\n    {\n      \"text\": \"That oxygen released? It's what we breathe. So the next breath you take exists partly because a plant somewhere split water molecules while harvesting sunlight. Your breathing and their process are deeply linked.\",\n      \"title\": \"Where Our Oxygen Comes From\"\n    },\n    {\n      \"text\": \"Stage two is carbon fixation, also called the Calvin cycle. It doesn't need light directly — it uses the energy captured in stage one to grab CO₂ from the air and stitch carbon atoms into glucose molecules.\",\n      \"title\": \"Stage 2: Building Sugar\"\n    },\n    {\n      \"text\": \"Think of carbon fixation like a construction crew. The light reactions are the power generator on site. The Calvin cycle is the crew using that power to assemble building materials (CO₂) into a finished product (glucose).\",\n      \"title\": \"The Construction Crew Analogy\"\n    },\n    {\n      \"text\": \"The glucose plants make isn't just fuel — it's also their building material. Cellulose in wood, starch in potatoes, and the structure of every stem and root all trace back to sugars made during photosynthesis.\",\n      \"title\": \"Sugar Becomes Structure\"\n    },\n    {\n      \"text\": \"A common mix-up: people think photosynthesis is the opposite of breathing. Plants actually do both! They photosynthesize to make sugar, then use cellular respiration to burn it for energy — just like we do with our food.\",\n      \"title\": \"Plants Breathe Too\"\n    },\n    {\n      \"text\": \"Understanding photosynthesis means seeing the big picture: sunlight energy gets locked into chemical bonds of sugar. That energy then flows through ecosystems — feeding animals, fungi, and ultimately you. It all starts with a green leaf and a beam of light.\",\n      \"title\": \"Energy's Entry Point\"\n    }\n  ]\n}",
      "outputTokens": 670,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-photosynthesis-1",
      "userPrompt": "LESSON_TITLE: Photosynthesis\nLESSON_DESCRIPTION: Understanding the process by which plants convert light energy into chemical energy, including the role of chloroplasts, light reactions, and carbon fixation\nCHAPTER_TITLE: Plant Biology\nCOURSE_TITLE: Biology Fundamentals\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Mass Mystery: Plants don't eat, yet they grow massive. Where does a tree's mass come from? For centuries, scientists guessed wrong — soil, water, air?\n2. Clues Accumulate: Jan van Helmont's willow experiment showed soil wasn't the answer. Joseph Priestley found plants restore 'injured' air. The puzzle pieces emerged."
    },
    {
      "duration": 21161.119707999984,
      "inputTokens": 2308,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"CRISPR-Cas9 is a molecular toolkit with two key parts: a guide that finds the exact spot in DNA you want to edit, and a protein that cuts it. Think of it like a GPS navigator paired with a pair of scissors — one locates, the other snips.\",\n      \"title\": \"A GPS and Scissors for DNA\"\n    },\n    {\n      \"text\": \"The guide RNA (gRNA) is a short strand designed to match a specific DNA sequence. Imagine a search function in a document — you type in the exact phrase, and it jumps right to it. The gRNA does the same thing inside a cell's 3-billion-letter genome.\",\n      \"title\": \"The Guide RNA: Your Search Bar\"\n    },\n    {\n      \"text\": \"The Cas9 protein is the cutting tool. It wraps around DNA and travels with the guide RNA until a match is found. Once the gRNA locks onto the right sequence, Cas9 changes shape and slices through both strands of the DNA double helix.\",\n      \"title\": \"Cas9: The Molecular Scissors\"\n    },\n    {\n      \"text\": \"Cas9 doesn't cut randomly — it needs a short DNA tag called a PAM sequence right next to the target. Think of PAM as a doorbell. Without it, Cas9 won't stop and cut, even if the guide RNA finds a match. It's a built-in safety check.\",\n      \"title\": \"The PAM: A Required Doorbell\"\n    },\n    {\n      \"text\": \"Once both DNA strands are cut, the cell panics — a broken genome is dangerous. The cell immediately activates its own repair crew. There are two main repair paths, and which one kicks in determines what kind of edit you get.\",\n      \"title\": \"The Cell Hits the Alarm\"\n    },\n    {\n      \"text\": \"The first repair path is NHEJ — non-homologous end joining. The cell glues the cut ends back together quickly but sloppily, often inserting or deleting a few letters. It's like patching a torn page with tape — functional, but the sentence is scrambled.\",\n      \"title\": \"Quick Fix: NHEJ Repair\"\n    },\n    {\n      \"text\": \"That sloppiness is actually useful. Scrambling a gene's code usually disables it. So if you want to knock out a harmful gene — say, one causing disease — you can let NHEJ do the messy work for you.\",\n      \"title\": \"Why Messy Can Be Useful\"\n    },\n    {\n      \"text\": \"The second path is HDR — homology-directed repair. Here, you sneak in a DNA template with the exact edit you want. The cell uses it as a blueprint to repair the cut perfectly. Like handing a typist the correct sentence to replace a typo.\",\n      \"title\": \"Precision Fix: HDR Repair\"\n    },\n    {\n      \"text\": \"HDR lets you do more than just disable genes — you can rewrite them. Want to swap a disease-causing mutation for the healthy version? Provide the right template, and the cell copies it in. This is where CRISPR becomes truly powerful.\",\n      \"title\": \"Rewriting the Code\"\n    },\n    {\n      \"text\": \"So the whole process flows like this: design a guide RNA, pair it with Cas9, deliver them into a cell, find the target, cut the DNA, and let repair do the editing. Each piece depends on the others — it's a relay race at the molecular level.\",\n      \"title\": \"The Full Relay Race\"\n    },\n    {\n      \"text\": \"The real magic is programmability. Change the guide RNA sequence, and you target a different gene. The Cas9 stays the same, the delivery stays the same — only the address changes. One tool, infinite destinations.\",\n      \"title\": \"One Tool, Infinite Targets\"\n    }\n  ]\n}",
      "outputTokens": 790,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biotech-crispr-1",
      "userPrompt": "LESSON_TITLE: How CRISPR Gene Editing Works\nLESSON_DESCRIPTION: Understanding how CRISPR-Cas9 gene editing works, including the role of guide RNA, the Cas9 protein, and cellular repair mechanisms\nCHAPTER_TITLE: Genetic Engineering\nCOURSE_TITLE: Modern Biotechnology\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Precision Problem: For decades, editing genes was like editing a book with a sledgehammer — imprecise and dangerous. Scientists dreamed of surgical precision.\n2. Nature's Solution: Bacteria had already solved this problem. Their immune system could recognize and cut specific viral DNA. Scientists Jennifer Doudna and Emmanuelle Charpentier saw the potential.\n3. A New Era: In 2012, they adapted bacterial CRISPR into a programmable gene-editing tool. The revolution in genetics had begun."
    },
    {
      "duration": 22650.417917000013,
      "inputTokens": 2314,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Neurotransmissão é o \\\"idioma\\\" do seu cérebro. É o processo pelo qual um neurônio envia uma mensagem para outro. Imagine uma corrida de revezamento: cada corredor passa o bastão para o próximo. Seus neurônios fazem algo parecido — mas em vez de bastões, usam sinais elétricos e químicos.\",\n      \"title\": \"O Idioma do Cérebro\"\n    },\n    {\n      \"text\": \"Todo neurônio tem três partes principais. Os dendritos são as \\\"antenas\\\" que captam mensagens. O corpo celular processa a informação. E o axônio é um cabo longo que transmite o sinal adiante — como um fio elétrico que leva a mensagem até o próximo destino.\",\n      \"title\": \"As Partes de um Neurônio\"\n    },\n    {\n      \"text\": \"Dentro do neurônio, a mensagem viaja como um pulso elétrico chamado potencial de ação. Pense numa fileira de dominós caindo: quando um começa, o sinal percorre todo o axônio rapidamente, sem perder força. É tudo ou nada — ou o sinal dispara, ou não.\",\n      \"title\": \"O Sinal Elétrico\"\n    },\n    {\n      \"text\": \"Quando o sinal elétrico chega ao final do axônio, ele encontra um pequeno espaço entre um neurônio e o próximo. Esse espaço se chama sinapse. É como uma ponte levadiça — a mensagem não pode simplesmente pular. Precisa de um mecanismo especial para cruzar.\",\n      \"title\": \"A Sinapse: O Espaço Entre Dois\"\n    },\n    {\n      \"text\": \"É aqui que entram os neurotransmissores — mensageiros químicos guardados em pequenas bolsas na ponta do axônio. Quando o sinal elétrico chega, essas bolsas liberam os neurotransmissores no espaço sináptico, como cartas sendo jogadas na caixa de correio do vizinho.\",\n      \"title\": \"Mensageiros Químicos\"\n    },\n    {\n      \"text\": \"Do outro lado da sinapse, o neurônio receptor tem receptores específicos nos seus dendritos. Cada neurotransmissor encaixa num receptor como uma chave na fechadura. Se a chave certa encontra a fechadura certa, o neurônio seguinte recebe a mensagem e pode disparar seu próprio sinal.\",\n      \"title\": \"Chave e Fechadura\"\n    },\n    {\n      \"text\": \"Nem todo neurotransmissor diz \\\"vai em frente\\\". Alguns são excitatórios — incentivam o próximo neurônio a disparar. Outros são inibitórios — pedem que ele fique quieto. É como ter um acelerador e um freio. O equilíbrio entre eles controla tudo que você pensa, sente e faz.\",\n      \"title\": \"Acelerador e Freio\"\n    },\n    {\n      \"text\": \"Você talvez já ouviu falar de serotonina, dopamina ou adrenalina. Esses são neurotransmissores famosos! Cada um tem funções diferentes: dopamina está ligada ao prazer, serotonina ao humor, adrenalina à energia. São como diferentes tipos de mensagem no mesmo sistema postal.\",\n      \"title\": \"Nomes que Você Já Conhece\"\n    },\n    {\n      \"text\": \"Depois que a mensagem é entregue, os neurotransmissores não ficam vagando para sempre. Eles são reabsorvidos pelo neurônio que os enviou (recaptação), degradados por enzimas, ou se dispersam. É como limpar a mesa depois de comer — o sistema se prepara para a próxima mensagem.\",\n      \"title\": \"Limpando o Caminho\"\n    },\n    {\n      \"text\": \"Então, resumindo: sinal elétrico percorre o neurônio, chega à sinapse, libera neurotransmissores, eles cruzam o espaço, encaixam nos receptores e disparam (ou freiam) o próximo neurônio. Essa dança entre eletricidade e química acontece bilhões de vezes por segundo em você — agora mesmo.\",\n      \"title\": \"A Dança Completa\"\n    }\n  ]\n}",
      "outputTokens": 1007,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-biology-neurotransmission-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Neurotransmissao\nLESSON_DESCRIPTION: Entendendo como os neuronios se comunicam atraves de sinais eletricos e quimicos, incluindo o papel dos neurotransmissores e sinapses\nCHAPTER_TITLE: Sistema Nervoso\nCOURSE_TITLE: Neurociencia Basica\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. O Misterio do Pensamento: Como o pensamento viaja pelo corpo? Por seculos, cientistas debatiam se era eletricidade, fluidos, ou algo totalmente diferente.\n2. Pistas Eletricas: Luigi Galvani fez pernas de ras se moverem com eletricidade. Santiago Ramon y Cajal mapeou celulas nervosas individuais. O quebra-cabeca comecou a se formar."
    },
    {
      "duration": 24291.364249999984,
      "inputTokens": 2302,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Un mecanismo de consenso es un conjunto de reglas que permite a miles de computadoras desconocidas ponerse de acuerdo sobre una misma verdad. Imagina un grupo enorme jugando un partido sin árbitro: las reglas del juego reemplazan al juez.\",\n      \"title\": \"¿Qué es un mecanismo de consenso?\"\n    },\n    {\n      \"text\": \"Cada mecanismo tiene tres ingredientes esenciales: una forma de proponer información nueva, una forma de verificar que esa información es legítima, y una forma de recompensar a quienes participan honestamente. Sin estos tres, el sistema se desmorona.\",\n      \"title\": \"Los tres ingredientes clave\"\n    },\n    {\n      \"text\": \"En Proof of Work (PoW), las computadoras compiten resolviendo un acertijo matemático extremadamente difícil. Piensa en una lotería donde el boleto ganador se obtiene haciendo millones de cálculos. El primero en resolverlo gana el derecho de agregar un bloque.\",\n      \"title\": \"Proof of Work: el acertijo\"\n    },\n    {\n      \"text\": \"Ese acertijo no tiene atajo: hay que probar combinaciones hasta encontrar la correcta. Es como buscar una aguja en un pajar gigante. Por eso se llama \\\"prueba de trabajo\\\": demuestras que invertiste esfuerzo real, medible en electricidad y tiempo.\",\n      \"title\": \"¿Por qué se llama prueba de trabajo?\"\n    },\n    {\n      \"text\": \"Los mineros son las computadoras que compiten por resolver el acertijo. Cuando uno lo logra, propone un nuevo bloque con transacciones verificadas. Los demás solo necesitan un instante para confirmar que la solución es correcta, como verificar la respuesta de un sudoku.\",\n      \"title\": \"El rol de los mineros\"\n    },\n    {\n      \"text\": \"Aquí está la magia: resolver es carísimo, pero verificar es baratísimo. Es como armar un rompecabezas de mil piezas versus mirar la imagen terminada. Esta asimetría permite que toda la red valide sin repetir el esfuerzo.\",\n      \"title\": \"Difícil de crear, fácil de verificar\"\n    },\n    {\n      \"text\": \"Cuando un minero propone un bloque, los demás nodos lo revisan: ¿las transacciones son válidas? ¿Nadie gasta monedas que no tiene? Si la mayoría acepta el bloque, se añade a la cadena. Es como una votación donde el voto es poder computacional.\",\n      \"title\": \"Validación de transacciones\"\n    },\n    {\n      \"text\": \"¿Qué motiva a los mineros a gastar electricidad? Recompensas. El minero ganador recibe criptomonedas nuevas más las comisiones de cada transacción incluida. Es el sueldo por mantener la red segura y funcionando.\",\n      \"title\": \"Los incentivos económicos\"\n    },\n    {\n      \"text\": \"Hacer trampa es técnicamente posible pero económicamente absurdo. Necesitarías controlar más del 50% del poder de cómputo mundial de la red. Sería como intentar ganar una elección sobornando a la mitad del planeta.\",\n      \"title\": \"¿Y si alguien hace trampa?\"\n    },\n    {\n      \"text\": \"A veces dos mineros resuelven el acertijo casi al mismo tiempo, creando dos bloques válidos. La red sigue ambas ramas brevemente, pero la cadena que crece más rápido gana. La otra se descarta. Así se resuelven los empates de forma natural.\",\n      \"title\": \"Cuando hay empate\"\n    },\n    {\n      \"text\": \"Proof of Work no es el único camino. Existen alternativas como Proof of Stake, donde en vez de gastar energía, los participantes arriesgan sus propias monedas como garantía de honestidad. Distintas reglas, mismo objetivo: consenso sin jefe.\",\n      \"title\": \"No solo existe PoW\"\n    },\n    {\n      \"text\": \"El mecanismo de consenso es el corazón de toda blockchain. Define quién decide, cómo se decide y por qué conviene ser honesto. Sin él, una red descentralizada sería solo un grupo de computadoras gritándose sin llegar a ningún acuerdo.\",\n      \"title\": \"El corazón de la blockchain\"\n    }\n  ]\n}",
      "outputTokens": 1019,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "es-tech-blockchain-consensus-1",
      "userPrompt": "LESSON_TITLE: Mecanismos de Consenso en Blockchain\nLESSON_DESCRIPTION: Entendiendo como las redes blockchain logran consenso sin autoridad central, incluyendo Proof of Work y como se validan las transacciones\nCHAPTER_TITLE: Fundamentos de Blockchain\nCOURSE_TITLE: Tecnologias Descentralizadas\nLANGUAGE: es\nBACKGROUND_STEPS:\n1. El Problema del Consenso: En sistemas centralizados, un servidor dice la verdad. Pero sin centro, como pueden miles de computadoras ponerse de acuerdo sobre que transacciones son validas?\n2. Generales y Traidores: Los generales bizantinos enfrentaban el mismo dilema: como coordinar sin saber quien es traidor. Este problema teorico inspiro soluciones practicas."
    },
    {
      "duration": 20884.309291000012,
      "inputTokens": 2253,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A compiler is a translator that reads your entire program — written in a language you understand — and converts it into machine code the computer understands. Think of it like translating a whole book from English to Japanese before handing it to the reader.\",\n      \"title\": \"The Big-Picture Translator\"\n    },\n    {\n      \"text\": \"Compilers don't translate in one giant leap. They work in phases, like an assembly line. Each phase handles one specific task, refines the result, and passes it to the next. This pipeline approach keeps the enormous job manageable.\",\n      \"title\": \"A Multi-Phase Pipeline\"\n    },\n    {\n      \"text\": \"The first phase is lexical analysis, or \\\"scanning.\\\" The compiler reads your raw text and groups characters into tokens — keywords, numbers, symbols. Imagine reading a sentence and circling each word separately before trying to understand grammar.\",\n      \"title\": \"Phase 1: Scanning the Text\"\n    },\n    {\n      \"text\": \"Next comes parsing, or syntax analysis. The compiler takes those tokens and arranges them into a tree structure that reflects your program's grammar. It's like diagramming a sentence — figuring out which parts are subjects, verbs, and objects.\",\n      \"title\": \"Phase 2: Parsing the Structure\"\n    },\n    {\n      \"text\": \"This tree is called an Abstract Syntax Tree (AST). It strips away clutter like parentheses and semicolons, keeping only the meaningful structure. Think of it as an architect's blueprint — no decorative paint, just the bones of the building.\",\n      \"title\": \"The Abstract Syntax Tree\"\n    },\n    {\n      \"text\": \"Semantic analysis checks whether your code actually makes sense. Syntax might be correct, but are you adding a number to a word? It's like a grammar-perfect sentence that says \\\"The rock drank quietly\\\" — structured right, meaningfully wrong.\",\n      \"title\": \"Phase 3: Checking Meaning\"\n    },\n    {\n      \"text\": \"Now comes optimization. The compiler rewrites your code's internal representation to make it faster or smaller — without changing what it does. Like a GPS finding a shorter route to the same destination: same result, less wasted effort.\",\n      \"title\": \"Phase 4: Optimization\"\n    },\n    {\n      \"text\": \"Finally, code generation translates the optimized representation into actual machine instructions for your target processor. This is where human ideas become the binary signals that hardware can execute. The book is now fully translated.\",\n      \"title\": \"Phase 5: Code Generation\"\n    },\n    {\n      \"text\": \"Some compilers add an intermediate representation (IR) step — a universal middle language. This lets one front end (parsing C, Java, etc.) connect to many back ends (x86, ARM). It's like translating every language into Esperanto first, then into the final language.\",\n      \"title\": \"The Middle Language Trick\"\n    },\n    {\n      \"text\": \"Throughout every phase, a symbol table tracks every variable, function, and type you've declared — like a master registry. If you reference something undefined, the compiler catches it here and raises an error.\",\n      \"title\": \"The Symbol Table\"\n    },\n    {\n      \"text\": \"Errors at different phases produce different messages. A typo triggers a lexical error. Mismatched braces trigger a syntax error. Type mismatches trigger a semantic error. Knowing the phases helps you decode what your compiler is really telling you.\",\n      \"title\": \"Where Errors Come From\"\n    },\n    {\n      \"text\": \"Together, these phases form a beautifully organized system: scan, parse, check, optimize, generate. Each layer trusts that the previous one did its job. The result? Your readable code becomes fast, reliable machine instructions — automatically.\",\n      \"title\": \"The Complete Picture\"\n    }\n  ]\n}",
      "outputTokens": 753,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-cs-compilers-1",
      "userPrompt": "LESSON_TITLE: How Compilers Work\nLESSON_DESCRIPTION: Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation\nCHAPTER_TITLE: Language Implementation\nCOURSE_TITLE: Programming Language Theory\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Machine Code Nightmare: Early programmers wrote in machine code — endless strings of 1s and 0s. One wrong digit meant hours of debugging. There had to be a better way.\n2. Hopper's Vision: Grace Hopper believed computers could understand more human-friendly instructions. Her A-0 system proved that automatic translation was possible."
    },
    {
      "duration": 17856.160709000076,
      "inputTokens": 2288,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A neural network learns by doing something surprisingly human: it guesses, checks how wrong it was, then adjusts. Imagine practicing basketball free throws — each miss tells you something about how to tweak your aim next time.\",\n      \"title\": \"Guess, Check, Adjust\"\n    },\n    {\n      \"text\": \"In the forward pass, data flows through the network layer by layer. Each neuron multiplies its inputs by weights, adds them up, and passes the result forward. Think of it like a relay race — each runner takes the baton and adds their own speed.\",\n      \"title\": \"The Forward Pass\"\n    },\n    {\n      \"text\": \"Weights are the knobs the network can turn. Each connection between neurons has a weight that controls how much influence one neuron has on the next. At first, these weights are basically random — the network is just guessing wildly.\",\n      \"title\": \"Weights: The Adjustable Knobs\"\n    },\n    {\n      \"text\": \"After a forward pass, the network produces a prediction. The loss function measures how far off that prediction is from the correct answer. It's like a scoreboard — it doesn't tell you what went wrong, just how badly you missed.\",\n      \"title\": \"Measuring the Mistake\"\n    },\n    {\n      \"text\": \"Common loss functions include mean squared error for number predictions and cross-entropy for categories. The key idea: bigger mistakes produce bigger loss values, giving the network a stronger signal that something needs to change.\",\n      \"title\": \"What the Loss Function Looks Like\"\n    },\n    {\n      \"text\": \"Now comes the magic. Backpropagation works backward through the network, calculating how much each weight contributed to the error. Imagine tracing a wrong recipe result back through each ingredient — which one threw things off most?\",\n      \"title\": \"Backpropagation: Tracing Blame\"\n    },\n    {\n      \"text\": \"The math behind this is gradients — they tell you the direction and steepness of the error landscape for each weight. A gradient is like a slope indicator on a hike: it shows which way is downhill and how steep the drop is.\",\n      \"title\": \"Gradients: The Direction Signals\"\n    },\n    {\n      \"text\": \"Gradient descent uses those signals to update weights. Each weight shifts a small step in the direction that reduces error. It's like descending a foggy mountain — you can't see the bottom, but you can feel which way slopes down.\",\n      \"title\": \"Gradient Descent in Action\"\n    },\n    {\n      \"text\": \"The learning rate controls how big each step is. Too large, and you overshoot the sweet spot. Too small, and learning takes forever. It's like tuning the sensitivity on a thermostat — you need just the right responsiveness.\",\n      \"title\": \"The Learning Rate\"\n    },\n    {\n      \"text\": \"One pass through the data rarely gets it right. The network repeats: forward pass, calculate loss, backpropagate, update weights — again and again for thousands of iterations. Each cycle is called an epoch when it covers the full dataset.\",\n      \"title\": \"Repeat Until Sharp\"\n    },\n    {\n      \"text\": \"Over time, weights converge toward values that produce accurate predictions. The network hasn't memorized rules — it has discovered patterns by iteratively reducing its own mistakes. That's what learning looks like in a neural network.\",\n      \"title\": \"A Self-Tuning System\"\n    }\n  ]\n}",
      "outputTokens": 686,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-ml-backpropagation-1",
      "userPrompt": "LESSON_TITLE: How Neural Networks Learn\nLESSON_DESCRIPTION: Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates\nCHAPTER_TITLE: Neural Network Training\nCOURSE_TITLE: Machine Learning Fundamentals\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Rule Explosion: Early AI systems were hand-programmed with explicit rules. But complex tasks like recognizing faces had too many rules to write manually.\n2. Learning from Data: What if systems could learn from examples instead? The challenge: how do you tell a network of artificial neurons which connections to strengthen?\n3. The Breakthrough: The backpropagation algorithm, refined in the 1980s, solved this. It showed how to assign 'blame' to each connection for mistakes."
    },
    {
      "duration": 23284.35737500002,
      "inputTokens": 2309,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Política monetária é o conjunto de decisões que o banco central toma para controlar a quantidade de dinheiro circulando e o custo de pegar empréstimos. Pense nele como um termostato: ajusta a \\\"temperatura\\\" da economia para que ela não fique quente demais nem fria demais.\",\n      \"title\": \"O Termostato da Economia\"\n    },\n    {\n      \"text\": \"A ferramenta principal é a taxa básica de juros. É o preço que bancos pagam para pegar dinheiro emprestado do banco central. No Brasil, chamamos de Selic. Quando o banco central mexe nessa taxa, ele está girando o botão do termostato.\",\n      \"title\": \"A Taxa Básica de Juros\"\n    },\n    {\n      \"text\": \"Quando a economia desacelera, o banco central reduz a taxa de juros. Dinheiro fica mais barato. Imagine liquidação numa loja: com empréstimos baratos, empresas investem mais, pessoas compram mais e a economia ganha fôlego.\",\n      \"title\": \"Juros Baixos, Economia Aquecida\"\n    },\n    {\n      \"text\": \"Quando a economia esquenta demais e os preços sobem rápido (inflação), o banco central sobe os juros. Empréstimos ficam caros, as pessoas freiam os gastos e os preços param de subir tão rápido. É como jogar água fria para esfriar a panela.\",\n      \"title\": \"Juros Altos, Freio na Inflação\"\n    },\n    {\n      \"text\": \"Mas o banco central não fala diretamente com você. A decisão passa por uma cadeia: ele muda a taxa básica, os bancos comerciais ajustam seus juros, e aí empresas e famílias sentem o efeito. Isso é o mecanismo de transmissão — como uma onda que se espalha.\",\n      \"title\": \"O Efeito Dominó\"\n    },\n    {\n      \"text\": \"O canal do crédito é um dos mais importantes. Com juros baixos, bancos emprestam mais facilmente. Com juros altos, ficam mais seletivos. É como uma torneira: o banco central controla a pressão e os bancos distribuem a água.\",\n      \"title\": \"O Canal do Crédito\"\n    },\n    {\n      \"text\": \"Existe também o canal das expectativas. Se o banco central sinaliza que vai subir juros, empresas já seguram investimentos antes mesmo da mudança. Só o anúncio já mexe com a economia — como um técnico que muda a tática e o time inteiro se reposiciona.\",\n      \"title\": \"O Poder das Expectativas\"\n    },\n    {\n      \"text\": \"Além dos juros, bancos centrais têm outra ferramenta: comprar e vender títulos no mercado. Quando compram títulos, injetam dinheiro na economia. Quando vendem, retiram. Isso se chama operações de mercado aberto — é o fino ajuste do termostato.\",\n      \"title\": \"Operações de Mercado Aberto\"\n    },\n    {\n      \"text\": \"Há ainda o depósito compulsório: uma fatia do dinheiro que bancos são obrigados a guardar no banco central. Se essa fatia aumenta, sobra menos para emprestar. Se diminui, sobra mais. É como regular quanto combustível o motor pode usar.\",\n      \"title\": \"O Compulsório Bancário\"\n    },\n    {\n      \"text\": \"Nenhuma dessas ferramentas age instantaneamente. Mudanças na taxa de juros podem levar de 6 a 18 meses para impactar totalmente a economia. É como mudar a direção de um navio enorme — o giro do leme é rápido, mas a curva é lenta.\",\n      \"title\": \"O Efeito com Atraso\"\n    },\n    {\n      \"text\": \"A política monetária não resolve tudo sozinha. Ela controla bem a inflação, mas tem limites para gerar empregos ou crescimento de longo prazo. Entender o que ela pode e não pode fazer é essencial para ler as notícias econômicas com olhos mais afiados.\",\n      \"title\": \"Poderosa, Mas Com Limites\"\n    }\n  ]\n}",
      "outputTokens": 982,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-economics-monetary-policy-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Politica Monetaria\nLESSON_DESCRIPTION: Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria\nCHAPTER_TITLE: Macroeconomia\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. Era do Caos Financeiro: Antes dos bancos centrais, crises financeiras eram frequentes e devastadoras. Panico bancario podia destruir economias inteiras da noite para o dia.\n2. O Nascimento do Fed: O Federal Reserve surgiu em 1913 apos uma crise brutal. Bancos centrais ganharam poder para estabilizar economias — mas como exatamente?"
    },
    {
      "duration": 21089.67966699996,
      "inputTokens": 2267,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"A vaccine is a training drill for your immune system. Instead of waiting for a dangerous pathogen to invade, you introduce a harmless version — or a piece of one — so your body can learn the threat in a safe, controlled way.\",\n      \"title\": \"A Rehearsal, Not the Real Thing\"\n    },\n    {\n      \"text\": \"Your immune system has special cells that act like detectives. When a vaccine arrives, these cells inspect it, identify unique features of the pathogen — called antigens — and memorize them. Think of antigens as a criminal's mugshot.\",\n      \"title\": \"Meet the Antigens\"\n    },\n    {\n      \"text\": \"Once your immune cells recognize the antigen, B cells start producing antibodies — tiny proteins custom-shaped to latch onto that specific invader. Imagine millions of perfectly shaped keys, each designed to lock onto one particular intruder.\",\n      \"title\": \"Antibodies: Custom-Built Weapons\"\n    },\n    {\n      \"text\": \"Meanwhile, T cells join the fight. Some directly destroy infected cells, while others coordinate the overall immune response. Think of B cells as the weapons factory and T cells as both soldiers and field commanders.\",\n      \"title\": \"T Cells: The Other Half\"\n    },\n    {\n      \"text\": \"Here's the magic: after the threat is handled, your body keeps memory cells on standby — sometimes for decades. If the real pathogen ever shows up, these cells spring into action almost instantly, crushing it before you even feel sick.\",\n      \"title\": \"Memory Cells Never Forget\"\n    },\n    {\n      \"text\": \"Live-attenuated vaccines use a weakened version of the actual virus. It can still replicate a little, triggering a strong immune response. The MMR and chickenpox vaccines work this way — like sparring with a tired opponent.\",\n      \"title\": \"Type 1: Live-Attenuated\"\n    },\n    {\n      \"text\": \"Inactivated vaccines use pathogens that have been killed entirely. They're safer for people with weak immune systems but often need booster shots since the response is milder. Flu shots are a common example.\",\n      \"title\": \"Type 2: Inactivated\"\n    },\n    {\n      \"text\": \"Subunit vaccines skip the whole pathogen and deliver just a key piece — like a protein from its surface. Your body learns to recognize that piece without ever encountering the full organism. The hepatitis B vaccine works this way.\",\n      \"title\": \"Type 3: Subunit\"\n    },\n    {\n      \"text\": \"mRNA vaccines are a newer approach. They deliver genetic instructions that tell your cells to build a harmless piece of the pathogen's protein. Your immune system then reacts to it. It's like sending a blueprint instead of a physical sample.\",\n      \"title\": \"Type 4: mRNA\"\n    },\n    {\n      \"text\": \"No vaccine gives instant protection. It takes roughly two weeks for your body to build a strong antibody response. That's why timing matters — you vaccinate before an outbreak, not during one, whenever possible.\",\n      \"title\": \"Immunity Takes Time\"\n    },\n    {\n      \"text\": \"Some vaccines need multiple doses. The first dose introduces the threat; boosters remind and strengthen the response. Think of it like studying for an exam — reviewing the material multiple times locks it into long-term memory.\",\n      \"title\": \"Why Boosters Matter\"\n    },\n    {\n      \"text\": \"When enough people are vaccinated, pathogens struggle to find new hosts. This herd immunity protects those who can't be vaccinated, like newborns or immunocompromised individuals. The community itself becomes a shield.\",\n      \"title\": \"The Group Effect\"\n    },\n    {\n      \"text\": \"So a vaccine doesn't fight disease for you — it teaches your body to fight for itself. It's the difference between hiring a bodyguard and learning martial arts. The protection comes from within, and it lasts.\",\n      \"title\": \"Training, Not Treatment\"\n    }\n  ]\n}",
      "outputTokens": 792,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-biology-vaccines-1",
      "userPrompt": "LESSON_TITLE: How Vaccines Work\nLESSON_DESCRIPTION: Understanding how vaccines train the immune system to recognize and fight specific pathogens, including different vaccine types and how immunity develops\nCHAPTER_TITLE: Immunology\nCOURSE_TITLE: Medical Science Basics\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Milkmaid's Secret: Smallpox killed 30% of those infected. Edward Jenner noticed milkmaids who caught cowpox seemed immune. Could a mild infection protect against a deadly one?\n2. From Cowpox to COVID: Jenner's experiment worked. Pasteur extended the principle to other diseases. Vaccination became humanity's most powerful weapon against infectious disease."
    },
    {
      "duration": 22260.97004200006,
      "inputTokens": 2303,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Una función hash criptográfica es como una licuadora mágica: metes cualquier dato — una foto, un documento, una contraseña — y siempre te devuelve un resultado de tamaño fijo. Pero aquí está lo clave: no puedes \\\"deslicuar\\\" el resultado para recuperar lo original.\",\n      \"title\": \"La Licuadora de Datos\"\n    },\n    {\n      \"text\": \"Sin importar si metes un archivo de 1 KB o un video de 10 GB, el resultado (llamado hash o digest) siempre tiene la misma longitud. Por ejemplo, SHA-256 siempre produce 256 bits. Es como si cualquier maleta, grande o chica, dejara exactamente la misma huella dactilar.\",\n      \"title\": \"Salida de Tamaño Fijo\"\n    },\n    {\n      \"text\": \"Si cambias una sola coma en un documento, el hash resultante es completamente diferente. No cambia \\\"un poquito\\\" — cambia todo. Imagina que mover un grano de arena en una playa reorganizara todas las olas del océano.\",\n      \"title\": \"Efecto Avalancha\"\n    },\n    {\n      \"text\": \"Dado un hash, es prácticamente imposible calcular qué datos lo generaron. Es como ver las cenizas de un papel quemado: sabes que hubo un documento, pero no puedes reconstruir lo que decía. Esta propiedad se llama resistencia a la preimagen.\",\n      \"title\": \"Camino de Una Sola Vía\"\n    },\n    {\n      \"text\": \"Encontrar dos entradas diferentes que produzcan el mismo hash debe ser computacionalmente inviable. Esto se llama resistencia a colisiones. Piensa en ello como un sistema de huellas dactilares donde ninguna persona comparte la misma huella.\",\n      \"title\": \"Sin Gemelos Idénticos\"\n    },\n    {\n      \"text\": \"¿Cómo logra esto? Internamente, la función toma tus datos, los divide en bloques y los pasa por rondas de operaciones matemáticas — mezclas, rotaciones y combinaciones de bits. Cada ronda revuelve más el resultado, como barajar cartas docenas de veces.\",\n      \"title\": \"La Maquinaria Interna\"\n    },\n    {\n      \"text\": \"SHA-256 y SHA-3 son funciones hash modernas ampliamente usadas. MD5 y SHA-1 ya se consideran inseguros porque investigadores encontraron formas de generar colisiones. Es como descubrir que un candado tiene una llave maestra — ya no confías en él.\",\n      \"title\": \"Familias de Funciones Hash\"\n    },\n    {\n      \"text\": \"Cuando descargas software, a menudo ves un hash junto al archivo. Tu computadora recalcula el hash del archivo descargado y lo compara. Si coinciden, el archivo está intacto. Es verificar integridad en un instante, sin revisar cada byte.\",\n      \"title\": \"Verificar sin Comparar Todo\"\n    },\n    {\n      \"text\": \"Los sitios web no guardan tu contraseña, sino su hash. Cuando inicias sesión, hashean lo que escribes y comparan. Si un atacante roba la base de datos, solo ve hashes — y como el camino es de una sola vía, no puede recuperar tu contraseña fácilmente.\",\n      \"title\": \"Contraseñas Protegidas\"\n    },\n    {\n      \"text\": \"Las firmas digitales, los certificados SSL, blockchain y la detección de malware dependen de funciones hash. Son el pegamento invisible de la seguridad digital: no las ves, pero sin ellas, no podrías confiar en casi nada de lo que haces en línea.\",\n      \"title\": \"El Pegamento de la Seguridad\"\n    }\n  ]\n}",
      "outputTokens": 879,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "es-crypto-hash-functions-1",
      "userPrompt": "LESSON_TITLE: Funciones Hash Criptograficas\nLESSON_DESCRIPTION: Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital\nCHAPTER_TITLE: Fundamentos de Criptografia\nCOURSE_TITLE: Seguridad Informatica\nLANGUAGE: es\nBACKGROUND_STEPS:\n1. El Problema de Integridad: Como verificas que un archivo no fue alterado sin compararlo byte por byte? El problema de la integridad de datos parecia no tener solucion eficiente.\n2. Huellas Digitales: Los matematicos descubrieron funciones que comprimen cualquier dato en una 'huella digital' unica. Cambiar un bit del original cambia completamente la huella."
    },
    {
      "duration": 18956.75245899998,
      "inputTokens": 2260,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Imagine Earth's outer shell as a cracked eggshell. It's not one solid piece — it's broken into large slabs called tectonic plates. These plates float on a layer of hot, slowly flowing rock beneath them, constantly shifting position.\",\n      \"title\": \"A Cracked Shell\"\n    },\n    {\n      \"text\": \"There are about 15 major plates, and they carry everything on Earth's surface — continents, ocean floors, or both. The Pacific Plate is mostly ocean. The North American Plate holds a continent AND a chunk of ocean floor. They're like giant rafts of rock.\",\n      \"title\": \"What Are the Plates?\"\n    },\n    {\n      \"text\": \"Below the plates sits the asthenosphere — a zone of rock so hot it behaves like thick honey. Heat from Earth's core creates slow-moving currents in this layer, like a pot of soup gently rolling on a stove. These convection currents drag the plates along.\",\n      \"title\": \"The Engine Underneath\"\n    },\n    {\n      \"text\": \"At mid-ocean ridges, hot material rises and pushes plates apart. Think of it like a conveyor belt: new rock forms at the center and slowly moves outward. This \\\"ridge push\\\" is one major force driving plate motion.\",\n      \"title\": \"Ridge Push\"\n    },\n    {\n      \"text\": \"Where old, cold plate dives beneath another into Earth's interior, gravity pulls it down like a heavy tablecloth sliding off a table. This \\\"slab pull\\\" is actually the strongest force moving plates — the sinking edge drags the rest along.\",\n      \"title\": \"Slab Pull\"\n    },\n    {\n      \"text\": \"When two plates pull apart, magma rises to fill the gap, creating new crust. This is a divergent boundary. Iceland sits right on one — you can literally walk between two separating plates there. Ocean ridges are the most common example.\",\n      \"title\": \"Pulling Apart\"\n    },\n    {\n      \"text\": \"When plates collide, something has to give. If an ocean plate meets a continental plate, the denser ocean plate dives under — a process called subduction. If two continental plates collide, neither sinks, so they crumple upward. That's how the Himalayas formed.\",\n      \"title\": \"Crashing Together\"\n    },\n    {\n      \"text\": \"Some plates slide past each other horizontally, like two people squeezing through a doorway. These transform boundaries build up tension over time and release it suddenly. California's San Andreas Fault is a famous example.\",\n      \"title\": \"Sliding Sideways\"\n    },\n    {\n      \"text\": \"Each boundary type leaves a signature. Divergent boundaries create rift valleys and ocean ridges. Convergent boundaries build mountain ranges, deep ocean trenches, and volcanic arcs. Transform boundaries produce earthquake zones. The landscape tells the story.\",\n      \"title\": \"Features Tell the Story\"\n    },\n    {\n      \"text\": \"Volcanoes, earthquakes, and mountain ranges cluster along plate edges — not randomly across the globe. Plot them on a map and you'll trace the plate boundaries almost perfectly. It's like seeing the seams on a baseball.\",\n      \"title\": \"The Ring of Fire Pattern\"\n    },\n    {\n      \"text\": \"Picture a giant jigsaw puzzle where every piece moves a few centimeters per year. That's barely the speed your fingernails grow. But over millions of years, those tiny movements open oceans, raise mountains, and reshape entire continents.\",\n      \"title\": \"Slow but Unstoppable\"\n    }\n  ]\n}",
      "outputTokens": 719,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "en-geology-plate-tectonics-1",
      "userPrompt": "LESSON_TITLE: Plate Tectonics\nLESSON_DESCRIPTION: Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create\nCHAPTER_TITLE: Earth's Structure\nCOURSE_TITLE: Earth Science\nLANGUAGE: en\nBACKGROUND_STEPS:\n1. The Continental Puzzle: South America and Africa fit together like puzzle pieces. Fossils of the same species appear on continents separated by oceans. Coincidence?\n2. Wegener's Vindication: Alfred Wegener proposed continents drift, but couldn't explain how. He was ridiculed. Decades later, seafloor mapping revealed the answer."
    },
    {
      "duration": 23040.151416999986,
      "inputTokens": 2304,
      "output": "{\n  \"steps\": [\n    {\n      \"text\": \"Replicação do DNA é o processo pelo qual a célula faz uma cópia exata de todo o seu material genético antes de se dividir. Pense como tirar uma fotocópia perfeita de um livro inteiro — cada letra precisa ser reproduzida sem erros.\",\n      \"title\": \"Copiando o Livro da Vida\"\n    },\n    {\n      \"text\": \"A dupla hélice precisa ser aberta para ser copiada. A enzima helicase faz exatamente isso: ela separa as duas fitas do DNA como se abrisse um zíper. Cada fita exposta vira um molde para construir a fita nova.\",\n      \"title\": \"Abrindo o Zíper\"\n    },\n    {\n      \"text\": \"No ponto onde a helicase atua, forma-se uma estrutura em formato de Y chamada forquilha de replicação. Imagine um zíper sendo aberto: o ponto onde os dentes se separam é a forquilha. A cópia acontece ali, em tempo real.\",\n      \"title\": \"A Forquilha de Replicação\"\n    },\n    {\n      \"text\": \"Antes de construir, é preciso um ponto de partida. A enzima primase cria um pequeno trecho de RNA chamado primer. É como marcar com lápis onde o pedreiro deve começar a assentar tijolos.\",\n      \"title\": \"O Primer: Marcando o Início\"\n    },\n    {\n      \"text\": \"A DNA polimerase é a estrela do processo. Ela lê a fita-molde e encaixa os nucleotídeos complementares um a um — A com T, C com G. Funciona como uma impressora biológica que monta a nova fita com precisão incrível.\",\n      \"title\": \"DNA Polimerase em Ação\"\n    },\n    {\n      \"text\": \"Existe um detalhe curioso: a DNA polimerase só consegue trabalhar numa direção (5' para 3'). Como as fitas do DNA são antiparalelas, uma fita é copiada continuamente e a outra precisa ser copiada em pedaços.\",\n      \"title\": \"Um Problema de Direção\"\n    },\n    {\n      \"text\": \"A fita copiada sem interrupção é a fita líder. A outra, montada em fragmentos curtos chamados fragmentos de Okazaki, é a fita retardatária. Imagine costurar uma linha reta versus dar vários pontos separados que depois serão unidos.\",\n      \"title\": \"Líder e Retardatária\"\n    },\n    {\n      \"text\": \"A enzima ligase é a cola do processo. Ela conecta os fragmentos de Okazaki na fita retardatária, selando as emendas. No final, a fita fica contínua — como se nunca tivesse sido feita em pedaços.\",\n      \"title\": \"Ligase: Colando os Pedaços\"\n    },\n    {\n      \"text\": \"Enquanto tudo isso acontece, as topoisomerases aliviam a tensão na hélice à frente da forquilha. Sem elas, o DNA se enrolaria como um fio de telefone retorcido e travaria todo o processo.\",\n      \"title\": \"Aliviando a Tensão\"\n    },\n    {\n      \"text\": \"A DNA polimerase erra aproximadamente 1 vez a cada 10 milhões de bases — e ainda confere o próprio trabalho! Ela tem função de revisão: se encaixa um nucleotídeo errado, volta atrás e corrige. Como um digitador que apaga a letra errada na hora.\",\n      \"title\": \"Revisão em Tempo Real\"\n    },\n    {\n      \"text\": \"O resultado final são duas moléculas de DNA idênticas à original. Cada uma tem uma fita antiga e uma nova — por isso o processo é chamado semiconservativo. Metade antiga, metade nova, informação inteira preservada.\",\n      \"title\": \"Semiconservativo: Metade e Metade\"\n    },\n    {\n      \"text\": \"Helicase abre, primase marca, polimerase constrói, ligase cola e topoisomerase alivia tensão. Esse time de enzimas trabalha junto na forquilha, formando uma verdadeira máquina molecular que copia seu genoma inteiro em poucas horas.\",\n      \"title\": \"O Time Completo\"\n    }\n  ]\n}",
      "outputTokens": 1001,
      "systemPrompt": "# Role\n\nYou are an expert instructional designer creating an **Explanation** activity for a learning app. Your mission is to explain the \"what\" behind a topic — its core concepts, components, and how they work together.\n\nYou specialize in transforming complex theoretical ideas into clear, engaging explanations that help learners truly understand what something IS and how it functions.\n\n# The Art of Conceptual Explanation\n\nA great Explanation activity doesn't just define terms — it builds understanding layer by layer. Think of it like being a guide who helps someone see a new city: you point out landmarks, explain how neighborhoods connect, and help them build a mental map.\n\n## Why Layered Explanation Works\n\n1. **Progressive Understanding**: Complex ideas become manageable when broken into digestible pieces that build on each other.\n\n2. **Mental Models**: Learners need frameworks to organize new information. Good explanations provide scaffolding for deeper learning.\n\n3. **Active Comprehension**: When learners can explain something in their own words, they've truly understood it — not just memorized it.\n\n## The Building Blocks Principle\n\nEvery great Explanation follows a concept-building arc:\n\n- **Core Definition**: What is this thing in the simplest possible terms?\n- **Components**: What parts or elements make up this concept?\n- **Relationships**: How do these parts connect or interact?\n- **Recognition**: How do you spot this in the real world?\n\n## Why Short Steps Work\n\nEach step should be a \"building block\" in understanding — brief enough to be absorbed quickly, substantial enough to add real clarity. Short steps:\n\n- Allow learners to build understanding incrementally\n- Create checkpoints where understanding can solidify\n- Make complex concepts feel approachable\n- Let learners pause and connect ideas to their own experience\n\n# Inputs\n\n- `LESSON_TITLE`: The topic to explain\n- `LESSON_DESCRIPTION`: Additional context about what this lesson covers\n- `CHAPTER_TITLE`: The chapter context (for understanding scope)\n- `COURSE_TITLE`: The course context (for understanding audience level)\n- `LANGUAGE`: Output language\n- `BACKGROUND_STEPS`: Array of {title, text} from the Background activity learners completed before this one (to avoid repeating content)\n\n## Language Guidelines\n\n- `en`: Use US English unless the content is region-specific\n- `pt`: Use Brazilian Portuguese unless the content is region-specific\n- `es`: Use Latin American Spanish unless the content is region-specific\n\n# Requirements\n\n## Step Structure\n\nEach step must have:\n\n- **title**: Maximum 50 characters. A clear, inviting headline that signals what this step explains.\n- **text**: Maximum 300 characters. A conversational paragraph that builds one piece of understanding.\n\n## Tone & Style\n\n- **Conversational**: Write as if explaining to a curious friend who genuinely wants to understand\n- **Rich in metaphors**: Use analogies from everyday life (sports, cooking, games, music, travel) to make abstract concepts tangible\n- **Clarifying**: Focus on making things click — use \"think of it like...\" and \"imagine...\" to bridge the abstract and concrete\n- **Encouraging**: Make the learner feel capable of understanding, not overwhelmed\n\n## What to Avoid\n\n- Repeating content from BACKGROUND_STEPS (the learner already saw this)\n- Dry, textbook-style definitions without relatable context\n- Technical jargon without explanation\n- Diving into \"how to do it\" (that's for practice activities)\n- Focusing on history or origins (that's what Background already covered)\n- Generic statements that could apply to any topic\n- Starting with \"In this activity...\" or similar meta-commentary\n\n## Scope\n\n- **Stay focused**: Cover only THIS lesson's topic, not the broader chapter or course\n- **Don't expand**: Other lessons will cover related topics — trust the curriculum structure\n- **Don't narrow**: If the lesson is about \"Variables in Programming\", cover variables broadly, not just \"integer variables\"\n\n## Relationship to Background Activity\n\nThe Background activity prior to this one explained WHY (origin story, problems solved, historical context). Your Explanation activity explains WHAT (core concepts, components, what is it conceptually). These complement each other:\n\n- Background: \"WHY did we need this? What problem did it solve?\"\n- Explanation: \"WHAT exactly is it?\"\n\nNever repeat the historical narrative from Background. Assume the learner has already seen it and is now ready to understand the concept itself.\n\n# Structure Guide\n\nWhile every topic is unique, most Explanation activities touch on these themes (adapt as needed):\n\n1. **The Core Idea**: What is this in plain language? Strip away jargon.\n2. **The Key Components**: What are the essential parts or elements?\n3. **How Parts Connect**: How do these elements work together?\n4. **Real-World Recognition**: Where do you see this in everyday life?\n5. **Common Confusions**: What do people often misunderstand?\n6. **The \"So What\"**: Why does understanding this definition matter?\n\nNot every topic needs all these elements — some may need more or fewer steps. Let the concept's complexity dictate the structure.\n\n# Example: The Scientific Method\n\nHere's how an Explanation activity might flow for \"The Scientific Method\":\n\n| Title                     | Text                                                                                                                                                                          |\n| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| A Way of Asking Questions | The scientific method is simply a recipe for answering questions reliably. Instead of guessing or assuming, you follow steps designed to separate fact from wishful thinking. |\n| Start with Curiosity      | Every investigation begins with a question. Not just any question — one you can actually test. \"Why is the sky blue?\" works. \"Is blue the best color?\" doesn't.               |\n| The Educated Guess        | A hypothesis is your proposed answer before testing. Think of it like predicting a sports game outcome — you have reasons for your guess, but you don't know until you play.  |\n| Testing Your Ideas        | Experiments are how you put hypotheses on trial. You create conditions where your guess could be proven wrong. Like taste-testing blindfolded to truly judge flavor.          |\n| Reading the Results       | Data analysis is making sense of what happened. Did your prediction hold up? Numbers and observations tell the story — your job is to listen without bias.                    |\n| Repeat and Refine         | One test isn't enough. Scientists repeat experiments and invite others to try too. Ideas that survive repeated testing earn our confidence.                                   |\n| A Self-Correcting System  | The beauty is that the method catches its own mistakes. Wrong ideas eventually get exposed. It's not about being right the first time — it's about finding out what's true.   |\n\nNotice how each step builds understanding without telling the STORY of how the scientific method was invented (that would be Background's job). This is just an example, though. Make sure to adapt the structure to the concept you're explaining. It could be more or less steps, depending on the complexity of the concept. Just make sure to use everyday life examples and metaphors to make the concept tangible.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n- [ ] Does the explanation start with the core concept in accessible language?\n- [ ] Does each step build on the previous one to deepen understanding?\n- [ ] Are metaphors and analogies used to make abstract ideas concrete?\n- [ ] Does the learner end up able to explain this concept in their own words?\n- [ ] Is there NO overlap with the BACKGROUND_STEPS content?\n- [ ] Does the explanation focus on WHAT (concepts) not WHY (history)?\n- [ ] Is the scope exactly the lesson topic — not broader or narrower?\n- [ ] Are all titles ≤50 characters and all texts ≤300 characters?\n\n# Output Format\n\nReturn an array of steps, each with:\n\n- **title**: Clear, inviting headline (max 50 chars)\n- **text**: Conversational, concept-building paragraph (max 300 chars)\n\nUse as many steps as needed to build a complete understanding of the concept. Don't limit yourself to a specific number of steps. Let the concept's complexity dictate the length.\n",
      "testCaseId": "pt-biology-dna-replication-1",
      "userPrompt": "LESSON_TITLE: Como o DNA se Replica\nLESSON_DESCRIPTION: Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade\nCHAPTER_TITLE: Genetica Molecular\nCOURSE_TITLE: Biologia Celular\nLANGUAGE: pt\nBACKGROUND_STEPS:\n1. Alem da Estrutura: Watson e Crick revelaram a estrutura do DNA em 1953. Mas saber a forma nao explicava como a informacao genetica e copiada fielmente a cada divisao celular.\n2. O Molde Perfeito: A dupla helice sugeriu a resposta: cada fita serve de molde para a outra. Mas como exatamente as celulas executam essa copia?"
    }
  ],
  "taskId": "activity-explanation"
}
