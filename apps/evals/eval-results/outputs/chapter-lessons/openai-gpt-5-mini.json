{
  "generatedAt": "2026-03-01T01:42:30.854Z",
  "modelId": "openai/gpt-5-mini",
  "outputs": [
    {
      "duration": 53740.65029099997,
      "inputTokens": 2544,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"IPv4 address format\",\n        \"IPv6 address format\",\n        \"CIDR notation\",\n        \"Subnet mask\",\n        \"Network address\",\n        \"Broadcast address\",\n        \"Private IPv4 ranges\",\n        \"Loopback address\"\n      ],\n      \"description\": \"How IP addresses are written and classified, including IPv4 vs IPv6, prefix notation, masks, and special-purpose addresses used on hosts and networks.\",\n      \"title\": \"IP addressing fundamentals\"\n    },\n    {\n      \"concepts\": [\n        \"Calculating network address from IP and prefix\",\n        \"Calculating broadcast address from IP and prefix\",\n        \"Usable host range for a subnet\",\n        \"Variable-length subnet masking (VLSM)\",\n        \"Supernetting and route aggregation\",\n        \"APIPA (169.254) automatic link-local address\"\n      ],\n      \"description\": \"Precise, repeatable operations for converting between IP/prefix and network, broadcast, and host ranges, plus techniques for aggregating and subdividing address space.\",\n      \"title\": \"Subnetting and IP allocation\"\n    },\n    {\n      \"concepts\": [\n        \"MAC addresses\",\n        \"Ethernet frame structure (high level)\",\n        \"ARP purpose and operation\",\n        \"ARP cache\",\n        \"Gratuitous ARP\",\n        \"Ethernet MTU (default 1500 bytes)\",\n        \"IP fragmentation\",\n        \"Path MTU Discovery (PMTUD)\"\n      ],\n      \"description\": \"Layer‑2 addressing and behavior: how MAC/ethernet frames carry IP, how IPv4 maps to MAC addresses, and how MTU and fragmentation affect packet delivery.\",\n      \"title\": \"Link layer and address resolution\"\n    },\n    {\n      \"concepts\": [\n        \"Routing table structure\",\n        \"Default route (gateway)\",\n        \"Longest-prefix match\",\n        \"Static routes\",\n        \"Dynamic routing purpose\",\n        \"Next hop concept\",\n        \"Packet forwarding\"\n      ],\n      \"description\": \"How routers decide where to send packets: the data stored in routing tables, the role of default routes, route selection rules, and the next‑hop forwarding process.\",\n      \"title\": \"Routing and forwarding mechanics\"\n    },\n    {\n      \"concepts\": [\n        \"Source Network Address Translation (SNAT)\",\n        \"Destination Network Address Translation (DNAT) / port forwarding\",\n        \"Port Address Translation (PAT)\",\n        \"Dynamic NAT behavior\",\n        \"Connection tracking state for NAT\",\n        \"Why NAT blocks unsolicited inbound connections\"\n      ],\n      \"description\": \"Different NAT techniques, how NAT rewrites addresses and ports, how state is tracked for connections, and why NAT complicates inbound reachability.\",\n      \"title\": \"Network Address Translation (NAT) types and effects\"\n    },\n    {\n      \"concepts\": [\n        \"TCP connection-oriented model\",\n        \"TCP three-way handshake\",\n        \"TCP sequence numbers\",\n        \"TCP acknowledgements\",\n        \"TCP flow control (sliding window)\",\n        \"TCP congestion control (conceptual)\",\n        \"TCP retransmission timeout (RTO)\"\n      ],\n      \"description\": \"Core TCP mechanisms that enable reliable, ordered delivery: connection setup, sequencing and ACKs, flow and congestion control, and retransmission behavior.\",\n      \"title\": \"TCP mechanisms\"\n    },\n    {\n      \"concepts\": [\n        \"UDP connectionless model\",\n        \"Port numbers and sockets\",\n        \"Ephemeral ports\",\n        \"Socket 4-tuple (source IP:port / dest IP:port)\"\n      ],\n      \"description\": \"How UDP differs from TCP, and how IP+port pairs (sockets) identify endpoints for both connectionless and connection-oriented traffic.\",\n      \"title\": \"UDP and socket addressing\"\n    },\n    {\n      \"concepts\": [\n        \"Latency (round-trip time) definition\",\n        \"Bandwidth definition\",\n        \"Throughput definition\",\n        \"Goodput definition\",\n        \"Bandwidth-delay product\",\n        \"Serialization delay\",\n        \"Propagation delay\",\n        \"Queuing delay\"\n      ],\n      \"description\": \"The fundamental time and capacity metrics in networks, the different types of delay packets experience, and how link capacity interacts with latency.\",\n      \"title\": \"Latency, bandwidth, and per-packet delays\"\n    },\n    {\n      \"concepts\": [\n        \"Impact of packet loss on TCP throughput\",\n        \"Head-of-line blocking in TCP streams\",\n        \"Bufferbloat (excessive buffering)\",\n        \"Congestion collapse (conceptual)\",\n        \"Rate limiting and traffic shaping\",\n        \"Link saturation behavior\"\n      ],\n      \"description\": \"Performance pathologies and behaviors that reduce effective throughput or increase latency, and common network mechanisms that cause them.\",\n      \"title\": \"Performance impacts and congestion behaviors\"\n    },\n    {\n      \"concepts\": [\n        \"Packet loss detection\",\n        \"High-latency conditions\",\n        \"MTU mismatch causing fragmentation or drops\",\n        \"Routing loops\",\n        \"Blackholing (discarded routes)\",\n        \"Firewall or ACL blocking\",\n        \"Interface down / physical link errors\",\n        \"Wireless interference and contention\"\n      ],\n      \"description\": \"Common network failure modes that interrupt connectivity, including routing, link, and device‑level problems you will encounter in real networks.\",\n      \"title\": \"Common failure modes\"\n    },\n    {\n      \"concepts\": [\n        \"Ping for basic reachability and RTT measurement\",\n        \"Traceroute for hop-by-hop path and latency\",\n        \"Tcpdump/packet capture basics\",\n        \"Netcat for TCP and UDP port testing\",\n        \"Iperf for bandwidth measurement\",\n        \"Check routing table with ip route (or route)\",\n        \"Inspect ARP table with arp -a\",\n        \"Check interface status with ip link / ethtool\"\n      ],\n      \"description\": \"Hands-on tools that provide measurable evidence of connectivity, reachability, path, and performance at different OSI layers.\",\n      \"title\": \"Diagnostic tools\"\n    },\n    {\n      \"concepts\": [\n        \"OSI layers overview and responsibilities\",\n        \"Layered troubleshooting order (physical → link → network → transport → application)\",\n        \"Binary search by testing at intermediate hops\",\n        \"Compare client-side and server-side observations\",\n        \"Reproduce issue and isolate one variable at a time\",\n        \"Correlate packet captures with system logs and timestamps\",\n        \"Use time-series metrics to spot trends\"\n      ],\n      \"description\": \"Practical, repeatable mental models and workflows for localizing and diagnosing network faults using layered reasoning, isolation, and correlation.\",\n      \"title\": \"Troubleshooting mental models and workflows\"\n    }\n  ]\n}",
      "outputTokens": 4609,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-web-networking-fundamentals-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Web Development\n    CHAPTER_TITLE: Networking fundamentals\n    CHAPTER_DESCRIPTION: IP addressing, routing, NAT, TCP vs UDP, latency and bandwidth tradeoffs, and common failure modes. Practical mental models for debugging connectivity issues.\nNEIGHBORING_CHAPTERS:\n- \"Web development landscape\": Roles, responsibilities, and interfaces across front-end, back-end, full-stack, QA, DevOps, security, design, and product. How standards bodies and browser vendors shape the platform.\n- \"DNS and domains\": DNS records, resolvers, caching, propagation, and common configurations for web apps. Domain strategy, subdomains, and pitfalls with split-horizon DNS.\n- \"HTTP\": HTTP methods, status codes, headers, content negotiation, caching semantics, cookies, and redirects. HTTP/2 and HTTP/3 concepts and performance implications.\n- \"HTTPS and TLS\": TLS handshakes, certificate chains, HSTS, OCSP stapling, and modern TLS configuration choices. Secure transport patterns for browsers, APIs, and internal services.\n  "
    },
    {
      "duration": 77281.13475000003,
      "inputTokens": 2616,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Tipo int\",\n        \"Inteiros com precisão arbitrária\",\n        \"Imutabilidade de int\",\n        \"int.bit_length()\",\n        \"int.to_bytes()\",\n        \"int.from_bytes()\"\n      ],\n      \"description\": \"Propriedades e métodos específicos do tipo inteiro em Python, incluindo capacidade de precisão ilimitada e utilitários de representação.\",\n      \"title\": \"Inteiros\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo float\",\n        \"Representação binária de ponto flutuante (IEEE‑754 double)\",\n        \"Impossibilidade de representar certas frações decimais exatamente\",\n        \"sys.float_info.epsilon (machine epsilon)\",\n        \"float.as_integer_ratio()\",\n        \"float.hex()\",\n        \"float.fromhex()\"\n      ],\n      \"description\": \"Implementação dos floats em Python, limites da representação e métodos que expõem a representação interna.\",\n      \"title\": \"Ponto flutuante\"\n    },\n    {\n      \"concepts\": [\n        \"NaN (Not a Number) como valor float\",\n        \"Propriedade de que NaN não é igual a si mesmo\",\n        \"Infinito positivo e negativo em float\",\n        \"math.isnan()\",\n        \"math.isinf()\",\n        \"math.isfinite()\",\n        \"Zero com sinal em floats (-0.0)\"\n      ],\n      \"description\": \"Comportamentos e detecção de valores especiais em floats: NaN, infinitos e distinção de zeros com sinal.\",\n      \"title\": \"Valores especiais de floats\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo complex\",\n        \"Atributo real de complex\",\n        \"Atributo imag de complex\",\n        \"complex.conjugate()\",\n        \"Magnitude de um número complexo via abs()\"\n      ],\n      \"description\": \"Tipo complex em Python: componentes real e imaginária, conjugado e magnitude.\",\n      \"title\": \"Números complexos\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo bool\",\n        \"bool como subclasse de int\",\n        \"True igual a 1\",\n        \"False igual a 0\",\n        \"Conversão bool() de números (zero falso, não‑zero verdadeiro)\",\n        \"None como ausência de valor\",\n        \"NoneType e unicidade de None\"\n      ],\n      \"description\": \"Tipo booleano e o valor None: relação entre bool e int, regras de conversão e o papel de None como sinalizador de ausência.\",\n      \"title\": \"Booleanos e None\"\n    },\n    {\n      \"concepts\": [\n        \"int() a partir de float trunca em direção a zero\",\n        \"float() a partir de int converte sem perda quando representável\",\n        \"complex() com um argumento cria parte real\",\n        \"complex() com dois argumentos cria número complexo\",\n        \"Exceção ValueError em conversões inválidas\",\n        \"Exceção TypeError em conversões de tipo incorreto\",\n        \"Decimal() criado a partir de float captura aproximação binária\",\n        \"Fraction.from_float() cria Fraction a partir da aproximação do float\"\n      ],\n      \"description\": \"Funções construtoras e comportamentos ao converter entre int, float, complex, Decimal e Fraction, incluindo exceções geradas.\",\n      \"title\": \"Conversões entre tipos numéricos\"\n    },\n    {\n      \"concepts\": [\n        \"Exemplo 0.1 + 0.2 != 0.3\",\n        \"Erro absoluto versus erro relativo\",\n        \"Catastrophic cancellation (cancelamento catastrófico)\",\n        \"Acumulação de erro em somas repetidas\",\n        \"ULP (unit in last place)\",\n        \"math.isclose() para comparações numéricas robustas\",\n        \"math.fsum() para somas com precisão aprimorada\"\n      ],\n      \"description\": \"Fontes comuns de erro numérico em ponto flutuante, métricas de erro e técnicas práticas para mitigar problemas de comparação e acumulação.\",\n      \"title\": \"Precisão numérica e erros de arredondamento\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo Decimal\",\n        \"Contexto de precisão em Decimal (getcontext)\",\n        \"Modos de arredondamento do Decimal\",\n        \"Criar Decimal a partir de string para evitar aproximações\",\n        \"Decimal.quantize() para arredondamento de escala fixa\",\n        \"decimal.localcontext() para contexto temporário\",\n        \"Conversão de Decimal para float pode perder precisão\"\n      ],\n      \"description\": \"Uso do módulo decimal para aritmética decimal controlada: contexto, modos de arredondamento e práticas recomendadas para criação e conversão.\",\n      \"title\": \"Módulo decimal\"\n    },\n    {\n      \"concepts\": [\n        \"Classe Fraction\",\n        \"Fraction.numerator\",\n        \"Fraction.denominator\",\n        \"Fraction.from_float()\",\n        \"Fraction a partir de Decimal\",\n        \"Fraction.limit_denominator()\",\n        \"Aritmética exata com Fraction produz frações simplificadas\"\n      ],\n      \"description\": \"Uso do módulo fractions para representar números racionais exatos, propriedades de numerador/denominador e utilitários de construção.\",\n      \"title\": \"Módulo fractions\"\n    },\n    {\n      \"concepts\": [\n        \"Quando usar float (desempenho e cálculo científico)\",\n        \"Quando usar Decimal (precisão decimal, finanças)\",\n        \"Quando usar Fraction (exatidão racional)\",\n        \"Custo de desempenho de Decimal versus float\",\n        \"Estratégia de usar inteiros (por exemplo, centavos) para representar valores monetários\"\n      ],\n      \"description\": \"Critérios práticos para escolher entre float, Decimal e Fraction, com considerações de desempenho e estratégias comuns para preservar precisão.\",\n      \"title\": \"Escolha de tipo e desempenho\"\n    }\n  ]\n}",
      "outputTokens": 6113,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-python-tipos-numericos-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Python\n    CHAPTER_TITLE: Tipos numéricos e valores especiais\n    CHAPTER_DESCRIPTION: Inteiros, floats, complexos, bool, None; conversões, precisão numérica, erros de arredondamento e uso de decimal/fractions.\nNEIGHBORING_CHAPTERS:\n- \"Ambiente de desenvolvimento\": Instalação e configuração do Python, múltiplas versões, PATH, virtual environments, VS Code/IDEs, REPL, Jupyter e boas práticas de organização local.\n- \"Execução de programas\": Execução em REPL, scripts e módulos; shebang, codificação, argumentos de linha de comando e status de saída do processo.\n- \"Sintaxe e convenções\": Regras de indentação, nomes, comentários, docstrings, literais, operadores e precedência; diferenças entre Python interativo e arquivo.\n- \"Texto e codificação\": Strings, bytes e bytearray; Unicode, normalização, encodings, f-strings, formatação avançada e manipulação eficiente.\n- \"Estruturas de dados fundamentais\": Listas, tuplas, dicionários e conjuntos; mutabilidade, cópia rasa vs profunda, hashing, ordenação e complexidade de operações.\n- \"Controle de fluxo\": if/elif/else, match/case, loops, break/continue, compreensão de escopo e padrões comuns de controle.\n  "
    },
    {
      "duration": 72811.410125,
      "inputTokens": 2632,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Polarización del enlace carbonilo C=O\"\n      ],\n      \"description\": \"Cómo la diferencia de electronegatividad entre C y O crea un sitio electrofílico en el carbono carbonílico y un par solitario en el oxígeno.\",\n      \"title\": \"Estructura electrónica del carbonilo\"\n    },\n    {\n      \"concepts\": [\n        \"Formas resonantes del carbonilo\",\n        \"Hibridación y geometría del carbono carbonílico\",\n        \"Electrofilicidad del carbono carbonílico\",\n        \"Efecto inductivo sobre reactividad carbonílica\",\n        \"Efecto mesómero sobre reactividad carbonílica\",\n        \"Acidez de hidrógenos alfa\"\n      ],\n      \"description\": \"Propiedades estructurales y electrónicas que determinan la reactividad de aldehídos y cetonas, y por qué los hidrógenos α son relativamente ácidos.\",\n      \"title\": \"Factores que afectan la reactividad del carbonilo\"\n    },\n    {\n      \"concepts\": [\n        \"Mecanismo general de adición nucleofílica a carbonilos (ataque → tetraédrico → protonación)\",\n        \"Ataque hidruro a carbonilos (reducción a alcoholes)\",\n        \"Adición de organometálicos a carbonilos (formación de alcoholes tras protonación)\",\n        \"Formación de cianohidrinas\",\n        \"Formación de hemiacetales y acetales\",\n        \"Formación de iminas (Schiff)\",\n        \"Adición nucleófila a carbonilos protonados\",\n        \"Equilibrio reversible en adiciones nucleofílicas\"\n      ],\n      \"description\": \"Reacciones típicas de adición a aldehídos y cetonas, con sus mecanismos y consideraciones de equilibrio y condiciones.\",\n      \"title\": \"Adiciones nucleofílicas comunes a aldehídos y cetonas\"\n    },\n    {\n      \"concepts\": [\n        \"Tautomería cetona-enol\",\n        \"Mecanismo acidocatalizado de enolización\",\n        \"Mecanismo basocatalizado de enolización\",\n        \"Estructuras resonantes del enolato (carga en O y en C)\",\n        \"Naturaleza ambidenta del enolato (ataque por O o por C)\",\n        \"Éter enólico silyl (enolato silyl) como equivalente de enolato\",\n        \"Enamina como equivalente nucleófilo en alfa-sustitución\",\n        \"Relación pKa/base adecuada para enolización\"\n      ],\n      \"description\": \"Fundamentos de enoles y enolatos: cómo se forman, cómo se representan y qué equivalentes se usan en reacción.\",\n      \"title\": \"Enoles y enolatos: fundamentos\"\n    },\n    {\n      \"concepts\": [\n        \"Bases fuertes no nucleofílicas para generar enolatos (LDA, LiHMDS)\",\n        \"Definición de enolato cinético y enolato termodinámico\",\n        \"Condiciones para obtener enolato cinético (base fuerte, baja T, sustrato impedido)\",\n        \"Condiciones para obtener enolato termodinámico (base débil o equilibrio, T elevada)\",\n        \"Geometría del enolato (E/Z) y determinantes\",\n        \"Efecto del contraión metálico en agregación y reactividad (Li, Na, K)\",\n        \"Estructuras metaladas del enolato (O-metalado vs C-metalado)\",\n        \"Formación de éteres enólicos silyl mediante captura de enolato\"\n      ],\n      \"description\": \"Cómo generar y controlar enolatos: elección de base, temperatura y efectos del metal y la geometría del enolato.\",\n      \"title\": \"Formación y control de enolatos\"\n    },\n    {\n      \"concepts\": [\n        \"Alquilación de enolatos por sustitución en carbono (mecanismo de C-alkilación)\",\n        \"Factores que favorecen la alquilación en carbono\",\n        \"Factores que favorecen la alquilación en oxígeno\",\n        \"Prevención de poli-alquilación (estrategias experimentales)\",\n        \"Acilación de enolatos para obtener β-dicarbonílicos\",\n        \"Halogenación α de enolatos (base y ácido)\",\n        \"Formación de éteres enólicos mediante O-alquilación o silylación\",\n        \"Alquilación vía enaminas (alkilación de Stork)\"\n      ],\n      \"description\": \"Reacciones de enolatos y equivalentes: cómo se funcionalizan en la posición alfa y qué condiciona regioselectividad y rendimiento.\",\n      \"title\": \"Funcionalización alfa: alquilación, acilación y halogenación\"\n    },\n    {\n      \"concepts\": [\n        \"Mecanismo aldólico básico (enolato ataca carbonilo → β-hidroxi)\",\n        \"Aldol cruzada y problemas de selectividad\",\n        \"Aldol intramolecular y preferencia de tamaño de anillo\",\n        \"Deshidratación de aldoles a α,β-insaturados (condensación aldólica)\",\n        \"Estado de transición Zimmerman-Traxler en reacciones aldólicas\",\n        \"Influencia E/Z del enolato en la estereoquímica aldólica\",\n        \"Reversibilidad y retro-aldol\"\n      ],\n      \"description\": \"Mecanismo y estereoquímica de reacciones aldólicas, incluidas variantes intramoleculares y la formación de enonas por deshidratación.\",\n      \"title\": \"Reacciones aldólicas y control estereoquímico\"\n    },\n    {\n      \"concepts\": [\n        \"Mecanismo de la condensación de Claisen (enolato ataca éster → colapso expulsando alcóxido)\",\n        \"Condensación de Claisen mixta y uso de ésteres no enolizables\",\n        \"Dieckmann: Claisen intramolecular para ciclización\",\n        \"Reactividad y transformaciones de β-cetoésteres\",\n        \"Distinción operativa entre Claisen y aldol (tipos de carbonilos y productos)\"\n      ],\n      \"description\": \"Cómo funcionan las reacciones de Claisen y sus variantes intramoleculares, y qué productos característicos generan.\",\n      \"title\": \"Claisen y condensaciones relacionadas\"\n    },\n    {\n      \"concepts\": [\n        \"Mecanismo de adición Michael con enolatos (1,4-addición)\",\n        \"Determinantes de selectividad 1,2 frente a 1,4 en carbonilos conjugados\",\n        \"Uso de organocupratos para favorecer 1,4-addición\",\n        \"Destino del enolato intermedio tras adición Michael (protonación o transformación)\",\n        \"Robinson annulation como secuencia Michael seguida de aldol intramolecular\",\n        \"Uso de equivalentes suaves (enaminas, silyl enoles) en adiciones conjugadas catalizadas\"\n      ],\n      \"description\": \"Reactividad conjugada de enolatos: Michael y sus aplicaciones en ensamblaje de esqueletos carbonados complejos.\",\n      \"title\": \"Adición Michael y química conjugada del enolato\"\n    },\n    {\n      \"concepts\": [\n        \"Felkin-Anh: modelo para estereoselectividad en adición nucleofílica a carbonilos sustituidos en α\",\n        \"Control por quelación en adiciones nucleofílicas a carbonilos α-sustituidos\",\n        \"Estrategias para obtener aldoles cruzadas selectivas (no enolizables, enolato primero)\",\n        \"Uso de acopios estequiométricos y orden de adición para controlar reactividad\",\n        \"Selección de base y disolvente para evitar reacciones secundarias\",\n        \"Uso de auxiliarios quirales para control diastereo y enantioselectivo en reacciones de enolato\"\n      ],\n      \"description\": \"Tácticas prácticas para dirigir regiochemia y estereoselectividad en reacciones de enolatos y adiciones a carbonilos.\",\n      \"title\": \"Estrategias experimentales para controlar selectividad\"\n    }\n  ]\n}",
      "outputTokens": 5799,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "es-quimica-carbonilos-enolatos-1",
      "userPrompt": "\n    LANGUAGE: es\n    COURSE_TITLE: Química\n    CHAPTER_TITLE: Carbonilos y enolatos\n    CHAPTER_DESCRIPTION: Adición nucleofílica a carbonilos, química de enoles/enolatos, aldol, Claisen, Michael y control de selectividad.\nNEIGHBORING_CHAPTERS:\n- \"Sustitución y eliminación\": SN1/SN2, E1/E2, reactividad, solventes, nucleófilos/bases, rearrangements y control de selectividad.\n- \"Adiciones a alquenos y alquinos\": Hidrogenación, halogenación, hidratación, hidroboración-oxidación, adiciones conjugadas y química de alquinos.\n- \"Química aromática\": Aromaticidad, sustitución electrofílica/nucleofílica aromática, directores, y reactividad de sistemas aromáticos extendidos.\n- \"Ácidos carboxílicos y derivados\": Reactividad de ácidos carboxílicos, derivados acílicos, química de amidas/ésteres/anhídridos y estrategias de activación.\n- \"Heterociclos\": Síntesis y reactividad de heterociclos aromáticos y saturados; aplicaciones en fármacos y materiales.\n- \"Radicales y fotoquímica orgánica\": Mecanismos radicalarios, iniciación/propagación/terminación, selectividad, y reacciones fotoquímicas orgánicas.\n  "
    },
    {
      "duration": 48849.68595800002,
      "inputTokens": 2538,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Business cycle\"\n      ],\n      \"description\": \"What a business cycle is and how recurring expansions and contractions define macroeconomic fluctuations.\",\n      \"title\": \"Business cycle fundamentals\"\n    },\n    {\n      \"concepts\": [\n        \"Expansion\",\n        \"Recession\",\n        \"Peak\",\n        \"Trough\",\n        \"Cycle duration\",\n        \"Cycle amplitude\"\n      ],\n      \"description\": \"Core labels and quantitative descriptors used to describe individual cycles and their severity.\",\n      \"title\": \"Cycle states and quantitative descriptors\"\n    },\n    {\n      \"concepts\": [\n        \"NBER dating of US cycles\",\n        \"Turning point definition\",\n        \"Recession indicator series\",\n        \"Leading indicator concept\",\n        \"Coincident indicator concept\",\n        \"Lagging indicator concept\"\n      ],\n      \"description\": \"How empirical researchers identify, date, and classify cycles using turning points and indicator series.\",\n      \"title\": \"Dating cycles and indicator classification\"\n    },\n    {\n      \"concepts\": [\n        \"Trend-cycle distinction\",\n        \"Log deviation from trend\",\n        \"First-difference growth rates\",\n        \"Hodrick-Prescott filter\",\n        \"Baxter-King band-pass filter\",\n        \"End-point filter bias\"\n      ],\n      \"description\": \"Methods for separating long-run trend from cyclical fluctuations and technical issues that affect measured cycles.\",\n      \"title\": \"Detrending and extracting the cyclical component\"\n    },\n    {\n      \"concepts\": [\n        \"Volatility (standard deviation)\",\n        \"Relative volatility to GDP\",\n        \"Autocorrelation\",\n        \"First-order autocorrelation\",\n        \"Cross-correlation\",\n        \"Lead-lag correlation\"\n      ],\n      \"description\": \"Statistical metrics used to summarize cycle size, persistence, and timing relationships across series.\",\n      \"title\": \"Statistical measures of business-cycle dynamics\"\n    },\n    {\n      \"concepts\": [\n        \"GDP cyclical variability\",\n        \"Output persistence\",\n        \"Typical business-cycle frequency\",\n        \"Expansion-recession asymmetry\",\n        \"Aggregate variance decomposition\"\n      ],\n      \"description\": \"Stylized empirical facts about aggregate output: how volatile, persistent, frequent, and asymmetric cycles are, and what drives aggregate variance.\",\n      \"title\": \"Aggregate output facts\"\n    },\n    {\n      \"concepts\": [\n        \"Consumption procyclicality\",\n        \"Consumption smoothness relative to output\",\n        \"Durable goods consumption cyclicality\",\n        \"Services consumption cyclicality\",\n        \"Consumption co-movement with GDP\"\n      ],\n      \"description\": \"Empirical patterns of household spending over the cycle across categories and relative to aggregate output.\",\n      \"title\": \"Consumption cyclical facts\"\n    },\n    {\n      \"concepts\": [\n        \"Investment procyclicality\",\n        \"Investment volatility relative to GDP\",\n        \"Equipment investment cyclicality\",\n        \"Residential investment cyclicality\",\n        \"Investment timing relative to output\"\n      ],\n      \"description\": \"How different types of investment move over the cycle, their volatility, and typical lead-lag relationships with output.\",\n      \"title\": \"Investment and capital spending facts\"\n    },\n    {\n      \"concepts\": [\n        \"Employment procyclicality\",\n        \"Hours worked procyclicality\",\n        \"Unemployment countercyclicality\",\n        \"Labor productivity cyclical movement\",\n        \"Real wage cyclicality\"\n      ],\n      \"description\": \"Observed cyclical behavior of labor-market aggregates without relying on equilibrium labor-market models.\",\n      \"title\": \"Labor-market cyclical facts\"\n    },\n    {\n      \"concepts\": [\n        \"Cyclical total factor productivity\",\n        \"Cyclical labor productivity\",\n        \"Procyclicality of productivity\",\n        \"Productivity co-movement with output\"\n      ],\n      \"description\": \"How productivity measures fluctuate at business-cycle frequencies and how they co-move with other aggregates.\",\n      \"title\": \"Productivity and cyclical TFP facts\"\n    },\n    {\n      \"concepts\": [\n        \"Durable goods sector volatility\",\n        \"Nondurable goods sector volatility\",\n        \"Services sector volatility\",\n        \"Manufacturing cyclicality\",\n        \"Construction cyclicality\",\n        \"Sectoral correlation with aggregate output\"\n      ],\n      \"description\": \"Differences in volatility and timing across broad sectors and their contributions to aggregate fluctuations.\",\n      \"title\": \"Sectoral comovement and heterogeneity\"\n    },\n    {\n      \"concepts\": [\n        \"Cross-country GDP cycle correlation\",\n        \"International cycle synchronization\",\n        \"Trade and cyclical co-movement\",\n        \"Common global shock identification\"\n      ],\n      \"description\": \"Patterns of synchronization across countries and how international trade and common shocks relate to synchronized cycles.\",\n      \"title\": \"International synchronization of business cycles\"\n    },\n    {\n      \"concepts\": [\n        \"Asymmetric downturns and recoveries\",\n        \"Nonlinear cycle amplification\",\n        \"Fat tails in cycle fluctuations\",\n        \"Rare large recessions\"\n      ],\n      \"description\": \"Nonlinear and tail properties of business cycles, including asymmetries and the empirical incidence of large downturns.\",\n      \"title\": \"Asymmetries and nonlinear features of cycles\"\n    }\n  ]\n}",
      "outputTokens": 4462,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-economics-business-cycles-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Economics\n    CHAPTER_TITLE: Business cycles\n    CHAPTER_DESCRIPTION: Business cycle facts, stylized patterns in output, inflation, unemployment, productivity, and comovements across sectors.\nNEIGHBORING_CHAPTERS:\n- \"Behavioral economics\": Behavioral biases, bounded rationality, time inconsistency, social preferences, and policy design with behavioral responses.\n- \"Experimental economics\": Laboratory and field experiments, incentive design, external validity, and behavioral/market design evidence.\n- \"Macroeconomic accounting\": National income and product accounts, sectoral balances, price indices, productivity, and flow-of-funds concepts.\n- \"Consumption and savings\": Consumption-saving, life-cycle and permanent income models, liquidity constraints, and empirical puzzles.\n- \"Investment and capital\": Investment theory, q-models, adjustment costs, irreversibility, and firm-level investment dynamics.\n- \"Unemployment and labor in macro\": Labor markets in macro, search and matching, wage setting, unemployment dynamics, and Beveridge curve analysis.\n  "
    },
    {
      "duration": 49840.60329100001,
      "inputTokens": 2608,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Arquitetura evolutiva\",\n        \"Arquitetura emergente\",\n        \"Big Design Up Front (risco)\",\n        \"Arquitetura como conjunto de decisões\"\n      ],\n      \"description\": \"Princípios que orientam projetar sistemas que mudam ao longo do tempo: por que evitar grandes projetos fechados e como ver arquitetura como decisões iterativas.\",\n      \"title\": \"Fundamentos da arquitetura ágil\"\n    },\n    {\n      \"concepts\": [\n        \"Modularidade\",\n        \"Bounded Context (contexto delimitado)\",\n        \"Decomposição vertical\",\n        \"Decomposição horizontal\",\n        \"Granularidade de módulos\",\n        \"Encapsulamento de módulo\",\n        \"Interface explícita de módulo\"\n      ],\n      \"description\": \"Como dividir um sistema em partes independentes e com limites claros para permitir mudanças locais sem afetar todo o sistema.\",\n      \"title\": \"Modularidade e decomposição\"\n    },\n    {\n      \"concepts\": [\n        \"Acoplamento baixo\",\n        \"Data coupling (acoplamento por dados)\",\n        \"Temporal coupling (acoplamento temporal)\",\n        \"Semantic coupling (acoplamento semântico)\",\n        \"Métricas de acoplamento (afferent/efferent)\"\n      ],\n      \"description\": \"Tipos e medidas de dependência entre módulos, e por que reduzir o acoplamento é essencial para evoluir rapidamente.\",\n      \"title\": \"Acoplamento\"\n    },\n    {\n      \"concepts\": [\n        \"Coesão alta\",\n        \"Coesão funcional\",\n        \"Coesão lógica\",\n        \"Princípio da Responsabilidade Única (SRP)\"\n      ],\n      \"description\": \"Formas de agrupar responsabilidades para que cada módulo faça um conjunto coerente de tarefas e permaneça fácil de modificar.\",\n      \"title\": \"Coesão\"\n    },\n    {\n      \"concepts\": [\n        \"Separation of Concerns (separação de responsabilidades)\",\n        \"Dependency Inversion Principle (inversão de dependência)\",\n        \"Interface Segregation Principle (segregação de interfaces)\",\n        \"Ports and Adapters (Ports-and-Adapters / Hexagonal)\",\n        \"Adapter Pattern (padrão adaptador)\",\n        \"Facade Pattern (padrão fachada)\"\n      ],\n      \"description\": \"Princípios e padrões de design que facilitam mudanças locais, isolamento de dependências e substituição gradual de partes do sistema.\",\n      \"title\": \"Princípios e padrões para evolvabilidade\"\n    },\n    {\n      \"concepts\": [\n        \"Architecture Decision Record (ADR)\",\n        \"Registrar pressupostos arquiteturais\",\n        \"Critério: frequência de mudança\",\n        \"Critério: custo da mudança\",\n        \"Critério: volatilidade do domínio\",\n        \"Governança arquitetural centralizada\",\n        \"Governança arquitetural federada\"\n      ],\n      \"description\": \"Como tomar, registrar e governar decisões arquiteturais de forma leve, incluindo critérios para priorizar opções diante de incerteza.\",\n      \"title\": \"Tomada de decisão arquitetural\"\n    },\n    {\n      \"concepts\": [\n        \"Definição de fitness function arquitetural\",\n        \"Fitness functions como testes arquiteturais\",\n        \"Fitness quantitativo\",\n        \"Fitness qualitativo\",\n        \"Definir atributo arquitetural mensurável\",\n        \"Definir limite (threshold) para fitness\",\n        \"Automatizar avaliação de fitness\",\n        \"Interpretação de resultados de fitness\"\n      ],\n      \"description\": \"Como especificar e operacionalizar regras mensuráveis que validam se a arquitetura segue requisitos desejados ao longo do tempo.\",\n      \"title\": \"Fitness functions e testes arquiteturais\"\n    },\n    {\n      \"concepts\": [\n        \"Decomposição incremental de monólitos\",\n        \"Strangler Fig Pattern (padron estrangulador)\",\n        \"Branch by Abstraction (ramificação por abstração)\",\n        \"Spike arquitetural\",\n        \"Extrair módulo (refatoração)\",\n        \"Introduzir abstração (refatoração)\"\n      ],\n      \"description\": \"Táticas e refatorações que permitem evoluir ou substituir partes do sistema gradualmente sem interromper entrega de valor.\",\n      \"title\": \"Técnicas para evolução incremental\"\n    },\n    {\n      \"concepts\": [\n        \"C4 Model\",\n        \"Diagrama de contexto\",\n        \"Diagrama de containers\",\n        \"Diagrama de componentes\",\n        \"Visão de runtime versus estrutura estática\",\n        \"Documentação viva (living documentation)\"\n      ],\n      \"description\": \"Modelos e artefatos que tornam decisões arquiteturais explícitas e sincronizadas com o código e operação do sistema.\",\n      \"title\": \"Modelagem e documentação arquitetural\"\n    },\n    {\n      \"concepts\": [\n        \"Conway's Law\",\n        \"Alinhamento time↔módulo (team-per-module)\",\n        \"Limites organizacionais como restrição arquitetural\",\n        \"Canais de comunicação moldando interfaces\"\n      ],\n      \"description\": \"Interação entre estrutura organizacional e arquitetura de software, e como projetar fronteiras técnicas alinhadas aos times.\",\n      \"title\": \"Organização, comunicação e arquitetura\"\n    },\n    {\n      \"concepts\": [\n        \"Curva de custo da mudança\",\n        \"Risco de over-modularização\",\n        \"Risco técnico versus risco de negócio\",\n        \"Critérios para desativar/aposentar módulos\",\n        \"Estimativa de esforço de migração\"\n      ],\n      \"description\": \"Principais trade-offs, riscos e métricas práticas para avaliar o custo e a viabilidade de mudanças arquiteturais.\",\n      \"title\": \"Trade-offs, riscos e custo da mudança\"\n    }\n  ]\n}",
      "outputTokens": 4314,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-agile-arquitetura-agil-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Metodologias Ágeis\n    CHAPTER_TITLE: Arquitetura em ambientes ágeis\n    CHAPTER_DESCRIPTION: Arquitetura evolutiva, modularidade, acoplamento/cohesão, fitness functions e decisões arquiteturais compatíveis com mudanças frequentes.\nNEIGHBORING_CHAPTERS:\n- \"Discovery e Delivery integrados\": Dual Track (Discovery/Delivery), discovery contínuo, e prevenção de 'teatro ágil' com entrega sem aprendizado.\n- \"DevOps e entrega contínua\": DevOps: colaboração Dev+Ops, automação, pipelines, IaC, e redução de handoffs para acelerar e estabilizar entregas.\n- \"SRE e confiabilidade em produtos digitais\": SRE: SLIs/SLOs, error budget, confiabilidade como requisito, e equilíbrio entre velocidade e estabilidade.\n- \"Dívida técnica e sustentabilidade\": Gestão de dívida técnica, qualidade interna, refatoração estratégica, e mecanismos de priorização junto ao valor de negócio.\n- \"Estratégias modernas de testes\": Qualidade e testes: pirâmide de testes, testes automatizados, testes exploratórios, e estratégias para sistemas distribuídos.\n- \"Segurança e DevSecOps\": Segurança no ciclo ágil: threat modeling, DevSecOps, shift-left, gestão de vulnerabilidades e resposta a incidentes.\n  "
    },
    {
      "duration": 56182.77016700001,
      "inputTokens": 2623,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Transmutation as alchemy's material goal\",\n        \"Magnum opus (Great Work) in alchemy\",\n        \"Philosopher's Stone (alchemical definition)\",\n        \"Elixir of Life (alchemical definition)\",\n        \"Gold as perfection symbol in alchemy\",\n        \"Nigredo stage of alchemical process\",\n        \"Albedo stage of alchemical process\",\n        \"Rubedo stage of alchemical process\"\n      ],\n      \"description\": \"Core alchemical concepts and symbolic language that ground the Philosopher's Stone within historical alchemy and the magnum opus tradition.\",\n      \"title\": \"Foundations of Alchemy\"\n    },\n    {\n      \"concepts\": [\n        \"Philosopher's Stone functions in Harry Potter\",\n        \"Stone's production of the Elixir of Life\",\n        \"Stone's transmutation of metals\",\n        \"Nicolas Flamel as Stone's canonical owner\",\n        \"Philosopher's Stone as temptation for longevity\",\n        \"Destruction of the Stone as moral choice\"\n      ],\n      \"description\": \"Specific properties and plot role of the Philosopher's Stone in the Harry Potter universe, plus the moral implications of its existence and destruction.\",\n      \"title\": \"Philosopher's Stone in the Wizarding World\"\n    },\n    {\n      \"concepts\": [\n        \"Biological longevity versus invulnerability distinction\",\n        \"Cultural myth of an Elixir of Life\",\n        \"Immortality as stagnation risk\",\n        \"Mortality's role in narrative meaning\",\n        \"Social consequences of widespread longevity\",\n        \"Ethical objections to pursuing immortality\"\n      ],\n      \"description\": \"Philosophical and social ideas about immortality and the Elixir of Life, framing why longevity is contested in myth and narrative.\",\n      \"title\": \"Immortality Myths and Philosophical Distinctions\"\n    },\n    {\n      \"concepts\": [\n        \"Definition of a Horcrux\",\n        \"Soul fragmentation as literal metaphysical splitting\",\n        \"Murder as the causal trigger for mutilating the soul\",\n        \"Dark ritual requirement for Horcrux creation\",\n        \"Horcrux as external tether preserving existence\",\n        \"Multiple Horcruxes increasing soul fragmentation\",\n        \"Limits to soul division and diminishing returns\",\n        \"Horcrux survival versus bodily immortality distinction\"\n      ],\n      \"description\": \"Precise metaphysical mechanics attributed to Horcruxes: how they are created, what they do to a soul, and the limits of that process.\",\n      \"title\": \"Horcrux Mechanics\"\n    },\n    {\n      \"concepts\": [\n        \"Physical degradation associated with soul fragmentation\",\n        \"Emotional blunting from soul damage\",\n        \"Loss of empathy after creating Horcruxes\",\n        \"Paranoia and secrecy as behavioural consequences\",\n        \"Obsessive fixation on legacy and survival\",\n        \"Fragmentation of personal identity\"\n      ],\n      \"description\": \"Direct personal costs that Horcrux creation imposes on the creator's body, emotions, and selfhood.\",\n      \"title\": \"Consequences for the Creator\"\n    },\n    {\n      \"concepts\": [\n        \"Embedding Horcruxes in mundane objects\",\n        \"Horcrux influence on possessors and handlers\",\n        \"Horcrux-hosted fragment consciousness\",\n        \"Persistence of Horcruxes after physical damage to objects\",\n        \"Enchantment-based protections around Horcruxes\"\n      ],\n      \"description\": \"How Horcruxes interact with objects and people: concealment strategies, influence on others, and the persistence of a soul fragment tied to an artifact.\",\n      \"title\": \"Horcrux Interactions with Objects and People\"\n    },\n    {\n      \"concepts\": [\n        \"Unnatural resistance as a sign of a Horcrux\",\n        \"Requirement of irreparable destruction to destroy a Horcrux\",\n        \"Severing the soul tether by destroying a Horcrux\",\n        \"Creator's likely retaliatory reaction to Horcrux destruction\",\n        \"Irreversibility of Horcrux destruction for victims\",\n        \"Ethical risks in seeking and destroying Horcruxes\"\n      ],\n      \"description\": \"General principles governing detection and destruction of Horcruxes, plus the immediate ethical and strategic consequences of such actions.\",\n      \"title\": \"Detection and Principles of Destruction\"\n    },\n    {\n      \"concepts\": [\n        \"Philosopher's Stone as external alchemical solution\",\n        \"Horcruxes as perversion of alchemical transformation\",\n        \"Horcruxes as metaphor for refusal to accept death\",\n        \"Immortality devices as critique of legacy obsession\",\n        \"Flamel's longevity contrasted with obsessive immortality\",\n        \"Narrative function of artifacts externalizing moral corruption\"\n      ],\n      \"description\": \"Symbolic and thematic reading of the Philosopher's Stone and Horcruxes: contrasting approaches to death, embodiment of moral choices, and narrative roles.\",\n      \"title\": \"Symbolism and Thematic Contrasts\"\n    },\n    {\n      \"concepts\": [\n        \"Tom Riddle's diary as a Horcrux example\",\n        \"Marvolo Gaunt's ring as a Horcrux example\",\n        \"Salazar Slytherin's locket as a Horcrux example\",\n        \"Helga Hufflepuff's cup as a Horcrux example\",\n        \"Rowena Ravenclaw's diadem as a Horcrux example\",\n        \"Nagini as a living Horcrux example\",\n        \"Harry Potter as an unintended Horcrux example\",\n        \"Nicolas Flamel's modest extended lifespan as contrast case\"\n      ],\n      \"description\": \"Canonical examples of the Philosopher's Stone and Horcruxes from the series, used as concrete case studies of the chapter's metaphysical and ethical concepts.\",\n      \"title\": \"Canonical Examples and Case Studies\"\n    }\n  ]\n}",
      "outputTokens": 4796,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-harry-potter-alchemy-horcruxes-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Harry Potter\n    CHAPTER_TITLE: Alchemy, Horcruxes, and immortality\n    CHAPTER_DESCRIPTION: Alchemy, immortality myths, and the Philosopher's Stone as symbol. Horcrux metaphysics and the costs of soul fragmentation.\nNEIGHBORING_CHAPTERS:\n- \"Defense Against the Dark Arts\": Defense curriculum across eras and how teaching reflects politics. Practical spell selection, threat models, and the pedagogy of fear.\n- \"Divination and prophecy\": Divination's ambiguity, self-fulfilling prophecy, and narrative foreshadowing. Symbol systems: tea leaves, dreams, centaurs, and astronomy.\n- \"Mind magic and memory\": Mind magic: Legilimency, Occlumency, memory charms, and Pensieve ethics. Consent, epistemology, and the reliability of recollection.\n- \"Wandlore\": Wand woods, cores, allegiance, and the Elder Wand's legend. Comparative magical foci and what wandlore implies about power and identity.\n- \"Healing and magical medicine\": Magical healing, St Mungo's, and the boundaries of restorative magic. Disability, trauma, and long-term consequences in the series.\n- \"Beings, creatures, and species politics\": Werewolves, vampires, giants, goblins, house-elves, centaurs, and merpeople as political subjects. Rights, stereotypes, and allegory across species.\n  "
    },
    {
      "duration": 54455.90750000003,
      "inputTokens": 2667,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Automação jurídica\"\n      ],\n      \"description\": \"Diferenças entre automação de documentos e produção manual; quando usar templates e motores de montagem.\",\n      \"title\": \"Conceitos essenciais da automação de documentos\"\n    },\n    {\n      \"concepts\": [\n        \"Template de documento\",\n        \"Documento gerado\",\n        \"Tokens de template\",\n        \"Variáveis de modelo\",\n        \"Separação conteúdo-apresentação\",\n        \"Formatos de arquivo para automação\",\n        \"Metadados de template\"\n      ],\n      \"description\": \"Elementos de um template, como campos, metadados e formatos de arquivo que suportam geração automatizada.\",\n      \"title\": \"Anatomia de templates\"\n    },\n    {\n      \"concepts\": [\n        \"Seção condicional em template\",\n        \"Laço em template\",\n        \"Fragmento reutilizável\",\n        \"Placeholder de tabela\",\n        \"Referência cruzada interna\",\n        \"Formatação condicional\"\n      ],\n      \"description\": \"Estruturas de controle e blocos reutilizáveis usados para montar documentos dinâmicos a partir de dados.\",\n      \"title\": \"Lógica e composição de templates\"\n    },\n    {\n      \"concepts\": [\n        \"Engine de template\",\n        \"Sintaxe de tokens\",\n        \"Binding de dados\",\n        \"Renderização de template\",\n        \"Erro de renderização\"\n      ],\n      \"description\": \"Como motores de template processam sintaxe, vinculam dados e produzem o documento final, e como falhas ocorrem no runtime.\",\n      \"title\": \"Motores de template e comportamento em execução\"\n    },\n    {\n      \"concepts\": [\n        \"Validação de campos obrigatórios\",\n        \"Validação de formato\",\n        \"Regras de consistência terminológica\",\n        \"Guia de estilo linguístico\",\n        \"Verificação ortográfica\",\n        \"Verificação de citações jurídicas\"\n      ],\n      \"description\": \"Regras automáticas e manuais para garantir qualidade linguística, formatual e terminológica dos documentos gerados.\",\n      \"title\": \"Qualidade, validação e estilo\"\n    },\n    {\n      \"concepts\": [\n        \"Sugestão assistida por IA\",\n        \"Aplicação automática de sugestões\",\n        \"Intervenção humana obrigatória\",\n        \"Risco de alucinação\",\n        \"Explicabilidade das sugestões\",\n        \"Proveniência das recomendações\"\n      ],\n      \"description\": \"Mecanismos de revisão assistida por modelos e controles necessários para manter precisão e responsabilidade humana.\",\n      \"title\": \"Revisão assistida por inteligência artificial\"\n    },\n    {\n      \"concepts\": [\n        \"Controle semântico de versão\",\n        \"Metadata de versão\",\n        \"Registro de alterações\",\n        \"Comparação de versões\",\n        \"Snapshot imutável\",\n        \"Rollback de template\"\n      ],\n      \"description\": \"Modelos de versionamento, registro e recuperação para templates e documentos gerados, com rastreabilidade de mudanças.\",\n      \"title\": \"Controle de versões e rastreabilidade\"\n    },\n    {\n      \"concepts\": [\n        \"Sistema de gerenciamento documental (DMS)\",\n        \"Check-out de documento\",\n        \"Check-in de documento\",\n        \"Bloqueio por edição\",\n        \"Comentário em documento\",\n        \"Indexação por metadados\"\n      ],\n      \"description\": \"Práticas e mecanismos para armazenar, editar e localizar templates e documentos dentro de um repositório controlado.\",\n      \"title\": \"Gestão documental e colaboração\"\n    },\n    {\n      \"concepts\": [\n        \"Propriedade de template\",\n        \"Responsável pela atualização\",\n        \"Fluxo de aprovação de template\",\n        \"Política de descontinuação de template\",\n        \"Plano de capacitação de usuários\",\n        \"Matriz de permissões para templates\"\n      ],\n      \"description\": \"Papéis, responsabilidades e políticas que regulam criação, aprovação, manutenção e aposentadoria de artefatos de automação.\",\n      \"title\": \"Governança de conhecimento e políticas\"\n    },\n    {\n      \"concepts\": [\n        \"Criptografia em repouso\",\n        \"Criptografia em trânsito\",\n        \"Controle de acesso baseado em função\",\n        \"Anonimização de dados\",\n        \"Minimização de dados\",\n        \"Conformidade com LGPD\"\n      ],\n      \"description\": \"Medidas técnicas e requisitos legais para proteger dados usados na geração e armazenamento de documentos automatizados.\",\n      \"title\": \"Segurança, privacidade e conformidade\"\n    },\n    {\n      \"concepts\": [\n        \"Erro de mapeamento de dados\",\n        \"Propagação de erro em automação\",\n        \"Dependência excessiva de automação\",\n        \"Risco de prática ilegal da advocacia\",\n        \"Plano de resposta a incidentes\",\n        \"Teste de restauração\"\n      ],\n      \"description\": \"Riscos operacionais e legais específicos da automação de documentos e estratégias operacionais para mitigá-los.\",\n      \"title\": \"Riscos operacionais e mitigação\"\n    },\n    {\n      \"concepts\": [\n        \"Teste unitário de template\",\n        \"Teste de integração de template\",\n        \"Ambiente de homologação\",\n        \"Pipeline de implantação de templates\",\n        \"Rollout progressivo de template\"\n      ],\n      \"description\": \"Métodos de teste e fluxos de implantação para garantir que templates funcionem corretamente antes de entrarem em uso corrente.\",\n      \"title\": \"Testes e implantação de templates\"\n    },\n    {\n      \"concepts\": [\n        \"Conector API para sistemas externos\",\n        \"Autenticação de integração\",\n        \"Mapeamento de dados\",\n        \"Webhook de evento\",\n        \"Transformação de dados (ETL leve)\"\n      ],\n      \"description\": \"Padrões técnicos para conectar motores de geração a fontes de dados, sistemas documentais e eventos externos.\",\n      \"title\": \"Integração técnica e automação de fluxo\"\n    },\n    {\n      \"concepts\": [\n        \"Métrica de adoção de template\",\n        \"Taxa de erro de geração\",\n        \"Tempo médio de geração\",\n        \"Logs de execução\",\n        \"Feedback do usuário\"\n      ],\n      \"description\": \"Indicadores e logs usados para monitorar qualidade, uso e problemas operacionais em automação documental.\",\n      \"title\": \"Monitoramento e métricas de uso\"\n    }\n  ]\n}",
      "outputTokens": 4662,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-direito-legal-tech-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Direito\n    CHAPTER_TITLE: Legal tech e automação de documentos\n    CHAPTER_DESCRIPTION: Automação jurídica e qualidade: templates, revisão assistida, gestão documental e padronização. Riscos de automação, controle de versões e governança de conhecimento.\nNEIGHBORING_CHAPTERS:\n- \"Gestão de terceiros e due diligence\": Programas de integridade em terceiros: due diligence, cláusulas anticorrupção e monitoramento. Gestão de contratos, auditoria e encerramento por inadimplemento de compliance.\n- \"Estratégia contenciosa e gestão de disputas\": Estratégia de litígio: seleção de teses, definição de foro, gestão de portfólio e negociação de acordos. Monitoramento de precedentes, risco financeiro e comunicação com stakeholders.\n- \"Legal operations e gestão jurídica\": Gestão de escritórios e departamentos jurídicos: triagem, SLAs, indicadores e orçamento. Precificação, honorários, contratação de correspondentes e qualidade.\n- \"Operações contratuais\": Gestão de contratos: ciclo de vida, cláusulas padrão, aprovações e controle de obrigações. CLM, auditoria contratual e prevenção de disputas.\n- \"Negociação estratégica\": Negociação e mediação avançadas: BATNA, ZOPA, técnicas de influência e gestão de impasses. Construção de acordos complexos e multiparte.\n- \"Advocacia oral e persuasão\": Oratória e atuação em audiência: teoria do caso, exame e contrainterrogatório, sustentação oral e postura profissional. Comunicação com juízes, jurados e peritos.\n  "
    },
    {
      "duration": 57483.299415999965,
      "inputTokens": 2577,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Public health as a historical field\",\n        \"Germ theory\",\n        \"Miasma theory\",\n        \"Epidemiology (historical practice)\",\n        \"Quarantine as a legal measure\",\n        \"Isolation as a public health practice\"\n      ],\n      \"description\": \"Core theories and basic public-health tools that shaped responses to disease from the 19th century onward.\",\n      \"title\": \"Foundations of public-health knowledge\"\n    },\n    {\n      \"concepts\": [\n        \"Yellow fever outbreaks in 19th-century Brazil\",\n        \"Aedes aegypti as yellow fever vector\",\n        \"Cholera epidemics in Brazil\",\n        \"Smallpox outbreaks in the 19th century\",\n        \"The 1918 influenza pandemic in Brazil\",\n        \"Health conditions of enslaved populations\"\n      ],\n      \"description\": \"Major diseases and population-specific disease patterns that defined Brazil's 19th- and early 20th-century health landscape.\",\n      \"title\": \"Major diseases and 19th-century disease environments\"\n    },\n    {\n      \"concepts\": [\n        \"Sanitarism (hygienist doctrine)\",\n        \"Hygienist moral rhetoric about cleanliness and population fitness\",\n        \"Oswaldo Cruz's leadership in sanitary campaigns\",\n        \"Sanitary police and public-health inspection\",\n        \"Vaccine Revolt (Revolta da Vacina) 1904\"\n      ],\n      \"description\": \"The sanitary movement, its leading actors, enforcement tools, and social conflicts over hygiene and coercion.\",\n      \"title\": \"Sanitary movement and sanitary policing\"\n    },\n    {\n      \"concepts\": [\n        \"Professionalization of medicine in Brazil\",\n        \"Creation of Instituto Oswaldo Cruz (Fiocruz)\",\n        \"Formation of the Ministry of Health (Brazil)\",\n        \"Development of public-health laboratories\",\n        \"Role of health inspectors and sanitary agents\"\n      ],\n      \"description\": \"Institutions and professional actors that built Brazil’s public-health infrastructure and scientific capacity.\",\n      \"title\": \"Institutions and professional infrastructure\"\n    },\n    {\n      \"concepts\": [\n        \"Sewage and drainage as disease-prevention measures\",\n        \"Water sanitation campaigns for disease control\",\n        \"Vector-control techniques for mosquito-borne diseases\",\n        \"Use of insecticides (including DDT campaigns)\",\n        \"National Immunization Program (Programa Nacional de Imunizações)\"\n      ],\n      \"description\": \"Technical and programmatic interventions—water, sanitation, vector control, and vaccination—used in national disease-prevention campaigns.\",\n      \"title\": \"Sanitation, vector control, and vaccination programs\"\n    },\n    {\n      \"concepts\": [\n        \"Yellow fever eradication campaigns (vector focus)\",\n        \"Smallpox eradication campaign in Brazil\",\n        \"Malaria control programs\",\n        \"Polio mass-vaccination campaigns (Sabin)\",\n        \"Tuberculosis control programs\",\n        \"Leprosy isolation policies\"\n      ],\n      \"description\": \"Targeted disease-control campaigns and the specific programs used against major infectious diseases.\",\n      \"title\": \"Disease-specific control programs\"\n    },\n    {\n      \"concepts\": [\n        \"Social security-based health provision before SUS\",\n        \"Private health insurance expansion\",\n        \"Creation of the Unified Health System (SUS)\",\n        \"Family Health Strategy (Programa Saúde da Família)\",\n        \"Health decentralization (municipalization)\"\n      ],\n      \"description\": \"Evolution of Brazil’s health system structures, financing, and primary-care programs from the 20th century to the SUS era.\",\n      \"title\": \"Health systems, reforms, and primary care\"\n    },\n    {\n      \"concepts\": [\n        \"Racial disparities in morbidity and mortality\",\n        \"Socioeconomic determinants of health\",\n        \"Indigenous health and state interventions\",\n        \"Occupational health risks in industrial and rural work\",\n        \"Maternal and child-health inequalities\"\n      ],\n      \"description\": \"How social categories and living conditions shaped unequal exposure to disease and differential access to care.\",\n      \"title\": \"Health inequality and social determinants\"\n    },\n    {\n      \"concepts\": [\n        \"Compulsory vaccination policies\",\n        \"Vaccine hesitancy and popular resistance to vaccines\",\n        \"Medical coercion in public-health campaigns\",\n        \"Eugenic ideas in Brazilian public-health thought\",\n        \"Pharmaceutical industry influence on health policy\"\n      ],\n      \"description\": \"Political and ethical dimensions of biomedical power, including coercion, eugenic influence, industry lobbying, and public resistance.\",\n      \"title\": \"Biomedical politics, coercion, and ethics\"\n    },\n    {\n      \"concepts\": [\n        \"Rockefeller Foundation public-health programs in Brazil\",\n        \"Pan American Health Organization (PAHO) involvement\",\n        \"World Health Organization technical assistance\"\n      ],\n      \"description\": \"International foundations and intergovernmental agencies and their technical, financial, and institutional influence on Brazilian public health.\",\n      \"title\": \"International actors in Brazilian public health\"\n    },\n    {\n      \"concepts\": [\n        \"HIV/AIDS epidemic trajectory in Brazil\",\n        \"HIV/AIDS activist movements and treatment access politics\",\n        \"Zika epidemic and congenital Zika syndrome\",\n        \"2009 H1N1 influenza response in Brazil\"\n      ],\n      \"description\": \"Late-20th and early-21st-century epidemics that reshaped policy, activism, and public-health capacities.\",\n      \"title\": \"Late-20th and early-21st-century epidemics\"\n    },\n    {\n      \"concepts\": [\n        \"COVID-19 pandemic impact in Brazil\",\n        \"Political promotion of unproven COVID-19 treatments (chloroquine/hydroxychloroquine)\",\n        \"Intergovernmental conflicts during the COVID-19 response\",\n        \"Hospital overload and ICU collapse during COVID-19\",\n        \"Emergence and spread of SARS-CoV-2 variants in Brazil (Gamma/P.1)\",\n        \"Vaccination rollout dynamics in Brazil\"\n      ],\n      \"description\": \"The course of COVID-19 in Brazil, including political dynamics, health-system strain, variants, and vaccination campaigns.\",\n      \"title\": \"COVID-19 and the contemporary crisis in Brazilian health\"\n    },\n    {\n      \"concepts\": [\n        \"Development of vital statistics and mortality registration\",\n        \"Epidemiological surveillance systems in Brazil\",\n        \"Notifiable-disease reporting mechanisms\",\n        \"Use of health statistics in policymaking\"\n      ],\n      \"description\": \"Data, notification, and surveillance systems that enabled disease monitoring and informed public-health decisions.\",\n      \"title\": \"Health surveillance, statistics, and reporting systems\"\n    },\n    {\n      \"concepts\": [\n        \"Public-health education campaigns and messaging techniques\",\n        \"Popular resistance to sanitary interventions beyond vaccination\",\n        \"Media and scientific communication during epidemics\"\n      ],\n      \"description\": \"Strategies and public responses in communicating health risks and mobilizing behavior change during campaigns and outbreaks.\",\n      \"title\": \"Communication, public response, and popular politics of health\"\n    }\n  ]\n}",
      "outputTokens": 4905,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-brazilian-history-health-disease-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Brazilian History\n    CHAPTER_TITLE: Health and disease\n    CHAPTER_DESCRIPTION: Public health, epidemics, health systems, and biomedical politics from the 19th century to COVID-19; sanitation campaigns and inequality.\nNEIGHBORING_CHAPTERS:\n- \"Sports and society\": Football history, race and class in sport, club cultures, mega-events, and stadium politics; sport as national narrative.\n- \"Cities and urban inequality\": Urbanization, housing, sanitation, policing, and informal settlements; favelas, segregation, and metropolitan governance.\n- \"Environmental history and the Amazon\": Amazon, Cerrado, and Atlantic Forest histories: extraction, conservation, Indigenous stewardship, climate politics, and environmental governance.\n- \"Military and national security\": Professionalization of the armed forces, coups, doctrine, and defense policy; civil-military relations in democracy.\n- \"Foreign policy and international relations\": Diplomacy from empire to present: borders, regional leadership, multilateralism, South–South ties, and great-power relations.\n- \"Historiography and public memory\": How Brazil's past is narrated and contested: schools, monuments, museums, reparations debates, transitional justice, and public history.\n  "
    }
  ],
  "taskId": "chapter-lessons"
}
