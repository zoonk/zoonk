{
  "generatedAt": "2026-03-01T01:41:37.912Z",
  "modelId": "anthropic/claude-sonnet-4.6",
  "outputs": [
    {
      "duration": 19760.90625,
      "inputTokens": 3072,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"What is an IP Address\",\n        \"IPv4 Address Format\",\n        \"IPv4 Address Classes\",\n        \"Classless Inter-Domain Routing (CIDR)\",\n        \"Subnet Mask\",\n        \"Network Address\",\n        \"Host Address\",\n        \"Broadcast Address\",\n        \"Subnetting a Network\",\n        \"Public IP Address\",\n        \"Private IP Address\",\n        \"Reserved IP Address Ranges\",\n        \"IPv6 Address Format\",\n        \"IPv6 Address Shorthand Notation\",\n        \"IPv4 vs IPv6 Compatibility\"\n      ],\n      \"description\": \"The structure and types of IP addresses, how networks are divided into subnets, and the differences between IPv4 and IPv6 addressing.\",\n      \"title\": \"IP Addressing\"\n    },\n    {\n      \"concepts\": [\n        \"What is Routing\",\n        \"Default Gateway\",\n        \"Routing Table\",\n        \"Static Routes\",\n        \"Dynamic Routing\",\n        \"Hop Count\",\n        \"Time to Live (TTL)\",\n        \"Packet Forwarding\",\n        \"Longest Prefix Match\",\n        \"Autonomous Systems\"\n      ],\n      \"description\": \"How packets find their way across networks, including routing tables, gateways, and the decision logic routers use to forward traffic.\",\n      \"title\": \"IP Routing\"\n    },\n    {\n      \"concepts\": [\n        \"What is NAT\",\n        \"NAT Address Translation Process\",\n        \"Port Address Translation (PAT)\",\n        \"NAT Table\",\n        \"Inbound vs Outbound NAT Traffic\",\n        \"NAT and Private Networks\",\n        \"NAT Limitations for Inbound Connections\",\n        \"Port Forwarding\",\n        \"NAT Traversal\",\n        \"Double NAT\"\n      ],\n      \"description\": \"How Network Address Translation maps private IP addresses to public ones, enabling shared internet access and its implications for connectivity.\",\n      \"title\": \"Network Address Translation (NAT)\"\n    },\n    {\n      \"concepts\": [\n        \"OSI Model Overview\",\n        \"Transport Layer Role\",\n        \"What is TCP\",\n        \"TCP Three-Way Handshake\",\n        \"TCP Connection Teardown\",\n        \"TCP Sequence Numbers\",\n        \"TCP Acknowledgments\",\n        \"TCP Retransmission\",\n        \"TCP Flow Control\",\n        \"TCP Congestion Control\",\n        \"What is UDP\",\n        \"UDP Datagram Structure\",\n        \"Connectionless Communication\",\n        \"When to Use TCP\",\n        \"When to Use UDP\"\n      ],\n      \"description\": \"The core transport protocols TCP and UDP, how TCP establishes reliable connections, and the tradeoffs that determine which protocol suits a given use case.\",\n      \"title\": \"TCP and UDP\"\n    },\n    {\n      \"concepts\": [\n        \"What is Latency\",\n        \"Round-Trip Time (RTT)\",\n        \"Propagation Delay\",\n        \"Transmission Delay\",\n        \"Processing Delay\",\n        \"Queuing Delay\",\n        \"What is Bandwidth\",\n        \"Throughput vs Bandwidth\",\n        \"Bandwidth-Delay Product\",\n        \"Effect of Packet Loss on Throughput\",\n        \"Bufferbloat\",\n        \"Head-of-Line Blocking\",\n        \"Latency vs Bandwidth Tradeoffs\"\n      ],\n      \"description\": \"The measurable dimensions of network performance — latency, bandwidth, and throughput — and how they interact to affect real-world application speed.\",\n      \"title\": \"Latency and Bandwidth\"\n    },\n    {\n      \"concepts\": [\n        \"What is a Network Packet\",\n        \"Packet Headers\",\n        \"Fragmentation\",\n        \"Packet Loss\",\n        \"Out-of-Order Packet Delivery\",\n        \"Duplicate Packets\",\n        \"Maximum Transmission Unit (MTU)\",\n        \"ICMP Protocol\",\n        \"Traceroute\",\n        \"Ping\",\n        \"Port Numbers\",\n        \"Well-Known Ports\",\n        \"Ephemeral Ports\",\n        \"Firewall Packet Filtering\",\n        \"Network Address Unreachable Error\"\n      ],\n      \"description\": \"Core low-level networking concepts including packet structure, ICMP utilities, ports, and firewalls that underpin how data moves across networks.\",\n      \"title\": \"Packets, Ports, and Network Tools\"\n    },\n    {\n      \"concepts\": [\n        \"Connection Timeout\",\n        \"Connection Refused Error\",\n        \"Packet Loss as a Failure Mode\",\n        \"Asymmetric Routing\",\n        \"IP Address Conflict\",\n        \"NAT Table Exhaustion\",\n        \"TCP SYN Flood\",\n        \"Half-Open Connection\",\n        \"Network Congestion Collapse\",\n        \"Intermittent Connectivity Symptoms\"\n      ],\n      \"description\": \"Common failure modes in networked systems, what causes them, and how to recognize their symptoms when diagnosing connectivity problems.\",\n      \"title\": \"Network Failure Modes\"\n    },\n    {\n      \"concepts\": [\n        \"Layered Debugging Mental Model\",\n        \"Isolating the Failure Layer\",\n        \"Checking Physical Connectivity\",\n        \"Verifying IP Configuration\",\n        \"Testing with Ping\",\n        \"Tracing Packet Routes with Traceroute\",\n        \"Checking Port Reachability\",\n        \"Reading a Routing Table for Debugging\",\n        \"Identifying NAT-Related Failures\",\n        \"Distinguishing TCP vs UDP Failures\"\n      ],\n      \"description\": \"Practical mental models and step-by-step strategies for diagnosing connectivity issues by systematically narrowing down the layer and component at fault.\",\n      \"title\": \"Debugging Connectivity Issues\"\n    }\n  ]\n}",
      "outputTokens": 970,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-web-networking-fundamentals-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Web Development\n    CHAPTER_TITLE: Networking fundamentals\n    CHAPTER_DESCRIPTION: IP addressing, routing, NAT, TCP vs UDP, latency and bandwidth tradeoffs, and common failure modes. Practical mental models for debugging connectivity issues.\nNEIGHBORING_CHAPTERS:\n- \"Web development landscape\": Roles, responsibilities, and interfaces across front-end, back-end, full-stack, QA, DevOps, security, design, and product. How standards bodies and browser vendors shape the platform.\n- \"DNS and domains\": DNS records, resolvers, caching, propagation, and common configurations for web apps. Domain strategy, subdomains, and pitfalls with split-horizon DNS.\n- \"HTTP\": HTTP methods, status codes, headers, content negotiation, caching semantics, cookies, and redirects. HTTP/2 and HTTP/3 concepts and performance implications.\n- \"HTTPS and TLS\": TLS handshakes, certificate chains, HSTS, OCSP stapling, and modern TLS configuration choices. Secure transport patterns for browsers, APIs, and internal services.\n  "
    },
    {
      "duration": 23074.60966700001,
      "inputTokens": 3179,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Tipo int\",\n        \"Literais inteiros decimais\",\n        \"Literais inteiros binários\",\n        \"Literais inteiros octais\",\n        \"Literais inteiros hexadecimais\",\n        \"Inteiros de precisão arbitrária\",\n        \"Separador de dígitos com underscore\"\n      ],\n      \"description\": \"O tipo int em Python, suas formas literais em diferentes bases numéricas e a capacidade de representar inteiros de tamanho ilimitado.\",\n      \"title\": \"Inteiros\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo float\",\n        \"Representação de ponto flutuante (IEEE 754)\",\n        \"Literais float\",\n        \"Notação científica em floats\",\n        \"Float infinito (inf)\",\n        \"Float não numérico (nan)\",\n        \"Limites do tipo float\"\n      ],\n      \"description\": \"O tipo float, sua representação interna baseada em IEEE 754, formas de escrita e valores especiais como infinito e NaN.\",\n      \"title\": \"Floats e Representação de Ponto Flutuante\"\n    },\n    {\n      \"concepts\": [\n        \"Erro de arredondamento em ponto flutuante\",\n        \"Acumulação de erros numéricos\",\n        \"Por que 0.1 + 0.2 ≠ 0.3\",\n        \"Comparação de floats com epsilon\",\n        \"Função round() em floats\",\n        \"Arredondamento bancário (round half to even)\"\n      ],\n      \"description\": \"Os erros inerentes à representação binária de números decimais, como eles se manifestam e estratégias básicas para lidar com eles.\",\n      \"title\": \"Precisão Numérica e Erros de Arredondamento\"\n    },\n    {\n      \"concepts\": [\n        \"Módulo decimal\",\n        \"Classe Decimal\",\n        \"Criando objetos Decimal\",\n        \"Contexto de precisão (getcontext)\",\n        \"Configurando casas decimais no contexto\",\n        \"Modos de arredondamento no módulo decimal\",\n        \"Operações aritméticas com Decimal\"\n      ],\n      \"description\": \"O módulo decimal para aritmética de ponto fixo com precisão controlável, essencial quando exatidão decimal é obrigatória.\",\n      \"title\": \"Aritmética Decimal com o Módulo decimal\"\n    },\n    {\n      \"concepts\": [\n        \"Módulo fractions\",\n        \"Classe Fraction\",\n        \"Criando frações a partir de inteiros\",\n        \"Criando frações a partir de strings\",\n        \"Criando frações a partir de floats\",\n        \"Simplificação automática de frações\",\n        \"Operações aritméticas com Fraction\"\n      ],\n      \"description\": \"O módulo fractions para representar e operar com números racionais de forma exata, sem erros de ponto flutuante.\",\n      \"title\": \"Números Racionais com o Módulo fractions\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo complex\",\n        \"Literais complexos com sufixo j\",\n        \"Atributo real de um número complexo\",\n        \"Atributo imag de um número complexo\",\n        \"Método conjugate()\",\n        \"Operações aritméticas com complexos\",\n        \"Módulo cmath para funções complexas\"\n      ],\n      \"description\": \"O tipo complex para representação de números complexos, seus atributos, operações e o módulo cmath para funções matemáticas aplicadas a eles.\",\n      \"title\": \"Números Complexos\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo bool\",\n        \"Valores True e False\",\n        \"Bool como subclasse de int\",\n        \"Valor inteiro de True e False\",\n        \"Função bool()\",\n        \"Objetos truthy\",\n        \"Objetos falsy\",\n        \"Regra de falsidade para zero e None\"\n      ],\n      \"description\": \"O tipo bool e sua relação com int, os conceitos de truthiness e falsiness e a conversão de objetos para bool.\",\n      \"title\": \"Tipo Booleano\"\n    },\n    {\n      \"concepts\": [\n        \"O valor None\",\n        \"Tipo NoneType\",\n        \"None como ausência de valor\",\n        \"Comparação com None usando is\",\n        \"Diferença entre None e zero\",\n        \"Diferença entre None e False\",\n        \"Retorno implícito None em funções\"\n      ],\n      \"description\": \"O valor especial None, seu tipo único NoneType e os padrões corretos de uso e comparação em Python.\",\n      \"title\": \"O Valor None\"\n    },\n    {\n      \"concepts\": [\n        \"Conversão int para float\",\n        \"Conversão float para int (truncamento)\",\n        \"Função int() com strings\",\n        \"Função float() com strings\",\n        \"Conversão de base com int() e base\",\n        \"Conversão int para complex\",\n        \"Conversão bool para int\",\n        \"Conversão numérica implícita (coerção)\"\n      ],\n      \"description\": \"As funções e regras de conversão entre os tipos numéricos do Python, incluindo conversões explícitas e a promoção implícita de tipos em operações mistas.\",\n      \"title\": \"Conversões entre Tipos Numéricos\"\n    },\n    {\n      \"concepts\": [\n        \"Função abs()\",\n        \"Função pow()\",\n        \"Função divmod()\",\n        \"Função math.floor()\",\n        \"Função math.ceil()\",\n        \"Função math.trunc()\",\n        \"Função math.isfinite()\",\n        \"Função math.isinf()\",\n        \"Função math.isnan()\"\n      ],\n      \"description\": \"Funções embutidas e do módulo math relevantes para operações e inspeções sobre valores numéricos de todos os tipos.\",\n      \"title\": \"Funções Numéricas Essenciais\"\n    },\n    {\n      \"concepts\": [\n        \"Método int.bit_length()\",\n        \"Método int.bit_count()\",\n        \"Método int.to_bytes()\",\n        \"Método int.from_bytes()\",\n        \"Método float.is_integer()\",\n        \"Método float.hex()\",\n        \"Método float.fromhex()\",\n        \"Método float.as_integer_ratio()\"\n      ],\n      \"description\": \"Métodos específicos dos tipos int e float que expõem detalhes de representação interna e permitem conversões de baixo nível.\",\n      \"title\": \"Métodos dos Tipos int e float\"\n    }\n  ]\n}",
      "outputTokens": 1299,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-python-tipos-numericos-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Python\n    CHAPTER_TITLE: Tipos numéricos e valores especiais\n    CHAPTER_DESCRIPTION: Inteiros, floats, complexos, bool, None; conversões, precisão numérica, erros de arredondamento e uso de decimal/fractions.\nNEIGHBORING_CHAPTERS:\n- \"Ambiente de desenvolvimento\": Instalação e configuração do Python, múltiplas versões, PATH, virtual environments, VS Code/IDEs, REPL, Jupyter e boas práticas de organização local.\n- \"Execução de programas\": Execução em REPL, scripts e módulos; shebang, codificação, argumentos de linha de comando e status de saída do processo.\n- \"Sintaxe e convenções\": Regras de indentação, nomes, comentários, docstrings, literais, operadores e precedência; diferenças entre Python interativo e arquivo.\n- \"Texto e codificação\": Strings, bytes e bytearray; Unicode, normalização, encodings, f-strings, formatação avançada e manipulação eficiente.\n- \"Estruturas de dados fundamentais\": Listas, tuplas, dicionários e conjuntos; mutabilidade, cópia rasa vs profunda, hashing, ordenação e complexidade de operações.\n- \"Controle de fluxo\": if/elif/else, match/case, loops, break/continue, compreensão de escopo e padrões comuns de controle.\n  "
    },
    {
      "duration": 51684.668167000025,
      "inputTokens": 3181,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Grupo carbonilo\",\n        \"Polarización del enlace C=O\",\n        \"Electrofilia del carbono carbonílico\",\n        \"Aldehídos: estructura y nomenclatura\",\n        \"Cetonas: estructura y nomenclatura\",\n        \"Diferencias de reactividad entre aldehídos y cetonas\",\n        \"Efecto del grupo sustituyente sobre la reactividad carbonílica\"\n      ],\n      \"description\": \"Estructura electrónica del grupo carbonilo y cómo determina la reactividad de aldehídos y cetonas.\",\n      \"title\": \"Grupo Carbonilo\"\n    },\n    {\n      \"concepts\": [\n        \"Mecanismo de adición nucleofílica a carbonilos\",\n        \"Formación del intermediario tetraédrico\",\n        \"Hidrólisis del intermediario tetraédrico\",\n        \"Adición de hidruros (NaBH4) a aldehídos\",\n        \"Adición de hidruros (LiAlH4) a cetonas\",\n        \"Adición de reactivos de Grignard a aldehídos\",\n        \"Adición de reactivos de Grignard a cetonas\",\n        \"Adición de reactivos organolitiados\"\n      ],\n      \"description\": \"Mecanismo general de la adición nucleofílica al carbonilo y los nucleófilos más comunes: hidruros y organometálicos.\",\n      \"title\": \"Mecanismo de Adición Nucleofílica\"\n    },\n    {\n      \"concepts\": [\n        \"Adición de agua: formación de hidratos\",\n        \"Constante de equilibrio de hidratación\",\n        \"Adición de alcoholes: formación de hemiacetales\",\n        \"Formación de acetales\",\n        \"Hidrólisis de acetales\",\n        \"Acetales como grupos protectores de carbonilos\",\n        \"Adición de tioles: tioacetales\",\n        \"Adición de aminas primarias: formación de iminas\",\n        \"Mecanismo de formación de iminas\",\n        \"Adición de aminas secundarias: formación de enaminas\",\n        \"Adición de HCN: cianohidrinas\",\n        \"Reactividad de cianohidrinas\"\n      ],\n      \"description\": \"Reacciones de adición nucleofílica con heteroátomos: agua, alcoholes, aminas y HCN, y su control por equilibrio.\",\n      \"title\": \"Adiciones con Nucleófilos de Heteroátomo\"\n    },\n    {\n      \"concepts\": [\n        \"Efecto Bürgi-Dunitz: ángulo de ataque nucleofílico\",\n        \"Control estérico en la adición a carbonilos\",\n        \"Modelo de Felkin-Anh\",\n        \"Modelo de chelation control\",\n        \"Selectividad facial en carbonilos proquirales\",\n        \"Adición diastereoselectiva a α-quirales\",\n        \"Adición enantioselectiva con reactivos quirales\"\n      ],\n      \"description\": \"Factores estéricos y electrónicos que controlan la cara de ataque en adiciones nucleofílicas a carbonilos, incluyendo modelos de selectividad.\",\n      \"title\": \"Estereoquímica de la Adición a Carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Acidez de los hidrógenos α al carbonilo\",\n        \"Formación del anión enolato\",\n        \"Enol: tautómero del carbonilo\",\n        \"Tautomería ceto-enol\",\n        \"Equilibrio ceto-enol: posición del equilibrio\",\n        \"Factores que favorecen la forma enol\",\n        \"Enolización catalizada por ácido\",\n        \"Enolización catalizada por base\"\n      ],\n      \"description\": \"Acidez del hidrógeno α, formación de enolatos y el equilibrio entre las formas ceto y enol.\",\n      \"title\": \"Enoles y Enolatos: Conceptos Fundamentales\"\n    },\n    {\n      \"concepts\": [\n        \"Enolatos cinéticos vs. termodinámicos\",\n        \"Condiciones para obtener el enolato cinético\",\n        \"Condiciones para obtener el enolato termodinámico\",\n        \"Regioselectividad de enolización\",\n        \"LDA como base para enolatos cinéticos\",\n        \"Enolatos de litio vs. enolatos de sodio\",\n        \"Enolatos de sililo (silyl enol ethers)\",\n        \"Formación de enolatos de sililo (TMS enol ethers)\"\n      ],\n      \"description\": \"Control de la regioquímica y las condiciones experimentales para generar enolatos específicos, cinéticos o termodinámicos.\",\n      \"title\": \"Control de Enolatos\"\n    },\n    {\n      \"concepts\": [\n        \"Reacción aldol: definición y visión general\",\n        \"Mecanismo aldol en medio básico\",\n        \"Mecanismo aldol en medio ácido\",\n        \"Producto aldol: β-hidroxicarbonilo\",\n        \"Deshidratación del producto aldol\",\n        \"Condensación aldol: producto α,β-insaturado\",\n        \"Aldol intramolecular\",\n        \"Condensación aldol intramolecular\"\n      ],\n      \"description\": \"Mecanismo de la reacción aldol en condiciones ácidas y básicas, y la deshidratación para dar productos α,β-insaturados.\",\n      \"title\": \"Reacción Aldol: Mecanismo y Productos\"\n    },\n    {\n      \"concepts\": [\n        \"Aldol cruzado (mixed aldol)\",\n        \"Problema de mezclas en el aldol cruzado\",\n        \"Estrategia del enolato preformado en aldol cruzado\",\n        \"Aldol de Mukaiyama\",\n        \"Mecanismo del aldol de Mukaiyama\",\n        \"Estereoquímica del aldol: productos syn y anti\",\n        \"Control del diastereómero syn en aldol de Zimmermann-Traxler\",\n        \"Control del diastereómero anti\",\n        \"Estado de transición de silla en la reacción aldol\"\n      ],\n      \"description\": \"Variantes del aldol cruzado y de Mukaiyama, y el control estereoquímico de los productos syn y anti a través de estados de transición cíclicos.\",\n      \"title\": \"Aldol Cruzado y Estereoselectividad\"\n    },\n    {\n      \"concepts\": [\n        \"Condensación de Claisen: definición\",\n        \"Mecanismo de la condensación de Claisen\",\n        \"Claisen cruzado (Claisen mixto)\",\n        \"Estrategia para el Claisen cruzado\",\n        \"Condensación de Dieckmann (Claisen intramolecular)\",\n        \"Mecanismo de la condensación de Dieckmann\",\n        \"Producto β-cetoéster de Claisen\",\n        \"Descarboxilación de β-cetoácidos\"\n      ],\n      \"description\": \"Mecanismo de la condensación de Claisen entre ésteres y su variante intramolecular (Dieckmann), con el papel del β-cetoéster como producto clave.\",\n      \"title\": \"Condensación de Claisen y Dieckmann\"\n    },\n    {\n      \"concepts\": [\n        \"Sistemas carbonílicos α,β-insaturados: estructura\",\n        \"Resonancia en sistemas α,β-insaturados\",\n        \"Adición 1,2 vs. adición 1,4 (conjugada)\",\n        \"Control termodinámico vs. cinético en adición 1,2 y 1,4\",\n        \"Reacción de Michael: definición\",\n        \"Mecanismo de la reacción de Michael\",\n        \"Donadores de Michael típicos\",\n        \"Aceptores de Michael típicos\",\n        \"Reacción de Michael con enolatos\"\n      ],\n      \"description\": \"Estructura y reactividad de los sistemas α,β-insaturados, diferenciando la adición 1,2 y 1,4, y el mecanismo de la reacción de Michael.\",\n      \"title\": \"Adición Conjugada y Reacción de Michael\"\n    },\n    {\n      \"concepts\": [\n        \"Reacción de Robinson (Robinson annulation)\",\n        \"Mecanismo de la anulación de Robinson\",\n        \"Formación del ciclohexenona por anulación de Robinson\",\n        \"Adición de Michael organocuprada\",\n        \"Reactivos organocúpricos de Gilman\",\n        \"Selectividad 1,4 de los organocúpricos\",\n        \"Adición de Michael asimétrica con catálisis organocatalítica\"\n      ],\n      \"description\": \"Aplicación de la adición conjugada en la anulación de Robinson y el uso de organocúpricos y catálisis asimétrica para controlar la selectividad.\",\n      \"title\": \"Anulación de Robinson y Adición Conjugada Avanzada\"\n    },\n    {\n      \"concepts\": [\n        \"Alquilación directa de enolatos\",\n        \"Regioquímica de la alquilación de enolatos\",\n        \"Alquilación de enolatos con haluros de alquilo\",\n        \"Síntesis del malonato (malonic ester synthesis)\",\n        \"Descarboxilación del ácido malónico\",\n        \"Síntesis del acetoacetato (acetoacetic ester synthesis)\",\n        \"Descarboxilación del β-cetoácido en síntesis acetoacetato\",\n        \"Aplicación sintética de las síntesis de malonato y acetoacetato\"\n      ],\n      \"description\": \"Uso de enolatos como nucleófilos en alquilaciones y las síntesis clásicas del malonato y acetoacetato para la construcción de ácidos y cetonas.\",\n      \"title\": \"Alquilación de Enolatos y Síntesis Clásicas\"\n    },\n    {\n      \"concepts\": [\n        \"Reacción de Wittig: definición\",\n        \"Reactivo de Wittig (iluro de fósforo)\",\n        \"Síntesis del iluro de Wittig\",\n        \"Mecanismo de la reacción de Wittig (oxafosfetano)\",\n        \"Selectividad E/Z en la reacción de Wittig\",\n        \"Wittig estabilizado vs. no estabilizado\",\n        \"Variante de Horner-Wadsworth-Emmons (HWE)\",\n        \"Ventajas de la reacción de HWE sobre Wittig\"\n      ],\n      \"description\": \"Transformación de carbonilos en alquenos mediante los iluros de fósforo de Wittig y la variante mejorada de Horner-Wadsworth-Emmons.\",\n      \"title\": \"Reacción de Wittig y Variantes\"\n    },\n    {\n      \"concepts\": [\n        \"Reacción de Reformatsky\",\n        \"Mecanismo de la reacción de Reformatsky\",\n        \"Condensación de Knoevenagel\",\n        \"Reacción de Mannich: definición\",\n        \"Mecanismo de la reacción de Mannich\",\n        \"Base de Mannich como producto\",\n        \"Reacción de Stork (enamina en alquilación)\",\n        \"Uso de enaminas como equivalentes de enolatos\"\n      ],\n      \"description\": \"Reacciones carbonílicas especiales que amplían el repertorio sintético: Reformatsky, Knoevenagel, Mannich y el uso de enaminas como enolatos equivalentes.\",\n      \"title\": \"Reacciones Carbonílicas Especiales\"\n    },\n    {\n      \"concepts\": [\n        \"Reducción de Meerwein-Ponndorf-Verley\",\n        \"Oxidación de Baeyer-Villiger\",\n        \"Mecanismo de Baeyer-Villiger\",\n        \"Migración preferencial en Baeyer-Villiger\",\n        \"Reacción de Cannizzaro\",\n        \"Mecanismo de la reacción de Cannizzaro\",\n        \"Reacción de Tischenko\",\n        \"α-Halogenación de carbonilos\",\n        \"Mecanismo de α-halogenación en medio básico\",\n        \"Reacción haloformo\"\n      ],\n      \"description\": \"Reacciones adicionales de carbonilos que involucran transferencia de hidruro, oxidación y halogenación en posición α.\",\n      \"title\": \"Otras Reacciones de Carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Concepto de umpolung\",\n        \"Reactivos de umpolung: ditianos\",\n        \"Síntesis con ditianos (reacción de Corey-Seebach)\",\n        \"Cianohidrinas como equivalentes de acil anión\",\n        \"Equivalentes sintéticos: d y a en análisis retrosintético\",\n        \"Análisis retrosintético de 1,3-dicarbonilos\",\n        \"Análisis retrosintético de 1,5-dicarbonilos\",\n        \"Estrategia de desconexión en síntesis con enolatos\"\n      ],\n      \"description\": \"Estrategias avanzadas de análisis retrosintético aplicadas a compuestos carbonílicos, incluyendo el concepto de umpolung y equivalentes sintéticos.\",\n      \"title\": \"Análisis Retrosintético de Compuestos Carbonílicos\"\n    }\n  ]\n}",
      "outputTokens": 2885,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "es-quimica-carbonilos-enolatos-1",
      "userPrompt": "\n    LANGUAGE: es\n    COURSE_TITLE: Química\n    CHAPTER_TITLE: Carbonilos y enolatos\n    CHAPTER_DESCRIPTION: Adición nucleofílica a carbonilos, química de enoles/enolatos, aldol, Claisen, Michael y control de selectividad.\nNEIGHBORING_CHAPTERS:\n- \"Sustitución y eliminación\": SN1/SN2, E1/E2, reactividad, solventes, nucleófilos/bases, rearrangements y control de selectividad.\n- \"Adiciones a alquenos y alquinos\": Hidrogenación, halogenación, hidratación, hidroboración-oxidación, adiciones conjugadas y química de alquinos.\n- \"Química aromática\": Aromaticidad, sustitución electrofílica/nucleofílica aromática, directores, y reactividad de sistemas aromáticos extendidos.\n- \"Ácidos carboxílicos y derivados\": Reactividad de ácidos carboxílicos, derivados acílicos, química de amidas/ésteres/anhídridos y estrategias de activación.\n- \"Heterociclos\": Síntesis y reactividad de heterociclos aromáticos y saturados; aplicaciones en fármacos y materiales.\n- \"Radicales y fotoquímica orgánica\": Mecanismos radicalarios, iniciación/propagación/terminación, selectividad, y reacciones fotoquímicas orgánicas.\n  "
    },
    {
      "duration": 21089.863417000015,
      "inputTokens": 3056,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"What is a Business Cycle\",\n        \"Business Cycle Phases: Expansion\",\n        \"Business Cycle Phases: Peak\",\n        \"Business Cycle Phases: Contraction\",\n        \"Business Cycle Phases: Trough\",\n        \"Business Cycle Duration\",\n        \"Amplitude of a Business Cycle\",\n        \"Asymmetry Between Expansions and Recessions\",\n        \"NBER Business Cycle Dating Methodology\"\n      ],\n      \"description\": \"The defining features of business cycles, including their phases, duration, amplitude, and how recessions and expansions are officially identified.\",\n      \"title\": \"Business Cycle Anatomy\"\n    },\n    {\n      \"concepts\": [\n        \"Trend vs. Cyclical Component of GDP\",\n        \"Hodrick-Prescott Filter\",\n        \"Band-Pass Filtering\",\n        \"Detrending Methods Comparison\",\n        \"Output Gap Definition\",\n        \"GDP Volatility\",\n        \"Procyclicality of Output Components\",\n        \"Durables vs. Nondurables Output Volatility\",\n        \"Relative Volatility of GDP Components\"\n      ],\n      \"description\": \"Statistical methods for decomposing output into trend and cyclical components, and the empirical properties of GDP fluctuations over the cycle.\",\n      \"title\": \"Measuring Output Fluctuations\"\n    },\n    {\n      \"concepts\": [\n        \"Inflation Over the Business Cycle\",\n        \"Procyclicality of Inflation\",\n        \"Lagging Behavior of Inflation\",\n        \"Price Level Behavior During Recessions\",\n        \"Countercyclical Behavior of the Price Level in Deep Recessions\",\n        \"Nominal vs. Real Wage Cyclicality\",\n        \"Wage Rigidity as a Stylized Fact\",\n        \"Real Wage Procyclicality Evidence\"\n      ],\n      \"description\": \"How inflation and wages behave across business cycle phases, including their timing relative to output and their cyclical properties.\",\n      \"title\": \"Inflation and Wages Over the Cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Unemployment Over the Business Cycle\",\n        \"Countercyclicality of Unemployment\",\n        \"Okun's Law\",\n        \"Okun's Coefficient\",\n        \"Labor Force Participation Cyclicality\",\n        \"Hours Worked vs. Employment Cyclicality\",\n        \"Procyclicality of Job Vacancies\",\n        \"Cyclical Unemployment Definition\"\n      ],\n      \"description\": \"The relationship between unemployment and output over the cycle, including Okun's Law and the behavior of key labor market aggregates.\",\n      \"title\": \"Unemployment Patterns in Business Cycles\"\n    },\n    {\n      \"concepts\": [\n        \"Aggregate Productivity Definition\",\n        \"Labor Productivity Over the Cycle\",\n        \"Procyclicality of Labor Productivity\",\n        \"Total Factor Productivity Cyclicality\",\n        \"Solow Residual and the Cycle\",\n        \"Labor Hoarding Phenomenon\",\n        \"Cyclical Utilization of Capital\",\n        \"Measured vs. True Productivity Fluctuations\"\n      ],\n      \"description\": \"How labor productivity and total factor productivity behave over the cycle, and why measured productivity may differ from true productivity.\",\n      \"title\": \"Productivity and the Business Cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Comovement Definition in Macroeconomics\",\n        \"Contemporaneous Correlation with GDP\",\n        \"Leading Indicators\",\n        \"Lagging Indicators\",\n        \"Coincident Indicators\",\n        \"Cross-Correlation Function\",\n        \"Persistence of Cyclical Fluctuations\",\n        \"Autocorrelation of GDP\",\n        \"Comovement of Consumption with Output\",\n        \"Comovement of Investment with Output\",\n        \"Comovement of Government Spending with Output\",\n        \"Comovement of Net Exports with Output\"\n      ],\n      \"description\": \"Statistical tools and empirical findings on how macroeconomic variables move together over the cycle, including leading, lagging, and coincident relationships.\",\n      \"title\": \"Comovement and Cyclical Correlations\"\n    },\n    {\n      \"concepts\": [\n        \"Sectoral Comovement Puzzle\",\n        \"Manufacturing Sector Cyclicality\",\n        \"Services Sector Cyclicality\",\n        \"Construction Sector Cyclicality\",\n        \"Durable Goods Sector Volatility\",\n        \"Nondurable Goods Sector Volatility\",\n        \"Inventory Investment Cyclicality\",\n        \"Procyclicality of Trade Credit\",\n        \"Comovement Across Countries\"\n      ],\n      \"description\": \"How different sectors of the economy move together during business cycles, and why broad sectoral comovement poses a challenge for economic models.\",\n      \"title\": \"Sectoral Patterns and Comovement\"\n    },\n    {\n      \"concepts\": [\n        \"Financial Variables as Leading Indicators\",\n        \"Credit Spread Cyclicality\",\n        \"Stock Market Cyclicality\",\n        \"Money Supply Cyclicality\",\n        \"Interest Rate Spread as a Recession Predictor\",\n        \"Corporate Profits Cyclicality\",\n        \"Business Confidence Indices\",\n        \"Consumer Sentiment Cyclicality\"\n      ],\n      \"description\": \"The cyclical behavior of financial and confidence-based variables, and their use as predictors of turning points in the business cycle.\",\n      \"title\": \"Financial and Confidence Indicators\"\n    },\n    {\n      \"concepts\": [\n        \"International Business Cycle Synchronization\",\n        \"Trade Linkages and Cycle Transmission\",\n        \"Common Shocks vs. Spillovers\",\n        \"Emerging Market Business Cycles\",\n        \"Greater Volatility in Developing Economies\",\n        \"Terms of Trade Cyclicality in Small Open Economies\",\n        \"Decoupling Hypothesis\"\n      ],\n      \"description\": \"How business cycles are synchronized or differ across countries, and the mechanisms that transmit fluctuations internationally.\",\n      \"title\": \"International Dimensions of Business Cycles\"\n    }\n  ]\n}",
      "outputTokens": 1104,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-economics-business-cycles-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Economics\n    CHAPTER_TITLE: Business cycles\n    CHAPTER_DESCRIPTION: Business cycle facts, stylized patterns in output, inflation, unemployment, productivity, and comovements across sectors.\nNEIGHBORING_CHAPTERS:\n- \"Behavioral economics\": Behavioral biases, bounded rationality, time inconsistency, social preferences, and policy design with behavioral responses.\n- \"Experimental economics\": Laboratory and field experiments, incentive design, external validity, and behavioral/market design evidence.\n- \"Macroeconomic accounting\": National income and product accounts, sectoral balances, price indices, productivity, and flow-of-funds concepts.\n- \"Consumption and savings\": Consumption-saving, life-cycle and permanent income models, liquidity constraints, and empirical puzzles.\n- \"Investment and capital\": Investment theory, q-models, adjustment costs, irreversibility, and firm-level investment dynamics.\n- \"Unemployment and labor in macro\": Labor markets in macro, search and matching, wage setting, unemployment dynamics, and Beveridge curve analysis.\n  "
    },
    {
      "duration": 23774.91416700001,
      "inputTokens": 3206,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"O que é Arquitetura Evolutiva\",\n        \"Arquitetura Planejada vs. Arquitetura Emergente\",\n        \"Arquitetura como Decisão Contínua\",\n        \"Custo de Mudança Arquitetural ao Longo do Tempo\",\n        \"Reversibilidade de Decisões Arquiteturais\",\n        \"Princípio do Último Momento Responsável\",\n        \"Arquitetura Incremental\"\n      ],\n      \"description\": \"O conceito de arquitetura evolutiva e como as decisões arquiteturais se adaptam a mudanças frequentes em contextos ágeis.\",\n      \"title\": \"Arquitetura Evolutiva\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Modularidade\",\n        \"Módulo como Unidade de Implantação\",\n        \"Módulo como Unidade de Desenvolvimento\",\n        \"Granularidade de Módulos\",\n        \"Encapsulamento de Módulos\",\n        \"Alta Coesão\",\n        \"Baixo Acoplamento\",\n        \"Acoplamento Aferente e Eferente\"\n      ],\n      \"description\": \"Os princípios estruturais de modularidade, coesão e acoplamento que sustentam sistemas capazes de evoluir sem degradação.\",\n      \"title\": \"Modularidade, Coesão e Acoplamento\"\n    },\n    {\n      \"concepts\": [\n        \"Tipos de Acoplamento (Temporal, Espacial, por Dados)\",\n        \"Acoplamento por Implementação\",\n        \"Acoplamento por Interface\",\n        \"Connascence como Medida de Acoplamento\",\n        \"Connascence Estática vs. Dinâmica\",\n        \"Coesão Funcional\",\n        \"Coesão Sequencial\",\n        \"Coesão Comunicacional\"\n      ],\n      \"description\": \"Formas específicas de acoplamento e coesão que surgem em sistemas de software e como identificá-las no design.\",\n      \"title\": \"Tipos de Acoplamento e Coesão\"\n    },\n    {\n      \"concepts\": [\n        \"O que são Fitness Functions\",\n        \"Fitness Functions Atômicas\",\n        \"Fitness Functions Holísticas\",\n        \"Fitness Functions Automatizadas\",\n        \"Fitness Functions Manuais\",\n        \"Fitness Functions Estáticas vs. Dinâmicas\",\n        \"Fitness Functions como Guardiãs da Arquitetura\",\n        \"Ciclo de Vida de uma Fitness Function\"\n      ],\n      \"description\": \"O conceito de fitness functions como mecanismo de verificação contínua de propriedades arquiteturais desejadas.\",\n      \"title\": \"Fitness Functions\"\n    },\n    {\n      \"concepts\": [\n        \"Fitness Function para Acoplamento entre Módulos\",\n        \"Fitness Function para Cobertura de Dependências\",\n        \"Fitness Function para Latência\",\n        \"Fitness Function para Escalabilidade\",\n        \"Fitness Function para Segurança Estrutural\",\n        \"Mapeamento de Características Arquiteturais para Fitness Functions\",\n        \"Evolução das Fitness Functions com o Produto\"\n      ],\n      \"description\": \"Como definir e aplicar fitness functions concretas para características arquiteturais específicas de um sistema.\",\n      \"title\": \"Aplicação de Fitness Functions\"\n    },\n    {\n      \"concepts\": [\n        \"O que são Registros de Decisão Arquitetural (ADRs)\",\n        \"Estrutura de um ADR\",\n        \"Status de uma Decisão Arquitetural\",\n        \"Contexto de uma Decisão Arquitetural\",\n        \"Consequências de uma Decisão Arquitetural\",\n        \"Rastreabilidade de Decisões\",\n        \"ADRs em Repositórios de Código\"\n      ],\n      \"description\": \"Como documentar e rastrear decisões arquiteturais usando Architecture Decision Records (ADRs) de forma leve e mantível.\",\n      \"title\": \"Registro de Decisões Arquiteturais (ADRs)\"\n    },\n    {\n      \"concepts\": [\n        \"Critérios para Tomada de Decisão Arquitetural\",\n        \"Trade-offs Arquiteturais\",\n        \"Decisões Reversíveis vs. Irreversíveis\",\n        \"Priorização de Atributos de Qualidade\",\n        \"Comunicação de Decisões para o Time\",\n        \"Revisão e Revisão de Decisões Anteriores\",\n        \"Decisões Arquiteturais Colaborativas\"\n      ],\n      \"description\": \"O processo de tomar, comunicar e revisar decisões arquiteturais em times ágeis considerando trade-offs e contexto de negócio.\",\n      \"title\": \"Processo de Decisão Arquitetural\"\n    },\n    {\n      \"concepts\": [\n        \"O que são Características Arquiteturais (Ilities)\",\n        \"Escalabilidade como Característica Arquitetural\",\n        \"Manutenibilidade como Característica Arquitetural\",\n        \"Testabilidade como Característica Arquitetural\",\n        \"Implantabilidade como Característica Arquitetural\",\n        \"Observabilidade como Característica Arquitetural\",\n        \"Extensibilidade como Característica Arquitetural\",\n        \"Priorização de Características Arquiteturais\"\n      ],\n      \"description\": \"As principais características de qualidade (ilities) que guiam decisões arquiteturais em produtos que mudam frequentemente.\",\n      \"title\": \"Características Arquiteturais em Contextos Ágeis\"\n    },\n    {\n      \"concepts\": [\n        \"Monólito Modular\",\n        \"Separação por Domínio de Negócio\",\n        \"Strangler Fig Pattern\",\n        \"Branch by Abstraction\",\n        \"Parallel Run Pattern\",\n        \"Migração Incremental de Componentes\"\n      ],\n      \"description\": \"Padrões arquiteturais que permitem evoluir sistemas existentes de forma incremental sem grandes reescritas.\",\n      \"title\": \"Padrões para Evolução de Sistemas\"\n    },\n    {\n      \"concepts\": [\n        \"Componentes Independentemente Implantáveis\",\n        \"Fronteiras de Contexto (Bounded Contexts)\",\n        \"Anti-Corruption Layer\",\n        \"Contrato entre Componentes\",\n        \"Versionamento de Contratos\",\n        \"Tolerância a Falhas entre Componentes\",\n        \"Coexistência de Versões\"\n      ],\n      \"description\": \"Como definir e manter fronteiras claras entre componentes para permitir mudanças independentes e seguras.\",\n      \"title\": \"Fronteiras e Contratos entre Componentes\"\n    },\n    {\n      \"concepts\": [\n        \"Papel do Arquiteto em Times Ágeis\",\n        \"Arquiteto como Habilitador\",\n        \"Decisões Arquiteturais Distribuídas no Time\",\n        \"Guardrails Arquiteturais\",\n        \"Autonomia com Alinhamento Arquitetural\",\n        \"Arquitetura como Prática Contínua do Time\",\n        \"Revisões Arquiteturais Leves\"\n      ],\n      \"description\": \"Como o papel da arquitetura e do arquiteto se transforma em times ágeis que valorizam autonomia e colaboração.\",\n      \"title\": \"Governança Arquitetural em Times Ágeis\"\n    }\n  ]\n}",
      "outputTokens": 1499,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-agile-arquitetura-agil-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Metodologias Ágeis\n    CHAPTER_TITLE: Arquitetura em ambientes ágeis\n    CHAPTER_DESCRIPTION: Arquitetura evolutiva, modularidade, acoplamento/cohesão, fitness functions e decisões arquiteturais compatíveis com mudanças frequentes.\nNEIGHBORING_CHAPTERS:\n- \"Discovery e Delivery integrados\": Dual Track (Discovery/Delivery), discovery contínuo, e prevenção de 'teatro ágil' com entrega sem aprendizado.\n- \"DevOps e entrega contínua\": DevOps: colaboração Dev+Ops, automação, pipelines, IaC, e redução de handoffs para acelerar e estabilizar entregas.\n- \"SRE e confiabilidade em produtos digitais\": SRE: SLIs/SLOs, error budget, confiabilidade como requisito, e equilíbrio entre velocidade e estabilidade.\n- \"Dívida técnica e sustentabilidade\": Gestão de dívida técnica, qualidade interna, refatoração estratégica, e mecanismos de priorização junto ao valor de negócio.\n- \"Estratégias modernas de testes\": Qualidade e testes: pirâmide de testes, testes automatizados, testes exploratórios, e estratégias para sistemas distribuídos.\n- \"Segurança e DevSecOps\": Segurança no ciclo ágil: threat modeling, DevSecOps, shift-left, gestão de vulnerabilidades e resposta a incidentes.\n  "
    },
    {
      "duration": 23307.538542000024,
      "inputTokens": 3164,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"What is Alchemy\",\n        \"Alchemy as Protoscience\",\n        \"Transmutation of Metals\",\n        \"The Four Classical Elements in Alchemy\",\n        \"The Prima Materia\",\n        \"The Philosopher's Stone as Alchemical Goal\",\n        \"The Elixir of Life\",\n        \"Historical Alchemists (Paracelsus, Flamel)\"\n      ],\n      \"description\": \"The foundational principles of alchemy as a historical and symbolic discipline, including its goals, materials, and key figures.\",\n      \"title\": \"Foundations of Alchemy\"\n    },\n    {\n      \"concepts\": [\n        \"Nicolas Flamel in History\",\n        \"Nicolas Flamel in Harry Potter\",\n        \"The Philosopher's Stone in the Novel\",\n        \"Properties of the Philosopher's Stone\",\n        \"The Stone as Symbol of Perfection\",\n        \"Transformation vs. Corruption Symbolism\",\n        \"The Stone's Destruction as Moral Act\"\n      ],\n      \"description\": \"The Philosopher's Stone as both a literal object in the narrative and a rich symbol drawn from alchemical tradition.\",\n      \"title\": \"The Philosopher's Stone\"\n    },\n    {\n      \"concepts\": [\n        \"Immortality as a Human Desire\",\n        \"Immortality Myths Across Cultures\",\n        \"The Cost of Unnatural Long Life\",\n        \"Flamel's Extended Life as Cautionary Tale\",\n        \"Dumbledore's View on Death\",\n        \"Death as the Next Great Adventure\",\n        \"The Deathly Hallows and Immortality\",\n        \"The Resurrection Stone vs. True Immortality\"\n      ],\n      \"description\": \"How the Harry Potter series engages with universal myths about immortality, framing death not as an enemy but as a natural boundary.\",\n      \"title\": \"Immortality Myths and the Fear of Death\"\n    },\n    {\n      \"concepts\": [\n        \"What is a Horcrux\",\n        \"The Word 'Horcrux' and Its Etymology\",\n        \"How a Horcrux is Created\",\n        \"Murder as the Act of Soul-Splitting\",\n        \"The Soul in Wizarding Metaphysics\",\n        \"What Happens to the Soul After Splitting\",\n        \"Horcruxes as Dark Magic Objects\"\n      ],\n      \"description\": \"The metaphysical mechanics behind Horcruxes: what they are, how they are made, and what they mean for the soul in the wizarding world.\",\n      \"title\": \"Horcrux Mechanics\"\n    },\n    {\n      \"concepts\": [\n        \"Voldemort's First Horcrux (Tom Riddle's Diary)\",\n        \"Marvolo Gaunt's Ring as Horcrux\",\n        \"Slytherin's Locket as Horcrux\",\n        \"Hufflepuff's Cup as Horcrux\",\n        \"Ravenclaw's Diadem as Horcrux\",\n        \"Nagini as a Living Horcrux\",\n        \"Harry Potter as an Unintentional Horcrux\",\n        \"Voldemort's Seven-Part Soul Plan\"\n      ],\n      \"description\": \"Each of Voldemort's seven Horcruxes, their identities, and the deliberate symbolism behind his choice of objects and number.\",\n      \"title\": \"Voldemort's Horcruxes\"\n    },\n    {\n      \"concepts\": [\n        \"Physical Deterioration from Soul Loss\",\n        \"Emotional Numbness from Soul Fragmentation\",\n        \"Loss of Humanity as a Consequence\",\n        \"Voldemort's Inability to Love\",\n        \"Voldemort's Fear of Death vs. Acceptance\",\n        \"Unicorn Blood and Cursed Half-Life\",\n        \"The Diminished Wraith Form of Voldemort\"\n      ],\n      \"description\": \"The personal and metaphysical costs Voldemort pays for fragmenting his soul, including loss of humanity, emotional capacity, and physical form.\",\n      \"title\": \"Costs of Soul Fragmentation\"\n    },\n    {\n      \"concepts\": [\n        \"What is a Shade or Wraith Form\",\n        \"Voldemort's Existence Between Deaths\",\n        \"Possession as a Consequence of Incorporeality\",\n        \"Quirrell as Possessed Host\",\n        \"The Diary Horcrux as a Memory Shade\",\n        \"Difference Between Ghost and Horcrux Fragment\"\n      ],\n      \"description\": \"The nature of partial or incorporeal existence that results from extreme soul damage, as seen through Voldemort's various diminished states.\",\n      \"title\": \"Diminished and Incorporeal Existence\"\n    },\n    {\n      \"concepts\": [\n        \"Destroying a Horcrux\",\n        \"Basilisk Venom as a Destructive Agent\",\n        \"Fiendfyre as a Destructive Agent\",\n        \"The Sword of Gryffindor's Role\",\n        \"Why Horcruxes Are Difficult to Destroy\",\n        \"What Happens When All Horcruxes Are Destroyed\",\n        \"True Death as Restoration of Natural Order\"\n      ],\n      \"description\": \"The methods and logic behind destroying Horcruxes, and what their destruction means for the soul and for Voldemort's mortality.\",\n      \"title\": \"Destroying Horcruxes\"\n    },\n    {\n      \"concepts\": [\n        \"Alchemy as Narrative Framework in Harry Potter\",\n        \"J.K. Rowling's Use of Alchemical Symbolism\",\n        \"Nigredo, Albedo, and Rubedo Stages\",\n        \"Harry's Arc as Alchemical Transformation\",\n        \"Gold as Symbol of Moral Purity\",\n        \"Lead as Symbol of Moral Corruption\",\n        \"Alchemy and the Theme of Sacrifice\"\n      ],\n      \"description\": \"How classical alchemical symbolism structures the Harry Potter series thematically, mapping the stages of alchemical transformation onto character arcs and moral themes.\",\n      \"title\": \"Alchemy as Symbolic Framework in the Series\"\n    }\n  ]\n}",
      "outputTokens": 1143,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-harry-potter-alchemy-horcruxes-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Harry Potter\n    CHAPTER_TITLE: Alchemy, Horcruxes, and immortality\n    CHAPTER_DESCRIPTION: Alchemy, immortality myths, and the Philosopher's Stone as symbol. Horcrux metaphysics and the costs of soul fragmentation.\nNEIGHBORING_CHAPTERS:\n- \"Defense Against the Dark Arts\": Defense curriculum across eras and how teaching reflects politics. Practical spell selection, threat models, and the pedagogy of fear.\n- \"Divination and prophecy\": Divination's ambiguity, self-fulfilling prophecy, and narrative foreshadowing. Symbol systems: tea leaves, dreams, centaurs, and astronomy.\n- \"Mind magic and memory\": Mind magic: Legilimency, Occlumency, memory charms, and Pensieve ethics. Consent, epistemology, and the reliability of recollection.\n- \"Wandlore\": Wand woods, cores, allegiance, and the Elder Wand's legend. Comparative magical foci and what wandlore implies about power and identity.\n- \"Healing and magical medicine\": Magical healing, St Mungo's, and the boundaries of restorative magic. Disability, trauma, and long-term consequences in the series.\n- \"Beings, creatures, and species politics\": Werewolves, vampires, giants, goblins, house-elves, centaurs, and merpeople as political subjects. Rights, stereotypes, and allegory across species.\n  "
    },
    {
      "duration": 26839.344458000007,
      "inputTokens": 3274,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"O que é automação jurídica\",\n        \"Tipos de automação em escritórios de advocacia\",\n        \"Automação em departamentos jurídicos internos\",\n        \"Benefícios da automação para produtividade jurídica\",\n        \"Limitações da automação no contexto jurídico\"\n      ],\n      \"description\": \"O que é automação jurídica, onde ela se aplica e quais são seus benefícios e limitações no contexto de escritórios e departamentos jurídicos.\",\n      \"title\": \"Fundamentos de Automação Jurídica\"\n    },\n    {\n      \"concepts\": [\n        \"O que é um template jurídico\",\n        \"Estrutura de um template de contrato\",\n        \"Campos variáveis em templates\",\n        \"Cláusulas fixas versus cláusulas parametrizáveis\",\n        \"Hierarquia de templates em uma biblioteca documental\",\n        \"Versionamento de templates\"\n      ],\n      \"description\": \"Conceitos fundamentais sobre templates jurídicos, sua estrutura, componentes variáveis e fixos, e como organizá-los em uma biblioteca documental.\",\n      \"title\": \"Templates Jurídicos\"\n    },\n    {\n      \"concepts\": [\n        \"Ferramentas de geração automática de documentos\",\n        \"Lógica condicional em templates\",\n        \"Preenchimento automático de campos\",\n        \"Mesclagem de dados em documentos jurídicos\",\n        \"Geração em lote de documentos\",\n        \"Integração de templates com sistemas de gestão\"\n      ],\n      \"description\": \"Como funcionam as ferramentas de automação documental e os mecanismos técnicos usados para gerar documentos jurídicos automaticamente a partir de templates.\",\n      \"title\": \"Geração Automática de Documentos\"\n    },\n    {\n      \"concepts\": [\n        \"O que é revisão assistida por tecnologia (TAR)\",\n        \"Revisão preditiva de documentos\",\n        \"Revisão baseada em palavras-chave\",\n        \"Revisão baseada em conceitos\",\n        \"Treinamento de modelos de revisão assistida\",\n        \"Validação de resultados em revisão assistida\",\n        \"Revisão contínua ativa (CAL)\"\n      ],\n      \"description\": \"Técnicas e ferramentas de revisão assistida por tecnologia aplicadas a documentos jurídicos, incluindo revisão preditiva, por palavras-chave e por conceitos.\",\n      \"title\": \"Revisão Assistida por Tecnologia\"\n    },\n    {\n      \"concepts\": [\n        \"O que é padronização documental\",\n        \"Padrões de formatação em documentos jurídicos\",\n        \"Guias de estilo jurídico\",\n        \"Nomenclatura padronizada de cláusulas\",\n        \"Glossários jurídicos internos\",\n        \"Padronização de assinaturas e rodapés\",\n        \"Consistência terminológica em documentos\"\n      ],\n      \"description\": \"Princípios e práticas de padronização documental no contexto jurídico, desde formatação até terminologia e nomenclatura de cláusulas.\",\n      \"title\": \"Padronização de Documentos Jurídicos\"\n    },\n    {\n      \"concepts\": [\n        \"O que é gestão documental jurídica\",\n        \"Ciclo de vida de um documento jurídico\",\n        \"Taxonomia e categorização de documentos\",\n        \"Metadados em documentos jurídicos\",\n        \"Indexação e busca de documentos\",\n        \"Políticas de retenção de documentos\",\n        \"Descarte seguro de documentos jurídicos\"\n      ],\n      \"description\": \"Gestão do ciclo de vida completo de documentos jurídicos, incluindo taxonomia, metadados, indexação, retenção e descarte.\",\n      \"title\": \"Gestão Documental Jurídica\"\n    },\n    {\n      \"concepts\": [\n        \"O que é controle de versões em documentos jurídicos\",\n        \"Numeração de versões de documentos\",\n        \"Rastreamento de alterações em documentos\",\n        \"Comparação entre versões de documentos\",\n        \"Histórico de edições e autoria\",\n        \"Bloqueio e aprovação de versões finais\",\n        \"Ferramentas de controle de versões para documentos jurídicos\"\n      ],\n      \"description\": \"Práticas e ferramentas de controle de versões aplicadas a documentos jurídicos, desde numeração e rastreamento de alterações até aprovação de versões finais.\",\n      \"title\": \"Controle de Versões de Documentos\"\n    },\n    {\n      \"concepts\": [\n        \"Riscos de erros em documentos automatizados\",\n        \"Risco de desatualização de templates\",\n        \"Risco de uso inadequado de template por usuário\",\n        \"Risco de dados incorretos em campos variáveis\",\n        \"Responsabilidade profissional em documentos automatizados\",\n        \"Supervisão humana obrigatória em automação jurídica\",\n        \"Auditoria de documentos gerados automaticamente\"\n      ],\n      \"description\": \"Principais riscos associados à automação de documentos jurídicos e as medidas de controle e supervisão necessárias para mitigá-los.\",\n      \"title\": \"Riscos da Automação Documental\"\n    },\n    {\n      \"concepts\": [\n        \"O que é governança de conhecimento jurídico\",\n        \"Repositório central de conhecimento jurídico\",\n        \"Curadoria de precedentes internos\",\n        \"Atualização e manutenção de bases de conhecimento\",\n        \"Acesso controlado ao conhecimento jurídico\",\n        \"Compartilhamento de conhecimento entre equipes\",\n        \"Métricas de uso do repositório de conhecimento\"\n      ],\n      \"description\": \"Estruturação e manutenção de repositórios de conhecimento jurídico, incluindo curadoria, atualização, controle de acesso e compartilhamento entre equipes.\",\n      \"title\": \"Governança de Conhecimento Jurídico\"\n    },\n    {\n      \"concepts\": [\n        \"Checklist de qualidade documental\",\n        \"Revisão por pares de documentos jurídicos\",\n        \"Aprovação em múltiplos níveis de documentos\",\n        \"Auditoria periódica de templates\",\n        \"Indicadores de qualidade documental\",\n        \"Feedback loop na melhoria de templates\",\n        \"Processo de homologação de novos templates\"\n      ],\n      \"description\": \"Processos e mecanismos de controle de qualidade aplicados a documentos jurídicos automatizados, desde checklists e revisão por pares até auditorias e indicadores.\",\n      \"title\": \"Controle de Qualidade Documental\"\n    },\n    {\n      \"concepts\": [\n        \"Fluxos de aprovação documental automatizados\",\n        \"Trilhas de auditoria em sistemas documentais\",\n        \"Conformidade regulatória em gestão documental\",\n        \"LGPD aplicada a documentos jurídicos\",\n        \"Armazenamento seguro de documentos jurídicos\",\n        \"Acesso baseado em perfis e permissões\",\n        \"Retenção de documentos conforme obrigações legais\"\n      ],\n      \"description\": \"Requisitos de conformidade regulatória e segurança que devem ser observados na gestão e automação de documentos jurídicos.\",\n      \"title\": \"Conformidade e Segurança Documental\"\n    },\n    {\n      \"concepts\": [\n        \"Mapeamento de processos para automação jurídica\",\n        \"Critérios de priorização de automação\",\n        \"Implementação gradual de automação jurídica\",\n        \"Gestão da mudança na adoção de legal tech\",\n        \"Treinamento de equipes em ferramentas de automação\",\n        \"Avaliação de retorno sobre investimento em automação\",\n        \"Seleção de ferramentas de legal tech para automação\"\n      ],\n      \"description\": \"Como planejar, priorizar e implementar projetos de automação jurídica, incluindo mapeamento de processos, gestão da mudança e avaliação de resultados.\",\n      \"title\": \"Implementação de Projetos de Automação Jurídica\"\n    }\n  ]\n}",
      "outputTokens": 1691,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-direito-legal-tech-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Direito\n    CHAPTER_TITLE: Legal tech e automação de documentos\n    CHAPTER_DESCRIPTION: Automação jurídica e qualidade: templates, revisão assistida, gestão documental e padronização. Riscos de automação, controle de versões e governança de conhecimento.\nNEIGHBORING_CHAPTERS:\n- \"Gestão de terceiros e due diligence\": Programas de integridade em terceiros: due diligence, cláusulas anticorrupção e monitoramento. Gestão de contratos, auditoria e encerramento por inadimplemento de compliance.\n- \"Estratégia contenciosa e gestão de disputas\": Estratégia de litígio: seleção de teses, definição de foro, gestão de portfólio e negociação de acordos. Monitoramento de precedentes, risco financeiro e comunicação com stakeholders.\n- \"Legal operations e gestão jurídica\": Gestão de escritórios e departamentos jurídicos: triagem, SLAs, indicadores e orçamento. Precificação, honorários, contratação de correspondentes e qualidade.\n- \"Operações contratuais\": Gestão de contratos: ciclo de vida, cláusulas padrão, aprovações e controle de obrigações. CLM, auditoria contratual e prevenção de disputas.\n- \"Negociação estratégica\": Negociação e mediação avançadas: BATNA, ZOPA, técnicas de influência e gestão de impasses. Construção de acordos complexos e multiparte.\n- \"Advocacia oral e persuasão\": Oratória e atuação em audiência: teoria do caso, exame e contrainterrogatório, sustentação oral e postura profissional. Comunicação com juízes, jurados e peritos.\n  "
    },
    {
      "duration": 63200.91841600003,
      "inputTokens": 3096,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Miasma Theory in 19th-Century Brazil\",\n        \"Humoralism in Brazilian Colonial Medicine\",\n        \"Folk Medicine Practices in Rural Brazil\",\n        \"Empiricist Healers and Unlicensed Practitioners\",\n        \"Catholic Church Role in Colonial Healthcare\",\n        \"Santa Casa de Misericórdia Hospitals\",\n        \"Barber-Surgeons in Brazilian Society\"\n      ],\n      \"description\": \"Medical knowledge, institutions, and practitioners that defined healthcare in Brazil before the consolidation of modern biomedicine.\",\n      \"title\": \"Colonial and 19th-Century Medical Landscape\"\n    },\n    {\n      \"concepts\": [\n        \"Yellow Fever Arrival in Brazil\",\n        \"Yellow Fever Mortality in Rio de Janeiro\",\n        \"Yellow Fever as a Barrier to European Immigration\",\n        \"Cholera Epidemic of 1855\",\n        \"Smallpox Endemicity in Brazil\",\n        \"Bubonic Plague in Santos (1899)\",\n        \"Malaria in the Amazon Basin\"\n      ],\n      \"description\": \"The major epidemic diseases that struck Brazil from the mid-19th century onward and their demographic and social consequences.\",\n      \"title\": \"19th-Century Epidemics\"\n    },\n    {\n      \"concepts\": [\n        \"Creation of the Junta de Higiene Pública\",\n        \"Inspection of Port Health in Imperial Brazil\",\n        \"Imperial Medical Faculties of Bahia and Rio de Janeiro\",\n        \"Medicalization of Brazilian Society\",\n        \"Professionalization of Medicine in the Empire\",\n        \"Hygienism as Social Reform Ideology\"\n      ],\n      \"description\": \"The institutional frameworks and professional structures through which the Brazilian state began to govern public health during the Empire.\",\n      \"title\": \"Imperial Public Health Institutions\"\n    },\n    {\n      \"concepts\": [\n        \"Oswaldo Cruz Biography\",\n        \"Federal Serum Therapy Institute (Manguinhos)\",\n        \"Bacteriological Revolution in Brazil\",\n        \"Brazilian School of Tropical Medicine\",\n        \"Emílio Ribas and Yellow Fever Control in São Paulo\",\n        \"Adolfo Lutz and Sanitary Bacteriology\",\n        \"Instituto Butantan Founding\"\n      ],\n      \"description\": \"The emergence of Brazilian biomedical science at the turn of the 20th century, centered on Manguinhos and key scientific figures.\",\n      \"title\": \"Birth of Brazilian Biomedical Science\"\n    },\n    {\n      \"concepts\": [\n        \"Rio de Janeiro Sanitation Reform (1902–1906)\",\n        \"Pereira Passos Urban Renovation and Health\",\n        \"Yellow Fever Eradication Campaign in Rio\",\n        \"Compulsory Vaccination Law of 1904\",\n        \"Vaccine Revolt (Revolta da Vacina) Causes\",\n        \"Vaccine Revolt Social Dynamics\",\n        \"Forced Removal of Poor Populations During Sanitation\"\n      ],\n      \"description\": \"The sweeping but coercive sanitation campaigns in early 20th-century Rio de Janeiro and the popular resistance they provoked.\",\n      \"title\": \"Sanitation Reform and the Vaccine Revolt\"\n    },\n    {\n      \"concepts\": [\n        \"Spanish Flu Arrival in Brazil (1918)\",\n        \"Spanish Flu Mortality in Brazilian Cities\",\n        \"Government Response to the Spanish Flu\",\n        \"President Rodrigues Alves and the Pandemic\",\n        \"Social Class Disparities in Spanish Flu Deaths\",\n        \"Memory and Forgetting of the Spanish Flu in Brazil\"\n      ],\n      \"description\": \"The 1918 influenza pandemic's impact on Brazil, state responses, and how the event was absorbed—and largely forgotten—in public memory.\",\n      \"title\": \"The 1918 Influenza Pandemic in Brazil\"\n    },\n    {\n      \"concepts\": [\n        \"Carlos Chagas Discovery of Chagas Disease\",\n        \"Trypanosoma cruzi Life Cycle\",\n        \"Barbeiro (Triatomine Bug) as Vector\",\n        \"Geographic Distribution of Chagas Disease in Brazil\",\n        \"Chagas Disease as a Disease of the Poor\",\n        \"Rockefeller Foundation Influence on Brazilian Public Health\",\n        \"Ruralism vs. Urbanism Debate in Brazilian Health Policy\"\n      ],\n      \"description\": \"The discovery of Chagas disease and its implications for debates about Brazilian national identity, poverty, and the health of the rural population.\",\n      \"title\": \"Chagas Disease and the Rural Health Question\"\n    },\n    {\n      \"concepts\": [\n        \"Vargas Era Centralization of Health Policy\",\n        \"Creation of the Ministry of Education and Health (1930)\",\n        \"Getúlio Vargas and the 'Healthy Worker' Ideology\",\n        \"National Department of Public Health\",\n        \"Occupational Health Legislation under Vargas\",\n        \"Eugenics Movement in Brazil\",\n        \"Racial Hygiene Debates in Brazilian Medicine\",\n        \"Sanitation and National Identity under Estado Novo\"\n      ],\n      \"description\": \"How the Vargas state reorganized public health as part of its nationalist and developmentalist project, including the role of eugenic thought.\",\n      \"title\": \"Vargas State and the Nationalization of Health\"\n    },\n    {\n      \"concepts\": [\n        \"SESP (Serviço Especial de Saúde Pública) Creation\",\n        \"US–Brazil Health Cooperation during World War II\",\n        \"Malaria Control Programs in the Amazon\",\n        \"DDT Use in Brazilian Malaria Campaigns\",\n        \"Global Eradication Campaigns and Brazil\",\n        \"Pan American Health Organization Relationship with Brazil\"\n      ],\n      \"description\": \"Brazil's engagement with international health agencies and bilateral programs, particularly around malaria and tropical disease control in mid-century.\",\n      \"title\": \"International Health Cooperation (1940s–1960s)\"\n    },\n    {\n      \"concepts\": [\n        \"INAMPS Creation and Social Security Medicine\",\n        \"Contributory vs. Non-Contributory Health Coverage\",\n        \"Dual Health System under Military Regime\",\n        \"Privatization of Hospital Services under the Dictatorship\",\n        \"Expansion of Medical Schools under the Military\",\n        \"National Sanitation Plan (PLANASA)\",\n        \"Meningitis Epidemic of 1974 and Government Censorship\"\n      ],\n      \"description\": \"Health policy under the military dictatorship, including the growth of a social-security-based medicine system and the concealment of health crises.\",\n      \"title\": \"Health Policy under the Military Dictatorship (1964–1985)\"\n    },\n    {\n      \"concepts\": [\n        \"Sanitarista Movement Origins\",\n        \"Sergio Arouca and Social Medicine\",\n        \"Collective Health (Saúde Coletiva) as Academic Field\",\n        \"Health Reform as Political Mobilization\",\n        \"8th National Health Conference (1986)\",\n        \"Health as a Social Right in the 1988 Constitution\",\n        \"Article 196 of the 1988 Constitution\"\n      ],\n      \"description\": \"The intellectual and political movement that fought for universal health as a right and shaped the constitutional foundations of the SUS.\",\n      \"title\": \"The Sanitary Reform Movement\"\n    },\n    {\n      \"concepts\": [\n        \"SUS (Sistema Único de Saúde) Creation (1990)\",\n        \"Principles of Universality in the SUS\",\n        \"Integrality Principle of the SUS\",\n        \"Decentralization of Health Services in the SUS\",\n        \"Municipalization of Health in Brazil\",\n        \"Unified Health System Funding Sources\",\n        \"NOB (Normas Operacionais Básicas) and SUS Regulation\"\n      ],\n      \"description\": \"The legal, organizational, and financial architecture of the Unified Health System created after the 1988 Constitution.\",\n      \"title\": \"SUS: Structure and Principles\"\n    },\n    {\n      \"concepts\": [\n        \"AIDS Epidemic Arrival in Brazil (1980s)\",\n        \"Initial Stigmatization of AIDS in Brazil\",\n        \"AIDS as 'Gay Cancer' Narrative\",\n        \"Brazilian AIDS Policy as Global Model\",\n        \"Free Antiretroviral Distribution Program\",\n        \"Compulsory Licensing of AIDS Drugs\",\n        \"Civil Society and NGOs in AIDS Response\",\n        \"GAPA and ABIA Activism\"\n      ],\n      \"description\": \"Brazil's AIDS epidemic from its stigmatized beginnings to the internationally recognized public health response built on free treatment and civil society engagement.\",\n      \"title\": \"The AIDS Epidemic and Brazil's Response\"\n    },\n    {\n      \"concepts\": [\n        \"Cholera Return to Brazil (1991)\",\n        \"Cholera Spread via Water Contamination\",\n        \"Meningococcal Disease Outbreaks\",\n        \"Dengue Fever Emergence in Brazil\",\n        \"Aedes aegypti Reintroduction\",\n        \"Dengue Serotypes and Hemorrhagic Dengue\",\n        \"Leptospirosis and Flooding Events\"\n      ],\n      \"description\": \"The resurgence and emergence of infectious diseases in late 20th-century Brazil, linked to urbanization, water access, and vector ecology.\",\n      \"title\": \"Re-emerging and Neglected Diseases (1980s–2000s)\"\n    },\n    {\n      \"concepts\": [\n        \"SUS Underfunding Problems\",\n        \"Dual Access: SUS vs. Private Health Plans\",\n        \"Supplementary Health Sector (Planos de Saúde)\",\n        \"ANS (National Supplementary Health Agency) Creation\",\n        \"Health Spending Inequality by Region\",\n        \"Northeast vs. Southeast Health Disparities\",\n        \"Indigenous Health as Distinct System (SESAI)\"\n      ],\n      \"description\": \"Structural inequalities within the Brazilian health system, including regional gaps, the private sector's role, and the inequitable distribution of services.\",\n      \"title\": \"Inequality and Dual Health System\"\n    },\n    {\n      \"concepts\": [\n        \"Family Health Program (PSF) Creation\",\n        \"Community Health Agents (ACS) Role\",\n        \"Primary Care Expansion under Lula Government\",\n        \"Mais Médicos Program (2013)\",\n        \"NASF (Núcleo de Apoio à Saúde da Família)\",\n        \"Health Outcomes Improvement Under PT Governments\",\n        \"Bolsa Família Health Conditionalities\"\n      ],\n      \"description\": \"The expansion of primary care through community-based models and government programs in the 2000s and early 2010s.\",\n      \"title\": \"Primary Care Expansion and the Family Health Strategy\"\n    },\n    {\n      \"concepts\": [\n        \"Zika Virus Emergence in Brazil (2015)\",\n        \"Aedes aegypti as Zika Vector\",\n        \"Zika and Microcephaly Link\",\n        \"Congenital Zika Syndrome\",\n        \"Geographic Concentration of Zika in the Northeast\",\n        \"Gender and Zika: Burden on Women\",\n        \"WHO Declaration of Global Health Emergency (2016)\",\n        \"Olympic Games and Zika Risk Debate\"\n      ],\n      \"description\": \"The Zika epidemic of 2015–2016, its devastating effects on newborns, the social inequalities it exposed, and its international dimensions.\",\n      \"title\": \"The Zika Epidemic (2015–2016)\"\n    },\n    {\n      \"concepts\": [\n        \"Austerity Amendment EC 95 (2016) and Health Spending Cap\",\n        \"Mais Médicos Program Termination and Cuban Doctors\",\n        \"SUS Chronic Underfunding After 2016\",\n        \"Dismantling of Health Surveillance Infrastructure\",\n        \"Privatization Through Social Health Organizations (OS)\",\n        \"Mental Health Policy Rollbacks\"\n      ],\n      \"description\": \"The retrenchment of public health capacity and funding under the post-2016 austerity agenda and its consequences for the SUS.\",\n      \"title\": \"Austerity and Health System Dismantling (2016–2019)\"\n    },\n    {\n      \"concepts\": [\n        \"COVID-19 First Cases in Brazil (2020)\",\n        \"Bolsonaro Government Denial of COVID Severity\",\n        \"Chloroquine Policy and Tratamento Precoce\",\n        \"Ministry of Health Leadership Turnover During Pandemic\",\n        \"Indigenous Communities and COVID-19 Vulnerability\",\n        \"Manaus Hospital Collapse and Oxygen Crisis\",\n        \"P.1 Gamma Variant Origin in Manaus\",\n        \"COVID-19 Mortality Inequality by Race\",\n        \"COVID-19 Excess Mortality Estimates\",\n        \"CPI da Covid Parliamentary Inquiry\",\n        \"Vaccine Procurement Delays in Brazil\"\n      ],\n      \"description\": \"Brazil's COVID-19 pandemic experience, including governmental denial, the emergence of the Gamma variant, catastrophic regional crises, and racially unequal death tolls.\",\n      \"title\": \"COVID-19 Pandemic in Brazil\"\n    },\n    {\n      \"concepts\": [\n        \"Butantan Institute and CoronaVac\",\n        \"Fiocruz and AstraZeneca Vaccine Production\",\n        \"National Immunization Program (PNI) Historical Success\",\n        \"COVID-19 Vaccine Rollout Timeline in Brazil\",\n        \"Vaccine Hesitancy and Anti-Vaccine Discourse\",\n        \"Doria vs. Bolsonaro Vaccine Dispute\",\n        \"Vaccination Coverage Gaps in Remote Areas\"\n      ],\n      \"description\": \"Brazil's vaccine production capacity, the politics of COVID-19 immunization, and the tensions between federal authority and state-level initiatives.\",\n      \"title\": \"Vaccines and Immunization Politics\"\n    },\n    {\n      \"concepts\": [\n        \"Race and Health Disparities in Brazil\",\n        \"Black Population Mortality Rates in Childbirth\",\n        \"Structural Racism in SUS Access\",\n        \"Quilombola Communities and Healthcare Access\",\n        \"Gender and Reproductive Health Policy\",\n        \"Abortion Illegality and Clandestine Procedures\",\n        \"LGBTQ+ Health Needs and SUS\",\n        \"Mental Health Reform (Lei da Reforma Psiquiátrica 2001)\"\n      ],\n      \"description\": \"How race, gender, and sexuality structure health outcomes and access to care within the Brazilian public health system.\",\n      \"title\": \"Race, Gender, and Health Inequalities\"\n    },\n    {\n      \"concepts\": [\n        \"Neglected Tropical Diseases in Brazil (Overview)\",\n        \"Leishmaniasis in Brazil\",\n        \"Schistosomiasis (Esquistossomose) Endemic Zones\",\n        \"Tuberculosis as a Disease of Poverty\",\n        \"Leprosy (Hanseníase) Elimination Efforts\",\n        \"Vaccine-Preventable Disease Resurgence (Measles 2018–2019)\",\n        \"One Health Approach and Zoonoses in Brazil\"\n      ],\n      \"description\": \"The persistent burden of neglected and poverty-linked diseases in Brazil, their geographic and social distribution, and ongoing control efforts.\",\n      \"title\": \"Neglected Diseases and Persistent Burdens\"\n    }\n  ]\n}",
      "outputTokens": 2882,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-brazilian-history-health-disease-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Brazilian History\n    CHAPTER_TITLE: Health and disease\n    CHAPTER_DESCRIPTION: Public health, epidemics, health systems, and biomedical politics from the 19th century to COVID-19; sanitation campaigns and inequality.\nNEIGHBORING_CHAPTERS:\n- \"Sports and society\": Football history, race and class in sport, club cultures, mega-events, and stadium politics; sport as national narrative.\n- \"Cities and urban inequality\": Urbanization, housing, sanitation, policing, and informal settlements; favelas, segregation, and metropolitan governance.\n- \"Environmental history and the Amazon\": Amazon, Cerrado, and Atlantic Forest histories: extraction, conservation, Indigenous stewardship, climate politics, and environmental governance.\n- \"Military and national security\": Professionalization of the armed forces, coups, doctrine, and defense policy; civil-military relations in democracy.\n- \"Foreign policy and international relations\": Diplomacy from empire to present: borders, regional leadership, multilateralism, South–South ties, and great-power relations.\n- \"Historiography and public memory\": How Brazil's past is narrated and contested: schools, monuments, museums, reparations debates, transitional justice, and public history.\n  "
    }
  ],
  "taskId": "chapter-lessons"
}
