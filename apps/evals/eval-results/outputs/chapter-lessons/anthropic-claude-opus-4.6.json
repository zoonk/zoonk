{
  "generatedAt": "2026-03-01T01:41:17.509Z",
  "modelId": "anthropic/claude-opus-4.6",
  "outputs": [
    {
      "duration": 32048.944833999994,
      "inputTokens": 3072,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"What is a Network\",\n        \"Packets as the Unit of Communication\",\n        \"The OSI Model Overview\",\n        \"The TCP/IP Model Overview\",\n        \"Network Layers vs Abstraction\",\n        \"Encapsulation of Data Across Layers\"\n      ],\n      \"description\": \"Core networking concepts including how data is organized into packets and transmitted across layered network models. How encapsulation works as data passes through each layer of the stack.\",\n      \"title\": \"Network Models and Packet Communication\"\n    },\n    {\n      \"concepts\": [\n        \"What is an IP Address\",\n        \"IPv4 Address Format\",\n        \"IPv4 Address Space Limits\",\n        \"IPv6 Address Format\",\n        \"Public IP Addresses\",\n        \"Private IP Addresses\",\n        \"Loopback Address\",\n        \"Subnet Masks\",\n        \"CIDR Notation\",\n        \"Calculating Hosts in a Subnet\"\n      ],\n      \"description\": \"How devices are identified on networks using IP addresses. IPv4 and IPv6 formats, the distinction between public and private addresses, and how subnetting divides networks into manageable blocks.\",\n      \"title\": \"IP Addressing\"\n    },\n    {\n      \"concepts\": [\n        \"What is a Port Number\",\n        \"Well-Known Ports\",\n        \"Ephemeral Ports\",\n        \"Socket as IP Plus Port\",\n        \"Port Conflicts on Localhost\"\n      ],\n      \"description\": \"How port numbers identify specific services on a host, the role of well-known and ephemeral ports, and how sockets combine an IP address with a port to form a communication endpoint.\",\n      \"title\": \"Ports and Sockets\"\n    },\n    {\n      \"concepts\": [\n        \"What is Routing\",\n        \"The Default Gateway\",\n        \"Routing Tables\",\n        \"Hop-by-Hop Forwarding\",\n        \"Traceroute as a Diagnostic Tool\",\n        \"Autonomous Systems\",\n        \"BGP at a High Level\"\n      ],\n      \"description\": \"How packets find their way from source to destination across interconnected networks. Routing tables, gateways, hop-by-hop forwarding, and the role of BGP in connecting autonomous systems on the internet.\",\n      \"title\": \"Routing\"\n    },\n    {\n      \"concepts\": [\n        \"What is NAT\",\n        \"NAT Translation Table\",\n        \"Source NAT for Outbound Traffic\",\n        \"Port Address Translation (PAT)\",\n        \"NAT and Inbound Connection Challenges\",\n        \"Port Forwarding\",\n        \"Carrier-Grade NAT\",\n        \"NAT as a Driver for IPv6 Adoption\"\n      ],\n      \"description\": \"How Network Address Translation allows multiple devices to share a single public IP, the mechanics of translation tables, and the challenges NAT introduces for inbound connections and peer-to-peer communication.\",\n      \"title\": \"Network Address Translation (NAT)\"\n    },\n    {\n      \"concepts\": [\n        \"What is TCP\",\n        \"TCP Three-Way Handshake\",\n        \"TCP Sequence Numbers\",\n        \"TCP Acknowledgments\",\n        \"TCP Retransmission\",\n        \"TCP Flow Control\",\n        \"TCP Congestion Control\",\n        \"TCP Connection Teardown\",\n        \"TCP Head-of-Line Blocking\"\n      ],\n      \"description\": \"The Transmission Control Protocol and how it provides reliable, ordered delivery of data. Connection establishment, sequence tracking, acknowledgments, retransmission, flow control, and congestion management.\",\n      \"title\": \"TCP in Depth\"\n    },\n    {\n      \"concepts\": [\n        \"What is UDP\",\n        \"UDP Datagram Structure\",\n        \"No Guaranteed Delivery in UDP\",\n        \"No Connection State in UDP\",\n        \"UDP Use Cases in Web Development\",\n        \"WebRTC and UDP\"\n      ],\n      \"description\": \"The User Datagram Protocol as a lightweight, connectionless alternative to TCP. Its minimal overhead, lack of delivery guarantees, and why certain real-time applications prefer it.\",\n      \"title\": \"UDP in Depth\"\n    },\n    {\n      \"concepts\": [\n        \"TCP vs UDP Reliability Tradeoff\",\n        \"TCP vs UDP Overhead Tradeoff\",\n        \"TCP vs UDP Latency Tradeoff\",\n        \"Choosing TCP or UDP for a Given Use Case\",\n        \"QUIC as a UDP-Based Protocol\"\n      ],\n      \"description\": \"Direct comparison of TCP and UDP on reliability, overhead, and latency dimensions. How to choose between them for different application needs, and how QUIC builds on UDP to combine benefits of both.\",\n      \"title\": \"TCP vs UDP Tradeoffs\"\n    },\n    {\n      \"concepts\": [\n        \"What is Latency\",\n        \"Round-Trip Time (RTT)\",\n        \"Sources of Network Latency\",\n        \"Propagation Delay\",\n        \"Serialization Delay\",\n        \"Queuing Delay\",\n        \"What is Bandwidth\",\n        \"Bandwidth vs Throughput\",\n        \"Bandwidth-Delay Product\",\n        \"Latency vs Bandwidth Bottlenecks\",\n        \"Tail Latency\"\n      ],\n      \"description\": \"Key performance characteristics of networks. How latency arises from propagation, serialization, and queuing delays, what bandwidth and throughput measure, and how to identify whether latency or bandwidth is the bottleneck.\",\n      \"title\": \"Latency and Bandwidth\"\n    },\n    {\n      \"concepts\": [\n        \"Connection Timeout\",\n        \"Read Timeout\",\n        \"Connection Refused Error\",\n        \"Connection Reset Error\",\n        \"Packet Loss\",\n        \"Network Unreachable Error\",\n        \"Host Unreachable Error\",\n        \"Half-Open Connections\",\n        \"Detecting Asymmetric Routing Issues\"\n      ],\n      \"description\": \"Common ways network connections fail and the specific error signals each failure mode produces. Understanding the difference between timeouts, refusals, resets, and unreachable errors.\",\n      \"title\": \"Common Network Failure Modes\"\n    },\n    {\n      \"concepts\": [\n        \"The ping Command\",\n        \"The traceroute Command\",\n        \"The netstat Command\",\n        \"The ss Command\",\n        \"The curl Command for Network Testing\",\n        \"The nslookup/dig Command for Quick Checks\",\n        \"Reading Network Error Messages\",\n        \"Checking If a Port Is Open\",\n        \"Identifying Firewall Blocks\",\n        \"Diagnosing Slow Connections vs Dropped Connections\"\n      ],\n      \"description\": \"Practical command-line tools and mental models for diagnosing connectivity problems. How to use ping, traceroute, netstat, curl, and other utilities to isolate where a network issue is occurring.\",\n      \"title\": \"Debugging Connectivity Issues\"\n    },\n    {\n      \"concepts\": [\n        \"What is a Firewall\",\n        \"Inbound vs Outbound Firewall Rules\",\n        \"What is a VPN\",\n        \"What is a Proxy Server\",\n        \"Forward Proxy vs Reverse Proxy\",\n        \"Load Balancer at the Network Level\",\n        \"CDN at the Network Level\"\n      ],\n      \"description\": \"Network infrastructure components that sit between clients and servers. How firewalls filter traffic, proxies and VPNs redirect it, and load balancers and CDNs distribute it for performance and reliability.\",\n      \"title\": \"Firewalls, Proxies, and Network Infrastructure\"\n    },\n    {\n      \"concepts\": [\n        \"Localhost and 127.0.0.1\",\n        \"Local Development Network Differences\",\n        \"Docker Networking Basics for Web Developers\",\n        \"Exposing Local Services to the Network\",\n        \"The Role of /etc/hosts\"\n      ],\n      \"description\": \"Networking concepts specific to local development environments. How localhost works, common Docker networking patterns, and practical tips for making local services accessible during development.\",\n      \"title\": \"Local Development Networking\"\n    }\n  ]\n}",
      "outputTokens": 1419,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-web-networking-fundamentals-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Web Development\n    CHAPTER_TITLE: Networking fundamentals\n    CHAPTER_DESCRIPTION: IP addressing, routing, NAT, TCP vs UDP, latency and bandwidth tradeoffs, and common failure modes. Practical mental models for debugging connectivity issues.\nNEIGHBORING_CHAPTERS:\n- \"Web development landscape\": Roles, responsibilities, and interfaces across front-end, back-end, full-stack, QA, DevOps, security, design, and product. How standards bodies and browser vendors shape the platform.\n- \"DNS and domains\": DNS records, resolvers, caching, propagation, and common configurations for web apps. Domain strategy, subdomains, and pitfalls with split-horizon DNS.\n- \"HTTP\": HTTP methods, status codes, headers, content negotiation, caching semantics, cookies, and redirects. HTTP/2 and HTTP/3 concepts and performance implications.\n- \"HTTPS and TLS\": TLS handshakes, certificate chains, HSTS, OCSP stapling, and modern TLS configuration choices. Secure transport patterns for browsers, APIs, and internal services.\n  "
    },
    {
      "duration": 29929.613583,
      "inputTokens": 3179,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"O tipo int em Python\",\n        \"Inteiros sem limite de tamanho\",\n        \"Literais inteiros decimais\",\n        \"Literais inteiros binários (0b)\",\n        \"Literais inteiros octais (0o)\",\n        \"Literais inteiros hexadecimais (0x)\",\n        \"Separador de milhares com underscore em inteiros\"\n      ],\n      \"description\": \"O tipo inteiro em Python, sua capacidade de representar valores arbitrariamente grandes e as diferentes bases numéricas usadas para escrever literais inteiros.\",\n      \"title\": \"Inteiros e suas representações\"\n    },\n    {\n      \"concepts\": [\n        \"O tipo float em Python\",\n        \"Representação IEEE 754 de dupla precisão\",\n        \"Literais float com ponto decimal\",\n        \"Notação científica em floats\",\n        \"Separador de milhares com underscore em floats\",\n        \"Valor especial float('inf')\",\n        \"Valor especial float('-inf')\",\n        \"Valor especial float('nan')\",\n        \"Comportamento de NaN em comparações\"\n      ],\n      \"description\": \"O tipo float, como ele é armazenado internamente segundo o padrão IEEE 754, as formas de escrever literais float e os valores especiais infinito e NaN.\",\n      \"title\": \"Floats e valores especiais de ponto flutuante\"\n    },\n    {\n      \"concepts\": [\n        \"Erro de representação em ponto flutuante\",\n        \"O problema de 0.1 + 0.2\",\n        \"Acúmulo de erros de arredondamento\",\n        \"Comparação de floats com tolerância\",\n        \"A função math.isclose()\",\n        \"Precisão finita do float (53 bits de mantissa)\"\n      ],\n      \"description\": \"Por que floats não representam todos os decimais com exatidão, como erros de arredondamento surgem e técnicas para comparar floats de forma segura.\",\n      \"title\": \"Precisão numérica e erros de arredondamento\"\n    },\n    {\n      \"concepts\": [\n        \"O módulo decimal\",\n        \"Criando objetos Decimal a partir de strings\",\n        \"Criando Decimal a partir de inteiros\",\n        \"Armadilha de criar Decimal a partir de float\",\n        \"Contexto decimal e getcontext()\",\n        \"Definindo precisão no módulo decimal\",\n        \"Modos de arredondamento do Decimal\",\n        \"Aritmética exata com Decimal\"\n      ],\n      \"description\": \"O módulo decimal para aritmética de ponto fixo com precisão controlada, como criar objetos Decimal corretamente e configurar contexto de precisão e arredondamento.\",\n      \"title\": \"O módulo decimal\"\n    },\n    {\n      \"concepts\": [\n        \"O módulo fractions\",\n        \"Criando objetos Fraction a partir de inteiros\",\n        \"Criando Fraction a partir de strings\",\n        \"Criando Fraction a partir de floats e Decimals\",\n        \"Aritmética exata com frações\",\n        \"Propriedades numerator e denominator\",\n        \"Método limit_denominator()\"\n      ],\n      \"description\": \"O módulo fractions para representação exata de números racionais, as diferentes formas de criar frações e operações aritméticas com elas.\",\n      \"title\": \"O módulo fractions\"\n    },\n    {\n      \"concepts\": [\n        \"O tipo complex em Python\",\n        \"Literal complexo com sufixo j\",\n        \"Parte real de um complexo\",\n        \"Parte imaginária de um complexo\",\n        \"Aritmética com números complexos\",\n        \"A função built-in complex()\",\n        \"O módulo cmath\"\n      ],\n      \"description\": \"O tipo complex para representação de números com parte real e imaginária, como criá-los e realizar operações, incluindo o módulo cmath para funções matemáticas complexas.\",\n      \"title\": \"Números complexos\"\n    },\n    {\n      \"concepts\": [\n        \"O tipo bool como subclasse de int\",\n        \"O valor True como inteiro 1\",\n        \"O valor False como inteiro 0\",\n        \"Aritmética com booleanos\",\n        \"A função built-in bool()\",\n        \"Valores truthy e falsy de tipos numéricos\"\n      ],\n      \"description\": \"O tipo bool, sua relação de herança com int, o comportamento de True e False em contextos numéricos e a avaliação de truthiness de números.\",\n      \"title\": \"O tipo bool e sua relação com inteiros\"\n    },\n    {\n      \"concepts\": [\n        \"O valor None\",\n        \"O tipo NoneType\",\n        \"None como valor padrão de retorno\",\n        \"Comparação com None usando is\",\n        \"Diferença entre None e zero\",\n        \"Diferença entre None e string vazia\"\n      ],\n      \"description\": \"O valor especial None, seu tipo único NoneType, usos idiomáticos e como diferenciá-lo de outros valores falsy.\",\n      \"title\": \"O valor None\"\n    },\n    {\n      \"concepts\": [\n        \"Conversão de float para int com int()\",\n        \"Conversão de int para float com float()\",\n        \"Conversão de string para int\",\n        \"Conversão de string para float\",\n        \"Conversão de string para int com base específica\",\n        \"Conversão de bool para int e float\",\n        \"Perda de dados na conversão float para int\"\n      ],\n      \"description\": \"Funções built-in para converter entre tipos numéricos e a partir de strings, incluindo conversão com base numérica e possíveis perdas de precisão.\",\n      \"title\": \"Conversões entre tipos numéricos\"\n    },\n    {\n      \"concepts\": [\n        \"Truncamento com math.trunc()\",\n        \"Arredondamento com round()\",\n        \"Comportamento de banker's rounding no round()\",\n        \"Arredondamento para baixo com math.floor()\",\n        \"Arredondamento para cima com math.ceil()\",\n        \"A função abs() com números\",\n        \"A função divmod()\",\n        \"A função pow() com três argumentos\"\n      ],\n      \"description\": \"Funções built-in e do módulo math para arredondamento, truncamento, valor absoluto e outras operações numéricas fundamentais.\",\n      \"title\": \"Funções numéricas built-in\"\n    },\n    {\n      \"concepts\": [\n        \"Hierarquia numérica abstrata (numbers)\",\n        \"Coerção automática entre int e float\",\n        \"Coerção automática entre int e complex\",\n        \"Operação entre int e Decimal\",\n        \"Operação entre float e Decimal (TypeError)\",\n        \"Operação entre Fraction e float\"\n      ],\n      \"description\": \"Como Python realiza coerção automática entre tipos numéricos em operações mistas e quais combinações de tipos são incompatíveis.\",\n      \"title\": \"Coerção e torre numérica do Python\"\n    }\n  ]\n}",
      "outputTokens": 1398,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-python-tipos-numericos-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Python\n    CHAPTER_TITLE: Tipos numéricos e valores especiais\n    CHAPTER_DESCRIPTION: Inteiros, floats, complexos, bool, None; conversões, precisão numérica, erros de arredondamento e uso de decimal/fractions.\nNEIGHBORING_CHAPTERS:\n- \"Ambiente de desenvolvimento\": Instalação e configuração do Python, múltiplas versões, PATH, virtual environments, VS Code/IDEs, REPL, Jupyter e boas práticas de organização local.\n- \"Execução de programas\": Execução em REPL, scripts e módulos; shebang, codificação, argumentos de linha de comando e status de saída do processo.\n- \"Sintaxe e convenções\": Regras de indentação, nomes, comentários, docstrings, literais, operadores e precedência; diferenças entre Python interativo e arquivo.\n- \"Texto e codificação\": Strings, bytes e bytearray; Unicode, normalização, encodings, f-strings, formatação avançada e manipulação eficiente.\n- \"Estruturas de dados fundamentais\": Listas, tuplas, dicionários e conjuntos; mutabilidade, cópia rasa vs profunda, hashing, ordenação e complexidade de operações.\n- \"Controle de fluxo\": if/elif/else, match/case, loops, break/continue, compreensão de escopo e padrões comuns de controle.\n  "
    },
    {
      "duration": 54836.692958,
      "inputTokens": 3181,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Estructura del grupo carbonilo\",\n        \"Polarización del enlace C=O\",\n        \"Hibridación sp² del carbono carbonílico\",\n        \"Electrofilia del carbono carbonílico\",\n        \"Nucleofilia del oxígeno carbonílico\",\n        \"Resonancia del grupo carbonilo\"\n      ],\n      \"description\": \"Propiedades electrónicas y estructurales del grupo carbonilo que determinan su reactividad frente a nucleófilos y electrófilos.\",\n      \"title\": \"Estructura y polarización del grupo carbonilo\"\n    },\n    {\n      \"concepts\": [\n        \"Diferencias entre aldehídos y cetonas\",\n        \"Reactividad relativa aldehído vs. cetona\",\n        \"Efecto estérico en la reactividad de carbonilos\",\n        \"Efecto inductivo de sustituyentes sobre el carbonilo\",\n        \"Efecto de conjugación en la reactividad del carbonilo\"\n      ],\n      \"description\": \"Factores estéricos y electrónicos que modulan la electrofilia del carbono carbonílico en aldehídos y cetonas.\",\n      \"title\": \"Reactividad comparada de aldehídos y cetonas\"\n    },\n    {\n      \"concepts\": [\n        \"Mecanismo general de adición nucleofílica\",\n        \"Intermediario tetraédrico\",\n        \"Adición nucleofílica en medio ácido\",\n        \"Adición nucleofílica en medio básico\",\n        \"Catálisis ácida en adiciones a carbonilos\",\n        \"Papel del protón en la activación del carbonilo\"\n      ],\n      \"description\": \"Mecanismo paso a paso de la adición nucleofílica al carbonilo, incluyendo la formación del intermediario tetraédrico bajo catálisis ácida y básica.\",\n      \"title\": \"Mecanismo de adición nucleofílica a carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Formación de hemiacetales\",\n        \"Formación de acetales\",\n        \"Mecanismo de formación de acetales catalizado por ácido\",\n        \"Acetales como grupos protectores del carbonilo\",\n        \"Hidrólisis de acetales\",\n        \"Acetales cíclicos a partir de dioles\"\n      ],\n      \"description\": \"Adición de alcoholes a carbonilos para formar hemiacetales y acetales, su mecanismo y uso como grupos protectores.\",\n      \"title\": \"Hemiacetales y acetales\"\n    },\n    {\n      \"concepts\": [\n        \"Hidratación del carbonilo\",\n        \"Constante de hidratación Khid\",\n        \"Formación de cianhidrinas\",\n        \"Adición de reactivos de Grignard a aldehídos\",\n        \"Adición de reactivos de Grignard a cetonas\",\n        \"Adición de organolíticos a carbonilos\",\n        \"Adición de acetiluro a carbonilos\"\n      ],\n      \"description\": \"Reacciones de adición de agua, cianuro, reactivos de Grignard, organolíticos y acetiluros al grupo carbonilo.\",\n      \"title\": \"Adición de nucleófilos de carbono y otros nucleófilos\"\n    },\n    {\n      \"concepts\": [\n        \"Formación de iminas (bases de Schiff)\",\n        \"Mecanismo de formación de iminas\",\n        \"Formación de enaminas\",\n        \"Mecanismo de formación de enaminas\",\n        \"Condiciones de pH para iminas y enaminas\",\n        \"Hidrólisis de iminas\",\n        \"Hidrólisis de enaminas\"\n      ],\n      \"description\": \"Adición de aminas primarias y secundarias al carbonilo para generar iminas y enaminas, incluyendo mecanismo y control de pH.\",\n      \"title\": \"Iminas y enaminas\"\n    },\n    {\n      \"concepts\": [\n        \"Reducción con NaBH4\",\n        \"Reducción con LiAlH4\",\n        \"Selectividad de NaBH4 vs. LiAlH4\",\n        \"Reducción de Meerwein-Ponndorf-Verley\",\n        \"Oxidación de aldehídos a ácidos carboxílicos\",\n        \"Oxidación selectiva de Swern\",\n        \"Reactivo de Jones\"\n      ],\n      \"description\": \"Transformaciones redox del grupo carbonilo: reducciones con hidruros metálicos y oxidaciones selectivas de aldehídos.\",\n      \"title\": \"Reducciones y oxidaciones de carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Reacción de Wittig\",\n        \"Formación del iluro de fósforo\",\n        \"Mecanismo de la reacción de Wittig\",\n        \"Selectividad E/Z en la reacción de Wittig\",\n        \"Reacción de Horner-Wadsworth-Emmons\",\n        \"Selectividad E en Horner-Wadsworth-Emmons\"\n      ],\n      \"description\": \"Formación de alquenos a partir de carbonilos mediante iluros de fósforo, incluyendo control de la estereoquímica del doble enlace.\",\n      \"title\": \"Reacción de Wittig y Horner-Wadsworth-Emmons\"\n    },\n    {\n      \"concepts\": [\n        \"Hidrógenos alfa al carbonilo\",\n        \"Acidez de hidrógenos alfa\",\n        \"Efecto del carbonilo en la acidez del H alfa\",\n        \"Valores de pKa de compuestos carbonílicos comunes\",\n        \"Comparación de acidez: aldehídos, cetonas, ésteres, 1,3-dicarbonilos\"\n      ],\n      \"description\": \"Origen de la acidez de los hidrógenos en posición alfa al carbonilo y factores que la modulan.\",\n      \"title\": \"Acidez del hidrógeno alfa\"\n    },\n    {\n      \"concepts\": [\n        \"Formación del enol\",\n        \"Tautomería ceto-enólica\",\n        \"Constante de equilibrio ceto-enólica\",\n        \"Catálisis ácida de la tautomería\",\n        \"Catálisis básica de la tautomería\",\n        \"Enoles estabilizados en 1,3-dicarbonilos\"\n      ],\n      \"description\": \"Equilibrio entre la forma cetónica y la forma enólica, mecanismos de interconversión y factores de estabilización.\",\n      \"title\": \"Tautomería ceto-enólica\"\n    },\n    {\n      \"concepts\": [\n        \"Formación de enolatos con bases fuertes\",\n        \"Bases comunes para generar enolatos (LDA, NaH, NaOEt)\",\n        \"Estructura del ion enolato\",\n        \"Carácter ambidentado del enolato\",\n        \"Alquilación en carbono vs. alquilación en oxígeno\",\n        \"Enolatos cinéticos vs. enolatos termodinámicos\",\n        \"Control cinético con LDA a baja temperatura\",\n        \"Control termodinámico con NaOEt en equilibrio\"\n      ],\n      \"description\": \"Generación de enolatos con diferentes bases, su naturaleza ambidentada y el control cinético frente al termodinámico en su formación.\",\n      \"title\": \"Formación y tipos de enolatos\"\n    },\n    {\n      \"concepts\": [\n        \"Alfa-halogenación de cetonas en medio ácido\",\n        \"Mecanismo de alfa-halogenación ácida\",\n        \"Alfa-halogenación en medio básico\",\n        \"Reacción del haloformo\",\n        \"Mecanismo de la reacción del haloformo\",\n        \"Alfa-alquilación de enolatos\",\n        \"Regioselectividad en la alfa-alquilación\"\n      ],\n      \"description\": \"Reacciones en la posición alfa del carbonilo: halogenación bajo condiciones ácidas y básicas, haloformo, y alquilación de enolatos.\",\n      \"title\": \"Reacciones en posición alfa\"\n    },\n    {\n      \"concepts\": [\n        \"Definición de condensación aldólica\",\n        \"Mecanismo de la aldólica catalizada por base\",\n        \"Producto aldol (β-hidroxicarbonilo)\",\n        \"Deshidratación del aldol a enona\",\n        \"Mecanismo de la aldólica catalizada por ácido\",\n        \"Condensación aldólica intramolecular\",\n        \"Regioselectividad en aldólica intramolecular\"\n      ],\n      \"description\": \"Mecanismo de la reacción aldólica en catálisis ácida y básica, formación del producto aldol y su deshidratación a compuestos α,β-insaturados.\",\n      \"title\": \"Condensación aldólica\"\n    },\n    {\n      \"concepts\": [\n        \"Aldólica cruzada: problema de mezcla de productos\",\n        \"Estrategias para controlar aldólicas cruzadas\",\n        \"Aldólica cruzada dirigida con enolatos preformados\",\n        \"Aldólica cruzada con un componente no enolizable\",\n        \"Aldólica de Mukaiyama\",\n        \"Enol silil éteres en la aldólica de Mukaiyama\",\n        \"Estereocontrol en la reacción aldólica (modelos syn/anti)\"\n      ],\n      \"description\": \"Estrategias para lograr selectividad en reacciones aldólicas cruzadas, incluyendo el uso de enolatos preformados, enol silil éteres y control estereoquímico.\",\n      \"title\": \"Aldólica cruzada y selectividad\"\n    },\n    {\n      \"concepts\": [\n        \"Definición de la condensación de Claisen\",\n        \"Mecanismo de la condensación de Claisen\",\n        \"Papel de la base estequiométrica en Claisen\",\n        \"Producto β-cetoéster\",\n        \"Condensación de Claisen cruzada\",\n        \"Condensación de Dieckmann\",\n        \"Mecanismo de la condensación de Dieckmann\"\n      ],\n      \"description\": \"Condensación de ésteres para formar β-cetoésteres, incluyendo la versión intramolecular (Dieckmann) y cruzada.\",\n      \"title\": \"Condensación de Claisen y Dieckmann\"\n    },\n    {\n      \"concepts\": [\n        \"Sistemas α,β-insaturados (carbonilos conjugados)\",\n        \"Adición 1,2 a carbonilos conjugados\",\n        \"Adición 1,4 (conjugada) a carbonilos conjugados\",\n        \"Control cinético vs. termodinámico en adición 1,2 vs. 1,4\",\n        \"Nucleófilos duros vs. blandos en adición conjugada\",\n        \"Adición de cupratos a enonas\"\n      ],\n      \"description\": \"Reactividad de carbonilos α,β-insaturados: competencia entre adición directa al carbonilo y adición conjugada, y el papel de la dureza del nucleófilo.\",\n      \"title\": \"Adición conjugada 1,2 vs. 1,4\"\n    },\n    {\n      \"concepts\": [\n        \"Definición de la adición de Michael\",\n        \"Mecanismo de la adición de Michael\",\n        \"Donadores de Michael comunes\",\n        \"Aceptores de Michael comunes\",\n        \"Anelación de Robinson\",\n        \"Mecanismo de la anelación de Robinson\",\n        \"Combinación Michael-aldólica en Robinson\"\n      ],\n      \"description\": \"Adición conjugada de enolatos estabilizados a aceptores de Michael, y la anelación de Robinson como secuencia Michael-aldólica.\",\n      \"title\": \"Adición de Michael y anelación de Robinson\"\n    },\n    {\n      \"concepts\": [\n        \"Síntesis con éster malónico\",\n        \"Síntesis con éster acetoacético\",\n        \"Descarboxilación de β-cetoácidos\",\n        \"Mecanismo de descarboxilación de β-cetoácidos\",\n        \"Alquilación del éster malónico\",\n        \"Alquilación del éster acetoacético\",\n        \"Hidrólisis y descarboxilación en secuencia sintética\"\n      ],\n      \"description\": \"Uso de ésteres malónicos y acetoacéticos como equivalentes de enolato en síntesis, seguido de hidrólisis y descarboxilación para obtener ácidos y cetonas sustituidos.\",\n      \"title\": \"Síntesis malónica y acetoacética\"\n    },\n    {\n      \"concepts\": [\n        \"Equivalentes sintéticos de enolato\",\n        \"Enaminas como nucleófilos en alquilación\",\n        \"Enaminas como nucleófilos en adición de Michael (reacción de Stork)\",\n        \"Enol silil éteres como equivalentes de enolato\",\n        \"Selectividad con diferentes equivalentes de enolato\"\n      ],\n      \"description\": \"Uso de enaminas y enol silil éteres como alternativas a enolatos directos para lograr selectividad en reacciones de formación de enlace C–C.\",\n      \"title\": \"Equivalentes de enolato en síntesis\"\n    },\n    {\n      \"concepts\": [\n        \"Selectividad regioquímica en reacciones de enolatos\",\n        \"Selectividad estereoquímica en reacciones de enolatos\",\n        \"Modelo de Zimmerman-Traxler\",\n        \"Estado de transición tipo silla en aldólicas\",\n        \"Predicción de diastereoselectividad syn/anti\",\n        \"Control de enantioselectividad con auxiliares quirales en aldólicas\"\n      ],\n      \"description\": \"Herramientas y modelos para predecir y controlar la selectividad regioquímica y estereoquímica en reacciones que involucran enolatos.\",\n      \"title\": \"Control de selectividad en reacciones de enolatos\"\n    }\n  ]\n}",
      "outputTokens": 2954,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "es-quimica-carbonilos-enolatos-1",
      "userPrompt": "\n    LANGUAGE: es\n    COURSE_TITLE: Química\n    CHAPTER_TITLE: Carbonilos y enolatos\n    CHAPTER_DESCRIPTION: Adición nucleofílica a carbonilos, química de enoles/enolatos, aldol, Claisen, Michael y control de selectividad.\nNEIGHBORING_CHAPTERS:\n- \"Sustitución y eliminación\": SN1/SN2, E1/E2, reactividad, solventes, nucleófilos/bases, rearrangements y control de selectividad.\n- \"Adiciones a alquenos y alquinos\": Hidrogenación, halogenación, hidratación, hidroboración-oxidación, adiciones conjugadas y química de alquinos.\n- \"Química aromática\": Aromaticidad, sustitución electrofílica/nucleofílica aromática, directores, y reactividad de sistemas aromáticos extendidos.\n- \"Ácidos carboxílicos y derivados\": Reactividad de ácidos carboxílicos, derivados acílicos, química de amidas/ésteres/anhídridos y estrategias de activación.\n- \"Heterociclos\": Síntesis y reactividad de heterociclos aromáticos y saturados; aplicaciones en fármacos y materiales.\n- \"Radicales y fotoquímica orgánica\": Mecanismos radicalarios, iniciación/propagación/terminación, selectividad, y reacciones fotoquímicas orgánicas.\n  "
    },
    {
      "duration": 29339.740292000002,
      "inputTokens": 3056,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"What is a Business Cycle\",\n        \"Expansions\",\n        \"Recessions\",\n        \"Peaks\",\n        \"Troughs\",\n        \"Turning Points\"\n      ],\n      \"description\": \"Core terminology for describing recurring fluctuations in aggregate economic activity, including the distinct phases and transition points of the cycle.\",\n      \"title\": \"Defining the Business Cycle\"\n    },\n    {\n      \"concepts\": [\n        \"NBER Dating Committee\",\n        \"Duration of Expansions\",\n        \"Duration of Recessions\",\n        \"Asymmetry Between Expansions and Recessions\",\n        \"Amplitude of Cycles\",\n        \"Historical U.S. Business Cycles\"\n      ],\n      \"description\": \"How business cycles are officially dated, their typical durations and magnitudes, and the well-documented asymmetry between expansion and contraction phases.\",\n      \"title\": \"Dating and Measuring Business Cycles\"\n    },\n    {\n      \"concepts\": [\n        \"Trend vs. Cycle Decomposition\",\n        \"Hodrick-Prescott Filter\",\n        \"Band-Pass Filters\",\n        \"Detrending with Linear and Quadratic Trends\",\n        \"Choosing a Detrending Method\",\n        \"Output Gap\"\n      ],\n      \"description\": \"Statistical methods for separating the long-run trend from cyclical fluctuations in macroeconomic time series, and the concept of the output gap.\",\n      \"title\": \"Trend-Cycle Decomposition\"\n    },\n    {\n      \"concepts\": [\n        \"Procyclical Variables\",\n        \"Countercyclical Variables\",\n        \"Acyclical Variables\",\n        \"Leading Indicators\",\n        \"Lagging Indicators\",\n        \"Coincident Indicators\",\n        \"Cross-Correlation Functions\"\n      ],\n      \"description\": \"Classification of macroeconomic variables by their direction of comovement with the cycle and by their timing relative to aggregate output.\",\n      \"title\": \"Comovement and Timing of Variables\"\n    },\n    {\n      \"concepts\": [\n        \"Volatility of Output\",\n        \"Persistence of Output Fluctuations\",\n        \"Output Growth Rate Distribution\",\n        \"Skewness in Output Fluctuations\"\n      ],\n      \"description\": \"Key statistical properties of real GDP over the business cycle, including its volatility, autocorrelation structure, and distributional asymmetries.\",\n      \"title\": \"Output Fluctuations\"\n    },\n    {\n      \"concepts\": [\n        \"Consumption Smoothing Over the Cycle\",\n        \"Relative Volatility of Consumption\",\n        \"Volatility of Durable Goods Spending\",\n        \"Volatility of Nondurable Goods Spending\",\n        \"Volatility of Services Spending\",\n        \"Procyclicality of Consumption\"\n      ],\n      \"description\": \"Stylized facts about how different categories of consumption spending move over the business cycle, including their relative volatilities compared to output.\",\n      \"title\": \"Consumption Comovements\"\n    },\n    {\n      \"concepts\": [\n        \"Volatility of Investment\",\n        \"Procyclicality of Investment\",\n        \"Residential vs. Nonresidential Investment Cyclicality\",\n        \"Inventory Investment Over the Cycle\",\n        \"Relative Volatility of Investment vs. Output\"\n      ],\n      \"description\": \"How investment spending of various types behaves over the cycle, emphasizing its high volatility and strong procyclical nature.\",\n      \"title\": \"Investment Comovements\"\n    },\n    {\n      \"concepts\": [\n        \"Government Spending Over the Cycle\",\n        \"Net Exports Over the Cycle\",\n        \"Countercyclicality of the Trade Balance\",\n        \"Volatility of Exports and Imports\"\n      ],\n      \"description\": \"Cyclical behavior of government purchases, exports, imports, and the trade balance, and how they compare to the cycle in output.\",\n      \"title\": \"Government Spending and Trade Over the Cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Procyclicality of Employment\",\n        \"Countercyclicality of Unemployment\",\n        \"Okun's Law\",\n        \"Volatility of Hours Worked\",\n        \"Hours Per Worker vs. Number of Workers\",\n        \"Labor Force Participation Over the Cycle\"\n      ],\n      \"description\": \"Stylized facts linking labor market quantities to the business cycle, including the empirical regularity captured by Okun's Law.\",\n      \"title\": \"Labor Market Cyclical Patterns\"\n    },\n    {\n      \"concepts\": [\n        \"Procyclicality of Labor Productivity\",\n        \"Productivity Slowdowns and Speedups\",\n        \"Labor Hoarding\",\n        \"Total Factor Productivity Over the Cycle\"\n      ],\n      \"description\": \"How average labor productivity and total factor productivity move with the cycle, and the phenomenon of labor hoarding that shapes measured productivity.\",\n      \"title\": \"Productivity Over the Cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Procyclicality of Inflation\",\n        \"Phillips Curve as Cyclical Regularity\",\n        \"Countercyclicality of Real Wages Debate\",\n        \"Nominal Wage Rigidity Over the Cycle\",\n        \"Procyclicality of Profit Margins\"\n      ],\n      \"description\": \"Cyclical patterns in the price level, wages, and profit margins, including the empirical relationship between inflation and the cycle.\",\n      \"title\": \"Prices and Wages Over the Cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Procyclicality of Money and Credit\",\n        \"Interest Rate Behavior Over the Cycle\",\n        \"Term Spread as a Leading Indicator\",\n        \"Stock Market as a Leading Indicator\",\n        \"Credit Spreads Over the Cycle\"\n      ],\n      \"description\": \"How monetary aggregates, interest rates, credit conditions, and financial asset prices behave relative to the business cycle.\",\n      \"title\": \"Money, Credit, and Financial Indicators\"\n    },\n    {\n      \"concepts\": [\n        \"Sectoral Comovement Puzzle\",\n        \"Manufacturing vs. Services Cyclicality\",\n        \"Durable Goods Sector Volatility\",\n        \"Comovement Across Industries\",\n        \"Regional Business Cycles\"\n      ],\n      \"description\": \"How different industries and regions experience the business cycle, including the puzzle of why sectors with different shocks tend to move together.\",\n      \"title\": \"Sectoral and Regional Comovements\"\n    },\n    {\n      \"concepts\": [\n        \"Great Moderation\",\n        \"Causes of the Great Moderation\",\n        \"Business Cycle Changes Over Time\",\n        \"International Business Cycle Synchronization\",\n        \"Emerging vs. Advanced Economy Cycles\"\n      ],\n      \"description\": \"How business cycle characteristics have evolved historically, the period of reduced volatility known as the Great Moderation, and cross-country patterns in cycle synchronization.\",\n      \"title\": \"Historical Changes and International Patterns\"\n    },\n    {\n      \"concepts\": [\n        \"Burns-Mitchell Methodology\",\n        \"Kaldor's Stylized Facts of Growth vs. Cycles\",\n        \"Lucas's Business Cycle Program\",\n        \"Role of Stylized Facts in Model Evaluation\"\n      ],\n      \"description\": \"Foundational methodological approaches to documenting and using business cycle facts, from early NBER methods to the modern approach of calibrating models to match stylized facts.\",\n      \"title\": \"Methodological Approaches to Business Cycle Facts\"\n    }\n  ]\n}",
      "outputTokens": 1341,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-economics-business-cycles-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Economics\n    CHAPTER_TITLE: Business cycles\n    CHAPTER_DESCRIPTION: Business cycle facts, stylized patterns in output, inflation, unemployment, productivity, and comovements across sectors.\nNEIGHBORING_CHAPTERS:\n- \"Behavioral economics\": Behavioral biases, bounded rationality, time inconsistency, social preferences, and policy design with behavioral responses.\n- \"Experimental economics\": Laboratory and field experiments, incentive design, external validity, and behavioral/market design evidence.\n- \"Macroeconomic accounting\": National income and product accounts, sectoral balances, price indices, productivity, and flow-of-funds concepts.\n- \"Consumption and savings\": Consumption-saving, life-cycle and permanent income models, liquidity constraints, and empirical puzzles.\n- \"Investment and capital\": Investment theory, q-models, adjustment costs, irreversibility, and firm-level investment dynamics.\n- \"Unemployment and labor in macro\": Labor markets in macro, search and matching, wage setting, unemployment dynamics, and Beveridge curve analysis.\n  "
    },
    {
      "duration": 27804.172250000003,
      "inputTokens": 3206,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"O que é Arquitetura de Software\",\n        \"Papel do Arquiteto em Times Ágeis\",\n        \"Arquitetura Emergente\",\n        \"Arquitetura Intencional\",\n        \"Equilíbrio entre Emergência e Intencionalidade\",\n        \"Último Momento Responsável para Decisões\"\n      ],\n      \"description\": \"O papel da arquitetura de software dentro de contextos ágeis e como equilibrar planejamento antecipado com decisões adiadas até o último momento responsável.\",\n      \"title\": \"Papel da Arquitetura no Contexto Ágil\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Arquitetura Evolutiva\",\n        \"Princípio da Mudança Incremental\",\n        \"Mudança Guiada\",\n        \"Múltiplas Dimensões Arquiteturais\",\n        \"Diferença entre Arquitetura Evolutiva e Arquitetura Planejada\",\n        \"Ciclos de Feedback Arquitetural\"\n      ],\n      \"description\": \"Definição e princípios fundamentais da arquitetura evolutiva, que permite que sistemas se adaptem de forma incremental e guiada ao longo do tempo.\",\n      \"title\": \"Fundamentos de Arquitetura Evolutiva\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Modularidade\",\n        \"Benefícios da Modularidade para Agilidade\",\n        \"Definição de Módulo\",\n        \"Fronteiras de Módulo\",\n        \"Tamanho Adequado de Módulos\",\n        \"Independência de Deploy entre Módulos\"\n      ],\n      \"description\": \"Conceito de modularidade como base para sistemas que precisam evoluir com frequência, incluindo definição de fronteiras e tamanho adequado de módulos.\",\n      \"title\": \"Modularidade\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Acoplamento\",\n        \"Acoplamento Aferente\",\n        \"Acoplamento Eferente\",\n        \"Acoplamento Temporal\",\n        \"O que é Coesão\",\n        \"Coesão Funcional\",\n        \"Coesão Comunicacional\",\n        \"Relação entre Acoplamento e Coesão\"\n      ],\n      \"description\": \"Tipos de acoplamento e coesão em componentes de software, e como a relação entre ambos impacta a capacidade de evoluir o sistema com segurança.\",\n      \"title\": \"Acoplamento e Coesão\"\n    },\n    {\n      \"concepts\": [\n        \"O que é uma Fitness Function\",\n        \"Fitness Functions Atômicas\",\n        \"Fitness Functions Holísticas\",\n        \"Fitness Functions Automatizadas\",\n        \"Fitness Functions Manuais\",\n        \"Fitness Functions Estáticas\",\n        \"Fitness Functions Dinâmicas\",\n        \"Definição de Limites e Thresholds\"\n      ],\n      \"description\": \"Mecanismo de fitness functions para verificar se características arquiteturais estão sendo preservadas à medida que o sistema evolui, incluindo classificações e configuração de thresholds.\",\n      \"title\": \"Fitness Functions\"\n    },\n    {\n      \"concepts\": [\n        \"Fitness Functions para Performance\",\n        \"Fitness Functions para Segurança\",\n        \"Fitness Functions para Escalabilidade\",\n        \"Fitness Functions para Manutenibilidade\",\n        \"Integração de Fitness Functions no Processo de Build\",\n        \"Métricas Estruturais como Fitness Functions\"\n      ],\n      \"description\": \"Aplicação prática de fitness functions para diferentes atributos de qualidade e sua integração no ciclo de desenvolvimento contínuo.\",\n      \"title\": \"Aplicação de Fitness Functions\"\n    },\n    {\n      \"concepts\": [\n        \"O que é um Registro de Decisão Arquitetural (ADR)\",\n        \"Estrutura de um ADR\",\n        \"Status de um ADR\",\n        \"Contexto e Motivação em um ADR\",\n        \"Consequências Documentadas em um ADR\",\n        \"Versionamento de ADRs ao Longo do Tempo\"\n      ],\n      \"description\": \"Registros de Decisão Arquitetural (ADRs) como ferramenta para documentar, comunicar e rastrear decisões arquiteturais ao longo da vida do produto.\",\n      \"title\": \"Registros de Decisão Arquitetural (ADRs)\"\n    },\n    {\n      \"concepts\": [\n        \"Reversibilidade de Decisões Arquiteturais\",\n        \"Decisões de Tipo 1 e Tipo 2\",\n        \"Custo de Mudança Tardia\",\n        \"Trade-offs em Decisões Arquiteturais\",\n        \"Tomada de Decisão sob Incerteza\",\n        \"Protótipos Arquiteturais (Spikes)\"\n      ],\n      \"description\": \"Critérios e estratégias para tomar decisões arquiteturais em ambientes de incerteza, incluindo reversibilidade, trade-offs e uso de spikes para validação.\",\n      \"title\": \"Tomada de Decisões Arquiteturais\"\n    },\n    {\n      \"concepts\": [\n        \"Separação de Responsabilidades\",\n        \"Princípio de Ocultação de Informação\",\n        \"Contratos entre Componentes\",\n        \"APIs como Fronteiras Estáveis\",\n        \"Isolamento de Dependências Externas\",\n        \"Inversão de Dependência\"\n      ],\n      \"description\": \"Princípios de design que viabilizam mudanças frequentes e seguras, como separação de responsabilidades, ocultação de informação e uso de contratos estáveis.\",\n      \"title\": \"Princípios de Design para Mudança\"\n    },\n    {\n      \"concepts\": [\n        \"Arquitetura Monolítica\",\n        \"Arquitetura de Microserviços\",\n        \"Monólito Modular\",\n        \"Arquitetura Baseada em Eventos\",\n        \"Critérios para Escolha de Estilo Arquitetural\",\n        \"Migração Incremental entre Estilos\"\n      ],\n      \"description\": \"Estilos arquiteturais comuns e critérios para escolha e migração entre eles em contextos que exigem adaptação contínua.\",\n      \"title\": \"Estilos Arquiteturais em Contexto Ágil\"\n    },\n    {\n      \"concepts\": [\n        \"Contextos Delimitados (Bounded Contexts)\",\n        \"Alinhamento entre Arquitetura e Estrutura de Times\",\n        \"Lei de Conway\",\n        \"Manobra Inversa de Conway\",\n        \"Ownership de Componentes por Times\",\n        \"Comunicação entre Times e Comunicação entre Serviços\"\n      ],\n      \"description\": \"Como a estrutura organizacional e os contextos delimitados influenciam a arquitetura do sistema, incluindo a Lei de Conway e estratégias de ownership.\",\n      \"title\": \"Arquitetura e Estrutura Organizacional\"\n    }\n  ]\n}",
      "outputTokens": 1432,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-agile-arquitetura-agil-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Metodologias Ágeis\n    CHAPTER_TITLE: Arquitetura em ambientes ágeis\n    CHAPTER_DESCRIPTION: Arquitetura evolutiva, modularidade, acoplamento/cohesão, fitness functions e decisões arquiteturais compatíveis com mudanças frequentes.\nNEIGHBORING_CHAPTERS:\n- \"Discovery e Delivery integrados\": Dual Track (Discovery/Delivery), discovery contínuo, e prevenção de 'teatro ágil' com entrega sem aprendizado.\n- \"DevOps e entrega contínua\": DevOps: colaboração Dev+Ops, automação, pipelines, IaC, e redução de handoffs para acelerar e estabilizar entregas.\n- \"SRE e confiabilidade em produtos digitais\": SRE: SLIs/SLOs, error budget, confiabilidade como requisito, e equilíbrio entre velocidade e estabilidade.\n- \"Dívida técnica e sustentabilidade\": Gestão de dívida técnica, qualidade interna, refatoração estratégica, e mecanismos de priorização junto ao valor de negócio.\n- \"Estratégias modernas de testes\": Qualidade e testes: pirâmide de testes, testes automatizados, testes exploratórios, e estratégias para sistemas distribuídos.\n- \"Segurança e DevSecOps\": Segurança no ciclo ágil: threat modeling, DevSecOps, shift-left, gestão de vulnerabilidades e resposta a incidentes.\n  "
    },
    {
      "duration": 36156.955000000016,
      "inputTokens": 3164,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"What Is Alchemy\",\n        \"Historical Roots of Alchemy\",\n        \"Alchemy in the Wizarding World\",\n        \"Transmutation of Metals\",\n        \"The Great Work (Magnum Opus)\"\n      ],\n      \"description\": \"Core principles of alchemy as a discipline, its real-world historical origins, and how the Harry Potter universe adapts alchemical tradition into its magical framework.\",\n      \"title\": \"Foundations of Alchemy\"\n    },\n    {\n      \"concepts\": [\n        \"Who Is Nicolas Flamel\",\n        \"Flamel as Historical Figure\",\n        \"Flamel in the Wizarding World\",\n        \"The Age of Nicolas Flamel\",\n        \"Perenelle Flamel\"\n      ],\n      \"description\": \"The life and significance of Nicolas Flamel, bridging his real-world legend with his role in the Harry Potter series as the creator of the Philosopher's Stone.\",\n      \"title\": \"Nicolas Flamel\"\n    },\n    {\n      \"concepts\": [\n        \"What Is the Philosopher's Stone\",\n        \"The Stone's Power of Transmutation\",\n        \"The Elixir of Life\",\n        \"The Stone as Symbol of Perfection\",\n        \"Dumbledore's Decision to Destroy the Stone\",\n        \"Flamel's Acceptance of Death\"\n      ],\n      \"description\": \"The Philosopher's Stone's dual powers, its symbolic weight as a representation of perfection and temptation, and the moral implications of its destruction.\",\n      \"title\": \"The Philosopher's Stone\"\n    },\n    {\n      \"concepts\": [\n        \"Immortality as Temptation\",\n        \"Immortality in Myth and Legend\",\n        \"Wizarding Attitudes Toward Death\",\n        \"Fear of Death as Motivation\",\n        \"Death as the Next Great Adventure\"\n      ],\n      \"description\": \"How the desire for immortality functions as a central theme, drawing on mythological traditions and Dumbledore's philosophical framing of death.\",\n      \"title\": \"Immortality as Theme\"\n    },\n    {\n      \"concepts\": [\n        \"What Is a Horcrux\",\n        \"How a Horcrux Is Created\",\n        \"Murder as the Mechanism of Soul Splitting\",\n        \"The Role of a Dark Spell\",\n        \"Concealing a Soul Fragment in an Object\"\n      ],\n      \"description\": \"The definition, creation process, and dark magical mechanics behind Horcruxes, including the specific act required to split the soul.\",\n      \"title\": \"Horcrux Creation\"\n    },\n    {\n      \"concepts\": [\n        \"The Concept of the Soul in Harry Potter\",\n        \"Soul Integrity\",\n        \"Soul Fragmentation\",\n        \"Visible Signs of Soul Damage\",\n        \"Voldemort's Diminished Humanity\"\n      ],\n      \"description\": \"How the series treats the soul as a metaphysical entity, the consequences of fragmenting it, and the physical and psychological toll on Voldemort.\",\n      \"title\": \"The Soul and Its Fragmentation\"\n    },\n    {\n      \"concepts\": [\n        \"Tom Riddle's Diary\",\n        \"Marvolo Gaunt's Ring\",\n        \"Slytherin's Locket\",\n        \"Hufflepuff's Cup\",\n        \"Ravenclaw's Diadem\",\n        \"Harry Potter as Unintentional Horcrux\",\n        \"Nagini as a Living Horcrux\"\n      ],\n      \"description\": \"Each of Voldemort's seven Horcruxes, their identities, the significance of the objects chosen, and the special cases of a living vessel and an accidental Horcrux.\",\n      \"title\": \"The Seven Horcruxes\"\n    },\n    {\n      \"concepts\": [\n        \"Voldemort's Obsession with Founders' Relics\",\n        \"Trophy Collecting as Psychology\",\n        \"Symbolic Value of Horcrux Vessels\",\n        \"The Pattern of Meaningful Objects\"\n      ],\n      \"description\": \"Why Voldemort selected specific objects as Horcrux vessels, revealing his psychological need for significance, legacy, and connection to Hogwarts history.\",\n      \"title\": \"Horcrux Selection and Symbolism\"\n    },\n    {\n      \"concepts\": [\n        \"Protections Around Horcruxes\",\n        \"The Cave and the Potion\",\n        \"The Locket's Psychological Torment\",\n        \"The Ring's Curse\",\n        \"Gringotts Vault Security\",\n        \"The Room of Requirement as Hiding Place\"\n      ],\n      \"description\": \"The elaborate defenses Voldemort placed around each Horcrux, from cursed objects and enchanted locations to institutional security and concealment.\",\n      \"title\": \"Horcrux Defenses\"\n    },\n    {\n      \"concepts\": [\n        \"Destroying a Horcrux\",\n        \"Basilisk Venom as Destructive Agent\",\n        \"Fiendfyre\",\n        \"The Sword of Gryffindor's Absorbed Venom\",\n        \"Difficulty of Horcrux Destruction\",\n        \"Why Ordinary Magic Cannot Destroy a Horcrux\"\n      ],\n      \"description\": \"The specific, rare means by which Horcruxes can be destroyed, why they are so resistant to damage, and the key substances and artifacts involved.\",\n      \"title\": \"Horcrux Destruction\"\n    },\n    {\n      \"concepts\": [\n        \"Voldemort's Immortality Strategy\",\n        \"Multiple Horcruxes as Innovation\",\n        \"Voldemort's Ignorance of the Accidental Horcrux\",\n        \"Voldemort's Inability to Feel Horcrux Destruction\",\n        \"The Flaw in Voldemort's Plan\"\n      ],\n      \"description\": \"How Voldemort's unprecedented approach to Horcruxes constituted his bid for immortality, and the critical blind spots and limitations in his strategy.\",\n      \"title\": \"Voldemort's Pursuit of Immortality\"\n    },\n    {\n      \"concepts\": [\n        \"The Moral Cost of Making a Horcrux\",\n        \"Horcrux Creation as Irreversible Damage\",\n        \"Remorse as the Only Remedy\",\n        \"The Pain of Reintegrating the Soul\",\n        \"Ethical Contrast Between the Stone and Horcruxes\"\n      ],\n      \"description\": \"The ethical and metaphysical costs of soul splitting, the theoretical possibility of reversal through remorse, and how Horcruxes contrast with the Philosopher's Stone as paths to immortality.\",\n      \"title\": \"Moral and Metaphysical Costs\"\n    },\n    {\n      \"concepts\": [\n        \"Nigredo, Albedo, and Rubedo in Harry Potter\",\n        \"Alchemical Symbolism in the Series Structure\",\n        \"The Trio as Alchemical Elements\",\n        \"Lead-to-Gold as Character Transformation\",\n        \"Death and Rebirth Symbolism\"\n      ],\n      \"description\": \"How real alchemical stages and symbolism map onto the narrative structure, character arcs, and thematic development of the Harry Potter series.\",\n      \"title\": \"Alchemical Symbolism in the Narrative\"\n    },\n    {\n      \"concepts\": [\n        \"The Deathly Hallows and Immortality\",\n        \"The Resurrection Stone's Limitations\",\n        \"The Tale of the Three Brothers as Moral Fable\",\n        \"Mastery of Death Through Acceptance\",\n        \"Contrast Between Hallows and Horcruxes\"\n      ],\n      \"description\": \"How the Deathly Hallows offer an alternative framework for confronting death, the lessons of the Three Brothers story, and the thematic opposition between Hallows and Horcruxes.\",\n      \"title\": \"Deathly Hallows and the Meaning of Death\"\n    },\n    {\n      \"concepts\": [\n        \"Dumbledore's Temptation by Immortality\",\n        \"Dumbledore and the Resurrection Stone\",\n        \"Voldemort's Fear Versus Harry's Acceptance\",\n        \"Harry's Walk into the Forest\",\n        \"Sacrifice as the True Counter to Death\"\n      ],\n      \"description\": \"How key characters respond to mortality—Dumbledore's past temptation, Voldemort's terror, and Harry's willing self-sacrifice as the series' ultimate answer to death.\",\n      \"title\": \"Character Responses to Mortality\"\n    }\n  ]\n}",
      "outputTokens": 1572,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-harry-potter-alchemy-horcruxes-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Harry Potter\n    CHAPTER_TITLE: Alchemy, Horcruxes, and immortality\n    CHAPTER_DESCRIPTION: Alchemy, immortality myths, and the Philosopher's Stone as symbol. Horcrux metaphysics and the costs of soul fragmentation.\nNEIGHBORING_CHAPTERS:\n- \"Defense Against the Dark Arts\": Defense curriculum across eras and how teaching reflects politics. Practical spell selection, threat models, and the pedagogy of fear.\n- \"Divination and prophecy\": Divination's ambiguity, self-fulfilling prophecy, and narrative foreshadowing. Symbol systems: tea leaves, dreams, centaurs, and astronomy.\n- \"Mind magic and memory\": Mind magic: Legilimency, Occlumency, memory charms, and Pensieve ethics. Consent, epistemology, and the reliability of recollection.\n- \"Wandlore\": Wand woods, cores, allegiance, and the Elder Wand's legend. Comparative magical foci and what wandlore implies about power and identity.\n- \"Healing and magical medicine\": Magical healing, St Mungo's, and the boundaries of restorative magic. Disability, trauma, and long-term consequences in the series.\n- \"Beings, creatures, and species politics\": Werewolves, vampires, giants, goblins, house-elves, centaurs, and merpeople as political subjects. Rights, stereotypes, and allegory across species.\n  "
    },
    {
      "duration": 27828.52354199998,
      "inputTokens": 3274,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Definição de Legal Tech\",\n        \"Histórico da Automação Jurídica\",\n        \"Tipos de Ferramentas de Legal Tech\",\n        \"Benefícios da Automação no Direito\",\n        \"Limitações da Automação Jurídica\"\n      ],\n      \"description\": \"O que é legal tech, sua evolução histórica e os principais tipos de ferramentas disponíveis para automação de atividades jurídicas, incluindo benefícios e limitações.\",\n      \"title\": \"Fundamentos de Legal Tech\"\n    },\n    {\n      \"concepts\": [\n        \"O que é um Template Jurídico\",\n        \"Estrutura de um Template Jurídico\",\n        \"Campos Variáveis em Templates\",\n        \"Campos Condicionais em Templates\",\n        \"Cláusulas Modulares\",\n        \"Boas Práticas na Criação de Templates\",\n        \"Manutenção e Atualização de Templates\"\n      ],\n      \"description\": \"Como criar, estruturar e manter templates jurídicos com campos variáveis, condicionais e cláusulas modulares para geração automatizada de documentos.\",\n      \"title\": \"Templates Jurídicos\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Automação de Documentos\",\n        \"Fluxo de Geração Automatizada de Documentos\",\n        \"Regras de Negócio em Automação Documental\",\n        \"Questionários Dinâmicos para Preenchimento\",\n        \"Montagem Condicional de Cláusulas\",\n        \"Validação Automática de Campos\",\n        \"Integração com Bases de Dados\"\n      ],\n      \"description\": \"O processo de geração automatizada de documentos jurídicos, desde questionários dinâmicos até a montagem condicional de cláusulas e validação de campos.\",\n      \"title\": \"Automação de Documentos Jurídicos\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Revisão Assistida por Tecnologia\",\n        \"Ferramentas de Comparação de Documentos\",\n        \"Detecção Automática de Inconsistências\",\n        \"Análise de Cláusulas por Inteligência Artificial\",\n        \"Revisão Colaborativa em Plataformas Digitais\",\n        \"Checklist Automatizado de Revisão\"\n      ],\n      \"description\": \"Ferramentas e técnicas de revisão assistida por tecnologia, incluindo comparação de documentos, detecção de inconsistências e análise de cláusulas com IA.\",\n      \"title\": \"Revisão Assistida de Documentos\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Padronização Jurídica\",\n        \"Guia de Estilo para Documentos Jurídicos\",\n        \"Padronização de Linguagem Contratual\",\n        \"Padronização de Formatação\",\n        \"Biblioteca de Cláusulas Padrão\",\n        \"Taxonomia de Tipos Documentais\",\n        \"Governança da Padronização\"\n      ],\n      \"description\": \"Técnicas e instrumentos de padronização de documentos jurídicos, abrangendo linguagem, formatação, taxonomia e biblioteca de cláusulas.\",\n      \"title\": \"Padronização de Documentos Jurídicos\"\n    },\n    {\n      \"concepts\": [\n        \"Definição de Gestão Documental Jurídica\",\n        \"Organização e Classificação de Documentos\",\n        \"Repositório Central de Documentos\",\n        \"Indexação e Busca de Documentos\",\n        \"Retenção e Descarte de Documentos\",\n        \"Segurança e Controle de Acesso Documental\",\n        \"Digitalização e Documentos Nato-Digitais\"\n      ],\n      \"description\": \"Práticas de gestão documental jurídica, incluindo organização, classificação, repositório central, indexação, retenção e segurança de documentos.\",\n      \"title\": \"Gestão Documental Jurídica\"\n    },\n    {\n      \"concepts\": [\n        \"O que é Controle de Versões\",\n        \"Numeração e Identificação de Versões\",\n        \"Rastreabilidade de Alterações\",\n        \"Comparação entre Versões (Redline)\",\n        \"Bloqueio de Edição Simultânea\",\n        \"Histórico de Versões\",\n        \"Restauração de Versões Anteriores\"\n      ],\n      \"description\": \"Mecanismos de controle de versões de documentos jurídicos, abrangendo numeração, rastreabilidade de alterações, redline e histórico.\",\n      \"title\": \"Controle de Versões de Documentos\"\n    },\n    {\n      \"concepts\": [\n        \"Definição de Governança de Conhecimento Jurídico\",\n        \"Base de Conhecimento Jurídico\",\n        \"Captura e Registro de Conhecimento Institucional\",\n        \"Compartilhamento de Precedentes Internos\",\n        \"Atualização Contínua da Base de Conhecimento\",\n        \"Papéis e Responsabilidades na Governança de Conhecimento\",\n        \"Métricas de Uso da Base de Conhecimento\"\n      ],\n      \"description\": \"Estruturação de governança de conhecimento em organizações jurídicas, incluindo base de conhecimento, captura institucional, compartilhamento e métricas.\",\n      \"title\": \"Governança de Conhecimento Jurídico\"\n    },\n    {\n      \"concepts\": [\n        \"Riscos de Erros em Documentos Automatizados\",\n        \"Risco de Desatualização de Templates\",\n        \"Dependência Excessiva de Automação\",\n        \"Risco de Perda de Personalização\",\n        \"Viés Algorítmico em Ferramentas Jurídicas\",\n        \"Risco de Segurança da Informação na Automação\",\n        \"Mitigação de Riscos em Automação Jurídica\"\n      ],\n      \"description\": \"Principais riscos associados à automação jurídica, como erros em documentos, desatualização de templates, dependência tecnológica e viés algorítmico, bem como estratégias de mitigação.\",\n      \"title\": \"Riscos da Automação Jurídica\"\n    },\n    {\n      \"concepts\": [\n        \"Definição de Qualidade em Automação Jurídica\",\n        \"Critérios de Qualidade para Documentos Automatizados\",\n        \"Testes de Qualidade em Templates\",\n        \"Fluxo de Aprovação de Templates\",\n        \"Auditoria Interna de Documentos Automatizados\",\n        \"Feedback de Usuários na Melhoria de Templates\",\n        \"Melhoria Contínua em Automação Jurídica\"\n      ],\n      \"description\": \"Critérios, testes, aprovações e auditorias que asseguram a qualidade dos documentos gerados por automação, incluindo ciclos de melhoria contínua.\",\n      \"title\": \"Qualidade na Automação Jurídica\"\n    },\n    {\n      \"concepts\": [\n        \"Workflows de Aprovação Documental\",\n        \"Notificações Automáticas em Fluxos Documentais\",\n        \"Assinatura Eletrônica em Documentos Automatizados\",\n        \"Integração entre Sistemas de Automação\",\n        \"Dashboards de Acompanhamento Documental\"\n      ],\n      \"description\": \"Fluxos de trabalho automatizados para aprovação e assinatura de documentos, integração entre sistemas e painéis de acompanhamento.\",\n      \"title\": \"Fluxos de Trabalho e Integrações\"\n    }\n  ]\n}",
      "outputTokens": 1608,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-direito-legal-tech-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Direito\n    CHAPTER_TITLE: Legal tech e automação de documentos\n    CHAPTER_DESCRIPTION: Automação jurídica e qualidade: templates, revisão assistida, gestão documental e padronização. Riscos de automação, controle de versões e governança de conhecimento.\nNEIGHBORING_CHAPTERS:\n- \"Gestão de terceiros e due diligence\": Programas de integridade em terceiros: due diligence, cláusulas anticorrupção e monitoramento. Gestão de contratos, auditoria e encerramento por inadimplemento de compliance.\n- \"Estratégia contenciosa e gestão de disputas\": Estratégia de litígio: seleção de teses, definição de foro, gestão de portfólio e negociação de acordos. Monitoramento de precedentes, risco financeiro e comunicação com stakeholders.\n- \"Legal operations e gestão jurídica\": Gestão de escritórios e departamentos jurídicos: triagem, SLAs, indicadores e orçamento. Precificação, honorários, contratação de correspondentes e qualidade.\n- \"Operações contratuais\": Gestão de contratos: ciclo de vida, cláusulas padrão, aprovações e controle de obrigações. CLM, auditoria contratual e prevenção de disputas.\n- \"Negociação estratégica\": Negociação e mediação avançadas: BATNA, ZOPA, técnicas de influência e gestão de impasses. Construção de acordos complexos e multiparte.\n- \"Advocacia oral e persuasão\": Oratória e atuação em audiência: teoria do caso, exame e contrainterrogatório, sustentação oral e postura profissional. Comunicação com juízes, jurados e peritos.\n  "
    },
    {
      "duration": 39907.04366700002,
      "inputTokens": 3096,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Colonial Medical Practices in Brazil\",\n        \"Jesuit Healing Missions\",\n        \"Indigenous Medicinal Knowledge\",\n        \"Tropical Medicine as a Colonial Field\",\n        \"Miasma Theory in 19th-Century Brazil\"\n      ],\n      \"description\": \"Medical knowledge and practices in Brazil from the colonial era through the 19th century, including Indigenous, Jesuit, and European approaches to healing and disease causation.\",\n      \"title\": \"Colonial and 19th-Century Medical Knowledge\"\n    },\n    {\n      \"concepts\": [\n        \"Yellow Fever Epidemics in Rio de Janeiro\",\n        \"Smallpox Outbreaks in Imperial Brazil\",\n        \"Cholera in 19th-Century Brazil\",\n        \"Bubonic Plague in Brazilian Ports\",\n        \"Disease and the Slave Trade\"\n      ],\n      \"description\": \"Major epidemic diseases that struck Brazil in the 19th and early 20th centuries, their social contexts, and the connection between the slave trade and disease transmission.\",\n      \"title\": \"19th-Century Epidemics\"\n    },\n    {\n      \"concepts\": [\n        \"Oswaldo Cruz and Public Health Reform\",\n        \"Vaccine Revolt of 1904\",\n        \"Compulsory Smallpox Vaccination Campaign\",\n        \"Popular Resistance to State Health Interventions\",\n        \"Manguinhos Institute (Fiocruz Origins)\"\n      ],\n      \"description\": \"The public health campaigns of the early 20th century, particularly the reforms led by Oswaldo Cruz, the backlash against compulsory vaccination in Rio de Janeiro, and the founding of key research institutions.\",\n      \"title\": \"Oswaldo Cruz and the Vaccine Revolt\"\n    },\n    {\n      \"concepts\": [\n        \"Carlos Chagas and Chagas Disease Discovery\",\n        \"Belisário Pena and Rural Health Campaigns\",\n        \"The Sertões as a Zone of Disease\",\n        \"Rural Sanitation Movement\",\n        \"'Enormous Hospital' Narrative of Brazil\"\n      ],\n      \"description\": \"Health campaigns targeting rural Brazil, the discovery of Chagas disease, and the political framing of the Brazilian interior as sick and neglected.\",\n      \"title\": \"Rural Health and the Sanitation Movement\"\n    },\n    {\n      \"concepts\": [\n        \"Rockefeller Foundation in Brazil\",\n        \"International Health Cooperation in the Early 20th Century\",\n        \"Yellow Fever Eradication Campaigns\",\n        \"Malaria Control Programs\",\n        \"Aedes aegypti Mosquito Control Efforts\"\n      ],\n      \"description\": \"International partnerships and targeted campaigns against vector-borne diseases in the early to mid-20th century, including the Rockefeller Foundation's role in Brazilian public health.\",\n      \"title\": \"International Health Missions and Vector Control\"\n    },\n    {\n      \"concepts\": [\n        \"Getúlio Vargas and Public Health Institutions\",\n        \"Creation of the Ministry of Health\",\n        \"Public Health in the Estado Novo\",\n        \"Workers' Health Protections under Vargas\",\n        \"Social Security and Health Access in Mid-Century Brazil\"\n      ],\n      \"description\": \"How the Vargas era shaped the institutional landscape of public health, including the creation of government health agencies and the link between labor policy and healthcare access.\",\n      \"title\": \"State Building and Health under Vargas\"\n    },\n    {\n      \"concepts\": [\n        \"Sanitarismo Developmentalist Ideology\",\n        \"Health as a Development Strategy\",\n        \"Preventive Medicine Movement in Brazil\",\n        \"Community Health Agents Concept\",\n        \"Military Dictatorship and Privatization of Healthcare\"\n      ],\n      \"description\": \"Shifts in public health philosophy from the mid-20th century, including developmentalist approaches to health, the preventive medicine movement, and how the military regime restructured healthcare toward privatization.\",\n      \"title\": \"Developmentalism and Health Policy (1950s–1970s)\"\n    },\n    {\n      \"concepts\": [\n        \"Reforma Sanitária Movement\",\n        \"8th National Health Conference of 1986\",\n        \"Sérgio Arouca and Health Reform Advocacy\",\n        \"Health as a Constitutional Right (1988 Constitution)\",\n        \"Social Determinants of Health in Brazilian Discourse\"\n      ],\n      \"description\": \"The democratic health reform movement of the 1970s and 1980s that culminated in enshrining health as a universal right in the 1988 Constitution.\",\n      \"title\": \"The Sanitary Reform Movement (Reforma Sanitária)\"\n    },\n    {\n      \"concepts\": [\n        \"Creation of the SUS (Unified Health System)\",\n        \"SUS Principles: Universality, Equity, Integrality\",\n        \"Decentralization of Health Services under SUS\",\n        \"Family Health Strategy (Programa Saúde da Família)\",\n        \"Primary Care Model in SUS\",\n        \"SUS Funding Challenges\"\n      ],\n      \"description\": \"The structure, foundational principles, and operational model of Brazil's Unified Health System, including its primary care strategy and persistent funding constraints.\",\n      \"title\": \"The Unified Health System (SUS)\"\n    },\n    {\n      \"concepts\": [\n        \"Brazilian National Immunization Program (PNI)\",\n        \"Polio Eradication Campaign in Brazil\",\n        \"Zé Gotinha Mascot and Vaccine Culture\",\n        \"Brazil's Vaccine Production Capacity\",\n        \"Fiocruz and Butantan Institute Roles\"\n      ],\n      \"description\": \"Brazil's internationally recognized immunization infrastructure, major vaccination campaigns, and the public institutions responsible for vaccine research and production.\",\n      \"title\": \"Vaccination Programs and Biomedical Institutions\"\n    },\n    {\n      \"concepts\": [\n        \"HIV/AIDS Epidemic in Brazil\",\n        \"Brazil's Free Antiretroviral Policy\",\n        \"Compulsory Licensing of HIV Drugs\",\n        \"AIDS Activism and Civil Society\",\n        \"Brazil as Global Model for HIV/AIDS Response\"\n      ],\n      \"description\": \"Brazil's experience with the HIV/AIDS epidemic, the landmark universal antiretroviral treatment policy, pharmaceutical patent battles, and the role of civil society in shaping the response.\",\n      \"title\": \"The HIV/AIDS Response\"\n    },\n    {\n      \"concepts\": [\n        \"Dengue as a Recurring Public Health Crisis\",\n        \"Zika Virus Epidemic in Brazil\",\n        \"Microcephaly Crisis and Zika\",\n        \"Chikungunya Outbreaks\",\n        \"H1N1 Influenza Pandemic in Brazil (2009)\",\n        \"Neglected Tropical Diseases in Brazil\"\n      ],\n      \"description\": \"Recurring and emerging infectious disease crises in late 20th and early 21st century Brazil, including vector-borne diseases and pandemic influenza.\",\n      \"title\": \"Emerging and Recurring Epidemics (1990s–2010s)\"\n    },\n    {\n      \"concepts\": [\n        \"COVID-19 Arrival and Initial Spread in Brazil\",\n        \"Federal vs. State Responses to COVID-19\",\n        \"Bolsonaro's COVID-19 Denialism\",\n        \"Manaus Oxygen Crisis\",\n        \"COVID-19 and Indigenous Communities\",\n        \"CoronaVac and AstraZeneca Vaccine Campaigns\",\n        \"COVID-19 CPI (Parliamentary Inquiry)\",\n        \"COVID-19 Death Toll and Data Transparency\"\n      ],\n      \"description\": \"Brazil's experience with the COVID-19 pandemic, including political conflicts over public health measures, disproportionate impacts on vulnerable populations, the vaccine rollout, and governmental accountability.\",\n      \"title\": \"COVID-19 in Brazil\"\n    },\n    {\n      \"concepts\": [\n        \"Racial Disparities in Health Outcomes\",\n        \"Black Maternal Mortality in Brazil\",\n        \"Indigenous Health Disparities\",\n        \"Health Access in Peripheral Urban Areas\",\n        \"Regional Health Inequalities (North/Northeast vs. South/Southeast)\",\n        \"Gender and Healthcare Access\"\n      ],\n      \"description\": \"Persistent inequalities in health access and outcomes along racial, geographic, gender, and socioeconomic lines in Brazil.\",\n      \"title\": \"Health Inequalities and Social Disparities\"\n    },\n    {\n      \"concepts\": [\n        \"Psychiatric Reform in Brazil (Luta Antimanicomial)\",\n        \"Deinstitutionalization of Mental Health Care\",\n        \"CAPS (Psychosocial Care Centers)\",\n        \"Reproductive Health Politics in Brazil\",\n        \"Abortion Debate in Brazilian Public Health\",\n        \"Medicalization and Pharmaceutical Industry Influence\"\n      ],\n      \"description\": \"Contested areas of biomedical politics in Brazil, including mental health reform, reproductive rights, and the influence of the pharmaceutical industry on health policy.\",\n      \"title\": \"Biomedical Politics and Contested Health Issues\"\n    },\n    {\n      \"concepts\": [\n        \"Mais Médicos Program\",\n        \"Cuban Doctors in Brazil Controversy\",\n        \"Private Health Insurance Sector in Brazil\",\n        \"SUS vs. Private Healthcare Two-Tier System\",\n        \"Anti-Vaccine Movements in Contemporary Brazil\",\n        \"Digital Misinformation and Public Health\"\n      ],\n      \"description\": \"Recent debates and policies shaping Brazil's health landscape, including the Mais Médicos program, the tension between public and private healthcare, and the challenge of health misinformation.\",\n      \"title\": \"Contemporary Health Policy Debates\"\n    }\n  ]\n}",
      "outputTokens": 1769,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-brazilian-history-health-disease-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Brazilian History\n    CHAPTER_TITLE: Health and disease\n    CHAPTER_DESCRIPTION: Public health, epidemics, health systems, and biomedical politics from the 19th century to COVID-19; sanitation campaigns and inequality.\nNEIGHBORING_CHAPTERS:\n- \"Sports and society\": Football history, race and class in sport, club cultures, mega-events, and stadium politics; sport as national narrative.\n- \"Cities and urban inequality\": Urbanization, housing, sanitation, policing, and informal settlements; favelas, segregation, and metropolitan governance.\n- \"Environmental history and the Amazon\": Amazon, Cerrado, and Atlantic Forest histories: extraction, conservation, Indigenous stewardship, climate politics, and environmental governance.\n- \"Military and national security\": Professionalization of the armed forces, coups, doctrine, and defense policy; civil-military relations in democracy.\n- \"Foreign policy and international relations\": Diplomacy from empire to present: borders, regional leadership, multilateralism, South–South ties, and great-power relations.\n- \"Historiography and public memory\": How Brazil's past is narrated and contested: schools, monuments, museums, reparations debates, transitional justice, and public history.\n  "
    }
  ],
  "taskId": "chapter-lessons"
}
