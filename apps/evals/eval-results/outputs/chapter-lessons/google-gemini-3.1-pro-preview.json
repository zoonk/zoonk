{
  "generatedAt": "2026-03-01T01:42:23.345Z",
  "modelId": "google/gemini-3.1-pro-preview",
  "outputs": [
    {
      "duration": 30393.911416999996,
      "inputTokens": 2508,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Purpose of an IP Address\",\n        \"IPv4 Format\",\n        \"IPv6 Format\",\n        \"Public IP Addresses\",\n        \"Private IP Addresses\",\n        \"Loopback Address\",\n        \"Subnet Masks\",\n        \"CIDR Notation\"\n      ],\n      \"description\": \"Structure and categories of IP addresses used to identify devices on a network.\",\n      \"title\": \"IP Addressing\"\n    },\n    {\n      \"concepts\": [\n        \"Network Packets\",\n        \"Role of a Router\",\n        \"Routing Tables\",\n        \"Network Hops\",\n        \"Time to Live Constraint\",\n        \"Default Gateway\",\n        \"Autonomous Systems\",\n        \"Border Gateway Protocol\"\n      ],\n      \"description\": \"Mechanisms for directing data packets across interconnected networks from source to destination.\",\n      \"title\": \"Network Routing\"\n    },\n    {\n      \"concepts\": [\n        \"Purpose of NAT\",\n        \"IPv4 Exhaustion Problem\",\n        \"Source NAT\",\n        \"Port Forwarding\",\n        \"Hairpin NAT\"\n      ],\n      \"description\": \"Techniques for mapping local private addresses to a public IP address during data transfer.\",\n      \"title\": \"Network Address Translation\"\n    },\n    {\n      \"concepts\": [\n        \"Purpose of TCP\",\n        \"TCP Ports\",\n        \"Three-Way Handshake\",\n        \"Reliable Delivery Guarantee\",\n        \"Packet Sequencing\",\n        \"TCP Retransmission\",\n        \"Connection Termination\"\n      ],\n      \"description\": \"Core mechanisms of TCP that ensure reliable, ordered delivery of data between applications.\",\n      \"title\": \"Transmission Control Protocol\"\n    },\n    {\n      \"concepts\": [\n        \"Purpose of UDP\",\n        \"UDP Ports\",\n        \"Connectionless Communication\",\n        \"UDP Datagrams\",\n        \"Unordered Delivery\"\n      ],\n      \"description\": \"Characteristics of UDP for fast communication without reliability guarantees.\",\n      \"title\": \"User Datagram Protocol\"\n    },\n    {\n      \"concepts\": [\n        \"Network Latency\",\n        \"Speed of Light Constraint\",\n        \"Network Bandwidth\",\n        \"Network Throughput\",\n        \"Network Jitter\",\n        \"Network Congestion\",\n        \"Asymmetric Routing Effects\"\n      ],\n      \"description\": \"Physical and systemic factors that dictate the speed and capacity of data transfer.\",\n      \"title\": \"Network Performance Metrics\"\n    },\n    {\n      \"concepts\": [\n        \"Packet Loss\",\n        \"Connection Timeouts\",\n        \"Connection Refused Error\",\n        \"Host Unreachable Error\",\n        \"Network Loops\",\n        \"Silent Packet Drops\"\n      ],\n      \"description\": \"Common ways network connections fail and how they manifest to client applications.\",\n      \"title\": \"Network Failure Modes\"\n    },\n    {\n      \"concepts\": [\n        \"Ping Utility\",\n        \"Traceroute Mechanism\",\n        \"Netcat Port Probing\",\n        \"Local Routing Tables\",\n        \"Telnet Diagnostics\",\n        \"OSI Model Troubleshooting Framework\"\n      ],\n      \"description\": \"Tools and mental models for diagnosing network issues from the application perspective.\",\n      \"title\": \"Debugging Connectivity\"\n    }\n  ]\n}",
      "outputTokens": 2779,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-web-networking-fundamentals-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Web Development\n    CHAPTER_TITLE: Networking fundamentals\n    CHAPTER_DESCRIPTION: IP addressing, routing, NAT, TCP vs UDP, latency and bandwidth tradeoffs, and common failure modes. Practical mental models for debugging connectivity issues.\nNEIGHBORING_CHAPTERS:\n- \"Web development landscape\": Roles, responsibilities, and interfaces across front-end, back-end, full-stack, QA, DevOps, security, design, and product. How standards bodies and browser vendors shape the platform.\n- \"DNS and domains\": DNS records, resolvers, caching, propagation, and common configurations for web apps. Domain strategy, subdomains, and pitfalls with split-horizon DNS.\n- \"HTTP\": HTTP methods, status codes, headers, content negotiation, caching semantics, cookies, and redirects. HTTP/2 and HTTP/3 concepts and performance implications.\n- \"HTTPS and TLS\": TLS handshakes, certificate chains, HSTS, OCSP stapling, and modern TLS configuration choices. Secure transport patterns for browsers, APIs, and internal services.\n  "
    },
    {
      "duration": 60401.92812499998,
      "inputTokens": 2582,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"O Tipo Inteiro\",\n        \"Precisão Arbitrária do Inteiro\",\n        \"A Função int\",\n        \"Conversão de String para Inteiro\",\n        \"Especificação de Base na Função int\"\n      ],\n      \"description\": \"Características do tipo numérico int, sua capacidade ilimitada na memória e técnicas de conversão.\",\n      \"title\": \"Números Inteiros\"\n    },\n    {\n      \"concepts\": [\n        \"O Tipo Ponto Flutuante\",\n        \"A Função float\",\n        \"Adoção do Padrão IEEE 754\",\n        \"Erros de Arredondamento\",\n        \"O Valor Infinito\",\n        \"O Valor Not a Number\"\n      ],\n      \"description\": \"A representação de números reais, limites da arquitetura de ponto flutuante e valores assintóticos.\",\n      \"title\": \"Pontos Flutuantes\"\n    },\n    {\n      \"concepts\": [\n        \"O Tipo Complexo\",\n        \"A Função complex\",\n        \"Atributo da Parte Real\",\n        \"Atributo da Parte Imaginária\",\n        \"O Método conjugate\"\n      ],\n      \"description\": \"A estrutura de números complexos nativos no Python e o acesso aos seus componentes matemáticos.\",\n      \"title\": \"Números Complexos\"\n    },\n    {\n      \"concepts\": [\n        \"O Tipo Booleano\",\n        \"O Valor True\",\n        \"O Valor False\",\n        \"Booleano como Subclasse de Inteiro\",\n        \"A Função bool\"\n      ],\n      \"description\": \"A tipagem lógica do Python, seus valores binários e a relação intrínseca que possuem com o tipo inteiro.\",\n      \"title\": \"Valores Booleanos\"\n    },\n    {\n      \"concepts\": [\n        \"O Tipo NoneType\",\n        \"O Valor None\",\n        \"A Semântica de Ausência de Valor\",\n        \"Verificação de Identidade de None\"\n      ],\n      \"description\": \"O objeto único do Python usado para denotar a ausência intencional de um valor e o padrão correto para validá-lo.\",\n      \"title\": \"O Valor Nulo\"\n    },\n    {\n      \"concepts\": [\n        \"O Módulo decimal\",\n        \"A Classe Decimal\",\n        \"Configuração do Contexto Decimal\",\n        \"O Módulo fractions\",\n        \"A Classe Fraction\",\n        \"Simplificação Automática de Frações\"\n      ],\n      \"description\": \"Alternativas da biblioteca padrão para cálculos numéricos exatos, contornando as imprecisões do ponto flutuante.\",\n      \"title\": \"Módulos de Alta Precisão\"\n    },\n    {\n      \"concepts\": [\n        \"Coerção Numérica Implícita\",\n        \"Truncação na Conversão para Inteiro\",\n        \"A Função math.isclose\",\n        \"Tolerância Relativa\",\n        \"Tolerância Absoluta\"\n      ],\n      \"description\": \"Regras de promoção automática de tipos numéricos e parâmetros seguros para comparação de floats.\",\n      \"title\": \"Interações Entre Tipos Numéricos\"\n    }\n  ]\n}",
      "outputTokens": 5066,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-python-tipos-numericos-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Python\n    CHAPTER_TITLE: Tipos numéricos e valores especiais\n    CHAPTER_DESCRIPTION: Inteiros, floats, complexos, bool, None; conversões, precisão numérica, erros de arredondamento e uso de decimal/fractions.\nNEIGHBORING_CHAPTERS:\n- \"Ambiente de desenvolvimento\": Instalação e configuração do Python, múltiplas versões, PATH, virtual environments, VS Code/IDEs, REPL, Jupyter e boas práticas de organização local.\n- \"Execução de programas\": Execução em REPL, scripts e módulos; shebang, codificação, argumentos de linha de comando e status de saída do processo.\n- \"Sintaxe e convenções\": Regras de indentação, nomes, comentários, docstrings, literais, operadores e precedência; diferenças entre Python interativo e arquivo.\n- \"Texto e codificação\": Strings, bytes e bytearray; Unicode, normalização, encodings, f-strings, formatação avançada e manipulação eficiente.\n- \"Estruturas de dados fundamentais\": Listas, tuplas, dicionários e conjuntos; mutabilidade, cópia rasa vs profunda, hashing, ordenação e complexidade de operações.\n- \"Controle de fluxo\": if/elif/else, match/case, loops, break/continue, compreensão de escopo e padrões comuns de controle.\n  "
    },
    {
      "duration": 95413.89279200003,
      "inputTokens": 2584,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Estructura electrónica del carbonilo\",\n        \"Geometría trigonal plana\",\n        \"Polaridad del enlace carbono-oxígeno\",\n        \"Electrofília del carbono carbonílico\",\n        \"Basicidad del oxígeno carbonílico\",\n        \"Efecto estérico en aldehídos\",\n        \"Efecto estérico en cetonas\",\n        \"Efecto inductivo estabilizador\"\n      ],\n      \"description\": \"Fundamentos de la estructura electrónica del doble enlace oxigenado junto con los efectos estéricos sobre la reactividad.\",\n      \"title\": \"Propiedades del grupo carbonilo\"\n    },\n    {\n      \"concepts\": [\n        \"Mecanismo general de adición nucleofílica\",\n        \"Activación del carbonilo por catálisis ácida\",\n        \"Aumento de nucleofilia por catálisis básica\",\n        \"Reacción de hidratación\",\n        \"Estructura del diol geminal\",\n        \"Formación de hemiacetales\",\n        \"Formación de acetales\",\n        \"Acetales cíclicos como protectores\"\n      ],\n      \"description\": \"Mecanismos de hidratación para formar dioles geminales junto con la síntesis de acetales protectores.\",\n      \"title\": \"Adiciones con nucleófilos oxigenados\"\n    },\n    {\n      \"concepts\": [\n        \"Reacción con aminas primarias\",\n        \"Mecanismo de formación de iminas\",\n        \"Reacción con aminas secundarias\",\n        \"Mecanismo de formación de enaminas\",\n        \"Reversibilidad de iminas en medio acuoso\"\n      ],\n      \"description\": \"Formación de compuestos con dobles enlaces hacia nitrógeno mediante la reacción con distintos tipos de aminas.\",\n      \"title\": \"Adición de nucleófilos nitrogenados\"\n    },\n    {\n      \"concepts\": [\n        \"Ataque nucleofílico del ion cianuro\",\n        \"Estructura de las cianhidrinas\",\n        \"Adición de reactivos de Grignard\",\n        \"Adición de reactivos organolíticos\",\n        \"Formación de iluros de fósforo\",\n        \"Mecanismo de la reacción de Wittig\",\n        \"Fuerza impulsora del óxido de trifenilfosfina\"\n      ],\n      \"description\": \"Reacciones de formación de enlaces directos sobre el carbono del grupo carbonilo.\",\n      \"title\": \"Adición de nucleófilos carbonados\"\n    },\n    {\n      \"concepts\": [\n        \"Acidez del protón alfa\",\n        \"Equilibrio tautomérico\",\n        \"Estructura del enol\",\n        \"Mecanismo de enolización en medio ácido\",\n        \"Mecanismo de enolización en medio básico\",\n        \"Halogenación alfa catalizada por ácido\",\n        \"Halogenación alfa promovida por base\",\n        \"Mecanismo de la reacción del haloformo\"\n      ],\n      \"description\": \"Equilibrio estructural de los compuestos carbonílicos hacia su forma enólica con sus correspondientes reacciones de halogenación alfa.\",\n      \"title\": \"Tautomería enólica\"\n    },\n    {\n      \"concepts\": [\n        \"Estructura estabilizada por resonancia\",\n        \"Carácter ambidentado del ion enolato\",\n        \"Concepto de enolato cinético\",\n        \"Concepto de enolato termodinámico\",\n        \"Condiciones irreversibles para enolatos cinéticos\",\n        \"Condiciones reversibles para enolatos termodinámicos\",\n        \"Ataque nucleofílico sobre haluros de alquilo\",\n        \"Alquilación indirecta mediante enaminas\"\n      ],\n      \"description\": \"Estrategias de desprotonación de compuestos carbonílicos con control regioquímico mediante la selección específica de la base.\",\n      \"title\": \"Generación de enolatos\"\n    },\n    {\n      \"concepts\": [\n        \"Ataque del enolato al carbono carbonílico\",\n        \"Estructura del producto hidroxilado\",\n        \"Deshidratación catalizada por base\",\n        \"Estructura de la enona conjugada\",\n        \"Desafíos sintéticos del aldol cruzado\",\n        \"Reacciones aldólicas intramoleculares\",\n        \"Estrategia de aldol dirigido\"\n      ],\n      \"description\": \"Reacciones de acoplamiento entre aldehídos para ensamblar intermediarios hidroxilados con sus posteriores deshidrataciones.\",\n      \"title\": \"Reacción aldólica\"\n    },\n    {\n      \"concepts\": [\n        \"Acidez del protón alfa en ésteres\",\n        \"Ataque nucleofílico del enolato de éster\",\n        \"Expulsión del grupo alcóxido saliente\",\n        \"Desprotonación irreversible del producto\",\n        \"Requisito estricto de dos protones alfa\",\n        \"Condensaciones cruzadas con ésteres no enolizables\",\n        \"Ciclación intramolecular de Dieckmann\"\n      ],\n      \"description\": \"Acoplamiento de ésteres impulsado por la formación de enolatos para sintetizar compuestos con múltiples grupos carbonilo.\",\n      \"title\": \"Condensación de Claisen\"\n    },\n    {\n      \"concepts\": [\n        \"Deslocalización electrónica en enonas\",\n        \"Electrofília del carbono beta\",\n        \"Preferencia por la adición conjugada\",\n        \"Características de los donantes de Michael\",\n        \"Características de los aceptores de Michael\",\n        \"Paso de ataque nucleofílico conjugado\",\n        \"Protonación del enolato intermedio\",\n        \"Secuencia en tándem de Robinson\"\n      ],\n      \"description\": \"Reacciones de enolatos sobre sistemas insaturados conjugados para lograr extensiones selectivas del esqueleto carbonado.\",\n      \"title\": \"Reacción de Michael\"\n    }\n  ]\n}",
      "outputTokens": 9247,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "es-quimica-carbonilos-enolatos-1",
      "userPrompt": "\n    LANGUAGE: es\n    COURSE_TITLE: Química\n    CHAPTER_TITLE: Carbonilos y enolatos\n    CHAPTER_DESCRIPTION: Adición nucleofílica a carbonilos, química de enoles/enolatos, aldol, Claisen, Michael y control de selectividad.\nNEIGHBORING_CHAPTERS:\n- \"Sustitución y eliminación\": SN1/SN2, E1/E2, reactividad, solventes, nucleófilos/bases, rearrangements y control de selectividad.\n- \"Adiciones a alquenos y alquinos\": Hidrogenación, halogenación, hidratación, hidroboración-oxidación, adiciones conjugadas y química de alquinos.\n- \"Química aromática\": Aromaticidad, sustitución electrofílica/nucleofílica aromática, directores, y reactividad de sistemas aromáticos extendidos.\n- \"Ácidos carboxílicos y derivados\": Reactividad de ácidos carboxílicos, derivados acílicos, química de amidas/ésteres/anhídridos y estrategias de activación.\n- \"Heterociclos\": Síntesis y reactividad de heterociclos aromáticos y saturados; aplicaciones en fármacos y materiales.\n- \"Radicales y fotoquímica orgánica\": Mecanismos radicalarios, iniciación/propagación/terminación, selectividad, y reacciones fotoquímicas orgánicas.\n  "
    },
    {
      "duration": 40403.58370900003,
      "inputTokens": 2502,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"The Business Cycle Concept\",\n        \"Expansion Phase\",\n        \"Peak Phase\",\n        \"Contraction Phase\",\n        \"Trough Phase\",\n        \"Cycle Amplitude\",\n        \"Cycle Frequency\"\n      ],\n      \"description\": \"The fundamental definitions and distinct phases that characterize short-term fluctuations in aggregate economic activity.\",\n      \"title\": \"Anatomy of Business Cycles\"\n    },\n    {\n      \"concepts\": [\n        \"Macroeconomic Time Series\",\n        \"Trend Growth\",\n        \"Cyclical Component\",\n        \"Data Detrending\",\n        \"Relative Volatility\"\n      ],\n      \"description\": \"Techniques and concepts for separating long-term economic growth from short-term cyclical deviations to establish stylized facts.\",\n      \"title\": \"Measuring Economic Fluctuations\"\n    },\n    {\n      \"concepts\": [\n        \"Procyclical Variables\",\n        \"Countercyclical Variables\",\n        \"Acyclical Variables\",\n        \"Leading Indicators\",\n        \"Lagging Indicators\",\n        \"Coincident Indicators\"\n      ],\n      \"description\": \"Classifying macroeconomic variables based on their directional correlation and chronological timing relative to overall output.\",\n      \"title\": \"Cyclical Direction and Timing\"\n    },\n    {\n      \"concepts\": [\n        \"Aggregate Consumption Cyclicality\",\n        \"Aggregate Investment Volatility\",\n        \"Durable Goods Volatility\",\n        \"Nondurable Goods Volatility\",\n        \"Services Sector Volatility\",\n        \"Import Cyclicality\",\n        \"Export Cyclicality\"\n      ],\n      \"description\": \"The empirical behavior and relative stability of different expenditure components and production sectors over the business cycle.\",\n      \"title\": \"Expenditure and Sectoral Volatility\"\n    },\n    {\n      \"concepts\": [\n        \"Total Hours Worked Cyclicality\",\n        \"Employment Volatility\",\n        \"Unemployment Cyclicality\",\n        \"Okun's Law\",\n        \"Average Labor Productivity Cyclicality\",\n        \"Real Wage Cyclicality\"\n      ],\n      \"description\": \"Empirical patterns of job creation, labor utilization, worker compensation, and productivity changes during expansions and contractions.\",\n      \"title\": \"Cyclical Patterns in Labor and Productivity\"\n    },\n    {\n      \"concepts\": [\n        \"Inflation Cyclicality\",\n        \"Price Level Cyclicality\",\n        \"Nominal Interest Rate Cyclicality\",\n        \"Money Supply Cyclicality\",\n        \"Stock Price Cyclicality\",\n        \"Cross-Sector Correlation\",\n        \"Geographic Comovement\"\n      ],\n      \"description\": \"The behavior of prices, monetary aggregates, financial markets, and the synchronized movement of economic activity across different areas.\",\n      \"title\": \"Nominal Variables and Aggregate Comovement\"\n    }\n  ]\n}",
      "outputTokens": 2802,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-economics-business-cycles-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Economics\n    CHAPTER_TITLE: Business cycles\n    CHAPTER_DESCRIPTION: Business cycle facts, stylized patterns in output, inflation, unemployment, productivity, and comovements across sectors.\nNEIGHBORING_CHAPTERS:\n- \"Behavioral economics\": Behavioral biases, bounded rationality, time inconsistency, social preferences, and policy design with behavioral responses.\n- \"Experimental economics\": Laboratory and field experiments, incentive design, external validity, and behavioral/market design evidence.\n- \"Macroeconomic accounting\": National income and product accounts, sectoral balances, price indices, productivity, and flow-of-funds concepts.\n- \"Consumption and savings\": Consumption-saving, life-cycle and permanent income models, liquidity constraints, and empirical puzzles.\n- \"Investment and capital\": Investment theory, q-models, adjustment costs, irreversibility, and firm-level investment dynamics.\n- \"Unemployment and labor in macro\": Labor markets in macro, search and matching, wage setting, unemployment dynamics, and Beveridge curve analysis.\n  "
    },
    {
      "duration": 34358.59970800002,
      "inputTokens": 2586,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Big Design Up Front\",\n        \"Arquitetura Ágil\",\n        \"Design Incremental\",\n        \"O Último Momento Responsável\",\n        \"Capacidade de Evolução\"\n      ],\n      \"description\": \"Princípios básicos que diferenciam a arquitetura de software em contextos ágeis das abordagens tradicionais baseadas em planejamento exaustivo.\",\n      \"title\": \"Fundamentos da Arquitetura Ágil\"\n    },\n    {\n      \"concepts\": [\n        \"Modularidade\",\n        \"Acoplamento\",\n        \"Coesão\",\n        \"Contextos Delimitados\",\n        \"Sistemas Monolíticos\",\n        \"Arquitetura de Microsserviços\"\n      ],\n      \"description\": \"Conceitos de design estrutural que garantem a flexibilidade, o isolamento de falhas e a independência das partes do sistema.\",\n      \"title\": \"Modularidade e Estrutura\"\n    },\n    {\n      \"concepts\": [\n        \"Arquitetura Sociotécnica\",\n        \"Lei de Conway\",\n        \"Manobra Inversa de Conway\",\n        \"Fronteiras de Domínio\"\n      ],\n      \"description\": \"A relação direta entre a estrutura de comunicação das equipes organizacionais e o design dos sistemas que elas constroem.\",\n      \"title\": \"Arquitetura Sociotécnica\"\n    },\n    {\n      \"concepts\": [\n        \"Arquitetura Evolutiva\",\n        \"Características Arquiteturais\",\n        \"Fitness Functions\",\n        \"Fitness Functions Atômicas\",\n        \"Fitness Functions Holísticas\",\n        \"Governança Arquitetural\"\n      ],\n      \"description\": \"Mecanismos e práticas para garantir que o sistema possa mudar gradualmente ao longo do tempo preservando seus atributos de qualidade.\",\n      \"title\": \"Arquitetura Evolutiva e Governança\"\n    },\n    {\n      \"concepts\": [\n        \"Trade-offs Arquiteturais\",\n        \"Registro de Decisões Arquiteturais\",\n        \"Estrutura de um ADR\",\n        \"Request for Comments Arquitetural\",\n        \"Descentralização de Decisões\"\n      ],\n      \"description\": \"Métodos para documentar, comunicar, avaliar e distribuir as escolhas de design do sistema em ambientes de mudança constante.\",\n      \"title\": \"Gestão de Decisões Arquiteturais\"\n    }\n  ]\n}",
      "outputTokens": 2761,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-agile-arquitetura-agil-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Metodologias Ágeis\n    CHAPTER_TITLE: Arquitetura em ambientes ágeis\n    CHAPTER_DESCRIPTION: Arquitetura evolutiva, modularidade, acoplamento/cohesão, fitness functions e decisões arquiteturais compatíveis com mudanças frequentes.\nNEIGHBORING_CHAPTERS:\n- \"Discovery e Delivery integrados\": Dual Track (Discovery/Delivery), discovery contínuo, e prevenção de 'teatro ágil' com entrega sem aprendizado.\n- \"DevOps e entrega contínua\": DevOps: colaboração Dev+Ops, automação, pipelines, IaC, e redução de handoffs para acelerar e estabilizar entregas.\n- \"SRE e confiabilidade em produtos digitais\": SRE: SLIs/SLOs, error budget, confiabilidade como requisito, e equilíbrio entre velocidade e estabilidade.\n- \"Dívida técnica e sustentabilidade\": Gestão de dívida técnica, qualidade interna, refatoração estratégica, e mecanismos de priorização junto ao valor de negócio.\n- \"Estratégias modernas de testes\": Qualidade e testes: pirâmide de testes, testes automatizados, testes exploratórios, e estratégias para sistemas distribuídos.\n- \"Segurança e DevSecOps\": Segurança no ciclo ágil: threat modeling, DevSecOps, shift-left, gestão de vulnerabilidades e resposta a incidentes.\n  "
    },
    {
      "duration": 38048.78879199998,
      "inputTokens": 2578,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Historical Alchemy\",\n        \"Nicolas Flamel\",\n        \"Magical Transmutation\",\n        \"The Philosopher's Stone\",\n        \"The Elixir of Life\",\n        \"Alchemical Symbolism\"\n      ],\n      \"description\": \"Principles of alchemical magic, its historical figures, and the creation of ultimate transmutational artifacts.\",\n      \"title\": \"The Foundations of Alchemy\"\n    },\n    {\n      \"concepts\": [\n        \"The Quest for Immortality\",\n        \"Fear of Death\",\n        \"Ghostly Imprints\",\n        \"Cursed Life\",\n        \"Unicorn Blood Properties\"\n      ],\n      \"description\": \"Non-Horcrux methods of escaping death, including their metaphysical limitations and inherent curses.\",\n      \"title\": \"Immortality Concepts\"\n    },\n    {\n      \"concepts\": [\n        \"The Horcrux Definition\",\n        \"The Act of Murder\",\n        \"Soul Tearing\",\n        \"The Horcrux Spell\",\n        \"The Object Vessel\",\n        \"Soul Fragment Sentience\"\n      ],\n      \"description\": \"The dark magic mechanics required to intentionally split a soul and bind it to the physical plane.\",\n      \"title\": \"Horcrux Metaphysics\"\n    },\n    {\n      \"concepts\": [\n        \"Historical Artifact Anchors\",\n        \"Living Organism Vessels\",\n        \"Weaponized Soul Fragments\",\n        \"Accidental Soul Transfer\"\n      ],\n      \"description\": \"The metaphysical implications of choosing different types of anchors for torn soul fragments.\",\n      \"title\": \"Horcrux Vessel Archetypes\"\n    },\n    {\n      \"concepts\": [\n        \"The Vessel Destruction Rule\",\n        \"Magical Irreparability\",\n        \"Basilisk Venom Application\",\n        \"Fiendfyre Destruction\",\n        \"Venom-Absorbing Artifacts\"\n      ],\n      \"description\": \"The absolute magical requirements for severing a soul fragment from its physical anchor.\",\n      \"title\": \"Horcrux Destruction Rules\"\n    },\n    {\n      \"concepts\": [\n        \"Physical Deformity\",\n        \"Emotional Mutilation\",\n        \"Master Soul Instability\",\n        \"The Limbo Afterlife\",\n        \"Soul Reintegration\",\n        \"Lethality of Remorse\"\n      ],\n      \"description\": \"The physical, spiritual, and eternal costs incurred by mutilating the human soul.\",\n      \"title\": \"Consequences of Soul Fragmentation\"\n    }\n  ]\n}",
      "outputTokens": 3023,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-harry-potter-alchemy-horcruxes-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Harry Potter\n    CHAPTER_TITLE: Alchemy, Horcruxes, and immortality\n    CHAPTER_DESCRIPTION: Alchemy, immortality myths, and the Philosopher's Stone as symbol. Horcrux metaphysics and the costs of soul fragmentation.\nNEIGHBORING_CHAPTERS:\n- \"Defense Against the Dark Arts\": Defense curriculum across eras and how teaching reflects politics. Practical spell selection, threat models, and the pedagogy of fear.\n- \"Divination and prophecy\": Divination's ambiguity, self-fulfilling prophecy, and narrative foreshadowing. Symbol systems: tea leaves, dreams, centaurs, and astronomy.\n- \"Mind magic and memory\": Mind magic: Legilimency, Occlumency, memory charms, and Pensieve ethics. Consent, epistemology, and the reliability of recollection.\n- \"Wandlore\": Wand woods, cores, allegiance, and the Elder Wand's legend. Comparative magical foci and what wandlore implies about power and identity.\n- \"Healing and magical medicine\": Magical healing, St Mungo's, and the boundaries of restorative magic. Disability, trauma, and long-term consequences in the series.\n- \"Beings, creatures, and species politics\": Werewolves, vampires, giants, goblins, house-elves, centaurs, and merpeople as political subjects. Rights, stereotypes, and allegory across species.\n  "
    },
    {
      "duration": 31978.48358400003,
      "inputTokens": 2648,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Conceito de Legal Tech\",\n        \"Categorias de Tecnologias Jurídicas\",\n        \"Adoção Tecnológica no Direito\",\n        \"Parâmetros de Qualidade na Automação\"\n      ],\n      \"description\": \"Princípios da adoção de tecnologia na prática jurídica e fundamentos estruturais da qualidade automatizada.\",\n      \"title\": \"Fundamentos de Legal Tech\"\n    },\n    {\n      \"concepts\": [\n        \"Conceito de Automação de Documentos\",\n        \"Criação de Templates Base\",\n        \"Mapeamento de Variáveis\",\n        \"Lógica Condicional em Documentos\",\n        \"Geração de Documentos em Lote\",\n        \"Padronização de Formatação\"\n      ],\n      \"description\": \"Técnicas de transformação de peças estáticas em sistemas dinâmicos de geração de conteúdo.\",\n      \"title\": \"Automação de Documentos\"\n    },\n    {\n      \"concepts\": [\n        \"Revisão Textual Automatizada\",\n        \"Detecção de Inconsistências Lógicas\",\n        \"Extração de Dados em Texto\",\n        \"Análise Semântica de Peças\",\n        \"Inteligência Artificial na Revisão\"\n      ],\n      \"description\": \"Aplicação de softwares e inteligência artificial para detecção de erros e análise profunda de textos.\",\n      \"title\": \"Revisão Assistida por Tecnologia\"\n    },\n    {\n      \"concepts\": [\n        \"Repositórios Digitais Jurídicos\",\n        \"Metadados de Arquivos\",\n        \"Reconhecimento Óptico de Caracteres\",\n        \"Indexação de Documentos\",\n        \"Busca Textual Avançada\",\n        \"Controle de Acesso a Pastas\"\n      ],\n      \"description\": \"Estruturação de repositórios digitais, pesquisa técnica e segurança de arquivos jurídicos.\",\n      \"title\": \"Sistemas de Gestão Documental\"\n    },\n    {\n      \"concepts\": [\n        \"Conceito de Versionamento\",\n        \"Nomenclatura Sistemática de Arquivos\",\n        \"Edição Simultânea de Documentos\",\n        \"Comparação Automatizada de Versões\",\n        \"Trilhas de Auditoria Documental\",\n        \"Recuperação de Versões Anteriores\"\n      ],\n      \"description\": \"Rastreabilidade de alterações em peças jurídicas temporais e mecanismos de auditoria de arquivos.\",\n      \"title\": \"Controle de Versões\"\n    },\n    {\n      \"concepts\": [\n        \"Conceito de Governança de Conhecimento\",\n        \"Taxonomia Jurídica Institucional\",\n        \"Curadoria de Precedentes Internos\",\n        \"Repositórios de Textos Reutilizáveis\",\n        \"Retenção de Memória Institucional\",\n        \"Rotinas de Atualização de Acervo\"\n      ],\n      \"description\": \"Organização do capital intelectual, padronização classificatória e curadoria de acervo técnico.\",\n      \"title\": \"Governança de Conhecimento Jurídico\"\n    },\n    {\n      \"concepts\": [\n        \"Dependência Tecnológica Excessiva\",\n        \"Princípio Garbage In Garbage Out\",\n        \"Vieses Algorítmicos em Softwares\",\n        \"Alucinações em Inteligência Artificial\",\n        \"Vazamento de Dados na Automação\",\n        \"Responsabilidade Profissional no Uso Tecnológico\"\n      ],\n      \"description\": \"Falhas tecnológicas operacionais, limites da inteligência artificial e responsabilidades no uso de sistemas.\",\n      \"title\": \"Riscos da Automação Jurídica\"\n    }\n  ]\n}",
      "outputTokens": 3060,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-direito-legal-tech-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Direito\n    CHAPTER_TITLE: Legal tech e automação de documentos\n    CHAPTER_DESCRIPTION: Automação jurídica e qualidade: templates, revisão assistida, gestão documental e padronização. Riscos de automação, controle de versões e governança de conhecimento.\nNEIGHBORING_CHAPTERS:\n- \"Gestão de terceiros e due diligence\": Programas de integridade em terceiros: due diligence, cláusulas anticorrupção e monitoramento. Gestão de contratos, auditoria e encerramento por inadimplemento de compliance.\n- \"Estratégia contenciosa e gestão de disputas\": Estratégia de litígio: seleção de teses, definição de foro, gestão de portfólio e negociação de acordos. Monitoramento de precedentes, risco financeiro e comunicação com stakeholders.\n- \"Legal operations e gestão jurídica\": Gestão de escritórios e departamentos jurídicos: triagem, SLAs, indicadores e orçamento. Precificação, honorários, contratação de correspondentes e qualidade.\n- \"Operações contratuais\": Gestão de contratos: ciclo de vida, cláusulas padrão, aprovações e controle de obrigações. CLM, auditoria contratual e prevenção de disputas.\n- \"Negociação estratégica\": Negociação e mediação avançadas: BATNA, ZOPA, técnicas de influência e gestão de impasses. Construção de acordos complexos e multiparte.\n- \"Advocacia oral e persuasão\": Oratória e atuação em audiência: teoria do caso, exame e contrainterrogatório, sustentação oral e postura profissional. Comunicação com juízes, jurados e peritos.\n  "
    },
    {
      "duration": 35112.73141699997,
      "inputTokens": 2543,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Miasma Theory\",\n        \"Early Germ Theory\",\n        \"Medical School Foundations\",\n        \"Imperial Public Health Board\",\n        \"Yellow Fever Outbreaks\",\n        \"Cholera Outbreaks\"\n      ],\n      \"description\": \"Biomedical paradigms and epidemiological crises that shaped Brazilian public health during the Imperial era and the late 19th century.\",\n      \"title\": \"19th Century Imperial Medicine\"\n    },\n    {\n      \"concepts\": [\n        \"Oswaldo Cruz\",\n        \"The Vaccine Revolt\",\n        \"Mandatory Smallpox Vaccination\",\n        \"Mosquito Eradication Brigades\",\n        \"Carlos Chagas\",\n        \"Chagas Disease Discovery\",\n        \"Rockefeller Foundation Partnerships\"\n      ],\n      \"description\": \"Early 20th-century campaigns to eradicate urban epidemics and the resulting social resistance.\",\n      \"title\": \"First Republic Sanitation Campaigns\"\n    },\n    {\n      \"concepts\": [\n        \"Miguel Pereira Discourse\",\n        \"Hookworm Endemic\",\n        \"Scientific Medical Expeditions\",\n        \"Pro-Sanitation League\",\n        \"Hansen's Disease Colonies\",\n        \"Compulsory Isolation Policies\"\n      ],\n      \"description\": \"The shift in public health focus toward the rural interior and the framing of disease as a national identity problem.\",\n      \"title\": \"Rural Health and Nation Building\"\n    },\n    {\n      \"concepts\": [\n        \"Vargas Era Health Centralization\",\n        \"Special Public Health Service\",\n        \"Malaria Control Programs\",\n        \"Ministry of Health Foundation\",\n        \"Pension Institutes Medical Care\",\n        \"National Nutrition Campaign\"\n      ],\n      \"description\": \"Mid-century institutionalization of state health care, federal ministries, and targeted disease eradication programs.\",\n      \"title\": \"Mid-Century Health Institutions\"\n    },\n    {\n      \"concepts\": [\n        \"Dictatorship Era Health Privatization\",\n        \"National Institute of Medical Assistance\",\n        \"Sanitary Reform Movement\",\n        \"Sergio Arouca\",\n        \"Eighth National Health Conference\",\n        \"Health as a Constitutional Right\"\n      ],\n      \"description\": \"The struggle for a public, universal health system during the military dictatorship and the democratic transition.\",\n      \"title\": \"The Sanitary Reform Movement\"\n    },\n    {\n      \"concepts\": [\n        \"Unified Health System Creation\",\n        \"Universality Principle\",\n        \"Equity Principle\",\n        \"Integrality Principle\",\n        \"Decentralized Health Governance\",\n        \"Family Health Strategy\",\n        \"Community Health Agents\"\n      ],\n      \"description\": \"The structure, guiding principles, and primary care strategies of Brazil's modern public healthcare network.\",\n      \"title\": \"The Unified Health System (SUS)\"\n    },\n    {\n      \"concepts\": [\n        \"HIV Epidemic Arrival\",\n        \"National AIDS Program\",\n        \"Free Antiretroviral Policy\",\n        \"Pharmaceutical Patent Breaking\",\n        \"Dengue Fever Resurgence\"\n      ],\n      \"description\": \"Brazil's internationally recognized biomedical response to the HIV/AIDS crisis and the return of vector-borne tropical diseases.\",\n      \"title\": \"Late 20th Century Epidemics\"\n    },\n    {\n      \"concepts\": [\n        \"Mais Médicos Program\",\n        \"Zika Virus Epidemic\",\n        \"Congenital Zika Syndrome\",\n        \"COVID-19 Pandemic Response\",\n        \"Modern Vaccine Hesitancy\",\n        \"Indigenous Health Inequality\"\n      ],\n      \"description\": \"Contemporary public health crises, political disputes over medical care, and ongoing health disparities in the 21st century.\",\n      \"title\": \"21st Century Public Health Challenges\"\n    }\n  ]\n}",
      "outputTokens": 2713,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-brazilian-history-health-disease-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Brazilian History\n    CHAPTER_TITLE: Health and disease\n    CHAPTER_DESCRIPTION: Public health, epidemics, health systems, and biomedical politics from the 19th century to COVID-19; sanitation campaigns and inequality.\nNEIGHBORING_CHAPTERS:\n- \"Sports and society\": Football history, race and class in sport, club cultures, mega-events, and stadium politics; sport as national narrative.\n- \"Cities and urban inequality\": Urbanization, housing, sanitation, policing, and informal settlements; favelas, segregation, and metropolitan governance.\n- \"Environmental history and the Amazon\": Amazon, Cerrado, and Atlantic Forest histories: extraction, conservation, Indigenous stewardship, climate politics, and environmental governance.\n- \"Military and national security\": Professionalization of the armed forces, coups, doctrine, and defense policy; civil-military relations in democracy.\n- \"Foreign policy and international relations\": Diplomacy from empire to present: borders, regional leadership, multilateralism, South–South ties, and great-power relations.\n- \"Historiography and public memory\": How Brazil's past is narrated and contested: schools, monuments, museums, reparations debates, transitional justice, and public history.\n  "
    }
  ],
  "taskId": "chapter-lessons"
}
