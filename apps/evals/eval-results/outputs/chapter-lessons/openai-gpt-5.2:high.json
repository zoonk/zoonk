{
  "generatedAt": "2026-03-01T01:43:58.858Z",
  "modelId": "openai/gpt-5.2:high",
  "outputs": [
    {
      "duration": 97284.83891699999,
      "inputTokens": 2544,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Protocol layer\",\n        \"Link layer role\",\n        \"Internet layer role\",\n        \"Transport layer role\",\n        \"Application layer role\",\n        \"Encapsulation\",\n        \"Decapsulation\",\n        \"End-to-end path\"\n      ],\n      \"description\": \"How protocols are layered in the Internet stack and how data is wrapped and unwrapped as it moves across a network path.\",\n      \"title\": \"Internet networking layers\"\n    },\n    {\n      \"concepts\": [\n        \"IPv4 dotted-decimal notation\",\n        \"IPv6 colon-hex notation\",\n        \"Public IP address\",\n        \"Private IPv4 range\",\n        \"Loopback address\",\n        \"Link-local address\",\n        \"IPv6 global unicast address\",\n        \"IPv6 unique local address\"\n      ],\n      \"description\": \"How IP addresses are written and how their scope determines where they can be routed.\",\n      \"title\": \"IP address formats and scopes\"\n    },\n    {\n      \"concepts\": [\n        \"Static IP configuration\",\n        \"DHCP lease\",\n        \"DHCP discover message\",\n        \"DHCP offer message\",\n        \"DHCP request message\",\n        \"DHCP acknowledgment message\",\n        \"IPv6 SLAAC\",\n        \"IPv6 router advertisement\"\n      ],\n      \"description\": \"How hosts obtain usable IP configuration information automatically or manually in IPv4 and IPv6 networks.\",\n      \"title\": \"IP address assignment mechanisms\"\n    },\n    {\n      \"concepts\": [\n        \"CIDR prefix length\",\n        \"Subnet mask\",\n        \"Network address\",\n        \"Host address range\",\n        \"Broadcast address\",\n        \"Default gateway\",\n        \"Subnet overlap\",\n        \"Supernet\"\n      ],\n      \"description\": \"How IP networks are subdivided and how a prefix determines which addresses are local versus routed.\",\n      \"title\": \"CIDR subnet structure\"\n    },\n    {\n      \"concepts\": [\n        \"MAC address\",\n        \"Ethernet frame\",\n        \"Ethernet switch\",\n        \"ARP request\",\n        \"ARP reply\",\n        \"ARP cache entry\",\n        \"Gratuitous ARP\",\n        \"IPv6 neighbor solicitation\"\n      ],\n      \"description\": \"How devices find each other on the local link and how IP traffic is delivered to a next hop on the same LAN.\",\n      \"title\": \"Local link delivery\"\n    },\n    {\n      \"concepts\": [\n        \"Router\",\n        \"Routing table entry\",\n        \"Longest prefix match\",\n        \"Next hop\",\n        \"Default route\",\n        \"Static route\",\n        \"Time to live field\",\n        \"Asymmetric routing\"\n      ],\n      \"description\": \"How routers choose where to send packets and how routing choices affect reachability across multiple hops.\",\n      \"title\": \"Routing decisions\"\n    },\n    {\n      \"concepts\": [\n        \"ICMP echo request\",\n        \"ICMP echo reply\",\n        \"ICMP destination unreachable\",\n        \"ICMP port unreachable\",\n        \"ICMP time exceeded\",\n        \"ICMP fragmentation needed\",\n        \"ICMP rate limit\"\n      ],\n      \"description\": \"What common ICMP messages mean and how they surface failures like missing routes, blocked ports, and MTU issues.\",\n      \"title\": \"ICMP control messages\"\n    },\n    {\n      \"concepts\": [\n        \"Network address translation\",\n        \"Source NAT\",\n        \"Destination NAT\",\n        \"Port address translation\",\n        \"NAT mapping entry\",\n        \"NAT hairpinning\",\n        \"NAT timeout\",\n        \"Carrier-grade NAT\"\n      ],\n      \"description\": \"How NAT rewrites addresses and ports, how mappings are created, and why NAT changes inbound reachability.\",\n      \"title\": \"NAT translation\"\n    },\n    {\n      \"concepts\": [\n        \"Transport port\",\n        \"Well-known port\",\n        \"Registered port\",\n        \"Ephemeral port\",\n        \"Socket address\",\n        \"Five-tuple\",\n        \"Listening port\",\n        \"Port reuse\"\n      ],\n      \"description\": \"How applications are identified on a host and how traffic is demultiplexed into flows.\",\n      \"title\": \"Ports and sockets\"\n    },\n    {\n      \"concepts\": [\n        \"TCP segment\",\n        \"TCP three-way handshake\",\n        \"SYN flag\",\n        \"ACK flag\",\n        \"Initial sequence number\",\n        \"SYN backlog\",\n        \"Half-open connection\",\n        \"TCP handshake retransmission\"\n      ],\n      \"description\": \"How a TCP connection is established and what common partial-connection states imply during failures.\",\n      \"title\": \"TCP connection setup\"\n    },\n    {\n      \"concepts\": [\n        \"FIN flag\",\n        \"RST flag\",\n        \"TCP close handshake\",\n        \"TIME_WAIT state\",\n        \"CLOSE_WAIT state\",\n        \"TCP keepalive probe\",\n        \"Half-close connection\"\n      ],\n      \"description\": \"How TCP connections shut down and how teardown states appear in real-world debugging symptoms.\",\n      \"title\": \"TCP connection teardown\"\n    },\n    {\n      \"concepts\": [\n        \"TCP checksum\",\n        \"Sequence number\",\n        \"Acknowledgment number\",\n        \"Retransmission timeout\",\n        \"Fast retransmit\",\n        \"Duplicate acknowledgment\",\n        \"Selective acknowledgment\",\n        \"Out-of-order segment\"\n      ],\n      \"description\": \"How TCP detects loss, confirms delivery, and repairs missing data to provide a reliable byte stream.\",\n      \"title\": \"TCP reliability mechanisms\"\n    },\n    {\n      \"concepts\": [\n        \"Receive window\",\n        \"Zero window\",\n        \"Window scaling option\",\n        \"Sender window\",\n        \"Sender buffer\",\n        \"Receiver buffer\"\n      ],\n      \"description\": \"How TCP prevents a fast sender from overwhelming a slow receiver using advertised capacity.\",\n      \"title\": \"TCP flow control\"\n    },\n    {\n      \"concepts\": [\n        \"Congestion window\",\n        \"Slow start\",\n        \"Congestion avoidance\",\n        \"Additive increase\",\n        \"Multiplicative decrease\",\n        \"Packet loss signal\",\n        \"Queueing delay signal\",\n        \"Head-of-line blocking\"\n      ],\n      \"description\": \"How TCP adapts its sending rate to the network path and how congestion dynamics impact performance.\",\n      \"title\": \"TCP congestion control\"\n    },\n    {\n      \"concepts\": [\n        \"UDP datagram\",\n        \"UDP checksum\",\n        \"Datagram boundary\",\n        \"UDP receive buffer\",\n        \"UDP send buffer\",\n        \"Application-level retransmission\",\n        \"UDP fragmentation risk\"\n      ],\n      \"description\": \"How UDP provides best-effort message delivery and what reliability work moves to the application layer.\",\n      \"title\": \"UDP transport semantics\"\n    },\n    {\n      \"concepts\": [\n        \"Maximum transmission unit\",\n        \"Jumbo frame\",\n        \"IP fragmentation\",\n        \"Fragment offset\",\n        \"Don't Fragment flag\",\n        \"Path MTU discovery\",\n        \"TCP maximum segment size\",\n        \"MSS clamping\"\n      ],\n      \"description\": \"How packet size limits shape delivery, how fragmentation behaves, and how MTU problems cause hard-to-see failures.\",\n      \"title\": \"MTU and fragmentation\"\n    },\n    {\n      \"concepts\": [\n        \"Latency\",\n        \"Bandwidth\",\n        \"Throughput\",\n        \"Goodput\",\n        \"Round-trip time\",\n        \"Jitter\",\n        \"Packet loss rate\",\n        \"Bufferbloat\"\n      ],\n      \"description\": \"How delay, capacity, and loss interact to shape user-visible performance and protocol behavior.\",\n      \"title\": \"Latency and throughput dynamics\"\n    },\n    {\n      \"concepts\": [\n        \"Stateless firewall rule\",\n        \"Stateful firewall\",\n        \"Connection tracking\",\n        \"Ingress filtering\",\n        \"Egress filtering\",\n        \"TCP SYN filtering\",\n        \"ICMP filtering\"\n      ],\n      \"description\": \"How middleboxes allow or block traffic and how filtering choices show up as timeouts, resets, or missing ICMP signals.\",\n      \"title\": \"Packet filtering middleboxes\"\n    },\n    {\n      \"concepts\": [\n        \"Incorrect interface address\",\n        \"Incorrect subnet mask\",\n        \"Missing default route\",\n        \"Incorrect default gateway\",\n        \"Duplicate IP address\",\n        \"DHCP lease expiration\",\n        \"Firewall default deny\",\n        \"NAT port forward mismatch\"\n      ],\n      \"description\": \"Configuration mistakes that break connectivity locally or at the first routed hop.\",\n      \"title\": \"Misconfiguration failure modes\"\n    },\n    {\n      \"concepts\": [\n        \"Blackhole route\",\n        \"Routing loop\",\n        \"Asymmetric return path\",\n        \"MTU black hole\",\n        \"Intermittent packet loss\",\n        \"High latency queue\",\n        \"NAT table exhaustion\",\n        \"SYN packet drop\"\n      ],\n      \"description\": \"Network-path problems that appear as timeouts, stalls, flapping connectivity, or one-directional reachability.\",\n      \"title\": \"Path failure modes\"\n    },\n    {\n      \"concepts\": [\n        \"Layer isolation strategy\",\n        \"Local link test\",\n        \"Default gateway test\",\n        \"End-to-end ping interpretation\",\n        \"Traceroute hop interpretation\",\n        \"TCP connect test\",\n        \"Packet capture location\",\n        \"Middlebox hypothesis\"\n      ],\n      \"description\": \"Practical models for narrowing a connectivity bug to a specific layer, hop, or device class using targeted probes.\",\n      \"title\": \"Connectivity debugging mental models\"\n    }\n  ]\n}",
      "outputTokens": 7062,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-web-networking-fundamentals-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Web Development\n    CHAPTER_TITLE: Networking fundamentals\n    CHAPTER_DESCRIPTION: IP addressing, routing, NAT, TCP vs UDP, latency and bandwidth tradeoffs, and common failure modes. Practical mental models for debugging connectivity issues.\nNEIGHBORING_CHAPTERS:\n- \"Web development landscape\": Roles, responsibilities, and interfaces across front-end, back-end, full-stack, QA, DevOps, security, design, and product. How standards bodies and browser vendors shape the platform.\n- \"DNS and domains\": DNS records, resolvers, caching, propagation, and common configurations for web apps. Domain strategy, subdomains, and pitfalls with split-horizon DNS.\n- \"HTTP\": HTTP methods, status codes, headers, content negotiation, caching semantics, cookies, and redirects. HTTP/2 and HTTP/3 concepts and performance implications.\n- \"HTTPS and TLS\": TLS handshakes, certificate chains, HSTS, OCSP stapling, and modern TLS configuration choices. Secure transport patterns for browsers, APIs, and internal services.\n  "
    },
    {
      "duration": 136594.77079100005,
      "inputTokens": 2616,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Objetos numéricos imutáveis\",\n        \"Torre numérica integrada do Python\",\n        \"numbers.Number como ABC numérico\",\n        \"numbers.Integral como categoria de inteiros\",\n        \"numbers.Real como categoria de reais\",\n        \"numbers.Complex como categoria de complexos\"\n      ],\n      \"description\": \"Categorias formais usadas pelo Python para classificar números, com foco no que cada família representa na torre numérica. Propriedades gerais de objetos numéricos que influenciam uso, cópia e comportamento em memória.\",\n      \"title\": \"Torre numérica do Python\"\n    },\n    {\n      \"concepts\": [\n        \"Precisão arbitrária de int\",\n        \"Custo de memória de int grande\",\n        \"Custo de tempo para aritmética com int grande\",\n        \"Cache de inteiros pequenos\",\n        \"Método int.bit_length()\",\n        \"Método int.bit_count()\"\n      ],\n      \"description\": \"Características do tipo int como inteiro de precisão ilimitada, incluindo implicações de performance. Métodos úteis para inspecionar o conteúdo binário de um inteiro.\",\n      \"title\": \"Inteiros\"\n    },\n    {\n      \"concepts\": [\n        \"float como double precision\",\n        \"Campo de sinal em float\",\n        \"Campo de expoente em float\",\n        \"Campo de mantissa em float\",\n        \"Precisão de 53 bits em float\",\n        \"Arredondamento para representável mais próximo\",\n        \"Unidade de último dígito por math.ulp\",\n        \"Limites de float por sys.float_info\"\n      ],\n      \"description\": \"Modelo IEEE 754 por trás do tipo float no Python, com a decomposição em sinal, expoente e mantissa. Consequências diretas para precisão, limites e arredondamento em cada valor representável.\",\n      \"title\": \"Ponto flutuante IEEE 754\"\n    },\n    {\n      \"concepts\": [\n        \"Infinito positivo em float\",\n        \"Infinito negativo em float\",\n        \"NaN em float\",\n        \"Zero positivo em float\",\n        \"Zero negativo em float\",\n        \"Números subnormais em float\",\n        \"Overflow para infinito em float\",\n        \"Underflow para zero em float\"\n      ],\n      \"description\": \"Valores não finitos e casos de borda representáveis em float, incluindo zero assinado e subnormais. Efeitos típicos de estouro e subestouro durante cálculos numéricos.\",\n      \"title\": \"Valores especiais de float\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo built-in complex\",\n        \"Construção complex(real)\",\n        \"Construção complex(real, imag)\",\n        \"Atributo complex.real\",\n        \"Atributo complex.imag\",\n        \"Método complex.conjugate()\",\n        \"Magnitude de complex por abs()\",\n        \"Funções complexas por cmath\"\n      ],\n      \"description\": \"Representação de números complexos no Python como par de componentes real e imaginária. Operações fundamentais disponíveis no tipo complex e no módulo cmath.\",\n      \"title\": \"Complexos\"\n    },\n    {\n      \"concepts\": [\n        \"bool como subclasse de int\",\n        \"Singleton True\",\n        \"Singleton False\",\n        \"Conversão bool(x) por veracidade\",\n        \"Conversão int(True)\",\n        \"Conversão int(False)\",\n        \"Promoção de bool para int em cálculos\"\n      ],\n      \"description\": \"Status do bool como tipo numérico e as consequências práticas de ser subclasse de int. Regras de conversão e como valores booleanos participam de operações numéricas.\",\n      \"title\": \"bool como número\"\n    },\n    {\n      \"concepts\": [\n        \"Singleton None\",\n        \"Tipo NoneType\",\n        \"Conversão bool(None)\",\n        \"TypeError em operação numérica com None\",\n        \"TypeError em conversão int(None)\"\n      ],\n      \"description\": \"Significado de None como ausência de valor e sua natureza de singleton. Comportamentos típicos ao tentar tratar None como número via operações ou conversões.\",\n      \"title\": \"None como valor especial\"\n    },\n    {\n      \"concepts\": [\n        \"Conversão explícita por int()\",\n        \"Truncamento para zero em int(float)\",\n        \"Conversão explícita por float()\",\n        \"Perda de exatidão em float(int) acima de 2**53\",\n        \"Conversão explícita por complex()\",\n        \"TypeError em int(complex) com imag não nulo\",\n        \"Conversão explícita por bool()\"\n      ],\n      \"description\": \"Regras de conversão explícita entre int, float, complex e bool, incluindo casos de erro. Pontos em que conversões podem truncar, perder exatidão ou falhar por incompatibilidade.\",\n      \"title\": \"Conversões entre tipos numéricos nativos\"\n    },\n    {\n      \"concepts\": [\n        \"Hierarquia de promoção int para float para complex\",\n        \"Promoção int para float em operação mista\",\n        \"Promoção int para complex em operação mista\",\n        \"Promoção float para complex em operação mista\",\n        \"Resultado de cálculo com bool retorna int\",\n        \"Rejeição de operação mista Decimal com float\",\n        \"Rejeição de operação mista Decimal com Fraction\"\n      ],\n      \"description\": \"Regras de coerção implícita que determinam o tipo do resultado quando diferentes tipos numéricos aparecem no mesmo cálculo. Casos em que o Python evita coerção automática para preservar semântica de precisão.\",\n      \"title\": \"Promoção de tipo em expressões numéricas\"\n    },\n    {\n      \"concepts\": [\n        \"Arredondamento para par em round()\",\n        \"Argumento ndigits em round()\",\n        \"Arredondamento de negativos em round()\",\n        \"Arredondamento para baixo por math.floor()\",\n        \"Arredondamento para cima por math.ceil()\",\n        \"Truncamento por math.trunc()\",\n        \"Truncamento comparado ao arredondamento\"\n      ],\n      \"description\": \"Ferramentas de arredondamento e truncamento no Python, com ênfase no comportamento exato de round(). Diferenças conceituais entre truncar e arredondar no contexto de números reais.\",\n      \"title\": \"Arredondamento com funções numéricas\"\n    },\n    {\n      \"concepts\": [\n        \"Representação inexata de 0.1 em float\",\n        \"Arredondamento em cada operação de float\",\n        \"Acúmulo de erro por soma repetida\",\n        \"Cancelamento catastrófico\",\n        \"Não associatividade da soma em float\",\n        \"Comparação aproximada com math.isclose\",\n        \"Soma precisa com math.fsum\"\n      ],\n      \"description\": \"Principais fontes de erro numérico ao usar float, desde representação binária até propagação de arredondamentos. Técnicas padrão para comparação aproximada e para somas mais estáveis numericamente.\",\n      \"title\": \"Erros de ponto flutuante\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo decimal.Decimal\",\n        \"Base decimal na aritmética Decimal\",\n        \"Construção de Decimal a partir de int\",\n        \"Construção de Decimal a partir de string\",\n        \"Construção de Decimal a partir de float\",\n        \"Expoente interno do Decimal\",\n        \"Método Decimal.quantize()\",\n        \"Método Decimal.normalize()\"\n      ],\n      \"description\": \"Uso de Decimal para aritmética em base 10 com controle explícito de precisão e arredondamento. Formas comuns de construir Decimal e operações que ajustam escala decimal e normalização.\",\n      \"title\": \"decimal.Decimal\"\n    },\n    {\n      \"concepts\": [\n        \"Função decimal.getcontext()\",\n        \"Contexto temporário por decimal.localcontext()\",\n        \"Precisão do contexto Decimal por prec\",\n        \"Modo de arredondamento do contexto Decimal\",\n        \"Expoente máximo do contexto Decimal por Emax\",\n        \"Expoente mínimo do contexto Decimal por Emin\",\n        \"Parâmetro clamp do contexto Decimal\",\n        \"Parâmetro capitals do contexto Decimal\"\n      ],\n      \"description\": \"Parâmetros do contexto do módulo decimal que controlam precisão, faixa de expoentes e regras de arredondamento. Formas de aplicar essas configurações globalmente ou de forma temporária.\",\n      \"title\": \"Configuração do contexto Decimal\"\n    },\n    {\n      \"concepts\": [\n        \"Hierarquia decimal.DecimalException\",\n        \"Condição InvalidOperation\",\n        \"Condição DivisionByZero\",\n        \"Condição Overflow\",\n        \"Condição Underflow\",\n        \"Condição Subnormal\",\n        \"Condição Inexact\",\n        \"Condição Rounded\"\n      ],\n      \"description\": \"Condições sinalizadas durante operações com Decimal, incluindo eventos de inexactidão, arredondamento e estouro. Relação dessas condições com o mecanismo de sinalização do módulo decimal.\",\n      \"title\": \"Condições sinalizadas no Decimal\"\n    },\n    {\n      \"concepts\": [\n        \"Dicionário context.traps\",\n        \"Trap habilitado para InvalidOperation\",\n        \"Trap habilitado para DivisionByZero\",\n        \"Trap habilitado para Overflow\",\n        \"Trap habilitado para Underflow\",\n        \"Trap habilitado para Inexact\"\n      ],\n      \"description\": \"Mecanismo de traps do contexto Decimal para transformar condições sinalizadas em exceções. Configurações típicas para tornar falhas numéricas explícitas em vez de silenciosas.\",\n      \"title\": \"Traps do contexto Decimal\"\n    },\n    {\n      \"concepts\": [\n        \"Tipo fractions.Fraction\",\n        \"Normalização por máximo divisor comum\",\n        \"Denominador positivo em Fraction\",\n        \"Construção Fraction(numerador, denominador)\",\n        \"Construção Fraction a partir de int\",\n        \"Construção Fraction a partir de float por from_float\",\n        \"Conversão Fraction para float por float()\"\n      ],\n      \"description\": \"Representação exata de racionais com Fraction, incluindo redução automática e convenções de sinal. Formas de construir Fraction e o que acontece ao converter para float.\",\n      \"title\": \"fractions.Fraction\"\n    },\n    {\n      \"concepts\": [\n        \"Promoção de int para Fraction em operação mista\",\n        \"Promoção de float para float em operação mista com Fraction\",\n        \"TypeError em operação mista Fraction com Decimal\",\n        \"Construção Fraction a partir de Decimal por from_decimal\",\n        \"Perda de exatidão em float(Fraction) grande\",\n        \"Comparação aproximada após conversão para float\"\n      ],\n      \"description\": \"Regras práticas ao misturar Fraction com int, float e Decimal no mesmo cálculo. Pontos em que há promoção automática, conversão com perda ou erro por incompatibilidade semântica.\",\n      \"title\": \"Interação Fraction com tipos nativos\"\n    },\n    {\n      \"concepts\": [\n        \"Método float.as_integer_ratio()\",\n        \"Atributo Fraction.numerator\",\n        \"Atributo Fraction.denominator\",\n        \"Método Decimal.as_tuple()\",\n        \"Campo exponent em DecimalTuple\",\n        \"Campo digits em DecimalTuple\"\n      ],\n      \"description\": \"Formas de extrair representações exatas de números como componentes inteiros. Leitura de numerador, denominador e decomposição interna de Decimal em dígitos e expoente.\",\n      \"title\": \"Componentes exatos de números\"\n    },\n    {\n      \"concepts\": [\n        \"Cenário típico para int\",\n        \"Cenário típico para float\",\n        \"Cenário típico para complex\",\n        \"Cenário típico para Decimal\",\n        \"Cenário típico para Fraction\",\n        \"Troca entre exatidão numérica contra desempenho\"\n      ],\n      \"description\": \"Critérios conceituais para decidir qual tipo numérico usar conforme exatidão, faixa dinâmica e custo computacional. Trade-offs típicos ao preferir float, Decimal ou Fraction em problemas reais.\",\n      \"title\": \"Critérios de escolha de tipo numérico\"\n    }\n  ]\n}",
      "outputTokens": 10812,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-python-tipos-numericos-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Python\n    CHAPTER_TITLE: Tipos numéricos e valores especiais\n    CHAPTER_DESCRIPTION: Inteiros, floats, complexos, bool, None; conversões, precisão numérica, erros de arredondamento e uso de decimal/fractions.\nNEIGHBORING_CHAPTERS:\n- \"Ambiente de desenvolvimento\": Instalação e configuração do Python, múltiplas versões, PATH, virtual environments, VS Code/IDEs, REPL, Jupyter e boas práticas de organização local.\n- \"Execução de programas\": Execução em REPL, scripts e módulos; shebang, codificação, argumentos de linha de comando e status de saída do processo.\n- \"Sintaxe e convenções\": Regras de indentação, nomes, comentários, docstrings, literais, operadores e precedência; diferenças entre Python interativo e arquivo.\n- \"Texto e codificação\": Strings, bytes e bytearray; Unicode, normalização, encodings, f-strings, formatação avançada e manipulação eficiente.\n- \"Estruturas de dados fundamentais\": Listas, tuplas, dicionários e conjuntos; mutabilidade, cópia rasa vs profunda, hashing, ordenação e complexidade de operações.\n- \"Controle de fluxo\": if/elif/else, match/case, loops, break/continue, compreensão de escopo e padrões comuns de controle.\n  "
    },
    {
      "duration": 155414.57329099998,
      "inputTokens": 2632,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Enlace π C=O\",\n        \"Resonancia del carbonilo\",\n        \"Momento dipolar del carbonilo\",\n        \"Electrofilia del carbono carbonílico\",\n        \"Basicidad del oxígeno carbonílico\",\n        \"Ángulo de Bürgi–Dunitz\"\n      ],\n      \"description\": \"Estructura electrónica del grupo C=O, distribución de carga, sitio electrofílico, sitio básico, más la geometría típica de ataque nucleofílico.\",\n      \"title\": \"Polaridad del carbonilo\"\n    },\n    {\n      \"concepts\": [\n        \"Electrofilia de aldehídos\",\n        \"Electrofilia de cetonas\",\n        \"Efecto estérico en la adición\",\n        \"Efecto inductivo de sustituyentes\",\n        \"Conjugación π con el carbonilo\",\n        \"Activación por ácidos de Lewis\"\n      ],\n      \"description\": \"Factores electrónicos, estéricos, de conjugación y de coordinación que modulan la velocidad de adición nucleofílica en aldehídos y cetonas.\",\n      \"title\": \"Determinantes de reactividad en aldehídos, cetonas\"\n    },\n    {\n      \"concepts\": [\n        \"Ataque nucleofílico al carbono carbonílico\",\n        \"Intermedio alcóxido tetraédrico\",\n        \"Protonación del alcóxido\",\n        \"Adición catalizada por ácido\",\n        \"Intermedio oxonio en carbonilos protonados\",\n        \"Adición reversible a carbonilos\"\n      ],\n      \"description\": \"Pasos elementales que conectan carbonilos con alcoholes u otros productos de adición 1,2, incluyendo variantes catalizadas por ácido y equilibrios.\",\n      \"title\": \"Etapas de la adición nucleofílica 1,2\"\n    },\n    {\n      \"concepts\": [\n        \"Equilibrio carbonilo-gem-diol\",\n        \"Hidratación de formaldehído\",\n        \"Hidratación de aldehídos\",\n        \"Hidratación de cetonas\",\n        \"Efecto de sustituyentes atrayentes\",\n        \"Catálisis ácida de hidratación\",\n        \"Catálisis básica de hidratación\"\n      ],\n      \"description\": \"Formación de hidratos (gem-dioles) como adición de agua a carbonilos, con tendencias estructurales y catálisis ácida o básica.\",\n      \"title\": \"Hidratación de carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Transferencia de hidruro\",\n        \"Reducción con borohidruro de sodio\",\n        \"Reducción con hidruro de aluminio litio\",\n        \"Protonación en trabajo ácido\",\n        \"Reducción selectiva de aldehídos\",\n        \"Reducción selectiva de cetonas\",\n        \"Reducción 1,2 de enonas\"\n      ],\n      \"description\": \"Reducciones 1,2 de aldehídos y cetonas mediante reactivos de hidruro, condiciones típicas y patrones de selectividad dentro de carbonilos.\",\n      \"title\": \"Reducción de carbonilos con hidruros\"\n    },\n    {\n      \"concepts\": [\n        \"Reactividad de reactivos de Grignard\",\n        \"Reactividad de organolitios\",\n        \"Alcohol primario desde formaldehído\",\n        \"Alcohol secundario desde aldehídos\",\n        \"Alcohol terciario desde cetonas\",\n        \"Sensibilidad a humedad en organometálicos\",\n        \"Trabajo acuoso en organometálicos\"\n      ],\n      \"description\": \"Adición 1,2 de nucleófilos carbonados a carbonilos para formar enlaces C–C, más el rol del apagado acuoso para obtener alcoholes.\",\n      \"title\": \"Adición de organometálicos a carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Caras Re del carbonilo\",\n        \"Caras Si del carbonilo\",\n        \"Modelo de Felkin–Anh\",\n        \"Modelo de Cram quelado\",\n        \"Quelación por metales en adición\"\n      ],\n      \"description\": \"Origen de la diastereoselectividad en adiciones a carbonilos con centros quirales cercanos, usando modelos predictivos y efectos de quelación.\",\n      \"title\": \"Selectividad facial en adiciones a carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Formación de cianohidrinas\",\n        \"Ataque de CN⁻ al carbonilo\",\n        \"Generación de CN⁻ desde HCN\",\n        \"Equilibrio de cianohidrinas\",\n        \"Efecto electrónico en cianohidrinas\"\n      ],\n      \"description\": \"Adición de cianuro para producir cianohidrinas, con énfasis en generación del nucleófilo, reversibilidad y control por sustituyentes.\",\n      \"title\": \"Cianohidrinas\"\n    },\n    {\n      \"concepts\": [\n        \"Formación de hemiacetales\",\n        \"Formación de acetales\",\n        \"Catálisis ácida de acetalización\",\n        \"Intermedio oxocarbenio\",\n        \"Hidrólisis ácida de acetales\",\n        \"Estabilidad básica de acetales\",\n        \"Acetales cíclicos con dioles\"\n      ],\n      \"description\": \"Adición de alcoholes a carbonilos y conversión a acetales, incluyendo el mecanismo bajo ácido y su uso como formas estables en medio básico.\",\n      \"title\": \"Hemiacetales, acetales\"\n    },\n    {\n      \"concepts\": [\n        \"Formación de hemithioacetales\",\n        \"Formación de tioacetales\",\n        \"Catálisis ácida de tiacetalización\",\n        \"Desulfurización de Mozingo\",\n        \"Estabilidad de tioacetales\"\n      ],\n      \"description\": \"Adición de tioles a carbonilos para formar tioacetales, más su conversión de regreso a hidrocarburos por desulfurización selectiva.\",\n      \"title\": \"Tioacetales\"\n    },\n    {\n      \"concepts\": [\n        \"Formación de carbinolamina\",\n        \"Formación de iminas\",\n        \"Formación de iones iminio\",\n        \"Formación de enaminas\",\n        \"Catálisis ácida en formación de iminas\",\n        \"Deshidratación en formación de iminas\",\n        \"Selección de aminas primarias\",\n        \"Selección de aminas secundarias\"\n      ],\n      \"description\": \"Adiciones de aminas a carbonilos que conducen a iminas, iminios, enaminas, con pasos clave de carbinolamina, deshidratación y control por tipo de amina.\",\n      \"title\": \"Iminas, iminios, enaminas\"\n    },\n    {\n      \"concepts\": [\n        \"Tautomería ceto-enólica\",\n        \"Enolización catalizada por ácido\",\n        \"Enolización catalizada por base\",\n        \"Estabilización por conjugación del enol\",\n        \"Enlace de hidrógeno intramolecular en enoles\",\n        \"Contenido de enol en β-dicarbonilos\",\n        \"Reactividad nucleofílica del enol\"\n      ],\n      \"description\": \"Interconversión ceto-enol, condiciones que aceleran la tautomerización y razones estructurales que incrementan el contenido de enol y su nucleofilia.\",\n      \"title\": \"Tautomería ceto-enólica\"\n    },\n    {\n      \"concepts\": [\n        \"Hidrógenos α al carbonilo\",\n        \"pKa de hidrógenos α\",\n        \"Desprotonación con bases fuertes\",\n        \"Resonancia del enolato\",\n        \"Densidad electrónica en oxígeno del enolato\",\n        \"Densidad electrónica en carbono del enolato\",\n        \"Efecto del catión metálico\",\n        \"Solvatación de enolatos\"\n      ],\n      \"description\": \"Origen de la acidez α, formas de resonancia del enolato y cómo el metal y el solvente sesgan su estructura y reactividad.\",\n      \"title\": \"Enolatos\"\n    },\n    {\n      \"concepts\": [\n        \"Enolato cinético\",\n        \"Base LDA\",\n        \"Temperatura baja en desprotonación\",\n        \"Solvente aprótico polar\",\n        \"Desprotonación irreversible\",\n        \"Regioselectividad del enolato cinético\"\n      ],\n      \"description\": \"Formación rápida del enolato menos sustituido usando bases fuertes voluminosas, baja temperatura y condiciones que minimizan la equilibración.\",\n      \"title\": \"Enolatos bajo control cinético\"\n    },\n    {\n      \"concepts\": [\n        \"Enolato termodinámico\",\n        \"Base alcoxido\",\n        \"Temperatura alta en equilibración\",\n        \"Equilibrio ácido-base del enolato\",\n        \"Regioselectividad del enolato termodinámico\",\n        \"Isomerización por protonación-desprotonación\"\n      ],\n      \"description\": \"Acceso al enolato más estable mediante condiciones reversibles que permiten equilibrio, con criterios de sustitución y conjugación.\",\n      \"title\": \"Enolatos bajo control termodinámico\"\n    },\n    {\n      \"concepts\": [\n        \"Enol éter de silicio\",\n        \"Silylación del enolato\",\n        \"Enolato de boro\",\n        \"Formación de enolatos de boro\",\n        \"Enamina como equivalente de enolato\",\n        \"Reactividad nucleofílica de enaminas\"\n      ],\n      \"description\": \"Formas “enmascaradas” de enolatos usadas para controlar quimiocompatibilidad y selectividad, incluyendo silyl enol ethers, enolatos de boro y enaminas.\",\n      \"title\": \"Equivalentes de enolato\"\n    },\n    {\n      \"concepts\": [\n        \"Halogenación α catalizada por ácido\",\n        \"Halogenación α vía enolato\",\n        \"Monohalogenación selectiva\",\n        \"Polihalogenación en metil cetonas\",\n        \"Reacción de haloformo\"\n      ],\n      \"description\": \"Transformaciones en posición α mediadas por enoles o enolatos, con patrones de mono- o polihalogenación y el caso característico de haloformo.\",\n      \"title\": \"Halogenación α de carbonilos\"\n    },\n    {\n      \"concepts\": [\n        \"Aldolato\",\n        \"Adición aldólica\",\n        \"β-hidroxialdehído\",\n        \"β-hidroxicetona\",\n        \"Protonación del aldolato\",\n        \"Retro-aldol\"\n      ],\n      \"description\": \"Formación de enlaces C–C entre carbonilos mediante enolatos, productos β-hidroxicarbonílicos, reversibilidad y fragmentación retro-aldol.\",\n      \"title\": \"Aldol base-catalizada\"\n    },\n    {\n      \"concepts\": [\n        \"Deshidratación E1cb\",\n        \"Formación de enonas por condensación\",\n        \"Condiciones básicas de condensación\",\n        \"Condiciones ácidas de condensación\",\n        \"Control de conjugación en producto\",\n        \"Formación de E-enonas en condensación\"\n      ],\n      \"description\": \"Conversión de aldoles en carbonilos α,β-insaturados por pérdida de agua, con rutas típicas bajo base o ácido y tendencias de geometría del alqueno.\",\n      \"title\": \"Condensación aldólica\"\n    },\n    {\n      \"concepts\": [\n        \"Aldol cruzada estadística\",\n        \"Aldol cruzada dirigida\",\n        \"Aldehído sin hidrógenos α como electrofilo\",\n        \"Enolato preformado\",\n        \"Orden de adición en aldol dirigida\",\n        \"Protección de carbonilo en aldol selectiva\",\n        \"Dilución para evitar autoaldol\"\n      ],\n      \"description\": \"Estrategias para evitar mezclas en aldoles cruzadas mediante elección del socio electrofílico, preformación de enolatos y manejo de condiciones.\",\n      \"title\": \"Aldol cruzada dirigida\"\n    },\n    {\n      \"concepts\": [\n        \"Aldol intramolecular\",\n        \"Cierre de anillo de cinco miembros\",\n        \"Cierre de anillo de seis miembros\",\n        \"Conformación del estado de transición intramolecular\",\n        \"Competencia entre ciclación\",\n        \"Deshidratación posterior intramolecular\"\n      ],\n      \"description\": \"Ciclaciones aldólicas que generan anillos, factores de tamaño de anillo, restricciones conformacionales y evolución a productos condensados.\",\n      \"title\": \"Aldol intramolecular\"\n    },\n    {\n      \"concepts\": [\n        \"Modelo de Zimmerman–Traxler\",\n        \"Estado de transición tipo silla\",\n        \"Enolato Z como precursor de syn\",\n        \"Enolato E como precursor de anti\",\n        \"Enolato de boro en aldol estereoselectiva\",\n        \"Enolato de litio en aldol estereoselectiva\"\n      ],\n      \"description\": \"Relación entre geometría del enolato, estado de transición y diastereoselectividad syn/anti, incluyendo el impacto del metal del enolato.\",\n      \"title\": \"Estereoquímica de la aldol\"\n    },\n    {\n      \"concepts\": [\n        \"Aldol de Mukaiyama\",\n        \"Activación de carbonilo por ácido de Lewis\",\n        \"Aldol de enol éter de silicio\",\n        \"Aldol de enamina de Stork\",\n        \"Hidrólisis del ion iminio\",\n        \"Compatibilidad funcional en Mukaiyama\"\n      ],\n      \"description\": \"Aldoles con equivalentes de enolato que permiten condiciones suaves y mejor control, usando activación por ácidos de Lewis o catálisis vía enamina.\",\n      \"title\": \"Aldol con equivalentes de enolato\"\n    },\n    {\n      \"concepts\": [\n        \"β-cetoéster\",\n        \"Ataque del enolato al éster\",\n        \"Intermedio tetraédrico en Claisen\",\n        \"Salida de alcoxido en Claisen\",\n        \"Desprotonación del β-cetoéster\",\n        \"Trabajo ácido del Claisen\",\n        \"Elección de base alcoxido\",\n        \"Requisito de hidrógeno α en éster\"\n      ],\n      \"description\": \"Formación de enlaces C–C entre ésteres vía enolatos para dar β-cetoésteres, con el paso impulsor de desprotonación final y requisitos de base.\",\n      \"title\": \"Condensación de Claisen\"\n    },\n    {\n      \"concepts\": [\n        \"Claisen cruzada dirigida\",\n        \"Éster no enolizable como aceptor\",\n        \"Dieckmann\",\n        \"Preferencia por anillos 5-6 en Dieckmann\",\n        \"Condiciones básicas para Dieckmann\"\n      ],\n      \"description\": \"Variantes selectivas de Claisen para acoplar dos ésteres distintos o ciclar diéstere(s), con criterios prácticos para favorecer el producto deseado.\",\n      \"title\": \"Claisen cruzada, Dieckmann\"\n    },\n    {\n      \"concepts\": [\n        \"Aceptor de Michael\",\n        \"Donador de Michael\",\n        \"Adición conjugada 1,4\",\n        \"Intermedio enolato tras Michael\",\n        \"Protonación del enolato de Michael\",\n        \"Efecto duro-blando\",\n        \"Adición conjugada con organocupratos\",\n        \"Competencia de adición 1,2\"\n      ],\n      \"description\": \"Adición de nucleófilos a carbonilos α,β-insaturados por vía conjugada, factores de selectividad 1,4, tipos de donadores y control por HSAB o cobre.\",\n      \"title\": \"Adición de Michael\"\n    },\n    {\n      \"concepts\": [\n        \"Paso Michael en Robinson\",\n        \"Paso aldol intramolecular en Robinson\",\n        \"Formación de ciclohexenona\",\n        \"Deshidratación en Robinson\",\n        \"Selección de 1,3-dicarbonilo en Robinson\"\n      ],\n      \"description\": \"Secuencia de formación de anillos que combina Michael con aldol intramolecular para construir ciclohexenonas, con decisiones clave de sustrato y deshidratación.\",\n      \"title\": \"Anulación de Robinson\"\n    },\n    {\n      \"concepts\": [\n        \"Reactividad preferente de aldehídos\",\n        \"Reactividad preferente de cetonas\",\n        \"Protección selectiva con acetales\",\n        \"Desprotección selectiva de acetales\",\n        \"Competencia entre carbonilos en sustratos polifuncionales\",\n        \"Elección de reactivo de hidruro\"\n      ],\n      \"description\": \"Criterios prácticos para dirigir reacciones cuando hay múltiples carbonilos o múltiples modos de reacción, usando diferencias intrínsecas de reactividad y protección.\",\n      \"title\": \"Quimioselectividad en transformaciones de carbonilos\"\n    }\n  ]\n}",
      "outputTokens": 12930,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "es-quimica-carbonilos-enolatos-1",
      "userPrompt": "\n    LANGUAGE: es\n    COURSE_TITLE: Química\n    CHAPTER_TITLE: Carbonilos y enolatos\n    CHAPTER_DESCRIPTION: Adición nucleofílica a carbonilos, química de enoles/enolatos, aldol, Claisen, Michael y control de selectividad.\nNEIGHBORING_CHAPTERS:\n- \"Sustitución y eliminación\": SN1/SN2, E1/E2, reactividad, solventes, nucleófilos/bases, rearrangements y control de selectividad.\n- \"Adiciones a alquenos y alquinos\": Hidrogenación, halogenación, hidratación, hidroboración-oxidación, adiciones conjugadas y química de alquinos.\n- \"Química aromática\": Aromaticidad, sustitución electrofílica/nucleofílica aromática, directores, y reactividad de sistemas aromáticos extendidos.\n- \"Ácidos carboxílicos y derivados\": Reactividad de ácidos carboxílicos, derivados acílicos, química de amidas/ésteres/anhídridos y estrategias de activación.\n- \"Heterociclos\": Síntesis y reactividad de heterociclos aromáticos y saturados; aplicaciones en fármacos y materiales.\n- \"Radicales y fotoquímica orgánica\": Mecanismos radicalarios, iniciación/propagación/terminación, selectividad, y reacciones fotoquímicas orgánicas.\n  "
    },
    {
      "duration": 41966.021707999986,
      "inputTokens": 2538,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Business cycle definition\",\n        \"Stylized fact\",\n        \"Expansion phase\",\n        \"Recession phase\",\n        \"Peak turning point\",\n        \"Trough turning point\",\n        \"Classical business cycle\",\n        \"NBER recession dating\"\n      ],\n      \"description\": \"Definitions used to describe recurring macroeconomic fluctuations and the standard chronology used to date peaks and troughs.\",\n      \"title\": \"Business cycle terminology and chronology\"\n    },\n    {\n      \"concepts\": [\n        \"Trend component\",\n        \"Cyclical component\",\n        \"Output gap\",\n        \"Log transformation for macro series\",\n        \"Growth rate transformation\",\n        \"Percent deviation from trend\",\n        \"Hodrick–Prescott filter\",\n        \"Band-pass filter\"\n      ],\n      \"description\": \"Common ways to separate long-run growth from short-run fluctuations and express cyclical movements in comparable units.\",\n      \"title\": \"Trend-cycle decomposition in macro data\"\n    },\n    {\n      \"concepts\": [\n        \"Seasonal adjustment\",\n        \"Calendar effects in macro data\",\n        \"Chain-weighting revisions\",\n        \"Benchmark revisions\",\n        \"Real-time data vintage\",\n        \"Data revision bias\",\n        \"Spurious cyclicality from reclassification\",\n        \"Measurement error in cyclical statistics\"\n      ],\n      \"description\": \"Data issues that change measured volatility, timing, and comovement of macro series over the business cycle.\",\n      \"title\": \"Data comparability across the business cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Procyclical variable\",\n        \"Countercyclical variable\",\n        \"Acyclical variable\",\n        \"Leading variable\",\n        \"Coincident variable\",\n        \"Lagging variable\",\n        \"Contemporaneous correlation\",\n        \"Phase shift\"\n      ],\n      \"description\": \"Labels used to summarize whether a variable moves with the cycle and whether it tends to lead or lag aggregate activity.\",\n      \"title\": \"Cyclicality and timing vocabulary\"\n    },\n    {\n      \"concepts\": [\n        \"Volatility\",\n        \"Standard deviation of cyclical component\",\n        \"Relative volatility\",\n        \"Persistence\",\n        \"Autocorrelation\",\n        \"Cross-correlation function\",\n        \"Comovement\",\n        \"Diffusion index\"\n      ],\n      \"description\": \"Statistical objects used to summarize how large, how persistent, and how synchronized cyclical fluctuations are.\",\n      \"title\": \"Statistical moments for business cycle facts\"\n    },\n    {\n      \"concepts\": [\n        \"Real GDP volatility\",\n        \"Output growth persistence\",\n        \"Industrial production cyclicality\",\n        \"Capacity utilization cyclicality\",\n        \"Real sales cyclicality\",\n        \"Inventory-to-sales ratio cyclicality\"\n      ],\n      \"description\": \"Core empirical regularities in aggregate output measures and closely related indicators of production intensity.\",\n      \"title\": \"Aggregate output fluctuations\"\n    },\n    {\n      \"concepts\": [\n        \"Consumption procyclicality\",\n        \"Consumption relative volatility\",\n        \"Durable consumption volatility\",\n        \"Fixed investment procyclicality\",\n        \"Investment relative volatility\",\n        \"Residential investment cyclicality\",\n        \"Inventory investment cyclicality\",\n        \"Net exports cyclicality\"\n      ],\n      \"description\": \"How major expenditure components move relative to aggregate output and how their volatilities differ across the cycle.\",\n      \"title\": \"Cyclical behavior of GDP components\"\n    },\n    {\n      \"concepts\": [\n        \"Employment procyclicality\",\n        \"Unemployment countercyclicality\",\n        \"Okun’s law coefficient\",\n        \"Hours worked cyclicality\",\n        \"Hours per worker cyclicality\",\n        \"Labor force participation cyclicality\",\n        \"Real wage cyclicality\"\n      ],\n      \"description\": \"Stylized labor-market comovements with output, focusing on cyclical direction, timing, and strength of correlations.\",\n      \"title\": \"Labor-market business cycle facts\"\n    },\n    {\n      \"concepts\": [\n        \"Labor productivity procyclicality\",\n        \"Measured TFP procyclicality\",\n        \"Productivity growth cyclicality\",\n        \"Factor utilization effect\",\n        \"Labor hoarding\",\n        \"Within-firm productivity cyclicality\",\n        \"Between-sector reallocation effect\"\n      ],\n      \"description\": \"How productivity measures vary over expansions and recessions and why measured productivity can move with activity.\",\n      \"title\": \"Productivity patterns over the cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Inflation cyclicality\",\n        \"Inflation persistence\",\n        \"Inflation volatility\",\n        \"Disinflation in recessions\",\n        \"Core inflation cyclicality\",\n        \"Inflation-output correlation\",\n        \"Inflation-unemployment correlation\"\n      ],\n      \"description\": \"Regularities in inflation behavior over the cycle, including persistence, volatility, and correlations with real activity.\",\n      \"title\": \"Inflation behavior in business cycles\"\n    },\n    {\n      \"concepts\": [\n        \"Nominal short rate cyclicality\",\n        \"Real interest rate cyclicality\",\n        \"Yield curve slope predictiveness\",\n        \"Credit growth procyclicality\",\n        \"Credit spread countercyclicality\",\n        \"Equity price procyclicality\",\n        \"House price procyclicality\",\n        \"Leverage cyclicality\"\n      ],\n      \"description\": \"Common financial indicators that move with the cycle and measures that tend to forecast turning points.\",\n      \"title\": \"Financial variables and the business cycle\"\n    },\n    {\n      \"concepts\": [\n        \"Manufacturing output cyclicality\",\n        \"Services output cyclicality\",\n        \"Construction output cyclicality\",\n        \"Retail sales cyclicality\",\n        \"Housing starts cyclicality\",\n        \"Durable goods production cyclicality\",\n        \"Regional synchronization\",\n        \"Sectoral co-movement dispersion\"\n      ],\n      \"description\": \"How cyclical comovement differs across sectors and regions within an economy, including which sectors amplify fluctuations.\",\n      \"title\": \"Comovements across sectors within a country\"\n    },\n    {\n      \"concepts\": [\n        \"Cross-country output correlation\",\n        \"Global business cycle factor\",\n        \"Trade volume cyclicality\",\n        \"Current account cyclicality\",\n        \"Capital flow cyclicality\",\n        \"Exchange rate cyclicality\",\n        \"International synchronization in crises\"\n      ],\n      \"description\": \"How national cycles move together and how trade, capital flows, and crises shape international comovement.\",\n      \"title\": \"International business cycle comovement\"\n    },\n    {\n      \"concepts\": [\n        \"Recession duration\",\n        \"Expansion duration\",\n        \"Recession depth\",\n        \"Business cycle asymmetry\",\n        \"Volatility clustering\",\n        \"Skewness of output growth\",\n        \"Jobless recovery\"\n      ],\n      \"description\": \"Nonlinear features of cycles, including differences between expansions and recessions and changes in volatility over time.\",\n      \"title\": \"Asymmetries and nonlinear business cycle facts\"\n    }\n  ]\n}",
      "outputTokens": 3009,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-economics-business-cycles-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Economics\n    CHAPTER_TITLE: Business cycles\n    CHAPTER_DESCRIPTION: Business cycle facts, stylized patterns in output, inflation, unemployment, productivity, and comovements across sectors.\nNEIGHBORING_CHAPTERS:\n- \"Behavioral economics\": Behavioral biases, bounded rationality, time inconsistency, social preferences, and policy design with behavioral responses.\n- \"Experimental economics\": Laboratory and field experiments, incentive design, external validity, and behavioral/market design evidence.\n- \"Macroeconomic accounting\": National income and product accounts, sectoral balances, price indices, productivity, and flow-of-funds concepts.\n- \"Consumption and savings\": Consumption-saving, life-cycle and permanent income models, liquidity constraints, and empirical puzzles.\n- \"Investment and capital\": Investment theory, q-models, adjustment costs, irreversibility, and firm-level investment dynamics.\n- \"Unemployment and labor in macro\": Labor markets in macro, search and matching, wage setting, unemployment dynamics, and Beveridge curve analysis.\n  "
    },
    {
      "duration": 69791.81579199998,
      "inputTokens": 2608,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Arquitetura evolutiva\",\n        \"Evolvabilidade arquitetural\",\n        \"Mudança como premissa\",\n        \"Design emergente\",\n        \"Arquitetura mínima viável\",\n        \"Feedback arquitetural rápido\",\n        \"Arquitetura como hipótese\",\n        \"Incrementos arquiteturais pequenos\"\n      ],\n      \"description\": \"Princípios de arquitetura que evolui por mudanças pequenas, guiadas por feedback e hipóteses verificáveis, mantendo o sistema adaptável ao longo do tempo.\",\n      \"title\": \"Arquitetura evolutiva em ciclos curtos\"\n    },\n    {\n      \"concepts\": [\n        \"Característica arquitetural\",\n        \"Direcionador arquitetural\",\n        \"Restrição arquitetural\",\n        \"Requisito não funcional\",\n        \"Atributo de qualidade\",\n        \"Trade-off de atributos de qualidade\",\n        \"Risco arquitetural\",\n        \"Custo de reversão de decisão\"\n      ],\n      \"description\": \"Vocabulário para descrever o que a arquitetura precisa otimizar, o que limita escolhas e como trade-offs influenciam riscos e custos de mudar decisões.\",\n      \"title\": \"Direcionadores arquiteturais para mudanças frequentes\"\n    },\n    {\n      \"concepts\": [\n        \"Modularidade\",\n        \"Módulo\",\n        \"Fronteira de módulo\",\n        \"Encapsulamento\",\n        \"Ocultação de informação\",\n        \"Interface pública\",\n        \"Contrato de módulo\",\n        \"Composição de módulos\"\n      ],\n      \"description\": \"Como definir módulos com fronteiras claras, interfaces pequenas e contratos explícitos para permitir evolução local sem efeitos colaterais sistêmicos.\",\n      \"title\": \"Modularidade com fronteiras explícitas\"\n    },\n    {\n      \"concepts\": [\n        \"Coesão\",\n        \"Coesão funcional\",\n        \"Coesão sequencial\",\n        \"Coesão comunicacional\",\n        \"Coesão procedural\",\n        \"Coesão temporal\",\n        \"Coesão lógica\",\n        \"Coesão coincidente\"\n      ],\n      \"description\": \"Tipos de coesão usados para avaliar se responsabilidades estão agrupadas de forma consistente dentro de um módulo, reduzindo mudanças espalhadas.\",\n      \"title\": \"Coesão como qualidade de desenho modular\"\n    },\n    {\n      \"concepts\": [\n        \"Acoplamento\",\n        \"Acoplamento de dados\",\n        \"Acoplamento de controle\",\n        \"Acoplamento comum\",\n        \"Acoplamento externo\",\n        \"Acoplamento de conteúdo\",\n        \"Acoplamento temporal\",\n        \"Acoplamento de implantação\"\n      ],\n      \"description\": \"Formas de dependência entre componentes que aumentam o impacto de mudanças e dificultam a evolução independente de partes do sistema.\",\n      \"title\": \"Acoplamento como fonte de custo de mudança\"\n    },\n    {\n      \"concepts\": [\n        \"Grafo de dependências\",\n        \"Dependência cíclica\",\n        \"Inversão de dependência\",\n        \"Acoplamento aferente\",\n        \"Acoplamento eferente\",\n        \"Instabilidade de pacote\",\n        \"Violação de camadas\",\n        \"Análise de impacto de mudança\"\n      ],\n      \"description\": \"Heurísticas e métricas para enxergar dependências estruturais, detectar ciclos, avaliar estabilidade e estimar o alcance de uma alteração arquitetural.\",\n      \"title\": \"Métricas de modularidade baseadas em dependências\"\n    },\n    {\n      \"concepts\": [\n        \"Função de fitness\",\n        \"Função de fitness como guardrail\",\n        \"Função de fitness automatizada\",\n        \"Função de fitness semiautomatizada\",\n        \"Métrica observável\",\n        \"Limite de aceitação\",\n        \"Sinal de regressão arquitetural\",\n        \"Catálogo de funções de fitness\"\n      ],\n      \"description\": \"Critérios mensuráveis para verificar se a arquitetura continua aderente ao que importa, com alertas objetivos quando a evolução degrada propriedades desejadas.\",\n      \"title\": \"Funções de fitness na governança arquitetural\"\n    },\n    {\n      \"concepts\": [\n        \"Função de fitness de dependência proibida\",\n        \"Função de fitness de ciclo de dependência\",\n        \"Função de fitness de acoplamento entre módulos\",\n        \"Função de fitness de tamanho de módulo\",\n        \"Função de fitness de estabilidade de interface\",\n        \"Função de fitness de regra de camada\",\n        \"Função de fitness de regra de domínio\"\n      ],\n      \"description\": \"Exemplos de funções de fitness voltadas a modularidade, limites de dependência, estabilidade de contratos e regras estruturais do domínio.\",\n      \"title\": \"Funções de fitness para modularidade\"\n    },\n    {\n      \"concepts\": [\n        \"Decisão arquitetural\",\n        \"Registro de decisão arquitetural\",\n        \"Contexto de decisão\",\n        \"Força de decisão\",\n        \"Alternativa considerada\",\n        \"Consequência de decisão\",\n        \"Status de decisão\",\n        \"Data de revisão de decisão\"\n      ],\n      \"description\": \"Estrutura mínima para documentar decisões arquiteturais, registrar forças e consequências, manter histórico e facilitar revisões conforme o contexto muda.\",\n      \"title\": \"Decisões arquiteturais com rastreabilidade leve\"\n    },\n    {\n      \"concepts\": [\n        \"Decisão reversível\",\n        \"Decisão irreversível\",\n        \"Momento responsável da decisão\",\n        \"Experimento arquitetural\",\n        \"Spike arquitetural\",\n        \"Protótipo descartável\",\n        \"Critério de parada de experimento\",\n        \"Evidência para decisão\"\n      ],\n      \"description\": \"Técnicas para adiar decisões caras, testar hipóteses rapidamente e decidir com evidências quando mudanças frequentes exigem flexibilidade.\",\n      \"title\": \"Decisão arquitetural orientada a experimentos\"\n    },\n    {\n      \"concepts\": [\n        \"Padrão Strangler Fig\",\n        \"Branch by abstraction\",\n        \"Camada anticorrupção\",\n        \"Adaptador\",\n        \"Fachada\",\n        \"Versionamento semântico de API\",\n        \"Depreciação de contrato\",\n        \"Migração incremental de dados\"\n      ],\n      \"description\": \"Padrões de evolução incremental para mudar sistemas em produção sem reescritas grandes, preservando compatibilidade e reduzindo riscos de transição.\",\n      \"title\": \"Padrões de evolução arquitetural incremental\"\n    },\n    {\n      \"concepts\": [\n        \"Monólito modular\",\n        \"Microserviços\",\n        \"Arquitetura orientada a eventos\",\n        \"Arquitetura hexagonal\",\n        \"Arquitetura Clean\",\n        \"Arquitetura em camadas\",\n        \"Separação comando-consulta\",\n        \"Saga\"\n      ],\n      \"description\": \"Estilos arquiteturais comuns para suportar mudança, com diferentes formas de modularização, isolamento de dependências e coordenação de fluxos.\",\n      \"title\": \"Estilos arquiteturais voltados a evolvabilidade\"\n    },\n    {\n      \"concepts\": [\n        \"Princípio arquitetural\",\n        \"Padrão arquitetural recomendado\",\n        \"Diretriz de dependência\",\n        \"Guardrail de arquitetura\",\n        \"Revisão arquitetural leve\",\n        \"Conformidade contínua de arquitetura\",\n        \"Radar tecnológico\",\n        \"Trabalho arquitetural contínuo\"\n      ],\n      \"description\": \"Mecanismos de governança mínimos para manter coerência, controlar variação e evitar degradação arquitetural sem bloquear a entrega contínua de mudanças.\",\n      \"title\": \"Governança arquitetural leve em ambientes ágeis\"\n    },\n    {\n      \"concepts\": [\n        \"Lei de Conway\",\n        \"Manobra inversa de Conway\",\n        \"Fronteira de equipe\",\n        \"Autonomia de equipe\",\n        \"Acoplamento entre equipes\",\n        \"Comunicação como dependência\",\n        \"Propriedade de componente\",\n        \"Fluxo de mudança entre equipes\"\n      ],\n      \"description\": \"Relações entre estrutura organizacional e arquitetura, com conceitos para desenhar fronteiras que minimizam dependências e aceleram mudanças.\",\n      \"title\": \"Arquitetura sociotécnica em times ágeis\"\n    }\n  ]\n}",
      "outputTokens": 5187,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-agile-arquitetura-agil-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Metodologias Ágeis\n    CHAPTER_TITLE: Arquitetura em ambientes ágeis\n    CHAPTER_DESCRIPTION: Arquitetura evolutiva, modularidade, acoplamento/cohesão, fitness functions e decisões arquiteturais compatíveis com mudanças frequentes.\nNEIGHBORING_CHAPTERS:\n- \"Discovery e Delivery integrados\": Dual Track (Discovery/Delivery), discovery contínuo, e prevenção de 'teatro ágil' com entrega sem aprendizado.\n- \"DevOps e entrega contínua\": DevOps: colaboração Dev+Ops, automação, pipelines, IaC, e redução de handoffs para acelerar e estabilizar entregas.\n- \"SRE e confiabilidade em produtos digitais\": SRE: SLIs/SLOs, error budget, confiabilidade como requisito, e equilíbrio entre velocidade e estabilidade.\n- \"Dívida técnica e sustentabilidade\": Gestão de dívida técnica, qualidade interna, refatoração estratégica, e mecanismos de priorização junto ao valor de negócio.\n- \"Estratégias modernas de testes\": Qualidade e testes: pirâmide de testes, testes automatizados, testes exploratórios, e estratégias para sistemas distribuídos.\n- \"Segurança e DevSecOps\": Segurança no ciclo ágil: threat modeling, DevSecOps, shift-left, gestão de vulnerabilidades e resposta a incidentes.\n  "
    },
    {
      "duration": 127725.79787499999,
      "inputTokens": 2623,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Magical mortality law\",\n        \"Natural lifespan variation\",\n        \"Immortality definition\",\n        \"Longevity as partial immortality\",\n        \"Invulnerability as partial immortality\",\n        \"Death inevitability boundary\"\n      ],\n      \"description\": \"Core ways the Harry Potter world distinguishes ordinary aging, unusual longevity, and true escape from death. Clear boundaries between living longer, becoming harder to kill, and ceasing to be mortal at all.\",\n      \"title\": \"Mortality principles in wizarding metaphysics\"\n    },\n    {\n      \"concepts\": [\n        \"Mastery of Death motif\",\n        \"Immortality artifact legend\",\n        \"Immortality potion legend\",\n        \"Immortality ritual legend\",\n        \"Immortality as curse trope\",\n        \"Immortality as corruption trope\",\n        \"Immortality as grief trope\"\n      ],\n      \"description\": \"Recurring story-forms that frame immortality as a bargain, a temptation, or a punishment. How these myths shape what characters expect immortality to provide.\",\n      \"title\": \"Immortality myths in wizarding culture\"\n    },\n    {\n      \"concepts\": [\n        \"Soul as metaphysical essence\",\n        \"Body as soul vessel\",\n        \"Soul separation at death\",\n        \"Afterlife passage concept\",\n        \"Ghost persistence choice\",\n        \"Limbo encounter state\",\n        \"Soul integrity concept\"\n      ],\n      \"description\": \"The minimum metaphysical vocabulary needed to discuss soul-based immortality. How the series signals continuity of personhood beyond the body without reducing it to memory or psychology.\",\n      \"title\": \"Death metaphysics vocabulary\"\n    },\n    {\n      \"concepts\": [\n        \"Alchemy as transmutation art\",\n        \"Alchemy as spiritual refinement\",\n        \"Hermetic correspondence principle\",\n        \"Prima materia concept\",\n        \"Rebis symbol\",\n        \"Ouroboros motif\",\n        \"Alchemical color symbolism\"\n      ],\n      \"description\": \"Alchemy as both material practice and symbolic system, including the idea that matter-transformation mirrors inner transformation. Key emblems used to encode alchemical ideas about wholeness, cycles, and completion.\",\n      \"title\": \"Alchemy worldview and symbols\"\n    },\n    {\n      \"concepts\": [\n        \"Calcination operation\",\n        \"Dissolution operation\",\n        \"Separation operation\",\n        \"Conjunction operation\",\n        \"Fermentation operation\",\n        \"Distillation operation\",\n        \"Coagulation operation\"\n      ],\n      \"description\": \"The classic sequence of alchemical operations as a symbolic grammar for breaking down, purifying, and recombining. How each operation maps to a distinct kind of transformation step.\",\n      \"title\": \"Alchemical operations\"\n    },\n    {\n      \"concepts\": [\n        \"Nigredo stage\",\n        \"Albedo stage\",\n        \"Citrinitas stage\",\n        \"Rubedo stage\",\n        \"Philosopher's Stone as magnum opus product\"\n      ],\n      \"description\": \"The color-stage model of the magnum opus as a progression from breakdown to completion. The Philosopher’s Stone as the emblem of finished transformation rather than a mere tool.\",\n      \"title\": \"Magnum opus stages\"\n    },\n    {\n      \"concepts\": [\n        \"Philosopher's Stone definition\",\n        \"Stone creation rarity\",\n        \"Nicolas Flamel role\",\n        \"Perenelle Flamel role\",\n        \"Elixir of Life output\",\n        \"Gold transmutation output\",\n        \"Stone destruction choice\"\n      ],\n      \"description\": \"What the Stone does in-world, who is associated with it, and why it becomes a focal point for competing values. The decision to end its use as a plot-significant stance on mortality.\",\n      \"title\": \"Philosopher's Stone in canon\"\n    },\n    {\n      \"concepts\": [\n        \"Elixir dependency\",\n        \"Elixir dosing cycle\",\n        \"Elixir supply constraint\",\n        \"Elixir aging suspension\",\n        \"Elixir withdrawal death\",\n        \"Elixir ethical risk\"\n      ],\n      \"description\": \"What it means to live through continual extension rather than permanent transformation. The Elixir’s built-in fragility as an immortality pathway that still requires surrender to limits.\",\n      \"title\": \"Elixir of Life constraints\"\n    },\n    {\n      \"concepts\": [\n        \"Stone as desire object\",\n        \"Stone as wealth temptation\",\n        \"Stone as death denial emblem\",\n        \"Stone as power proxy\",\n        \"Stone custody responsibility\",\n        \"Mirror of Erised selection rule\"\n      ],\n      \"description\": \"The Stone as a symbol that tests motives more than competence. How desire, restraint, and eligibility become part of the Stone’s narrative meaning.\",\n      \"title\": \"Philosopher's Stone symbolism\"\n    },\n    {\n      \"concepts\": [\n        \"Horcrux definition\",\n        \"Soul fragment definition\",\n        \"Soul divisibility premise\",\n        \"Murder as soul rupture\",\n        \"Fragment autonomy range\",\n        \"Horcrux anchor function\",\n        \"Horcrux knowledge taboo\"\n      ],\n      \"description\": \"The metaphysical claim that a soul can be torn and partially externalized. Why the series treats the act as both technically possible and categorically forbidden.\",\n      \"title\": \"Horcrux metaphysical foundations\"\n    },\n    {\n      \"concepts\": [\n        \"Intent requirement\",\n        \"Murder timing requirement\",\n        \"Fragment extraction step\",\n        \"Container preparation step\",\n        \"Fragment binding step\",\n        \"Creation secrecy strategy\",\n        \"Post-creation concealment imperative\"\n      ],\n      \"description\": \"The implied logic of turning a soul-rending act into a stable anchor. Why concealment is not optional but structurally necessary for Horcrux-based survival.\",\n      \"title\": \"Horcrux creation logic\"\n    },\n    {\n      \"concepts\": [\n        \"Artifact durability criterion\",\n        \"Sentimental value criterion\",\n        \"Historical significance criterion\",\n        \"Concealment location choice\",\n        \"Multiplicity strategy\",\n        \"Seven-part soul plan\",\n        \"Living vessel rationale\"\n      ],\n      \"description\": \"How vessel choice reflects both magical pragmatics and personal ideology. The move from a single anchor to a distributed soul as an attempted solution to vulnerability.\",\n      \"title\": \"Horcrux vessel strategy\"\n    },\n    {\n      \"concepts\": [\n        \"Riddle diary Horcrux\",\n        \"Gaunt ring Horcrux\",\n        \"Slytherin locket Horcrux\",\n        \"Hufflepuff cup Horcrux\",\n        \"Ravenclaw diadem Horcrux\",\n        \"Nagini Horcrux\",\n        \"Harry Potter Horcrux\"\n      ],\n      \"description\": \"The canonical set of Voldemort’s known anchors, including an unintended vessel. What each example demonstrates about container types, autonomy, and risk.\",\n      \"title\": \"Canonical Horcruxes\"\n    },\n    {\n      \"concepts\": [\n        \"Psychic contamination effect\",\n        \"Emotional amplification effect\",\n        \"Attachment compulsion effect\",\n        \"Possession pathway\",\n        \"Host vitality drain\",\n        \"Soul memory projection\",\n        \"Proximity deterioration marker\"\n      ],\n      \"description\": \"How a bound soul-fragment interacts with people and places over time. The difference between influence, feeding, and full takeover as distinct modes of harm.\",\n      \"title\": \"Horcrux influence mechanics\"\n    },\n    {\n      \"concepts\": [\n        \"Physical degeneration link\",\n        \"Empathy erosion\",\n        \"Fear amplification\",\n        \"Magical instability marker\",\n        \"Identity fragmentation\",\n        \"Humanity threshold loss\",\n        \"Death obsession reinforcement\"\n      ],\n      \"description\": \"The price of survival purchased through disintegration of the self. How fragmentation shifts the creator’s embodiment, emotions, and capacity for ordinary human relation.\",\n      \"title\": \"Soul fragmentation costs\"\n    },\n    {\n      \"concepts\": [\n        \"Irreparable container damage rule\",\n        \"Destruction method rarity\",\n        \"Basilisk venom potency\",\n        \"Fiendfyre potency\",\n        \"Venom-imbued blade effect\",\n        \"Living vessel killing consequence\",\n        \"Destruction feedback pain\"\n      ],\n      \"description\": \"Why ordinary damage is insufficient and what “beyond magical repair” means for a soul-anchor. Canonical destruction vectors framed as properties that override protective durability.\",\n      \"title\": \"Horcrux destruction logic\"\n    },\n    {\n      \"concepts\": [\n        \"Remorse as soul repair catalyst\",\n        \"Remorse pain mechanism\",\n        \"Fragment reintegration barrier\",\n        \"Horcrux collapse condition\",\n        \"Damaged soul afterlife fate\",\n        \"Choice of final death\"\n      ],\n      \"description\": \"What it would take to reverse soul fragmentation and why the series treats that path as both possible in principle and devastating in practice. Mortality acceptance as the opposite stance to anchor-based survival.\",\n      \"title\": \"Soul repair, mortality closure\"\n    }\n  ]\n}",
      "outputTokens": 9560,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-harry-potter-alchemy-horcruxes-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Harry Potter\n    CHAPTER_TITLE: Alchemy, Horcruxes, and immortality\n    CHAPTER_DESCRIPTION: Alchemy, immortality myths, and the Philosopher's Stone as symbol. Horcrux metaphysics and the costs of soul fragmentation.\nNEIGHBORING_CHAPTERS:\n- \"Defense Against the Dark Arts\": Defense curriculum across eras and how teaching reflects politics. Practical spell selection, threat models, and the pedagogy of fear.\n- \"Divination and prophecy\": Divination's ambiguity, self-fulfilling prophecy, and narrative foreshadowing. Symbol systems: tea leaves, dreams, centaurs, and astronomy.\n- \"Mind magic and memory\": Mind magic: Legilimency, Occlumency, memory charms, and Pensieve ethics. Consent, epistemology, and the reliability of recollection.\n- \"Wandlore\": Wand woods, cores, allegiance, and the Elder Wand's legend. Comparative magical foci and what wandlore implies about power and identity.\n- \"Healing and magical medicine\": Magical healing, St Mungo's, and the boundaries of restorative magic. Disability, trauma, and long-term consequences in the series.\n- \"Beings, creatures, and species politics\": Werewolves, vampires, giants, goblins, house-elves, centaurs, and merpeople as political subjects. Rights, stereotypes, and allegory across species.\n  "
    },
    {
      "duration": 60593.027541999996,
      "inputTokens": 2667,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Automação de documentos jurídicos\",\n        \"Geração parametrizada de documentos\",\n        \"Workflow de produção documental\",\n        \"Automação baseada em regras\",\n        \"Automação baseada em IA\",\n        \"Separação entre conteúdo, dados\",\n        \"Limites da automação documental\"\n      ],\n      \"description\": \"Conceitos centrais de legal tech aplicados à produção de documentos, com distinções entre montagem por regras, suporte por IA e limites práticos do que pode ser automatizado com segurança.\",\n      \"title\": \"Panorama de legal tech para automação documental\"\n    },\n    {\n      \"concepts\": [\n        \"Template mestre\",\n        \"Bloco de cláusula\",\n        \"Seção opcional\",\n        \"Placeholder de variável\",\n        \"Campo de formulário\",\n        \"Estilo de parágrafo\",\n        \"Numeração automática\",\n        \"Referência cruzada\"\n      ],\n      \"description\": \"Componentes estruturais de um template e como eles sustentam modularidade, consistência de formatação e montagem confiável do documento final.\",\n      \"title\": \"Arquitetura de templates jurídicos\"\n    },\n    {\n      \"concepts\": [\n        \"Questionário de entrevista\",\n        \"Tipo de dado textual\",\n        \"Tipo de dado numérico\",\n        \"Tipo de dado de data\",\n        \"Lista de seleção\",\n        \"Regra de validação\",\n        \"Valor padrão\"\n      ],\n      \"description\": \"Formas de coletar dados, tipar entradas e validar respostas para evitar inconsistências que propagam erro para o documento montado.\",\n      \"title\": \"Dados de entrada para montagem\"\n    },\n    {\n      \"concepts\": [\n        \"Condição booleana\",\n        \"Regra de inclusão de bloco\",\n        \"Regra de exclusão de bloco\",\n        \"Dependência entre variáveis\",\n        \"Ordem de precedência de regras\",\n        \"Cálculo de valores\",\n        \"Inserção de anexos\"\n      ],\n      \"description\": \"Regras que determinam quais blocos entram no documento, em que ordem e com quais valores calculados, preservando coerência entre campos dependentes.\",\n      \"title\": \"Regras de montagem do documento\"\n    },\n    {\n      \"concepts\": [\n        \"Catálogo de cláusulas\",\n        \"Variante de cláusula\",\n        \"Metadado de cláusula\",\n        \"Jurisdição da cláusula\",\n        \"Nível de risco da cláusula\",\n        \"Status de homologação\",\n        \"Ciclo de revisão da cláusula\",\n        \"Depreciação de cláusula\"\n      ],\n      \"description\": \"Organização de cláusulas como ativos reutilizáveis, com metadados, controle de adequação por jurisdição, trilha de aprovação e descontinuação planejada.\",\n      \"title\": \"Bibliotecas de cláusulas\"\n    },\n    {\n      \"concepts\": [\n        \"Guia de estilo jurídico\",\n        \"Voz ativa\",\n        \"Termos definidos\",\n        \"Padrão de datas\",\n        \"Padrão de valores monetários\",\n        \"Capitalização de termos\",\n        \"Citação de dispositivos legais\"\n      ],\n      \"description\": \"Padrões de redação e formatação que reduzem ambiguidade, melhoram consistência entre documentos e facilitam automação sem perda de qualidade.\",\n      \"title\": \"Padronização de linguagem documental\"\n    },\n    {\n      \"concepts\": [\n        \"Coesão de numeração\",\n        \"Integridade de referências\",\n        \"Detecção de placeholders vazios\",\n        \"Validação de campos obrigatórios\",\n        \"Checagem ortográfica\",\n        \"Verificação de consistência terminológica\",\n        \"Teste de regressão de template\",\n        \"Casos de teste de template\"\n      ],\n      \"description\": \"Controles de qualidade focados em falhas típicas de templates, como referências quebradas, campos não preenchidos e regressões após alterações.\",\n      \"title\": \"Qualidade de templates\"\n    },\n    {\n      \"concepts\": [\n        \"Comparação de versões\",\n        \"Extração de alterações\",\n        \"Checklist automatizado de revisão\",\n        \"Detecção de cláusula ausente\",\n        \"Detecção de cláusula divergente\",\n        \"Sugestão de redação\",\n        \"Registro de justificativa de mudança\"\n      ],\n      \"description\": \"Técnicas de revisão assistida para acelerar conferência, identificar lacunas ou desvios de padrão e registrar racional de alterações de forma auditável.\",\n      \"title\": \"Revisão assistida por tecnologia\"\n    },\n    {\n      \"concepts\": [\n        \"Metadados documentais\",\n        \"Taxonomia documental\",\n        \"Tagging\",\n        \"Convenção de nomenclatura\",\n        \"Controle de acesso por perfil\",\n        \"Check-in\",\n        \"Busca por texto completo\"\n      ],\n      \"description\": \"Organização, classificação e recuperação de documentos com metadados, taxonomias e controles básicos de acesso para reduzir perda de informação.\",\n      \"title\": \"Gestão documental digital\"\n    },\n    {\n      \"concepts\": [\n        \"Política de retenção\",\n        \"Classificação de sigilo\",\n        \"Registro de auditoria\",\n        \"Trilhas de acesso\",\n        \"Expurgo programado\",\n        \"Carimbo de tempo\"\n      ],\n      \"description\": \"Regras de guarda, rastreabilidade e descarte, com trilhas de auditoria e evidências de integridade temporal para uso interno ou regulatório.\",\n      \"title\": \"Retenção, arquivamento, rastreabilidade\"\n    },\n    {\n      \"concepts\": [\n        \"Identificador de versão\",\n        \"Versionamento semântico\",\n        \"Ramificação de template\",\n        \"Mesclagem de alterações\",\n        \"Log de mudanças\",\n        \"Aprovação de versão\",\n        \"Rollback de versão\"\n      ],\n      \"description\": \"Mecanismos de controle de versões aplicados a templates e cláusulas, permitindo evolução controlada, rastreio de mudanças e reversão segura.\",\n      \"title\": \"Controle de versões de conteúdo jurídico\"\n    },\n    {\n      \"concepts\": [\n        \"Proprietário de conteúdo\",\n        \"Curador de template\",\n        \"Fluxo de aprovação\",\n        \"Matriz de autoridade\",\n        \"Política de contribuição\",\n        \"Documentação de decisão\",\n        \"Calendário de revisão\",\n        \"Registro de fonte normativa\"\n      ],\n      \"description\": \"Papéis, regras e cadências de atualização para manter a base de conhecimento atualizada, rastreável e alinhada a fontes normativas.\",\n      \"title\": \"Governança de conhecimento jurídico\"\n    },\n    {\n      \"concepts\": [\n        \"Erro de dado de entrada\",\n        \"Cláusula desatualizada\",\n        \"Uso fora de escopo\",\n        \"Desvio de template\",\n        \"Exposição de informação sensível\",\n        \"Falha de rastreabilidade\",\n        \"Automação opaca\"\n      ],\n      \"description\": \"Riscos técnicos e jurídicos típicos da automação, com foco em causas frequentes de erro, perda de controle e dificuldade de auditoria.\",\n      \"title\": \"Riscos de automação documental\"\n    },\n    {\n      \"concepts\": [\n        \"Princípio do menor privilégio\",\n        \"Autenticação multifator\",\n        \"Criptografia em repouso\",\n        \"Criptografia em trânsito\",\n        \"Compartilhamento seguro\",\n        \"Watermarking\",\n        \"Prevenção de vazamento\"\n      ],\n      \"description\": \"Controles de segurança para proteger dados, templates e documentos gerados, reduzindo superfícies de ataque e vazamentos acidentais.\",\n      \"title\": \"Segurança na automação de documentos\"\n    },\n    {\n      \"concepts\": [\n        \"API de dados\",\n        \"Importação de planilha\",\n        \"Conector de CRM\",\n        \"Normalização de dados\",\n        \"Tratamento de erro de integração\",\n        \"Logs de integração\"\n      ],\n      \"description\": \"Formas de alimentar automação documental com dados externos, com normalização, tratamento de erros e trilhas técnicas para diagnóstico.\",\n      \"title\": \"Integração de dados na automação documental\"\n    }\n  ]\n}",
      "outputTokens": 4445,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "pt-direito-legal-tech-1",
      "userPrompt": "\n    LANGUAGE: pt\n    COURSE_TITLE: Direito\n    CHAPTER_TITLE: Legal tech e automação de documentos\n    CHAPTER_DESCRIPTION: Automação jurídica e qualidade: templates, revisão assistida, gestão documental e padronização. Riscos de automação, controle de versões e governança de conhecimento.\nNEIGHBORING_CHAPTERS:\n- \"Gestão de terceiros e due diligence\": Programas de integridade em terceiros: due diligence, cláusulas anticorrupção e monitoramento. Gestão de contratos, auditoria e encerramento por inadimplemento de compliance.\n- \"Estratégia contenciosa e gestão de disputas\": Estratégia de litígio: seleção de teses, definição de foro, gestão de portfólio e negociação de acordos. Monitoramento de precedentes, risco financeiro e comunicação com stakeholders.\n- \"Legal operations e gestão jurídica\": Gestão de escritórios e departamentos jurídicos: triagem, SLAs, indicadores e orçamento. Precificação, honorários, contratação de correspondentes e qualidade.\n- \"Operações contratuais\": Gestão de contratos: ciclo de vida, cláusulas padrão, aprovações e controle de obrigações. CLM, auditoria contratual e prevenção de disputas.\n- \"Negociação estratégica\": Negociação e mediação avançadas: BATNA, ZOPA, técnicas de influência e gestão de impasses. Construção de acordos complexos e multiparte.\n- \"Advocacia oral e persuasão\": Oratória e atuação em audiência: teoria do caso, exame e contrainterrogatório, sustentação oral e postura profissional. Comunicação com juízes, jurados e peritos.\n  "
    },
    {
      "duration": 83515.70558300003,
      "inputTokens": 2577,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Public health as state capacity\",\n        \"Biomedical politics\",\n        \"Medicalization of social life\",\n        \"Biopolitics in health policy\",\n        \"Social determinants of health\",\n        \"Health inequality gradient\",\n        \"Epidemics as political crisis\"\n      ],\n      \"description\": \"Key lenses for analyzing how disease control, medical authority, and government power shaped citizenship and inequality in Brazil. How social conditions structure exposure, care access, and mortality across time.\",\n      \"title\": \"Analytical frameworks for health history\"\n    },\n    {\n      \"concepts\": [\n        \"Santa Casa de Misericórdia hospitals\",\n        \"Imperial medical faculties\",\n        \"Junta Central de Higiene Pública\",\n        \"Port health inspections\",\n        \"Quarantine stations\",\n        \"Empire-era smallpox vaccination\"\n      ],\n      \"description\": \"Institutions and practices that organized care and disease control under the Empire, including charity medicine, professional training, and border hygiene. How vaccination and quarantine worked as early public health tools.\",\n      \"title\": \"Imperial-era medicine and health administration\"\n    },\n    {\n      \"concepts\": [\n        \"Miasma theory\",\n        \"Contagion theory\",\n        \"Bacteriology\",\n        \"Germ theory acceptance in Brazil\",\n        \"Tropical medicine framework\",\n        \"Laboratory diagnosis\"\n      ],\n      \"description\": \"Shifts in medical explanation that changed how Brazilian elites and health officials interpreted epidemics and designed interventions. How laboratory methods strengthened claims of biomedical authority.\",\n      \"title\": \"Disease causation theories in public health\"\n    },\n    {\n      \"concepts\": [\n        \"Diretoria Geral de Saúde Pública\",\n        \"Oswaldo Cruz leadership\",\n        \"Compulsory vaccination law of 1904\",\n        \"Vaccine Revolt\",\n        \"Urban sanitation brigades\",\n        \"Public health police power\"\n      ],\n      \"description\": \"Early Republican public health as modernization and coercion, centered on Rio de Janeiro campaigns. How compulsory measures triggered political backlash and debates on rights.\",\n      \"title\": \"Early Republic sanitation politics\"\n    },\n    {\n      \"concepts\": [\n        \"Yellow fever outbreaks in Rio de Janeiro\",\n        \"Aedes aegypti vector identification\",\n        \"Bubonic plague in port cities\",\n        \"Rat control campaigns\",\n        \"Cholera outbreaks in Brazil\",\n        \"Smallpox epidemics\"\n      ],\n      \"description\": \"Major epidemic threats shaping public health priorities from the late 1800s into the early 1900s. How vectors, ports, and vaccination became central targets for intervention.\",\n      \"title\": \"Epidemics in ports and capitals\"\n    },\n    {\n      \"concepts\": [\n        \"Influenza arrival in Brazil in 1918\",\n        \"Emergency hospitals in 1918\",\n        \"Nonpharmaceutical interventions in 1918\",\n        \"Public communication in the 1918 pandemic\",\n        \"Mortality inequality in 1918\"\n      ],\n      \"description\": \"Crisis governance during the 1918 influenza pandemic and the limits of medical capacity. How crowd measures, communication, and inequality shaped outcomes.\",\n      \"title\": \"The 1918 influenza pandemic\"\n    },\n    {\n      \"concepts\": [\n        \"Hookworm disease\",\n        \"Rural sanitation missions\",\n        \"Belisário Penna public health activism\",\n        \"Chagas disease discovery\",\n        \"Triatomine insect vector\",\n        \"Schistosomiasis endemicity\",\n        \"Malaria control campaigns\"\n      ],\n      \"description\": \"Endemic diseases framed as obstacles to nation-building and labor productivity in the interior. How fieldwork and campaigns connected medicine to regional inequality.\",\n      \"title\": \"Rural endemics and nation-building\"\n    },\n    {\n      \"concepts\": [\n        \"Instituto Soroterápico Federal\",\n        \"Instituto Oswaldo Cruz scientific authority\",\n        \"Instituto Butantan production role\",\n        \"Serum therapy production\",\n        \"Vaccine production scale-up\",\n        \"Field expeditions for disease mapping\",\n        \"Laboratory science in policy legitimation\"\n      ],\n      \"description\": \"The lab-and-field infrastructure that anchored Brazilian biomedical research and state interventions. How serums, vaccines, and expeditions translated science into governance.\",\n      \"title\": \"Biomedical institutions and public health science\"\n    },\n    {\n      \"concepts\": [\n        \"Higienismo ideology\",\n        \"School hygiene programs\",\n        \"Eugenics societies in Brazil\",\n        \"Degeneration theory in Brazilian medicine\",\n        \"Maternalist public health\",\n        \"Venereal disease campaigns\",\n        \"Prostitution regulation as health policy\"\n      ],\n      \"description\": \"Projects linking health to morality, race, sexuality, and social order in the early 20th century. How hygienism and eugenics shaped interventions and stigma.\",\n      \"title\": \"Hygiene, eugenics, moral regulation\"\n    },\n    {\n      \"concepts\": [\n        \"Tuberculosis sanatoriums\",\n        \"Anti-tuberculosis dispensaries\",\n        \"BCG vaccination adoption\",\n        \"Leprosy colonies\",\n        \"Compulsory leprosy isolation policy\",\n        \"Leprosy stigma administration\"\n      ],\n      \"description\": \"Long-running disease regimes built around segregation, specialized institutions, and mass prevention. How chronic infectious disease management produced social exclusion and new public health bureaucracies.\",\n      \"title\": \"Tuberculosis and leprosy regimes\"\n    },\n    {\n      \"concepts\": [\n        \"Ministry of Education Health portfolio\",\n        \"National Department of Public Health\",\n        \"Special Public Health Service creation\",\n        \"Rockefeller Foundation public health collaboration\",\n        \"DDT use in malaria campaigns\",\n        \"Mass health education media\"\n      ],\n      \"description\": \"Public health expansion from the Vargas period through mid-century developmentalism, including new agencies, rural programs, and technical campaigns. How foreign philanthropy and insecticides shaped practice without determining politics.\",\n      \"title\": \"Mid-century public health expansion\"\n    },\n    {\n      \"concepts\": [\n        \"IAP medical benefits model\",\n        \"Hospital contracting for insured care\",\n        \"INPS health service administration\",\n        \"INAMPS creation\",\n        \"Fee-for-service payment incentives\",\n        \"Private provider dependence\",\n        \"Philanthropic hospital networks\"\n      ],\n      \"description\": \"The social security pathway that built a hospital-centered system tied to formal employment and private contracting. How financing rules structured unequal access and service patterns.\",\n      \"title\": \"Social security medicine and hospital growth\"\n    },\n    {\n      \"concepts\": [\n        \"Asylum model in Brazilian psychiatry\",\n        \"Juliano Moreira psychiatric reformism\",\n        \"Psychiatric hospital expansion\",\n        \"Anti-asylum movement\",\n        \"Psychiatric reform law of 2001\",\n        \"Community psychosocial care centers\"\n      ],\n      \"description\": \"Mental health governance from custodial institutions to rights-based reform. How psychiatric authority, confinement, and deinstitutionalization became political disputes.\",\n      \"title\": \"Mental health policy and psychiatric reform\"\n    },\n    {\n      \"concepts\": [\n        \"Movimento da Reforma Sanitária\",\n        \"Abrasco institutional role\",\n        \"8th National Health Conference of 1986\",\n        \"1988 constitutional right to health\",\n        \"SUS creation\",\n        \"Municipalization of health services\",\n        \"Health councils participation\"\n      ],\n      \"description\": \"The coalition and institutional milestones that transformed health into a constitutional right and reorganized governance. How participatory structures reshaped decision-making around care and prevention.\",\n      \"title\": \"Health reform and SUS origins\"\n    },\n    {\n      \"concepts\": [\n        \"National Immunization Program\",\n        \"Vaccination calendar governance\",\n        \"National polio vaccination days\",\n        \"Family Health Program model\",\n        \"Community health agents\",\n        \"Basic Health Unit structure\",\n        \"Epidemiological surveillance system\",\n        \"Notifiable disease reporting\"\n      ],\n      \"description\": \"Primary care and immunization as pillars of universal coverage in Brazil. How surveillance, reporting, and mass campaigns operationalize prevention at scale.\",\n      \"title\": \"Primary care, immunization, surveillance\"\n    },\n    {\n      \"concepts\": [\n        \"First AIDS cases in Brazil\",\n        \"AIDS activism networks\",\n        \"Universal antiretroviral policy of 1996\",\n        \"Public production of antiretrovirals\",\n        \"Harm reduction policy\",\n        \"Blood safety regulation\",\n        \"Stigma in AIDS governance\"\n      ],\n      \"description\": \"HIV/AIDS as a turning point for rights-based public health, treatment access, and drug policy. How activism, state capacity, and stigma shaped the epidemic response.\",\n      \"title\": \"HIV/AIDS politics and treatment access\"\n    },\n    {\n      \"concepts\": [\n        \"Dengue reemergence\",\n        \"Aedes aegypti eradication campaigns\",\n        \"Insecticide resistance\",\n        \"Chikungunya introduction\",\n        \"Zika outbreak\",\n        \"Microcephaly surveillance\",\n        \"Vector-control labor regimes\"\n      ],\n      \"description\": \"Arbovirus cycles that tested surveillance capacity and exposed unequal exposure to vectors. How eradication campaigns, insecticide limits, and monitoring systems evolved over time.\",\n      \"title\": \"Arboviruses and vector control\"\n    },\n    {\n      \"concepts\": [\n        \"Midwifery licensing\",\n        \"Obstetrics professionalization\",\n        \"Hospital childbirth norm\",\n        \"Cesarean section as standard birth\",\n        \"Family planning law of 1996\",\n        \"Sterilization as contraceptive practice\",\n        \"Maternal mortality indicator\",\n        \"Abortion law exceptions in Brazil\"\n      ],\n      \"description\": \"Reproductive health as a field where medical authority, rights claims, and inequality intersect. How childbirth practices, contraception, mortality metrics, and abortion regulation became public controversies.\",\n      \"title\": \"Reproductive health policy\"\n    },\n    {\n      \"concepts\": [\n        \"Indigenous epidemic vulnerability\",\n        \"Missionary medicine in Indigenous territories\",\n        \"SPI health interventions\",\n        \"FUNAI health role\",\n        \"Special Indigenous Health Districts\",\n        \"Indigenous health agents\",\n        \"COVID-19 impact in Indigenous communities\"\n      ],\n      \"description\": \"Health governance in Indigenous territories as a history of vulnerability, contested authority, and differentiated citizenship. How specialized districts and community agents mediate care amid recurrent epidemic threats.\",\n      \"title\": \"Indigenous health governance\"\n    },\n    {\n      \"concepts\": [\n        \"ANVISA creation\",\n        \"Medicine registration process\",\n        \"Generic medicines law of 1999\",\n        \"Clinical research ethics committees\",\n        \"Health plans regulation\",\n        \"Health judicialization\",\n        \"Right-to-medicine court orders\"\n      ],\n      \"description\": \"Regulatory and legal arenas that shape what treatments circulate, who pays, and how rights are enforced. How courts and agencies reconfigure access and inequality inside a universal system.\",\n      \"title\": \"Regulation, markets, courts\"\n    },\n    {\n      \"concepts\": [\n        \"SARS-CoV-2 arrival in Brazil\",\n        \"COVID-19 testing capacity\",\n        \"ICU bed shortages\",\n        \"Nonpharmaceutical interventions in COVID-19\",\n        \"Federal health governance conflict\",\n        \"COVID-19 misinformation networks\",\n        \"COVID-19 vaccination rollout\",\n        \"Excess mortality measurement\"\n      ],\n      \"description\": \"The pandemic as a stress test for SUS capacity, political coordination, and information credibility. How testing, hospital capacity, behavior rules, vaccines, and mortality metrics became arenas of dispute.\",\n      \"title\": \"COVID-19 response politics\"\n    }\n  ]\n}",
      "outputTokens": 5721,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a course.\n\nYou have expertise in instructional design, curriculum development, and creating granular learning paths. You have worked at top educational institutions creating micro-learning content that breaks down complex topics into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `COURSE_TITLE`: name of the overall course\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `LANGUAGE`: output language for titles and descriptions\n- `NEIGHBORING_CHAPTERS` (optional): titles and descriptions of chapters that come before and after this one in the course\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in three steps:\n\n1. **Enumerate every concept** that needs to be taught. Each concept should be one specific idea — something you could explain in a single short tweet. Be thorough and cover everything.\n\n2. **Filter out neighboring-chapter concepts.** When `NEIGHBORING_CHAPTERS` is provided, remove any concept whose primary subject belongs in a neighboring chapter. Ask: \"Is this concept primarily about THIS chapter's topic, or is it borrowed from an adjacent domain?\" If borrowed, cut it — even if it feels relevant.\n\n3. **Group the remaining concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related concepts.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific idea**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one fact, one definition, one rule, one technique, one distinction\n\n**Examples of correct granularity:**\n✅ \"Mitosis\"\n✅ \"Meiosis\"\n✅ \"Prophase\"\n✅ \"Metaphase\"\n✅ \"Role of Spindle Fibers\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Cell Division\" → split into: Mitosis, Meiosis, Cytokinesis, etc.\n❌ \"Phases of Mitosis\" → split into: Prophase, Metaphase, Anaphase, Telophase\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- If a group would exceed 8 concepts, split it into two lessons with more specific themes\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in the chapter\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Phases of Mitosis\", \"DNA Replication Machinery\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single idea\n- **NEVER** use \"AND\", \"OR\", \"VS\", or their equivalents in other languages (e.g., \"e\", \"ou\", \"y\", \"o\", \"frente a\", \"versus\") — if you find yourself comparing two things, split into separate concepts\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Prefer concrete nouns and actions over abstract/formal terms\n- Concept titles should read like **glossary entries** — factual, teachable items, not interpretive claims or thesis statements\n- Same concise style as: \"What is a Variable?\", \"Integer Numbers\", \"The Addition Operator\", \"Reading a Graduated Cylinder\"\n\n**Too abstract:**\n❌ \"Transcription\" → ✅ \"DNA Transcription\"\n❌ \"Precision\" → ✅ \"Measurement Precision\"\n❌ \"Substitution\" → ✅ \"Nucleophilic Substitution\"\n❌ \"Resolution\" → ✅ \"Instrument Resolution\"\n\n**Too verbose / reads like a description:**\n❌ \"Effect of Power on Relative Uncertainty\"\n❌ \"Decimal Places Compatible with Uncertainty\"\n❌ \"Consistency of Precision Throughout Calculation\"\n\n✅ \"Uncertainty in Powers\"\n✅ \"Matching Decimal Places to Uncertainty\"\n✅ \"Guard Digits\"\n\n**Too interpretive / reads like a thesis:**\n❌ \"Gravity as Geometric Curvature Metaphor\"\n❌ \"Entropy as Information Loss Framework\"\n❌ \"Selection as Optimization Analogy\"\n\n✅ \"Gravitational Curvature\"\n✅ \"Entropy in Thermodynamics\"\n✅ \"Natural Selection Mechanism\"\n\nWhen a concept title is a single generic word, add just enough context to make it concrete and unambiguous. When a concept title reads like a sentence or explanation, shorten it to a noun phrase. When a concept title reads like an essay argument (\"X as Y motif\"), reframe it as a concrete, teachable fact.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"How the if, else, and elif keywords control which code block runs.\" not \"Introduces the main conditional keywords in Python.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## Neighboring Chapter Awareness\n\nWhen `NEIGHBORING_CHAPTERS` is provided, use it to strictly avoid generating concepts that belong in another chapter.\n\nFor EACH concept, apply this test: **\"If I removed this concept from my chapter and placed it in the neighboring chapter's list, would it fit naturally there?\"** If yes, it belongs there, not here — remove it.\n\nThis is a common mistake: the model sees a topic as _relevant_ to the chapter and includes it, even though it's _primarily taught_ in a neighboring chapter. Relevance is not enough — the concept must be **primarily about THIS chapter's subject matter**.\n\nFor example, if a neighboring chapter covers \"DevOps and CI/CD\", do not include concepts like \"Deploy Pipeline\" or \"Release Strategy\" — even if they seem useful for your chapter's topic. If a neighboring chapter covers \"SRE and Reliability\", do not include concepts about SLOs or error budgets.\n\nBrief contextual mentions within a concept's explanation are fine, but the concept itself must not be primarily about a neighboring chapter's domain.\n\n# Example\n\nFor a chapter titled \"Control Flow\" in a Python Programming course:\n\n**Lesson: \"Boolean Expressions\"**\nConcepts: What is a Boolean, True Value, False Value, Comparison Operators, Equal To Operator, Not Equal To Operator, Greater Than Operator, Less Than Operator\n\n**Lesson: \"Conditional Statements\"**\nConcepts: The if Statement, The else Clause, The elif Clause, Nested if Statements, Conditional Expressions (Ternary)\n\n**Lesson: \"Logical Operators\"**\nConcepts: The and Operator, The or Operator, The not Operator, Short-Circuit Evaluation, Operator Precedence in Conditions\n\n**Lesson: \"While Loops\"**\nConcepts: What is a Loop, The while Statement, Loop Condition, Infinite Loops, The break Statement, The continue Statement\n\n**Lesson: \"For Loops and Iteration\"**\nConcepts: The for Statement, Iterating Over a List, Iterating Over a String, The range() Function, Nested Loops\n\nNotice how each concept is a **single, specific idea** (not a broad topic), and the lessons group related concepts together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No compound concepts**: Does any concept title contain \"AND\", \"OR\", or \"VS\"? If yes, split it.\n3. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n4. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n5. **Chapter scope**: Did you stay within the chapter's scope?\n6. **No neighboring overlap**: For each concept, if you moved it to a neighboring chapter's list, would it fit naturally there? If yes, remove it — it belongs there, not here.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single idea each)\n",
      "testCaseId": "en-brazilian-history-health-disease-1",
      "userPrompt": "\n    LANGUAGE: en\n    COURSE_TITLE: Brazilian History\n    CHAPTER_TITLE: Health and disease\n    CHAPTER_DESCRIPTION: Public health, epidemics, health systems, and biomedical politics from the 19th century to COVID-19; sanitation campaigns and inequality.\nNEIGHBORING_CHAPTERS:\n- \"Sports and society\": Football history, race and class in sport, club cultures, mega-events, and stadium politics; sport as national narrative.\n- \"Cities and urban inequality\": Urbanization, housing, sanitation, policing, and informal settlements; favelas, segregation, and metropolitan governance.\n- \"Environmental history and the Amazon\": Amazon, Cerrado, and Atlantic Forest histories: extraction, conservation, Indigenous stewardship, climate politics, and environmental governance.\n- \"Military and national security\": Professionalization of the armed forces, coups, doctrine, and defense policy; civil-military relations in democracy.\n- \"Foreign policy and international relations\": Diplomacy from empire to present: borders, regional leadership, multilateralism, South–South ties, and great-power relations.\n- \"Historiography and public memory\": How Brazil's past is narrated and contested: schools, monuments, museums, reparations debates, transitional justice, and public history.\n  "
    }
  ],
  "taskId": "chapter-lessons"
}
