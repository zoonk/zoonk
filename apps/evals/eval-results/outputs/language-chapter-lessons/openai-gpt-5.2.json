{
  "generatedAt": "2026-03-01T02:45:06.444Z",
  "modelId": "openai/gpt-5.2",
  "outputs": [
    {
      "duration": 15123.809834000002,
      "inputTokens": 2476,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Present Tense Use: Habits (yo como)\",\n        \"Present Tense Use: General truths (el agua hierve)\",\n        \"Present Tense Use: Near future with ir a + infinitive (voy a estudiar)\"\n      ],\n      \"description\": \"Core meanings of the Spanish present tense in everyday speech, including habits, general statements, and the common near-future pattern.\",\n      \"title\": \"Present Tense Meanings\"\n    },\n    {\n      \"concepts\": [\n        \"Subject Pronoun: yo\",\n        \"Subject Pronoun: tú\",\n        \"Subject Pronoun: él/ella/usted\"\n      ],\n      \"description\": \"Singular subject pronouns commonly paired with present-tense verb forms in basic sentences.\",\n      \"title\": \"Subject Pronouns: Singular\"\n    },\n    {\n      \"concepts\": [\n        \"Subject Pronoun: nosotros/nosotras\",\n        \"Subject Pronoun: vosotros/vosotras\",\n        \"Subject Pronoun: ellos/ellas/ustedes\"\n      ],\n      \"description\": \"Plural subject pronouns used with present-tense verb forms, including Spain-only vosotros.\",\n      \"title\": \"Subject Pronouns: Plural\"\n    },\n    {\n      \"concepts\": [\n        \"Regular -ar endings: -o, -as, -a, -amos, -áis, -an\",\n        \"Spelling: stem + endings pattern (habl- + o = hablo)\",\n        \"Present tense negation: no + verb (no hablo)\"\n      ],\n      \"description\": \"How regular -ar verbs form the present tense and how to negate present-tense statements.\",\n      \"title\": \"Present Tense: Regular -ar Verbs\"\n    },\n    {\n      \"concepts\": [\n        \"Regular -er endings: -o, -es, -e, -emos, -éis, -en\",\n        \"Spelling: stem + endings pattern (com- + o = como)\",\n        \"Present tense yes/no questions: ¿+ statement? (¿Hablas español?)\"\n      ],\n      \"description\": \"How regular -er verbs form the present tense and a common pattern for yes/no questions.\",\n      \"title\": \"Present Tense: Regular -er Verbs\"\n    },\n    {\n      \"concepts\": [\n        \"Regular -ir endings: -o, -es, -e, -imos, -ís, -en\",\n        \"Present tense information questions: ¿qué/cuándo/dónde + verb? (¿Dónde vives?)\",\n        \"Present tense with subject omission (Hablo español)\"\n      ],\n      \"description\": \"How regular -ir verbs form the present tense and key sentence patterns that rely on verb endings.\",\n      \"title\": \"Present Tense: Regular -ir Verbs\"\n    },\n    {\n      \"concepts\": [\n        \"Irregular verb: ser (soy, eres, es, somos, sois, son)\",\n        \"Ser: identity/profession (Soy Ana / Soy médico)\",\n        \"Ser: origin (Soy de México)\",\n        \"Ser: time/date (Son las dos / Es lunes)\"\n      ],\n      \"description\": \"Conjugation of ser in the present tense and high-frequency uses for identification and basic facts.\",\n      \"title\": \"Ser: Present Tense\"\n    },\n    {\n      \"concepts\": [\n        \"Irregular verb: estar (estoy, estás, está, estamos, estáis, están)\",\n        \"Estar: location (Estoy en casa)\",\n        \"Estar: temporary state (Estoy cansado/a)\",\n        \"Ser vs estar: location of events (La reunión es en… vs Estoy en…)\"\n      ],\n      \"description\": \"Conjugation of estar in the present tense and core contrasts with ser in common situations.\",\n      \"title\": \"Estar: Present Tense\"\n    },\n    {\n      \"concepts\": [\n        \"Irregular verb: tener (tengo, tienes, tiene, tenemos, tenéis, tienen)\",\n        \"Tener + noun: possession (Tengo un coche)\",\n        \"Tener que + infinitive (Tengo que estudiar)\",\n        \"Tener expressions: tener hambre (Tengo hambre)\"\n      ],\n      \"description\": \"Conjugation of tener in the present tense and everyday structures built with tener.\",\n      \"title\": \"Tener: Present Tense\"\n    },\n    {\n      \"concepts\": [\n        \"Irregular verb: ir (voy, vas, va, vamos, vais, van)\",\n        \"Ir a + infinitive (Voy a comer)\",\n        \"Ir + a + place (Voy al trabajo)\",\n        \"Contraction: a + el = al\"\n      ],\n      \"description\": \"Conjugation of ir in the present tense and the most common movement and near-future patterns.\",\n      \"title\": \"Ir: Present Tense\"\n    },\n    {\n      \"concepts\": [\n        \"Everyday -ar verb: hablar\",\n        \"Everyday -ar verb: trabajar\",\n        \"Everyday -ar verb: estudiar\",\n        \"Everyday -ar verb: comprar\",\n        \"Everyday -ar verb: cocinar\",\n        \"Everyday -ar verb: necesitar\",\n        \"Everyday -ar verb: usar\",\n        \"Everyday -ar verb: llegar\"\n      ],\n      \"description\": \"High-frequency regular -ar action verbs used in daily routines and simple present-tense sentences.\",\n      \"title\": \"Everyday Action Verbs: -ar\"\n    },\n    {\n      \"concepts\": [\n        \"Everyday -er verb: comer\",\n        \"Everyday -er verb: beber\",\n        \"Everyday -er verb: aprender\",\n        \"Everyday -er verb: leer\",\n        \"Everyday -er verb: vender\",\n        \"Everyday -er verb: correr\"\n      ],\n      \"description\": \"High-frequency regular -er action verbs for common activities and routines.\",\n      \"title\": \"Everyday Action Verbs: -er\"\n    },\n    {\n      \"concepts\": [\n        \"Everyday -ir verb: vivir\",\n        \"Everyday -ir verb: abrir\",\n        \"Everyday -ir verb: escribir\",\n        \"Everyday -ir verb: recibir\",\n        \"Everyday -ir verb: decidir\",\n        \"Everyday -ir verb: permitir\"\n      ],\n      \"description\": \"High-frequency regular -ir action verbs used in present-tense statements and questions.\",\n      \"title\": \"Everyday Action Verbs: -ir\"\n    }\n  ]\n}",
      "outputTokens": 1097,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "en-spanish-present-tense-1",
      "userPrompt": "\n    USER_LANGUAGE: en\n    CHAPTER_TITLE: Present Tense\n    CHAPTER_DESCRIPTION: Regular present-tense conjugations, essential irregulars (ser, estar, tener, ir), and everyday action verbs.\n    TARGET_LANGUAGE: Spanish\n  "
    },
    {
      "duration": 11787.010916,
      "inputTokens": 2479,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Estructura: If + pasado simple, would + verbo base\",\n        \"Orden de cláusulas: If-clause primero\",\n        \"Orden de cláusulas: main clause primero\",\n        \"Coma en condicionales: If al inicio\",\n        \"Contracción: I'd = I would\",\n        \"Contracción: wouldn't = would not\"\n      ],\n      \"description\": \"Estructura y puntuación de la segunda condicional para hablar de situaciones hipotéticas en presente o futuro. Orden de las cláusulas y contracciones frecuentes con would.\",\n      \"title\": \"Segunda condicional: forma y mecánica\"\n    },\n    {\n      \"concepts\": [\n        \"If I were (subjuntivo) en segunda condicional\",\n        \"If I was (alternativa) en conversación\",\n        \"Regla: was/were en pasado simple (I/he/she/it)\",\n        \"Verbo irregular en if-clause: had (pasado de have)\",\n        \"Verbo irregular en if-clause: did (pasado de do)\",\n        \"Negación en if-clause: didn’t + verbo base\"\n      ],\n      \"description\": \"Formas del pasado simple típicas en la cláusula con if, incluyendo el uso especial de were con I. Irregulares y negación en la if-clause.\",\n      \"title\": \"If-clause en pasado: was/were e irregulares\"\n    },\n    {\n      \"concepts\": [\n        \"Would + verbo base (afirmativa)\",\n        \"Wouldn’t + verbo base (negativa)\",\n        \"Pregunta: Would + sujeto + verbo base?\",\n        \"Respuesta corta: Yes, I would.\",\n        \"Respuesta corta: No, I wouldn’t.\",\n        \"Contracción: he’d/she’d/they’d (would)\"\n      ],\n      \"description\": \"Formación de afirmativas, negativas y preguntas con would en la cláusula principal, más respuestas cortas y contracciones.\",\n      \"title\": \"Cláusula principal: would (afirmativa, negativa, pregunta)\"\n    },\n    {\n      \"concepts\": [\n        \"Would + be (estado): would be\",\n        \"Would + have (posesión): would have\",\n        \"Would + go (movimiento): would go\",\n        \"Would + do (acción general): would do\",\n        \"Would + make (crear/decidir): would make\",\n        \"Would + get (obtener/llegar): would get\",\n        \"Would + take (tomar/tiempo): would take\",\n        \"Would + see (ver/entender): would see\"\n      ],\n      \"description\": \"Patrones de segunda condicional con verbos frecuentes en la cláusula principal para describir resultados hipotéticos en presente o futuro.\",\n      \"title\": \"Would: verbos frecuentes en resultados hipotéticos\"\n    },\n    {\n      \"concepts\": [\n        \"Could + verbo base (posibilidad/capacidad)\",\n        \"Couldn’t + verbo base (imposibilidad)\",\n        \"Might + verbo base (posibilidad menos segura)\",\n        \"Might not + verbo base (posibilidad negativa)\",\n        \"Would vs could (resultado seguro vs posible)\",\n        \"Would vs might (resultado más probable vs menos probable)\"\n      ],\n      \"description\": \"Variaciones de la segunda condicional usando could y might para matizar posibilidad, capacidad y grado de certeza en el resultado.\",\n      \"title\": \"Variaciones: would vs could vs might\"\n    },\n    {\n      \"concepts\": [\n        \"If I didn’t have… (hipótesis)\",\n        \"If I had… (hipótesis)\",\n        \"If I were… (identidad/estado)\",\n        \"If I knew… (conocimiento)\",\n        \"If I could… (capacidad/permiso)\",\n        \"If I had time… (tiempo)\",\n        \"If I had money… (dinero)\",\n        \"If it rained… (clima)\"\n      ],\n      \"description\": \"Plantillas comunes de if-clause para crear hipótesis típicas en presente y futuro. Sustitución del verbo para generar escenarios rápidamente.\",\n      \"title\": \"If-clause: plantillas comunes para hipótesis\"\n    }\n  ]\n}",
      "outputTokens": 756,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "es-english-hypothetical-conditionals-1",
      "userPrompt": "\n    USER_LANGUAGE: es\n    CHAPTER_TITLE: Condicionales hipotéticas\n    CHAPTER_DESCRIPTION: Situaciones hipotéticas en presente y futuro. Segunda condicional, \"would\" y variaciones con \"could/might\".\n    TARGET_LANGUAGE: Inglés\n  "
    },
    {
      "duration": 11734.05725,
      "inputTokens": 2488,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"〜そうだ（見た目）: adj-i + そうだ\",\n        \"〜そうだ（見た目）: adj-na + そうだ\",\n        \"〜そうだ（見た目）: verboます-stem + そうだ\",\n        \"〜そうだ（見た目）: いい → よさそうだ\",\n        \"〜そうだ（見た目）: ない → なさそうだ\",\n        \"〜そうだ（見た目）: 〜そうな + substantivo\",\n        \"〜そうだ（見た目）: 〜そうに + verbo\",\n        \"〜そうだ（見た目）: forma negativa 〜そうにない\"\n      ],\n      \"description\": \"Formas de 〜そうだ para inferência baseada em aparência/indícios visuais e suas variações adjetivais e adverbiais.\",\n      \"title\": \"〜そうだ (aparência): formação e usos diretos\"\n    },\n    {\n      \"concepts\": [\n        \"〜そうだ（伝聞）: forma dicionário + そうだ\",\n        \"〜そうだ（伝聞）: forma passada + そうだ\",\n        \"〜そうだ（伝聞）: forma negativa + そうだ\",\n        \"〜そうだ（伝聞）: い-adj + そうだ\",\n        \"〜そうだ（伝聞）: な-adj + だ + そうだ\",\n        \"〜そうだ（伝聞）: substantivo + だ + そうだ\",\n        \"〜そうだ（伝聞）: 〜そうです (polidez)\",\n        \"〜そうだ（見た目） vs 〜そうだ（伝聞）: diferença de significado\"\n      ],\n      \"description\": \"Padrões de 〜そうだ para boato/relato (“ouvi dizer que...”) e como distinguir do 〜そうだ de aparência.\",\n      \"title\": \"〜そうだ (boato/relato): formação e distinção\"\n    },\n    {\n      \"concepts\": [\n        \"〜らしい: verbo forma dicionário + らしい\",\n        \"〜らしい: verbo forma passada + らしい\",\n        \"〜らしい: verbo forma negativa + らしい\",\n        \"〜らしい: い-adj + らしい\",\n        \"〜らしい: な-adj + らしい\",\n        \"〜らしい: substantivo + らしい\",\n        \"〜らしい: evidência indireta (rumor + indícios)\",\n        \"〜らしい vs 〜そうだ（伝聞）: nuance de certeza\"\n      ],\n      \"description\": \"Uso de 〜らしい para suposição com base em informação indireta e/ou indícios, e o contraste com o “ouvi dizer” de 〜そうだ.\",\n      \"title\": \"〜らしい: suposição por indícios e rumor\"\n    },\n    {\n      \"concepts\": [\n        \"〜みたいだ: substantivo + みたいだ\",\n        \"〜みたいだ: い-adj + みたいだ\",\n        \"〜みたいだ: な-adj + みたいだ\",\n        \"〜みたいだ: verbo forma dicionário + みたいだ\",\n        \"〜みたいだ: forma negativa + みたいだ\",\n        \"〜みたいな + substantivo\",\n        \"〜みたいに + verbo\",\n        \"〜みたいだ: uso de “parece que” vs “tipo/igual a”\"\n      ],\n      \"description\": \"Formação de 〜みたいだ e suas funções principais: parecer (inferência) e comparação (“tipo/como”).\",\n      \"title\": \"〜みたい: inferência e comparação\"\n    },\n    {\n      \"concepts\": [\n        \"Registro: 〜みたいだ vs 〜みたいです\",\n        \"Registro: 〜みたい é coloquial vs 〜ようだ é mais formal\",\n        \"Registro: 〜そうだ（見た目） é comum em fala e escrita neutra\",\n        \"Registro: 〜そうだ（伝聞） é mais “citação de informação” do que “opinião”\",\n        \"Registro: 〜らしい é neutro e frequente em fala e escrita\",\n        \"〜らしい vs 〜みたい: “parece” mais objetivo vs mais coloquial\",\n        \"〜そうだ（見た目） vs 〜みたい: impressão visual vs impressão geral\",\n        \"Padrão de escolha: aparência (〜そうだ) / rumor (〜そうだ) / indícios+rumor (〜らしい) / coloquial (〜みたい)\"\n      ],\n      \"description\": \"Diferenças de registro (formalidade) e critérios práticos para escolher entre 〜そうだ, 〜らしい e 〜みたい em contextos comuns.\",\n      \"title\": \"Diferenças de registro e escolha entre padrões\"\n    }\n  ]\n}",
      "outputTokens": 938,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "pt-japanese-appearance-inference-1",
      "userPrompt": "\n    USER_LANGUAGE: pt\n    CHAPTER_TITLE: Aparência e Inferência\n    CHAPTER_DESCRIPTION: Expressões de aparência e suposição: 〜そうだ (aparência e boato), 〜らしい, 〜みたい e diferenças de registro.\n    TARGET_LANGUAGE: Japonês\n  "
    },
    {
      "duration": 24487.686417,
      "inputTokens": 2472,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Connotation: positif vs neutre vs péjoratif\",\n        \"Intensifier vs neutral word: très vs plutôt\",\n        \"Litotes: pas mal\",\n        \"Euphemism: disparaître (for mourir)\",\n        \"Dysphemism: crever (for mourir)\",\n        \"Understatement: un peu\",\n        \"Hyperbole: carrément\"\n      ],\n      \"description\": \"Connotation-driven meaning shifts that change attitude, intensity, or politeness without changing the core idea.\",\n      \"title\": \"Connotation & Intensity Shifts\"\n    },\n    {\n      \"concepts\": [\n        \"Register label: soutenu\",\n        \"Register label: courant\",\n        \"Register label: familier\",\n        \"Register label: vulgaire\",\n        \"Formal connector: toutefois\",\n        \"Neutral connector: mais\",\n        \"Informal connector: mais bon\",\n        \"Colloquial filler: genre\"\n      ],\n      \"description\": \"Common French register categories and high-frequency items that signal formal, neutral, informal, or crude tone.\",\n      \"title\": \"Register Signals in Everyday Items\"\n    },\n    {\n      \"concepts\": [\n        \"Polite request frame: je voudrais…\",\n        \"Neutral request: je veux…\",\n        \"Softener: j’aimerais…\",\n        \"Hedging: si ça ne te dérange pas\",\n        \"Polite apology: je suis désolé(e)\",\n        \"Casual apology: désolé\",\n        \"Minimizer: juste\"\n      ],\n      \"description\": \"Phrasings that keep the same communicative goal but shift politeness, directness, and social distance.\",\n      \"title\": \"Politeness, Indirectness & Softening\"\n    },\n    {\n      \"concepts\": [\n        \"Precision contrast: maison vs demeure\",\n        \"Precision contrast: boulot vs travail\",\n        \"Precision contrast: gosse vs enfant\",\n        \"Precision contrast: fric vs argent\",\n        \"Precision contrast: bagnole vs voiture\",\n        \"Precision contrast: mec vs homme\",\n        \"Precision contrast: nana vs femme\"\n      ],\n      \"description\": \"Near-synonyms where one choice sounds more precise, more colloquial, or more marked than the other.\",\n      \"title\": \"Marked vs Neutral Nouns (Everyday Synonyms)\"\n    },\n    {\n      \"concepts\": [\n        \"High-register adjective: magnifique\",\n        \"Neutral adjective: beau\",\n        \"Colloquial adjective: canon\",\n        \"High-register adjective: délicieux\",\n        \"Neutral adjective: bon\",\n        \"Colloquial adjective: trop bon\",\n        \"Pejorative adjective: nul\"\n      ],\n      \"description\": \"Adjective choices that change evaluation strength and register while describing the same thing.\",\n      \"title\": \"Evaluation Adjectives: Register & Strength\"\n    },\n    {\n      \"concepts\": [\n        \"Neutral emotion: content\",\n        \"Stronger positive: heureux\",\n        \"Stronger positive (formal): ravi\",\n        \"Neutral negative: triste\",\n        \"Stronger negative: malheureux\",\n        \"Irritation: agacé\",\n        \"Anger: furieux\"\n      ],\n      \"description\": \"Emotion words that differ by intensity and by how natural they sound in formal vs everyday contexts.\",\n      \"title\": \"Emotion Vocabulary: Intensity Gradients\"\n    },\n    {\n      \"concepts\": [\n        \"Neutral opinion: penser\",\n        \"Judgment (often critical): trouver (que)\",\n        \"Strong stance: estimer (que)\",\n        \"Tentative belief: croire\",\n        \"Uncertain belief: supposer\",\n        \"Evidence-based inference: déduire\",\n        \"Common viewpoint: considérer (que)\"\n      ],\n      \"description\": \"Verb choices for opinions and beliefs that shift certainty, formality, and implied evidence.\",\n      \"title\": \"Opinion & Belief Verbs: Certainty and Register\"\n    },\n    {\n      \"concepts\": [\n        \"Speech verb: dire\",\n        \"Report verb: déclarer\",\n        \"Informal speech verb: raconter\",\n        \"Whisper: chuchoter\",\n        \"Mutter: marmonner\",\n        \"Blurt out: lâcher\",\n        \"Insist: soutenir\"\n      ],\n      \"description\": \"Verbs of saying that encode manner, intention, and formality beyond the simple idea of “to say.”\",\n      \"title\": \"Speech Verbs: Manner & Intent\"\n    },\n    {\n      \"concepts\": [\n        \"Neutral ability: capable\",\n        \"Competent (skill): compétent\",\n        \"Talented: doué\",\n        \"Gifted (strong): surdoué\",\n        \"Good at (casual): fort (en)\",\n        \"Weak at: nul (en)\",\n        \"Amateurish: maladroit\"\n      ],\n      \"description\": \"Descriptors of ability that vary by strength, judgment, and how harsh or casual they sound.\",\n      \"title\": \"Ability & Competence: Praise vs Critique\"\n    },\n    {\n      \"concepts\": [\n        \"Neutral obligation: devoir\",\n        \"Necessity: falloir\",\n        \"Strong obligation: être obligé de\",\n        \"Moral duty: être censé(e)\",\n        \"Advisability: il vaut mieux\",\n        \"Permission (neutral): pouvoir\",\n        \"Strict prohibition: il est interdit de\"\n      ],\n      \"description\": \"Modal expressions that encode different sources of obligation, strength, and social framing.\",\n      \"title\": \"Modality Nuance: Obligation, Necessity, Permission\"\n    },\n    {\n      \"concepts\": [\n        \"Temporal marker: ensuite\",\n        \"Sequence (formal): puis\",\n        \"Narration (casual): après\",\n        \"Immediate sequence: tout de suite\",\n        \"Contrast (formal): en revanche\",\n        \"Contrast (neutral): par contre\",\n        \"Cause (neutral): parce que\",\n        \"Cause (formal): puisque\"\n      ],\n      \"description\": \"Connectors whose near-synonymy hides differences in formality, discourse structure, and implied logic.\",\n      \"title\": \"Connectors: Discourse Nuance & Register\"\n    },\n    {\n      \"concepts\": [\n        \"Negation nuance: ne…pas vs pas\",\n        \"Formal restriction: ne…que\",\n        \"Casual restriction: juste\",\n        \"Partial negation: pas vraiment\",\n        \"Affirmative nuance: si (response to negation)\",\n        \"Approximation: plus ou moins\",\n        \"Emphasis: pas du tout\"\n      ],\n      \"description\": \"Negation and limitation forms where small wording changes alter emphasis, stance, or register.\",\n      \"title\": \"Negation & Limitation Nuance\"\n    },\n    {\n      \"concepts\": [\n        \"Vagueness: truc\",\n        \"Neutral: chose\",\n        \"Formal: élément\",\n        \"Vagueness (casual): machin\",\n        \"Approximation: environ\",\n        \"Approximation (casual): genre\",\n        \"Approximation (formal): à peu près\"\n      ],\n      \"description\": \"Vague and approximate wording options that signal precision level and conversational stance.\",\n      \"title\": \"Vagueness, Approximation & Precision\"\n    },\n    {\n      \"concepts\": [\n        \"Pronunciation signal: liaison in « très important »\",\n        \"Pronunciation signal: liaison in « des amis »\",\n        \"Pronunciation signal: liaison in « vous avez »\",\n        \"Register signal: dropping « ne » (je sais pas)\",\n        \"Register signal: careful « ne » (je ne sais pas)\",\n        \"Elision in fast speech: « tu as » → « t’as »\",\n        \"Elision in fast speech: « je suis » → « j’suis »\"\n      ],\n      \"description\": \"Pronunciation and reduction choices that strongly affect perceived register and near-native naturalness.\",\n      \"title\": \"Phonetic Register: Liaison, « ne » Deletion, Reductions\"\n    },\n    {\n      \"concepts\": [\n        \"Fixed polite formula: je vous en prie\",\n        \"Casual acknowledgment: pas de souci\",\n        \"Casual: t’inquiète\",\n        \"Formal gratitude: je vous remercie\",\n        \"Neutral thanks: merci\",\n        \"Strong thanks: merci beaucoup\",\n        \"Dismissive thanks: merci bien\"\n      ],\n      \"description\": \"Set expressions where close alternatives differ in warmth, distance, sarcasm potential, or formality.\",\n      \"title\": \"Formulaic Phrases: Subtle Pragmatic Differences\"\n    }\n  ]\n}",
      "outputTokens": 1383,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "en-french-semantic-nuance-1",
      "userPrompt": "\n    USER_LANGUAGE: en\n    CHAPTER_TITLE: Semantic Nuance & Synonyms\n    CHAPTER_DESCRIPTION: Near-native nuance: connotation, register sensitivity, and subtle meaning shifts in synonyms.\n    TARGET_LANGUAGE: French\n  "
    }
  ],
  "taskId": "language-chapter-lessons"
}
