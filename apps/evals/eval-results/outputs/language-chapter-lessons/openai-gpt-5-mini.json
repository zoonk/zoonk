{
  "generatedAt": "2026-03-01T02:49:40.150Z",
  "modelId": "openai/gpt-5-mini",
  "outputs": [
    {
      "duration": 50345.41870799998,
      "inputTokens": 2476,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"Yo\",\n        \"Tú\",\n        \"Él\",\n        \"Ella\",\n        \"Usted\"\n      ],\n      \"description\": \"Singular and formal subject pronouns used with present-tense verbs.\",\n      \"title\": \"Subject Pronouns: Singular & Formal\"\n    },\n    {\n      \"concepts\": [\n        \"Nosotros\",\n        \"Vosotros\",\n        \"Ellos\",\n        \"Ellas\",\n        \"Ustedes\"\n      ],\n      \"description\": \"Plural subject pronouns for first, second (familiar), and third persons.\",\n      \"title\": \"Subject Pronouns: Plural & Familiar\"\n    },\n    {\n      \"concepts\": [\n        \"Infinitive stem: hablar → habl-\",\n        \"Regular -ar: -o (yo)\",\n        \"Regular -ar: -as (tú)\",\n        \"Regular -ar: -a (él/ella/usted)\",\n        \"Regular -ar: -amos (nosotros)\",\n        \"Regular -ar: -áis (vosotros)\",\n        \"Regular -ar: -an (ellos/ustedes)\"\n      ],\n      \"description\": \"How to form present-tense verbs from -ar infinitives: the stem and each person ending.\",\n      \"title\": \"Regular -ar Endings (Present)\"\n    },\n    {\n      \"concepts\": [\n        \"Infinitive stem: comer → com-\",\n        \"Regular -er: -o (yo)\",\n        \"Regular -er: -es (tú)\",\n        \"Regular -er: -e (él/ella/usted)\",\n        \"Regular -er: -emos (nosotros)\",\n        \"Regular -er: -éis (vosotros)\",\n        \"Regular -er: -en (ellos/ustedes)\"\n      ],\n      \"description\": \"How to form present-tense verbs from -er infinitives: the stem and each person ending.\",\n      \"title\": \"Regular -er Endings (Present)\"\n    },\n    {\n      \"concepts\": [\n        \"Infinitive stem: vivir → viv-\",\n        \"Regular -ir: -o (yo)\",\n        \"Regular -ir: -es (tú)\",\n        \"Regular -ir: -e (él/ella/usted)\",\n        \"Regular -ir: -imos (nosotros)\",\n        \"Regular -ir: -ís (vosotros)\",\n        \"Regular -ir: -en (ellos/ustedes)\"\n      ],\n      \"description\": \"How to form present-tense verbs from -ir infinitives: the stem and each person ending.\",\n      \"title\": \"Regular -ir Endings (Present)\"\n    },\n    {\n      \"concepts\": [\n        \"soy\",\n        \"eres\",\n        \"es\",\n        \"somos\",\n        \"sois\",\n        \"son\"\n      ],\n      \"description\": \"All present-tense forms of the essential irregular verb ser.\",\n      \"title\": \"Ser: Present Forms\"\n    },\n    {\n      \"concepts\": [\n        \"estoy\",\n        \"estás\",\n        \"está\",\n        \"estamos\",\n        \"estáis\",\n        \"están\"\n      ],\n      \"description\": \"All present-tense forms of the essential irregular verb estar.\",\n      \"title\": \"Estar: Present Forms\"\n    },\n    {\n      \"concepts\": [\n        \"tengo\",\n        \"tienes\",\n        \"tiene\",\n        \"tenemos\",\n        \"tenéis\",\n        \"tienen\"\n      ],\n      \"description\": \"All present-tense forms of the essential irregular verb tener.\",\n      \"title\": \"Tener: Present Forms\"\n    },\n    {\n      \"concepts\": [\n        \"voy\",\n        \"vas\",\n        \"va\",\n        \"vamos\",\n        \"vais\",\n        \"van\"\n      ],\n      \"description\": \"All present-tense forms of the essential irregular verb ir.\",\n      \"title\": \"Ir: Present Forms\"\n    },\n    {\n      \"concepts\": [\n        \"hablar\",\n        \"trabajar\",\n        \"estudiar\",\n        \"escuchar\",\n        \"mirar\",\n        \"caminar\"\n      ],\n      \"description\": \"Common daily-routine actions expressed by regular -ar verbs (infinitives).\",\n      \"title\": \"Everyday Verbs: Daily Routine (-ar)\"\n    },\n    {\n      \"concepts\": [\n        \"comer\",\n        \"beber\",\n        \"leer\",\n        \"vender\",\n        \"aprender\"\n      ],\n      \"description\": \"Common food, errands and learning actions expressed by regular -er verbs (infinitives).\",\n      \"title\": \"Everyday Verbs: Food & Errands (-er)\"\n    },\n    {\n      \"concepts\": [\n        \"vivir\",\n        \"escribir\",\n        \"abrir\",\n        \"recibir\",\n        \"compartir\"\n      ],\n      \"description\": \"Common home and communication actions expressed by regular -ir verbs (infinitives).\",\n      \"title\": \"Everyday Verbs: Home & Communication (-ir)\"\n    }\n  ]\n}",
      "outputTokens": 4719,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "en-spanish-present-tense-1",
      "userPrompt": "\n    USER_LANGUAGE: en\n    CHAPTER_TITLE: Present Tense\n    CHAPTER_DESCRIPTION: Regular present-tense conjugations, essential irregulars (ser, estar, tener, ir), and everyday action verbs.\n    TARGET_LANGUAGE: Spanish\n  "
    },
    {
      "duration": 53518.15420800002,
      "inputTokens": 2479,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"If + past simple\",\n        \"Would + base verb\",\n        \"If-clause antes del main clause (If ..., main clause)\",\n        \"Main clause antes del if-clause (Main clause if ...)\"\n      ],\n      \"description\": \"Las partes y el orden de la segunda condicional para expresar situaciones hipotéticas en presente o futuro.\",\n      \"title\": \"Estructura: segunda condicional\"\n    },\n    {\n      \"concepts\": [\n        \"Past simple regular: -ed (worked)\",\n        \"Past simple negative: didn't + base verb (didn't go)\",\n        \"Past simple question: Did + subject + base verb (Did you...?)\",\n        \"Went\",\n        \"Had\",\n        \"Made\",\n        \"Took\",\n        \"Thought\"\n      ],\n      \"description\": \"Formas del pasado simple que se usan en la cláusula condicional, incluyendo verbos regulares e irregulares comunes.\",\n      \"title\": \"Pasado simple en cláusulas 'if'\"\n    },\n    {\n      \"concepts\": [\n        \"Were (If I were...)\",\n        \"Was (colloquial: If I was...)\",\n        \"If I were you\",\n        \"Inversion: Were + subject + complement (Were I rich...)\"\n      ],\n      \"description\": \"Comportamiento especial del verbo to be en hipotéticos y la forma fija/invertida usada en ejemplos como 'If I were you'.\",\n      \"title\": \"Verbo to be en hipotéticos\"\n    },\n    {\n      \"concepts\": [\n        \"Would + base verb (would go)\",\n        \"Wouldn't (would not)\",\n        \"Would be + -ing (would be working)\",\n        \"Would be + adjective (would be happy)\"\n      ],\n      \"description\": \"Formas con would para resultados hipotéticos, sus negativas y variantes continuas/estativas.\",\n      \"title\": \"Would: resultado hipotético y variaciones continuas\"\n    },\n    {\n      \"concepts\": [\n        \"Could + base verb (could go)\",\n        \"Couldn't (could not)\",\n        \"Might + base verb (might happen)\",\n        \"Might not (may not)\"\n      ],\n      \"description\": \"Alternativas modales a would para expresar habilidad o grado de posibilidad en hipotéticos.\",\n      \"title\": \"Modales alternativos: could / might\"\n    },\n    {\n      \"concepts\": [\n        \"If + subject + were to + base verb (If I were to win...)\",\n        \"Were + subject + to + base verb (inversion formal)\",\n        \"If + past continuous (If I were living...)\"\n      ],\n      \"description\": \"Formas alternativas y más formales para plantear hipótesis y para expresar acciones en progreso hipotéticas.\",\n      \"title\": \"Variaciones formales y progresivas (were to, past continuous)\"\n    },\n    {\n      \"concepts\": [\n        \"Past simple negative in if-clause: If I didn't have...\",\n        \"Contraction: I'd (I would)\",\n        \"Contraction: you'd/she'd/they'd (would)\",\n        \"Short answers: Yes, I would / No, I wouldn't\"\n      ],\n      \"description\": \"Negación y contracciones con would en condicionales, y respuestas cortas comunes.\",\n      \"title\": \"Negación, contracciones y respuestas cortas\"\n    },\n    {\n      \"concepts\": [\n        \"Would you + base verb? (Would you help?)\",\n        \"Could you + base verb? (Could you lend me...)\",\n        \"Tag question with would: You would, wouldn't you?\",\n        \"Question intonation for hypothetical yes/no questions\"\n      ],\n      \"description\": \"Formas interrogativas y solicitudes en contextos hipotéticos, incluidas preguntas corteses y marcas prosódicas.\",\n      \"title\": \"Preguntas y solicitudes en condicionales hipotéticas\"\n    }\n  ]\n}",
      "outputTokens": 4881,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "es-english-hypothetical-conditionals-1",
      "userPrompt": "\n    USER_LANGUAGE: es\n    CHAPTER_TITLE: Condicionales hipotéticas\n    CHAPTER_DESCRIPTION: Situaciones hipotéticas en presente y futuro. Segunda condicional, \"would\" y variaciones con \"could/might\".\n    TARGET_LANGUAGE: Inglés\n  "
    },
    {
      "duration": 68004.30254199999,
      "inputTokens": 2488,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"い形容詞＋そうだ（例：美味しそうだ）\",\n        \"な形容詞（なを外す）＋そうだ（例：元気そうだ）\",\n        \"動詞ます形＋そうだ（予測：例：雨が降りそうだ）\",\n        \"〜くなさそうだ（い形容詞の否定的外見：例：美味しくなさそうだ）\",\n        \"〜じゃなさそう / 〜ではなさそう（な形容詞・名詞の否定的外見：例：元気じゃなさそうだ）\",\n        \"〜そうな（連体形：例：美味しそうなケーキ）\",\n        \"〜そうに（連用形：例：美味しそうに食べる）\"\n      ],\n      \"description\": \"Formas de 〜そうだ que indicam aparência/estimativa baseada em evidência visual e suas variações adjetival, verbal e negativa.\",\n      \"title\": \"そうだ — aparência\"\n    },\n    {\n      \"concepts\": [\n        \"普通形＋そうだ（聞いた話／現在の報告：例：行くそうだ）\",\n        \"過去形＋そうだ（聞いた話の過去：例：行ったそうだ）\",\n        \"名詞＋だ＋そうだ（名詞を含む報告：例：彼は学生だそうだ）\",\n        \"〜そうです（聞いた話の丁寧形：例：行くそうです）\"\n      ],\n      \"description\": \"Uso de 〜そうだ para relatar informação ou boato (reported speech), com formas de tempo e a versão polida.\",\n      \"title\": \"そうだ — boato / ouvido dizer\"\n    },\n    {\n      \"concepts\": [\n        \"普通形＋らしい（聞き伝え・推定：例：雨が降るらしい）\",\n        \"名詞＋らしい（特徴・～らしさ：例：子供らしい）\",\n        \"らしいです（丁寧形：例：雨が降るらしいです）\",\n        \"らしかった（過去形：例：そうらしかった／聞いたらしかった）\"\n      ],\n      \"description\": \"Uso de 〜らしい para indicar boato, conclusão baseada em evidência ou característica típica, com formas polidas e passadas.\",\n      \"title\": \"らしい — boato e característica típica\"\n    },\n    {\n      \"concepts\": [\n        \"名詞＋みたいだ（見た目や比喩：例：子供みたいだ）\",\n        \"普通形＋みたいだ（口語の推量／話し言葉：例：雨が降るみたいだ）\",\n        \"みたいな（連体形：例：子供みたいな人）\",\n        \"みたいに（連用形：例：子供みたいに遊ぶ）\",\n        \"みたい（縮約の口語形：例：そうみたい）\",\n        \"みたいです（丁寧形：例：子供みたいです）\"\n      ],\n      \"description\": \"Uso de 〜みたい para semelhança e suposição coloquial, com formas atributivas, adverbiais, forma polida e a forma encurtada.\",\n      \"title\": \"みたい — semelhança e fala coloquial\"\n    },\n    {\n      \"concepts\": [\n        \"普通形＋ようだ（推定・比喩のやや文語的表現：例：雨が降るようだ）\",\n        \"ような / ように（連体・連用の派生：例：子供のような声 / 子供のように）\",\n        \"ようです（丁寧形：例：雨が降るようです）\",\n        \"Registro: みたい（口語） vs ようだ（やや文語・中立）\",\n        \"Registro: らしい（聞き伝え・性質の示唆） vs そうだ（視覚的外見 vs 聞き伝えの区別）\"\n      ],\n      \"description\": \"Formas mais neutras/forma is (〜ようだ) e comparações de registro entre ようだ, みたい, らしい e そうだ para escolher a expressão adequada ao nível de formalidade e nuance.\",\n      \"title\": \"ようだ e comparação de registro\"\n    }\n  ]\n}",
      "outputTokens": 6284,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "pt-japanese-appearance-inference-1",
      "userPrompt": "\n    USER_LANGUAGE: pt\n    CHAPTER_TITLE: Aparência e Inferência\n    CHAPTER_DESCRIPTION: Expressões de aparência e suposição: 〜そうだ (aparência e boato), 〜らしい, 〜みたい e diferenças de registro.\n    TARGET_LANGUAGE: Japonês\n  "
    },
    {
      "duration": 50720.35891600003,
      "inputTokens": 2472,
      "output": "{\n  \"lessons\": [\n    {\n      \"concepts\": [\n        \"salut\",\n        \"bonjour\",\n        \"bonsoir\",\n        \"je vous remercie\",\n        \"merci\"\n      ],\n      \"description\": \"Common greetings and thank-you expressions that differ in formality and politeness.\",\n      \"title\": \"Greetings & Thanks: Formal vs. Informal\"\n    },\n    {\n      \"concepts\": [\n        \"très\",\n        \"vraiment\",\n        \"tellement\",\n        \"complètement\",\n        \"un peu\",\n        \"à peine\"\n      ],\n      \"description\": \"Common intensifiers and mitigators that adjust strength or soften statements.\",\n      \"title\": \"Intensity and Mitigation\"\n    },\n    {\n      \"concepts\": [\n        \"voir\",\n        \"regarder\",\n        \"apercevoir\",\n        \"remarquer\",\n        \"observer\",\n        \"contempler\"\n      ],\n      \"description\": \"Perception verbs with fine-grained distinctions between passive seeing, active looking, brief glimpses, and focused observation.\",\n      \"title\": \"Perception Verbs: See / Look\"\n    },\n    {\n      \"concepts\": [\n        \"dire\",\n        \"affirmer\",\n        \"déclarer\",\n        \"soutenir\",\n        \"confier\",\n        \"proclamer\"\n      ],\n      \"description\": \"Speech verbs that vary by evidentiality, formality, intimacy, and rhetorical force.\",\n      \"title\": \"Speech Verbs: Say / Claim / Confide\"\n    },\n    {\n      \"concepts\": [\n        \"mourir\",\n        \"décéder\",\n        \"crever\",\n        \"trépasser\"\n      ],\n      \"description\": \"Verbs for 'to die' across neutral, formal, vulgar, and euphemistic registers.\",\n      \"title\": \"Die: Register & Connotation\"\n    },\n    {\n      \"concepts\": [\n        \"voiture\",\n        \"bagnole\",\n        \"maison\",\n        \"taudis\",\n        \"baraque\"\n      ],\n      \"description\": \"Neutral nouns versus colloquial or pejorative alternatives for everyday objects and dwellings.\",\n      \"title\": \"Neutral vs. Pejorative Nouns\"\n    },\n    {\n      \"concepts\": [\n        \"ami\",\n        \"copain\",\n        \"pote\",\n        \"compagnon\",\n        \"connaissance\"\n      ],\n      \"description\": \"Terms for acquaintances and friends that differ in intimacy, longevity, and register.\",\n      \"title\": \"Friendship Terms: Intimacy & Register\"\n    },\n    {\n      \"concepts\": [\n        \"heureux\",\n        \"content\",\n        \"ravi\",\n        \"satisfait\",\n        \"aimer\",\n        \"adorer\",\n        \"kiffer\"\n      ],\n      \"description\": \"Positive-emotion adjectives and verbs ranging from neutral to enthusiastic and colloquial.\",\n      \"title\": \"Positive Emotion: Happiness & Affection\"\n    },\n    {\n      \"concepts\": [\n        \"fâché\",\n        \"énervé\",\n        \"furieux\",\n        \"agacé\",\n        \"irrité\"\n      ],\n      \"description\": \"Anger-related adjectives with subtle differences in intensity and tone.\",\n      \"title\": \"Anger & Irritation Vocabulary\"\n    },\n    {\n      \"concepts\": [\n        \"grand\",\n        \"haut\",\n        \"élevé\",\n        \"important\",\n        \"considérable\",\n        \"immense\"\n      ],\n      \"description\": \"Size and degree adjectives that shift meaning depending on physical scale vs. abstract magnitude.\",\n      \"title\": \"Size & Degree: Granularity in Adjectives\"\n    },\n    {\n      \"concepts\": [\n        \"beaucoup\",\n        \"plein de\",\n        \"un tas de\",\n        \"quelques\",\n        \"plusieurs\"\n      ],\n      \"description\": \"Quantifiers and colloquial approximators that convey different amounts and registers.\",\n      \"title\": \"Quantifiers & Colloquial Approximators\"\n    },\n    {\n      \"concepts\": [\n        \"pourriez-vous\",\n        \"pourrais-tu\",\n        \"je voudrais\",\n        \"j'aimerais\",\n        \"est-ce que\"\n      ],\n      \"description\": \"Politeness strategies and softening phrases used to make requests or ask questions with varying formality.\",\n      \"title\": \"Politeness & Softeners for Requests\"\n    },\n    {\n      \"concepts\": [\n        \"ben\",\n        \"bah\",\n        \"voilà\",\n        \"quoi\",\n        \"hein\",\n        \"euh\"\n      ],\n      \"description\": \"Discourse markers and fillers that shape tone, stance, and register in spoken French.\",\n      \"title\": \"Discourse Markers & Fillers\"\n    },\n    {\n      \"concepts\": [\n        \"commettre\",\n        \"faire\",\n        \"prendre\",\n        \"assumer\",\n        \"décider\"\n      ],\n      \"description\": \"Verbs that commonly collocate with specific nouns or constructions, producing register or nuance changes (e.g., commettre une erreur vs. faire une erreur).\",\n      \"title\": \"Collocational Verb Choices\"\n    },\n    {\n      \"concepts\": [\n        \"-ette\",\n        \"-on\",\n        \"-ard\"\n      ],\n      \"description\": \"Productive suffixes that create diminutive, familiar, or pejorative shades of meaning when attached to nouns.\",\n      \"title\": \"Diminutive & Pejorative Suffixes\"\n    },\n    {\n      \"concepts\": [\n        \"toilettes\",\n        \"WC\",\n        \"chiottes\"\n      ],\n      \"description\": \"Euphemistic, neutral, and vulgar alternatives for the same referent, illustrating tone choices.\",\n      \"title\": \"Euphemisms vs. Vulgar Alternatives\"\n    }\n  ]\n}",
      "outputTokens": 4754,
      "systemPrompt": "# Role\n\nYou are designing an **exhaustive**, well-organized curriculum for a specific chapter in a language course.\n\nYou have expertise in second language acquisition, applied linguistics, micro-learning, and the CEFR framework. You have worked at top language institutions creating micro-learning content that breaks down language concepts into digestible, single-concept items and organizes them into coherent thematic units.\n\nYour mission is to identify **every single language concept** that needs to be taught in this chapter — at the most granular level possible — and then organize those concepts into thematic lesson units.\n\nYou deeply care about making language learning accessible, focused, and efficient by breaking down topics into their smallest logical units.\n\n# Inputs\n\n- `CHAPTER_TITLE`: title of this specific chapter\n- `CHAPTER_DESCRIPTION`: what this chapter covers\n- `USER_LANGUAGE`: output language for titles and descriptions\n- `TARGET_LANGUAGE`: the language being learned\n\n## Language\n\n- `en`: Use US region unless the content is about a different region.\n- `pt`: Use Brazilian Portuguese unless the content is about a different region.\n- `es`: Use Latin American Spanish unless the content is about a different region.\n\n# Goal\n\nProduce an **exhaustive** set of **single-concept items** that collectively cover everything in `CHAPTER_TITLE` and `CHAPTER_DESCRIPTION`, organized into thematic **lesson units**.\n\nThink of this in two steps:\n\n1. **Enumerate every language concept** that needs to be taught. Each concept should be one specific idea — a single word, phrase, grammar rule, pronunciation point, or conjugation form. Be thorough and cover everything.\n\n2. **Group those concepts** into thematic lesson units of related concepts each. Each lesson is a coherent cluster of related language items.\n\n# Critical Requirements\n\n## Concept Granularity (MOST IMPORTANT)\n\nThis is the most critical aspect. Each concept must be **one single, specific language item**:\n\n- If you can explain it in **one short tweet**, it's appropriately scoped\n- If it needs more than a tweet, **split it into multiple concepts**\n- Each concept = one word/phrase, one grammar rule, one conjugation form, one pronunciation point, one dialogue pattern\n- **Every concept must include specific target-language words, forms, or patterns.** The test: \"Could a learner practice this in a flashcard or exercise?\" If the answer is no, it's too abstract. Category labels like \"Agentivity\" or \"Selectional Preference\" are not concepts — they're headings. The actual concepts are the specific target-language items underneath them\n\n**Examples of correct granularity:**\n✅ \"-ar Verbs: Present Tense\"\n✅ \"-er Verbs: Present Tense\"\n✅ \"Irregular Verb: Ser\"\n✅ \"Formal Greetings\"\n✅ \"Informal Greetings\"\n✅ \"The Sound of R\"\n\n**Examples of concepts that are TOO BROAD:**\n❌ \"Present Tense Conjugations\" → split into: -ar Verbs: Present Tense, -er Verbs: Present Tense, -ir Verbs: Present Tense, etc.\n❌ \"Greetings and Introductions\" → split into: Formal Greetings, Informal Greetings, Saying Your Name, Asking Someone's Name\n\n**The rule**: If a concept title could be a HEADING with sub-items under it, it's too broad. Break it into those sub-items instead.\n\n**The opposite mistake**: Don't create false granularity by permuting the same form across subjects or contexts. If a grammar form is the same regardless of subject (e.g., subjunctive \"were\" in English is \"were\" for all persons), it's ONE concept — don't create separate concepts for each subject pronoun paired with the same form.\n\n## Lesson Unit Structure\n\n- Each lesson groups related concepts under a thematic title\n- Include **as many concepts as the theme naturally requires** — some themes need 4, others need 8. Don't force every lesson to the same size\n- **NEVER exceed 8 concepts per lesson** — if a group has more than 8, split it into two lessons with more specific themes. This is a hard limit\n- If a group would have fewer than 3 concepts, merge it with a related group\n- Lessons should follow a logical progression from foundational to advanced\n- Don't add \"applications\", \"integrated practice\", or \"putting it all together\" lessons — every lesson should teach new concepts, not revisit previous ones\n- **No duplicate concepts** — each concept should appear in exactly one lesson. If two lessons need the same item, keep it only in the most relevant one\n\n## Exhaustive Coverage\n\n- The total number of concepts across ALL lessons must cover **everything** in `CHAPTER_DESCRIPTION`\n- **\"Exhaustive\" means exhaustive WITHIN the described scope** — not exhaustive across the entire topic. If the chapter description lists specific forms, cover those forms thoroughly but don't add unrelated forms not mentioned or implied\n- **Do NOT reduce the number of concepts just because you're organizing them into groups**\n- Add **as many concepts as needed** to break down each topic fully\n- Don't limit the number of concepts or lessons arbitrarily\n- It's better to have more fine-grained concepts than fewer broad ones\n- Make sure to have all concepts needed to **fully master the chapter's scope**\n\n## Title Requirements\n\n### Lesson Titles\n\n- Describe the thematic group: e.g. \"Formal Greetings\", \"Present Tense: Regular -ar Verbs\", \"Nasal Vowels\"\n- **NEVER** use words like \"learn\", \"understand\", \"explore\", \"introduction to\", \"basics of\"\n- Go straight to the point\n\n### Concept Titles\n\n- Short, specific, focused on a single language item\n- Avoid joining unrelated topics with \"AND\", \"OR\", or similar conjunctions (e.g., \"Greetings and Numbers\" bundles two separate topics). However, comparisons and contrasts are natural in language learning — \"enfant vs progéniture\" or \"Ser vs Estar: Location\" are valid single concepts when the distinction itself is what the learner needs to master\n- Must be **concrete and self-explanatory** — a student should know what they'll learn just from reading the title\n- Concept titles should read like **glossary entries**, not like sentence fragments or descriptions\n- Same concise style as: \"Definite Articles: Masculine\", \"Subject Pronoun: I\", \"Numbers 1-10\", \"The Sound of R\"\n\n**Too verbose / reads like a description:**\n❌ \"Using vous when greeting one person formally\"\n❌ \"The question for asking someone's name politely\"\n❌ \"Rising intonation for simple spoken questions\"\n\n✅ \"Formal You: Vous\"\n✅ \"Asking Someone's Name: Formal\"\n✅ \"Question Intonation\"\n\nWhen a concept title reads like a sentence or explanation, shorten it to a noun phrase.\n\n### Lesson Descriptions\n\n- 1-2 sentences describing what this group of concepts covers, no fluff\n- **NEVER** start with words like \"introduces\", \"presents\", \"shows\", \"teaches\", \"covers\", \"explains\"\n- Go straight to the content: e.g. \"The singular subject pronouns and their use in basic self-identification.\" not \"Introduces the main subject pronouns used in greetings.\"\n\n## Progression & Structure\n\n- Build a logical progression from basic to advanced concepts\n- Ensure later concepts build on knowledge from earlier ones\n- Focus specifically on THIS chapter, not the entire course\n- Don't add summary, review, \"key concepts\", or \"verification/checklist\" lessons — every lesson must teach new standalone concepts, not meta-skills about checking your own work\n- Don't add assessment, quiz, or project lessons\n\n## EXPLICITLY FORBIDDEN\n\nThese topics are **NOT allowed** in any lesson, regardless of the chapter description:\n\n- **NO culture lessons** (history, traditions, cuisine, festivals, customs)\n- **NO career or professional lessons** (business communication, workplace language)\n- **NO proficiency exam preparation lessons** (DELE, DELF, JLPT, HSK, etc.)\n- **NO literature or media analysis lessons** (books, films, songs, poetry)\n\n**ONLY pure language acquisition content is allowed:**\n\n- Vocabulary (words, phrases, expressions)\n- Grammar (rules, structures, patterns)\n- Pronunciation (sounds, stress, intonation)\n- Common sentences and expressions\n- Verb conjugations\n- Dialogues and conversational patterns\n\n**Every concept must be anchored in concrete target-language items** — words, phrases, forms, or patterns the learner will produce or recognize. Abstract category labels may be used as LESSON titles to group concepts, but individual concepts must always reference specific target-language items.\n\n# Example\n\nFor a chapter titled \"Describing People\" in a Spanish course:\n\n**Lesson: \"Subject Pronouns: Singular\"**\nConcepts: Yo, Tú, Él, Ella, Usted\n\n**Lesson: \"Ser: Singular Conjugation\"**\nConcepts: Soy, Eres, Es\n\n**Lesson: \"Physical Descriptions\"**\nConcepts: Alto, Bajo, Grande, Pequeño, Joven, Viejo\n\n**Lesson: \"Hair Descriptions\"**\nConcepts: Pelo Largo, Pelo Corto, Pelo Rubio, Pelo Moreno, Pelo Rizado, Pelo Liso\n\n**Lesson: \"Personality Adjectives: Positive\"**\nConcepts: Simpático, Amable, Inteligente, Divertido, Generoso\n\n**Lesson: \"Gender Agreement in Adjectives\"**\nConcepts: Masculine -o Ending, Feminine -a Ending, Invariable -e Ending, Invariable Consonant Ending\n\nNotice how each concept is a **single, specific language item** (not a broad topic), and the lessons group related items together thematically.\n\n# Quality Checks\n\nBefore finalizing, verify:\n\n1. **Concept granularity**: Can EACH concept be explained in a single tweet? If any concept could have sub-items under it, break it down further.\n2. **No false granularity**: Are any concepts just the same form repeated with different subjects or contexts? If yes, merge them into one concept.\n3. **No duplicates**: Does the same concept appear in multiple lessons? If yes, keep it only in the most relevant lesson.\n4. **No unrelated bundling**: Does any concept join genuinely unrelated topics? If yes, split it. Comparisons and contrasts between related items are fine.\n5. **Lesson sizes**: Does each lesson have 3-8 concepts? Do lesson sizes vary naturally, or are they all the same number? Split or merge as needed.\n6. **Complete coverage**: Have you covered EVERYTHING from the chapter description?\n7. **Chapter scope and level**: Did you stay within the chapter's scope AND level? An advanced nuance chapter should not include basic grammar that belongs in earlier chapters.\n8. **Anchored in the target language**: Is every concept anchored in concrete target-language items the learner will produce or recognize? Remove culture, career, exam, or literature content.\n\n# Output Format\n\nEach lesson must include:\n\n- **title** — thematic group name\n- **description** — 1-2 sentences describing what this group of concepts covers\n- **concepts** — array of concept titles (short, specific, focused on a single language item each)\n",
      "testCaseId": "en-french-semantic-nuance-1",
      "userPrompt": "\n    USER_LANGUAGE: en\n    CHAPTER_TITLE: Semantic Nuance & Synonyms\n    CHAPTER_DESCRIPTION: Near-native nuance: connotation, register sensitivity, and subtle meaning shifts in synonyms.\n    TARGET_LANGUAGE: French\n  "
    }
  ],
  "taskId": "language-chapter-lessons"
}
