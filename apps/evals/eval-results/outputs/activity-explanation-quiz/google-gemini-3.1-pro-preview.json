{
  "generatedAt": "2026-02-21T23:42:06.558Z",
  "modelId": "google/gemini-3.1-pro-preview",
  "outputs": [
    {
      "duration": 29450.199000000022,
      "inputTokens": 2031,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You accidentally poke your thumb with a sewing needle. Within minutes, the area around the tiny cut becomes warm, red, and swollen.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! This system doesn't care exactly *what* bacteria is on the needle—it just attacks any foreign material right away as a general first response.\",\n          \"isCorrect\": true,\n          \"text\": \"The immediate, generalized defense system is kicking in.\"\n        },\n        {\n          \"feedback\": \"Not quite! The memory system takes days to ramp up because it has to identify the specific invader first. This fast reaction is generalized.\",\n          \"isCorrect\": false,\n          \"text\": \"The memory-based defense system is recalling the needle.\"\n        },\n        {\n          \"feedback\": \"Close, but antibodies are part of the slower, targeted response. They don't cause the immediate, general reaction to a fresh poke.\",\n          \"isCorrect\": false,\n          \"text\": \"The antibody-producing system is creating specific tags.\"\n        },\n        {\n          \"feedback\": \"Your immune system doesn't have a virus-only branch. The immediate response fights bacteria, dirt, and viruses alike.\",\n          \"isCorrect\": false,\n          \"text\": \"The system that strictly fights viruses is activating.\"\n        }\n      ],\n      \"question\": \"Which immune defense system is acting right now?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're walking down a dirt road on a windy day, breathing in tiny particles of dust and pollen.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Your mucus acts like a piece of double-sided tape, physically trapping debris before it can go any deeper into your body.\",\n          \"isCorrect\": true,\n          \"text\": \"The sticky mucus in your nose and throat\"\n        },\n        {\n          \"feedback\": \"Macrophages are great, but they are cellular defenders that only step in *after* the physical barriers have been bypassed.\",\n          \"isCorrect\": false,\n          \"text\": \"The macrophages patrolling your lungs\"\n        },\n        {\n          \"feedback\": \"Antibodies are a later, targeted response. They don't block dust particles at the front door!\",\n          \"isCorrect\": false,\n          \"text\": \"The antibodies floating in your bloodstream\"\n        },\n        {\n          \"feedback\": \"Memory cells look for specific past living invaders (like viruses), not random dust blowing in the wind.\",\n          \"isCorrect\": false,\n          \"text\": \"The memory cells in your immune system\"\n        }\n      ],\n      \"question\": \"What is your body's literal first barrier keeping this out of your blood?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A thick brick wall around a castle\",\n          \"right\": \"Physical barriers (like skin)\"\n        },\n        {\n          \"left\": \"A garbage truck that scoops up and crushes any trash on the street\",\n          \"right\": \"Macrophages\"\n        },\n        {\n          \"left\": \"A glowing paint ball that tags a fleeing thief so police can see them\",\n          \"right\": \"Antibodies\"\n        },\n        {\n          \"left\": \"A security database of known criminals' faces\",\n          \"right\": \"Memory cells\"\n        }\n      ],\n      \"question\": \"Match the everyday security or maintenance job to the immune system component that does something similar in your body.\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Perfect! First the physical barrier is broken, then the general patrollers try to handle it. When they need help, the specialized targeted system kicks in, and finally, the memory is stored for next time.\",\n      \"items\": [\n        \"Bacteria bypass your skin barrier.\",\n        \"Patrolling cells immediately eat the unrecognized bacteria.\",\n        \"Specialized cells take time to craft specific tags for the invaders.\",\n        \"Antibody tags stick to the remaining bacteria, marking them for destruction.\",\n        \"Memory cells save the bacterial \\\"blueprint\\\" for future encounters.\"\n      ],\n      \"question\": \"You get a deep scrape on your knee. Arrange these events in the order they happen as your body fights off the new bacteria.\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"antibodies\",\n        \"memory cells\",\n        \"faster\"\n      ],\n      \"distractors\": [\n        \"macrophages\",\n        \"slower\",\n        \"barriers\",\n        \"viruses\",\n        \"red blood cells\"\n      ],\n      \"feedback\": \"Great job! B cells build the antibodies (the tags/weapons), and memory cells keep the blueprints so your body doesn't have to waste time designing them from scratch next time—making the next response much faster.\",\n      \"question\": \"Think of your immune system like a high-tech factory. Fill in the blanks to complete the factory process when a new threat appears.\",\n      \"template\": \"When a new invader persists, specialized B cells act like engineers, designing custom [BLANK] to stick to the threat. Once the battle is won, [BLANK] act like filing cabinets, keeping the design blueprints safe so the body can react [BLANK] if the exact same threat returns.\"\n    }\n  ]\n}",
      "outputTokens": 2623,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-biology-immune-system-quiz-1",
      "userPrompt": "LESSON_TITLE: How the Immune System Works\nLESSON_DESCRIPTION: Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies\nCHAPTER_TITLE: Body Systems\nCOURSE_TITLE: Human Biology\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. Two Lines of Defense: Your body has two defense systems working together. The first responds instantly to any threat. The second takes time but remembers enemies forever.\n2. The First Responders: Physical barriers like skin and mucus stop most invaders. If they get through, patrolling cells called macrophages eat anything that looks foreign.\n3. The Targeting System: When threats persist, specialized cells called B cells create antibodies. These Y-shaped proteins stick to specific invaders, marking them for destruction.\n4. Remembering Enemies: Some cells become memory cells after an infection. They remember the invader's shape for years, letting your body respond faster next time.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 46465.35920900002,
      "inputTokens": 2041,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Just like reading a book, a compiler first recognizes the individual words, then understands the grammar of the sentence, checks if the story actually makes sense, and finally translates it into a language the computer chip can act upon.\",\n      \"items\": [\n        \"Chop the raw text down into small, distinct symbols and words\",\n        \"Build a grammatical hierarchy to see how the words relate to each other\",\n        \"Check the logic to ensure the operations actually make sense\",\n        \"Translate the final validated logic into raw hardware commands\"\n      ],\n      \"question\": \"Imagine you're feeding raw source code into a compiler. Put the processing stages in the exact order they happen.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're writing a simple calculator app that evaluates math expressions. When a user types `total = 45 + price`, the system first needs to break this text down.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! The tokenizer just identifies the basic 'words' or 'symbols' in the text without caring about what they mean or how they execute.\",\n          \"isCorrect\": true,\n          \"text\": \"It separates the string into individual pieces like \\\"total\\\", \\\"=\\\", \\\"45\\\", \\\"+\\\", and \\\"price\\\".\"\n        },\n        {\n          \"feedback\": \"Not quite — checking the data types is semantic analysis, which happens later. The tokenizer just chops up the text.\",\n          \"isCorrect\": false,\n          \"text\": \"It checks if \\\"price\\\" is a number or text so they can be safely added together.\"\n        },\n        {\n          \"feedback\": \"Close, but that's actually running the code! The tokenizer is just the very first step of reading the raw text.\",\n          \"isCorrect\": false,\n          \"text\": \"It calculates the final math result of adding 45 and the price.\"\n        },\n        {\n          \"feedback\": \"That's the job of the parser! The tokenizer just provides a flat list of pieces for the parser to build that hierarchy.\",\n          \"isCorrect\": false,\n          \"text\": \"It builds a hierarchy showing that the addition happens before the assignment to \\\"total\\\".\"\n        }\n      ],\n      \"question\": \"What is the primary job of the tokenizer (lexical analyzer) here?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"`if (x > 5 {` (Missing a closing parenthesis)\",\n          \"right\": \"Parser (Syntax Analysis)\"\n        },\n        {\n          \"left\": \"`multiply(\\\"hello\\\", 3)` (Trying to multiply text by a number)\",\n          \"right\": \"Semantic Analysis (Checking Meaning)\"\n        },\n        {\n          \"left\": \"Unrecognized mystery characters like `@#$%` in the file\",\n          \"right\": \"Lexical Analysis (Breaking into Tokens)\"\n        },\n        {\n          \"left\": \"Translating the validated logic for a specific Intel processor\",\n          \"right\": \"Code Generation\"\n        }\n      ],\n      \"question\": \"Compilers catch different mistakes and perform specific tasks at different stages. Match the coding scenario to the compiler system that handles it.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine you write a grammatically perfect sentence: \\\"The blue idea slept furiously.\\\" It follows all structural rules for English, but the meaning is total nonsense because ideas don't have colors and can't sleep.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! Semantic analysis checks the *meaning* and rules of the code, like ensuring you aren't trying to subtract a word from a number, even if the grammar (syntax) is perfectly fine.\",\n          \"isCorrect\": true,\n          \"text\": \"Semantic analysis\"\n        },\n        {\n          \"feedback\": \"Not quite! Lexical analysis just reads the raw letters to form words. It doesn't care about grammar or meaning.\",\n          \"isCorrect\": false,\n          \"text\": \"Lexical analysis\"\n        },\n        {\n          \"feedback\": \"Close! Parsing checks if the grammar is correct (like having a noun and a verb). It doesn't check if the sentence actually makes logical sense.\",\n          \"isCorrect\": false,\n          \"text\": \"Parsing (Syntax analysis)\"\n        },\n        {\n          \"feedback\": \"Not this one. Code generation happens at the very end, and it assumes the code has already been checked for logical errors.\",\n          \"isCorrect\": false,\n          \"text\": \"Code generation\"\n        }\n      ],\n      \"question\": \"Which compiler phase handles this exact kind of \\\"grammatically correct but logically invalid\\\" problem in your code?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"tree\",\n        \"machine instructions\"\n      ],\n      \"distractors\": [\n        \"array\",\n        \"source code\",\n        \"tokens\",\n        \"database\"\n      ],\n      \"feedback\": \"Perfect! The parser builds a tree-like hierarchy to represent the code's syntax and grammar. At the very end, the code generator translates that validated structure into low-level machine instructions (like 1s and 0s) the hardware actually understands.\",\n      \"question\": \"Fill in the missing concepts about how a compiler organizes and outputs your code.\",\n      \"template\": \"A compiler acts as a complex translator. First, the parser takes a flat list of tokens and organizes them into a structured [BLANK] to show how the statements relate. After verifying the logic, the final stage turns this structure into [BLANK] that the physical computer chip can directly execute.\"\n    }\n  ]\n}",
      "outputTokens": 2896,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-cs-compilers-quiz-1",
      "userPrompt": "LESSON_TITLE: How Compilers Work\nLESSON_DESCRIPTION: Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation\nCHAPTER_TITLE: Language Implementation\nCOURSE_TITLE: Programming Language Theory\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Assembly Line: A compiler reads your code in stages, like an assembly line. Each stage transforms the code into something closer to what the machine understands.\n2. Breaking into Tokens: First, lexical analysis breaks your code into tokens - the smallest meaningful units. Keywords, variables, and operators each become distinct pieces.\n3. Building Structure: The parser takes those tokens and builds a tree structure showing how statements relate. This catches syntax errors like missing parentheses.\n4. Checking Meaning: Semantic analysis checks if your code makes logical sense. It catches errors like using a string where a number is required.\n5. Generating Output: Finally, code generation translates the validated structure into machine instructions the processor can execute directly.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 55828.75016599998,
      "inputTokens": 2058,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Estás descargando un videojuego de 50 GB y un pequeño documento de texto de 2 KB. El sitio web proporciona un código de verificación de seguridad para ambos archivos. Al mirarlos, notas que ambos códigos tienen exactamente 64 caracteres de longitud.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Exacto! Esa es una propiedad clave: no importa si procesas una sola palabra o una biblioteca entera, el resultado siempre tendrá el mismo tamaño fijo.\",\n          \"isCorrect\": true,\n          \"text\": \"Las funciones transforman cualquier cantidad de datos en una cadena de tamaño fijo.\"\n        },\n        {\n          \"feedback\": \"No es así. El sistema no comprime el archivo; en su lugar, realiza cálculos matemáticos sobre los datos para generar un código representativo de tamaño estándar.\",\n          \"isCorrect\": false,\n          \"text\": \"El sistema comprime el videojuego de 50 GB hasta que pesa 2 KB antes de generar el código.\"\n        },\n        {\n          \"feedback\": \"Falso. Estos códigos analizan el contenido completo del archivo bit por bit para asegurar que la descarga fue perfecta.\",\n          \"isCorrect\": false,\n          \"text\": \"El código solo verifica el nombre del archivo, no su contenido.\"\n        },\n        {\n          \"feedback\": \"No es una coincidencia. Si la longitud dependiera del archivo original, sería imposible estandarizar los sistemas de seguridad.\",\n          \"isCorrect\": false,\n          \"text\": \"Es una coincidencia; normalmente el código del videojuego debería ser millones de veces más largo.\"\n        }\n      ],\n      \"question\": \"¿Por qué los códigos de ambos archivos tienen la misma longitud?\"\n    }\n  ]\n}",
      "outputTokens": 2417,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "es-crypto-hash-functions-quiz-1",
      "userPrompt": "LESSON_TITLE: Funciones Hash Criptograficas\nLESSON_DESCRIPTION: Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital\nCHAPTER_TITLE: Fundamentos de Criptografia\nCOURSE_TITLE: Seguridad Informatica\nLANGUAGE: es\nEXPLANATION_STEPS:\n1. Compresion de Datos: Una funcion hash convierte cualquier dato en una cadena de longitud fija. Un archivo de 1KB y uno de 1GB producen hashes del mismo tamano.\n2. Sensibilidad Extrema: Cambiar un solo bit del archivo original cambia completamente el hash. Esta propiedad se llama efecto avalancha y es crucial para detectar alteraciones.\n3. Camino de Ida: No puedes recuperar el archivo original desde su hash - el proceso es irreversible. Por eso se usan para almacenar contrasenas de forma segura.\n4. Unicidad Practica: Encontrar dos archivos diferentes con el mismo hash deberia ser practicamente imposible. Esta resistencia a colisiones es lo que hace a los hashes confiables.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 56110.82425000006,
      "inputTokens": 2023,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Spot on! The network must first make a guess (forward pass), see how wrong that guess is (calculate error), trace the mistake back to its source (backpropagation), and finally make adjustments so it does better next time.\",\n      \"items\": [\n        \"The image passes through the network to generate a guess.\",\n        \"The guess is compared to the actual label to find out how far off it was.\",\n        \"The error is traced backward to figure out which connections caused the mistake.\",\n        \"The connections are tweaked slightly to improve the next guess.\"\n      ],\n      \"question\": \"Imagine an AI learning to recognize pictures of cats. What is the exact sequence of events for a single image during training?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A factory production line has three machines in a row. A product comes out defective. Instead of tweaking all machines randomly, the manager investigates the line in reverse to find out exactly which machine caused the specific flaw.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! This is the essence of backpropagation—working backward from the mistake to assign \\\"blame\\\" to the specific connections that caused it.\",\n          \"isCorrect\": true,\n          \"text\": \"Tracing the error backward to figure out which connections contributed most to a wrong prediction.\"\n        },\n        {\n          \"feedback\": \"Not quite. The forward pass is just the assembly process itself. Investigating the source of the defect happens *after* the product is made.\",\n          \"isCorrect\": false,\n          \"text\": \"The forward pass, where raw data flows through the network to create an output.\"\n        },\n        {\n          \"feedback\": \"Close! Noticing the product is defective is like calculating the error, but the manager's *investigation* into the machines is about assigning blame.\",\n          \"isCorrect\": false,\n          \"text\": \"Calculating the total error by comparing the defective product to a perfect one.\"\n        },\n        {\n          \"feedback\": \"Initialization happens before any products are even made! This scenario is about correcting mistakes after a test run.\",\n          \"isCorrect\": false,\n          \"text\": \"Initializing the network with random starting weights before training begins.\"\n        }\n      ],\n      \"question\": \"How does the manager's investigation relate to neural network training?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're adjusting the hot and cold dials in a new, unfamiliar shower to get the perfect temperature. If you turn the dials drastically all at once, you'll likely swing wildly from freezing cold to scalding hot.\",\n      \"options\": [\n        {\n          \"feedback\": \"Nailed it! Just like the shower, if a network makes massive updates to its connections, it will keep wildly overshooting the \\\"perfect temperature\\\" (the lowest possible error).\",\n          \"isCorrect\": true,\n          \"text\": \"Large adjustments might overcorrect the error, causing the network to completely miss the optimal configuration.\"\n        },\n        {\n          \"feedback\": \"Actually, the computer takes the exact same amount of time to add a large number as it does to add a small number!\",\n          \"isCorrect\": false,\n          \"text\": \"Small adjustments process faster in computer memory than large mathematical changes.\"\n        },\n        {\n          \"feedback\": \"The size of the adjustment doesn't dictate how much data the network can process at once.\",\n          \"isCorrect\": false,\n          \"text\": \"Neural networks can only process one piece of data at a time if the adjustments are too large.\"\n        },\n        {\n          \"feedback\": \"This is a real problem called \\\"overfitting,\\\" but large step sizes usually prevent the network from learning anything useful at all, rather than memorizing perfectly.\",\n          \"isCorrect\": false,\n          \"text\": \"Large adjustments would cause the network to memorize the current data rather than learn from it.\"\n        }\n      ],\n      \"question\": \"Why do neural networks also use \\\"small turns\\\" when adjusting their connections?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Baking a batch of cookies and tasting them\",\n          \"right\": \"Making a forward pass\"\n        },\n        {\n          \"left\": \"Noticing the cookies are way too salty and not sweet enough\",\n          \"right\": \"Calculating the error\"\n        },\n        {\n          \"left\": \"Realizing the salt and sugar quantities are the main culprits\",\n          \"right\": \"Assigning blame (Backpropagation)\"\n        },\n        {\n          \"left\": \"Slightly reducing salt and increasing sugar for the next batch\",\n          \"right\": \"Updating the connections\"\n        }\n      ],\n      \"question\": \"Imagine a bakery trying to perfect a new cookie recipe through trial and error. Match the baker's actions to the corresponding neural network process.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A weather app predicts it will be 80°F, but it's actually 60°F. The model heavily relied on yesterday's temperature (which was 80°F) and completely ignored the incoming cold front data.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! Connections that are most responsible for a bad prediction receive the largest adjustments so they don't make the exact same mistake next time.\",\n          \"isCorrect\": true,\n          \"text\": \"The connection to the \\\"cold front\\\" data will get a large adjustment because ignoring it caused a massive error.\"\n        },\n        {\n          \"feedback\": \"If every connection got the exact same update, the network wouldn't learn which specific features actually matter!\",\n          \"isCorrect\": false,\n          \"text\": \"All connections in the network will be adjusted by the exact same amount to keep the model balanced.\"\n        },\n        {\n          \"feedback\": \"We don't want to delete it entirely—yesterday's temperature is usually very useful! We just want to slightly reduce its influence here.\",\n          \"isCorrect\": false,\n          \"text\": \"The connection to yesterday's temperature will be entirely deleted since it resulted in a wrong prediction.\"\n        },\n        {\n          \"feedback\": \"The whole point of backpropagation is that the adjustments trickle all the way back to how the input data is weighted, not just the final output.\",\n          \"isCorrect\": false,\n          \"text\": \"The network will only adjust the final output node, leaving the input data connections alone.\"\n        }\n      ],\n      \"question\": \"During the next learning step, how should the network adjust its internal connections?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"forward\",\n        \"backward\"\n      ],\n      \"distractors\": [\n        \"sideways\",\n        \"outward\",\n        \"randomly\",\n        \"continuously\"\n      ],\n      \"feedback\": \"Perfect! Training is a two-way street: data moves forward to make a guess, and then the error flows backward so the network knows what to fix.\",\n      \"question\": \"Think about the flow of information during the training process.\",\n      \"template\": \"During training, the actual data flows [BLANK] through the network to create a prediction. After checking the results, the error information flows [BLANK] so the network can figure out which connections to fix.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're teaching a robot to shoot a basketball. On its first try, the ball lands 5 feet to the right of the hoop. On the next try, the ball lands just 2 inches to the right of the hoop.\",\n      \"options\": [\n        {\n          \"feedback\": \"You got it! As the error gets smaller, the network knows it is getting closer to the ideal setup, so it makes tinier tweaks to avoid messing up a good thing.\",\n          \"isCorrect\": true,\n          \"text\": \"The network will make much smaller adjustments to its throwing mechanics on the second try than on the first.\"\n        },\n        {\n          \"feedback\": \"Remember, the size of the adjustment is proportional to the size of the error. A smaller error means smaller changes!\",\n          \"isCorrect\": false,\n          \"text\": \"The network will make the exact same sized adjustments both times, since the ball still missed.\"\n        },\n        {\n          \"feedback\": \"If the robot completely resets, it forgets everything it just learned! It builds on its previous attempts.\",\n          \"isCorrect\": false,\n          \"text\": \"The network will completely randomize its internal mechanics to start fresh since both shots missed.\"\n        },\n        {\n          \"feedback\": \"Not quite. The error is smaller on the second try, which tells the network it's on the right track, so it should make *smaller* adjustments, not larger ones.\",\n          \"isCorrect\": false,\n          \"text\": \"The network will make larger adjustments on the second try because precision is harder to achieve.\"\n        }\n      ],\n      \"question\": \"How will the network's learning adjustments differ between these two attempts?\"\n    }\n  ]\n}",
      "outputTokens": 3876,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-ml-backpropagation-quiz-1",
      "userPrompt": "LESSON_TITLE: How Neural Networks Learn\nLESSON_DESCRIPTION: Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates\nCHAPTER_TITLE: Neural Network Training\nCOURSE_TITLE: Machine Learning Fundamentals\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Adjustment Problem: Training a neural network means adjusting connection strengths so outputs match desired results. The question is: which connections need adjusting and by how much?\n2. Measuring Mistakes: First, data flows forward through the network, producing a prediction. The difference between prediction and reality is measured as error.\n3. Assigning Blame: Error information then flows backward through the network. Each connection learns how much it contributed to the mistake using calculus.\n4. Small Steps Downhill: Connections that contributed more to errors get larger adjustments. The network gradually improves by making small changes in the direction that reduces error.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 62519.81941700005,
      "inputTokens": 2040,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine you're helping a friend build a physical model of the Earth for a science fair. They want to use rigid plastic pieces for the tectonic plates, but they aren't sure what to use underneath to represent the mantle.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! The mantle is solid rock, but because of extreme heat, it slowly flows over millions of years—just like thick clay or Silly Putty.\",\n          \"isCorrect\": true,\n          \"text\": \"Silly Putty or thick clay, because it's solid but can slowly deform and flow.\"\n        },\n        {\n          \"feedback\": \"Not quite! A very common myth is that the mantle is a giant ocean of liquid magma. It's actually completely solid rock.\",\n          \"isCorrect\": false,\n          \"text\": \"Water, because the plates float on a completely liquid ocean of magma.\"\n        },\n        {\n          \"feedback\": \"It's definitely solid, but not entirely rigid. The extreme heat deep inside the Earth allows the rock to slowly bend and flow over time.\",\n          \"isCorrect\": false,\n          \"text\": \"Hard plastic, because the mantle is completely solid and rigid under the pressure.\"\n        },\n        {\n          \"feedback\": \"While there is pressure pushing outward, the mantle isn't made of loose particles; it's a massive, cohesive layer of rock.\",\n          \"isCorrect\": false,\n          \"text\": \"Dry sand, because the plates slide over loose, shifting particles.\"\n        }\n      ],\n      \"question\": \"What material would best represent how the mantle behaves?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're watching a pot of thick stew simmering on the stove. You notice that chunks of vegetables at the surface are slowly drifting away from the center as the hot soup rises from the bottom and cooler soup sinks.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Just like the soup, intense heat from Earth's core causes the solid rock of the mantle to slowly churn, which drags the tectonic plates above it.\",\n          \"isCorrect\": true,\n          \"text\": \"Heat from the core makes the mantle slowly circulate, which drags the plates along.\"\n        },\n        {\n          \"feedback\": \"Actually, the heat comes from deep inside the Earth (the core), not the surface crust. The crust is the coolest part!\",\n          \"isCorrect\": false,\n          \"text\": \"The crust is boiling hot, which melts the mantle below and creates fast-moving currents.\"\n        },\n        {\n          \"feedback\": \"Not quite. The drifting vegetables represent the massive tectonic plates moving due to the churning heat below them, not volcanoes.\",\n          \"isCorrect\": false,\n          \"text\": \"The vegetables represent volcanoes erupting from the core directly to the surface.\"\n        },\n        {\n          \"feedback\": \"While pressure exists, it's the actual circulation of the mantle rock that drags the plates, like a conveyor belt, rather than steam pushing them.\",\n          \"isCorrect\": false,\n          \"text\": \"Steam from the core builds up and pushes the plates apart like a pressure cooker.\"\n        }\n      ],\n      \"question\": \"How does this soup demonstrate why Earth's plates move?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A research submarine collects rock samples from the ocean floor. Scientists notice a fascinating pattern: rocks right in the middle of a massive underwater mountain range are brand new, but rocks miles away from it are incredibly old.\",\n      \"options\": [\n        {\n          \"feedback\": \"Right on! As the plates pull apart, magma bubbles up to fill the gap, creating brand new crust right at the split. As it continues to pull apart, those new rocks slowly move further away.\",\n          \"isCorrect\": true,\n          \"text\": \"Plates are pulling apart there, allowing magma to rise and cool into new rock.\"\n        },\n        {\n          \"feedback\": \"If they were crashing together, they would crumple upwards or one would dive underneath the other, but it wouldn't create a neat strip of brand new rock in the center.\",\n          \"isCorrect\": false,\n          \"text\": \"Plates are crashing together, crushing old ocean rocks into new ones.\"\n        },\n        {\n          \"feedback\": \"Ocean currents aren't strong enough to drag heavy lava for miles! The new rock is actively being formed right there at the mountain range.\",\n          \"isCorrect\": false,\n          \"text\": \"Ocean currents are carrying fresh lava from coastal volcanoes to the middle of the ocean.\"\n        },\n        {\n          \"feedback\": \"While saltwater can slowly erode rock over vast amounts of time, it doesn't explain why the rocks right in the middle are brand new. They are actively forming!\",\n          \"isCorrect\": false,\n          \"text\": \"The older rocks are slowly being dissolved by salt water over millions of years.\"\n        }\n      ],\n      \"question\": \"What is happening to the Earth's crust at this underwater mountain range?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Two giant plates pull apart, leaving a widening gap between them\",\n          \"right\": \"New crust forms as magma rises\"\n        },\n        {\n          \"left\": \"Two equally buoyant plates smash together and neither is willing to sink\",\n          \"right\": \"Towering mountain ranges are pushed into the sky\"\n        },\n        {\n          \"left\": \"One heavy plate is forced to dive deep underneath another plate\",\n          \"right\": \"Earthquakes trigger and volcanoes erupt\"\n        }\n      ],\n      \"question\": \"Earth's surface is constantly being reshaped depending on how its massive plates interact. Match the type of plate interaction with the geological scenery it creates!\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"volcanoes\",\n        \"mountains\"\n      ],\n      \"distractors\": [\n        \"valleys\",\n        \"new crust\",\n        \"mid-ocean ridges\",\n        \"sinkholes\"\n      ],\n      \"feedback\": \"When a plate dives down (subducts), it sinks into the hot mantle and triggers explosive volcanoes and earthquakes. But when plates just smash together and neither sinks, the rock has nowhere to go but up, creating towering mountain ranges like the Himalayas!\",\n      \"question\": \"Two plates colliding is like a slow-motion car crash, but the results depend heavily on exactly how they hit. Let's see if you can predict the outcome.\",\n      \"template\": \"If one plate gets shoved underneath the other, it plunges deep into the earth, melting and often triggering earthquakes and [BLANK]. But if both plates refuse to sink and instead crumple heavily upwards, they build towering [BLANK].\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You want to set up a time-lapse camera to record North America and Europe moving away from each other. You're trying to explain to a friend just how slow this process actually is.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfect! Tectonic plates move very slowly, usually just a few centimeters per year—which is exactly the speed your fingernails grow.\",\n          \"isCorrect\": true,\n          \"text\": \"It's about the same speed as your fingernails growing.\"\n        },\n        {\n          \"feedback\": \"Believe it or not, a snail is a speed demon compared to a tectonic plate! Snails move inches per minute; plates move centimeters per year.\",\n          \"isCorrect\": false,\n          \"text\": \"It's about the same speed as a snail crossing a sidewalk.\"\n        },\n        {\n          \"feedback\": \"Grass grows way faster! Grass can grow several inches in a single month, whereas plates only move a few centimeters in an entire year.\",\n          \"isCorrect\": false,\n          \"text\": \"It's about the same speed as grass growing in your backyard.\"\n        },\n        {\n          \"feedback\": \"A puddle can evaporate in just a few hours. Tectonic plates take an entire year just to move the distance of a couple of pennies!\",\n          \"isCorrect\": false,\n          \"text\": \"It's about the same speed as a rain puddle evaporating in the sun.\"\n        }\n      ],\n      \"question\": \"Which of these everyday processes happens at about the same speed as tectonic plate movement?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"This sequence represents a divergent boundary. First, the heat from the core creates a current in the solid rock. This current drags the plates away from each other. The newly created gap relieves pressure, allowing magma to bubble up and harden into brand new crust!\",\n      \"items\": [\n        \"Heat from Earth's core causes the mantle to circulate.\",\n        \"The churning mantle pulls two plates in opposite directions.\",\n        \"A gap opens up between the separated plates.\",\n        \"Magma rises from below to fill the empty space.\",\n        \"The magma cools down, creating brand new crust.\"\n      ],\n      \"question\": \"Put these events in order to show how new ocean floor is created from start to finish.\"\n    }\n  ]\n}",
      "outputTokens": 4246,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-geology-plate-tectonics-quiz-1",
      "userPrompt": "LESSON_TITLE: Plate Tectonics\nLESSON_DESCRIPTION: Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create\nCHAPTER_TITLE: Earth's Structure\nCOURSE_TITLE: Earth Science\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. A Cracked Shell: Earth's outer shell is cracked into massive pieces called plates. These plates sit on the mantle - solid rock so hot it flows like thick honey over millions of years.\n2. The Engine Below: Heat from Earth's core creates circulation in the mantle. This slow churning drags the plates along, moving them centimeters per year.\n3. Spreading Apart: Where plates pull apart, magma rises to fill the gap, creating new crust. Mid-ocean ridges are underwater mountain chains formed this way.\n4. Collision Zones: Where plates collide, one may dive under the other, triggering earthquakes and volcanoes. Mountain ranges like the Himalayas form when neither plate sinks.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 60283.029666000046,
      "inputTokens": 2085,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Um grupo de cientistas está desenvolvendo um novo antibiótico que atua como uma \\\"supercola\\\" no material genético das bactérias. Na prática, esse remédio gruda firmemente as duas fitas da hélice uma na outra de forma irreversível.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Para que a informação seja copiada, o primeiro passo obrigatório é acessar o interior da hélice. Se as fitas não se separam, as enzimas não conseguem ler o molde, interrompendo toda a reprodução.\",\n          \"isCorrect\": true,\n          \"text\": \"A bactéria não conseguirá se reproduzir, pois é impossível iniciar a cópia de um DNA que não pode ser aberto.\"\n        },\n        {\n          \"feedback\": \"Na verdade, pular a etapa de abertura não é uma opção. A informação que precisa ser copiada está \\\"escondida\\\" no meio das duas fitas unidas.\",\n          \"isCorrect\": false,\n          \"text\": \"A bactéria se reproduzirá mais rápido, pois o processo economizará o tempo e a energia de separar as fitas.\"\n        },\n        {\n          \"feedback\": \"As enzimas que constroem a nova fita não conseguem \\\"enxergar\\\" a informação através da estrutura fechada. Elas precisam de acesso direto a uma fita individual.\",\n          \"isCorrect\": false,\n          \"text\": \"A bactéria fará a cópia por fora da hélice, \\\"escaneando\\\" as duas fitas ao mesmo tempo e criando um clone.\"\n        },\n        {\n          \"feedback\": \"O DNA bacteriano precisa das duas fitas intactas e pareadas para funcionar corretamente a longo prazo. Além disso, a cola impede que elas se soltem em primeiro lugar!\",\n          \"isCorrect\": false,\n          \"text\": \"A bactéria simplesmente cortará as fitas ao meio, usando apenas uma metade para viver e descartando a parte colada.\"\n        }\n      ],\n      \"question\": \"O que deve acontecer com a bactéria tratada com esse remédio?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"original\",\n        \"molde\"\n      ],\n      \"distractors\": [\n        \"descartável\",\n        \"obstáculo\",\n        \"aleatória\",\n        \"rascunho\"\n      ],\n      \"feedback\": \"Perfeito! A natureza é econômica e inteligente: ela guarda metade da estrutura antiga (original) e a usa como um guia (molde) para construir a outra metade. Isso é o que chamamos de replicação semiconservativa, e é o segredo para copiar bilhões de letras genéticas sem perder o sentido!\",\n      \"question\": \"Entendendo como a célula cria as suas novas cópias genéticas.\",\n      \"template\": \"Quando uma célula se divide, ela não cria um material genético 100% novo do zero. Cada nova dupla hélice formada após a cópia contém uma fita [BLANK] e uma fita recém-fabricada. Ao usar a estrutura já existente como um [BLANK] exato para a nova construção, a célula garante que a mensagem genética não se perca no processo.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine que você está pintando a faixa divisória de uma pista usando um carrinho de tinta motorizado que SÓ tem marcha para a frente. Para pintar a faixa da direção oposta ao mesmo tempo, você tem que dar passos para trás, posicionar o carrinho, pintar um pequeno trecho para a frente, parar e repetir.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! Como as fitas de DNA correm em sentidos opostos e a enzima construtora só tem \\\"marcha para a frente\\\", uma das fitas flui perfeitamente, mas a outra precisa ser montada em vários pedacinhos sucessivos!\",\n          \"isCorrect\": true,\n          \"text\": \"As enzimas construtoras só funcionam em uma direção, forçando a cópia de uma das fitas a ser feita em blocos separados.\"\n        },\n        {\n          \"feedback\": \"As pausas não acontecem por causa do formato torto da hélice, mas sim por uma limitação de direção da \\\"máquina\\\" que constrói as novas fitas.\",\n          \"isCorrect\": false,\n          \"text\": \"O DNA tem um formato espiral muito complexo, então as enzimas precisam fazer pausas constantes para desenrolar o caminho.\"\n        },\n        {\n          \"feedback\": \"A célula não usa tipos diferentes de blocos. A diferença na cópia se deve puramente ao sentido em que a leitura precisa ser feita.\",\n          \"isCorrect\": false,\n          \"text\": \"A célula possui dois tipos de blocos construtores incompatíveis, exigindo que metade do trabalho seja feito aos poucos.\"\n        },\n        {\n          \"feedback\": \"As duas fitas costumam ter tamanhos correspondentes! O que causa a fragmentação é a regra de direção única de montagem.\",\n          \"isCorrect\": false,\n          \"text\": \"Uma fita de DNA é sempre fisicamente muito mais longa do que a outra, exigindo que o excesso seja feito de forma fragmentada.\"\n        }\n      ],\n      \"question\": \"Na biologia, qual desafio da duplicação do DNA se assemelha a essa situação?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Nos primórdios da computação, se você digitasse uma única letra errada ao programar um cartão perfurado, o sistema inteiro falhava e o cartão ia para o lixo. Hoje, os editores de texto modernos possuem uma tecla \\\"Backspace\\\" que nos permite apagar o erro na hora e digitar a letra certa.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito! O DNA tem seu próprio sistema \\\"Backspace\\\". Enzimas atuam como revisoras atentas, identificando bloquinhos mal encaixados e trocando-os na hora, o que mantém nossas informações genéticas puras e seguras geração após geração.\",\n          \"isCorrect\": true,\n          \"text\": \"Enzimas específicas checam cada peça adicionada durante a cópia e substituem os erros quase instantaneamente.\"\n        },\n        {\n          \"feedback\": \"Embora mutações severas possam ser problemáticas, um pequeno erro de cópia não destrói a célula na hora. O ideal é corrigir o erro em vez de jogar tudo fora!\",\n          \"isCorrect\": false,\n          \"text\": \"O material genético é tão frágil que não pode ser consertado; se houver um erro, a célula entra em autodestruição imediata.\"\n        },\n        {\n          \"feedback\": \"O processo de cópia é incrivelmente rápido, mas a precisão é muito mais importante do que economizar energia. Ignorar erros causaria um acúmulo desastroso de mutações.\",\n          \"isCorrect\": false,\n          \"text\": \"A célula ignora falhas pontuais para ganhar velocidade e economizar energia, lidando com os problemas apenas no futuro.\"\n        },\n        {\n          \"feedback\": \"A evolução de fato depende de algumas mutações que passam despercebidas, mas o objetivo principal do sistema da célula é IMPEDIR os erros, não criá-los de propósito.\",\n          \"isCorrect\": false,\n          \"text\": \"A célula adiciona erros de propósito e os deixa lá, garantindo que o organismo possa evoluir mais rapidamente.\"\n        }\n      ],\n      \"question\": \"Como a natureza lida com os \\\"erros de digitação\\\" ao copiar nosso genoma?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Excelente! Para copiar qualquer coisa que está guardada e fechada, primeiro precisamos abrir e expor o original (1). Depois, começamos a usar esse original como guia (2), vamos construindo a nova versão baseando-se no original (3) e, finalmente, fazemos uma revisão de qualidade para garantir que a cópia ficou perfeita (4). Tudo segue uma ordem puramente lógica!\",\n      \"items\": [\n        \"A estrutura em dupla hélice é aberta, soltando as duas metades da molécula.\",\n        \"As fitas antigas ficam expostas para servirem como moldes de leitura.\",\n        \"Novas peças vão sendo conectadas, formando duas hélices onde antes havia uma.\",\n        \"Mecanismos de revisão passam a limpo o trabalho, trocando eventuais falhas.\"\n      ],\n      \"question\": \"Organize os eventos abaixo na ordem lógica necessária para que a célula consiga fazer uma cópia segura e bem-sucedida do seu material genético.\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Um livro antigo com páginas coladas precisa ser cuidadosamente descolado para que a história possa ser lida.\",\n          \"right\": \"Abertura da dupla hélice para expor a informação\"\n        },\n        {\n          \"left\": \"Um marceneiro usa o tampo de uma mesa antiga como contorno exato para serrar uma nova tábua de madeira.\",\n          \"right\": \"Uso da fita preexistente como molde de construção\"\n        },\n        {\n          \"left\": \"Uma via de trânsito em que os carros só podem trafegar obrigatoriamente do bairro para o centro, e nunca o inverso.\",\n          \"right\": \"Limitação direcional das enzimas polimerases\"\n        },\n        {\n          \"left\": \"Um inspetor de qualidade de uma fábrica que recolhe e troca um parafuso enferrujado antes que o celular seja lacrado.\",\n          \"right\": \"Correção de erros para manter a fidelidade\"\n        }\n      ],\n      \"question\": \"Conecte as situações do nosso dia a dia com os princípios reais da cópia do material genético que elas melhor representam.\"\n    }\n  ]\n}",
      "outputTokens": 4793,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "pt-biology-dna-replication-quiz-1",
      "userPrompt": "LESSON_TITLE: Como o DNA se Replica\nLESSON_DESCRIPTION: Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade\nCHAPTER_TITLE: Genetica Molecular\nCOURSE_TITLE: Biologia Celular\nLANGUAGE: pt\nEXPLANATION_STEPS:\n1. Abrindo o Ziper: Antes de uma celula se dividir, ela precisa copiar todo seu DNA. O processo comeca quando enzimas separam as duas fitas da dupla helice.\n2. Lendo o Molde: Cada fita original serve de molde para uma nova. Enzimas chamadas DNA polimerases leem a fita antiga e constroem a nova, base por base.\n3. O Problema da Direcao: Ha um problema: a polimerase so consegue adicionar bases em uma direcao. Uma fita e copiada continuamente, mas a outra precisa ser copiada em pedacos.\n4. Corrigindo Erros: Enzimas de correcao verificam cada base adicionada. Se encontram um erro, removem e substituem. Esse controle de qualidade mantem a fidelidade genetica.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 17541.50645899994,
      "inputTokens": 2030,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're standing on the beach taking a photo of a tall, beautiful lighthouse. You want the final picture to feel exciting and encourage people to notice both the lighthouse and the crashing ocean waves beside it.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Shifting the lighthouse to the side gives the viewer's eyes room to explore the rest of the scene, like the crashing waves.\",\n          \"isCorrect\": true,\n          \"text\": \"Place the lighthouse off to the left or right side of the frame.\"\n        },\n        {\n          \"feedback\": \"While centering works sometimes, it often acts like a stop sign for the eyes. Viewers will look at the lighthouse and might ignore the waves around it.\",\n          \"isCorrect\": false,\n          \"text\": \"Place the lighthouse exactly in the dead center of the frame.\"\n        },\n        {\n          \"feedback\": \"This would show great detail of the lighthouse, but it would completely eliminate the ocean waves you want people to notice!\",\n          \"isCorrect\": false,\n          \"text\": \"Zoom in so the lighthouse fills the entire frame edge-to-edge.\"\n        },\n        {\n          \"feedback\": \"Putting the subject at the very edge usually makes the photo feel unbalanced, like the subject is about to fall out of the picture.\",\n          \"isCorrect\": false,\n          \"text\": \"Put the lighthouse flush against the far right edge of the photo.\"\n        }\n      ],\n      \"question\": \"How should you position the lighthouse to achieve this?\"\n    }\n  ]\n}",
      "outputTokens": 1725,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-photography-composition-quiz-1",
      "userPrompt": "LESSON_TITLE: The Rule of Thirds\nLESSON_DESCRIPTION: Understanding the rule of thirds and how strategic subject placement creates more visually engaging photographs\nCHAPTER_TITLE: Composition Basics\nCOURSE_TITLE: Photography Fundamentals\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. Beyond the Center: Most beginners center their subjects. While this works sometimes, placing subjects off-center often creates more dynamic, interesting images.\n2. The Grid: Imagine your frame divided by two horizontal and two vertical lines, creating nine equal sections. The four points where lines cross are power points.\n3. Strategic Placement: Placing your main subject on a power point or along a line draws the viewer's eye naturally. A horizon on the lower line emphasizes sky; on the upper line emphasizes ground.\n4. Why It Works: This guideline works because our eyes naturally scan images in patterns. Off-center placement gives the eye somewhere to travel, making photos feel more alive.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 32452.7101250001,
      "inputTokens": 2031,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Maya has always believed that drinking eight glasses of water a day is the ultimate secret to clear skin. One day, she reads a well-researched medical article explaining that diet and genetics play a much bigger role, and extra water doesn't do much.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! When new facts challenge our deeply held beliefs, it creates mental friction. Our quick fix is often to dismiss the source rather than do the hard work of changing our mind.\",\n          \"isCorrect\": true,\n          \"text\": \"It will feel a bit uncomfortable, and she might immediately look for reasons why the article's author is unreliable.\"\n        },\n        {\n          \"feedback\": \"Not quite. Brains actually hate rewriting their core beliefs because it requires a lot of mental energy. It rarely happens effortlessly.\",\n          \"isCorrect\": false,\n          \"text\": \"It will easily absorb the new facts and effortlessly erase her old belief about water.\"\n        },\n        {\n          \"feedback\": \"Confirmation bias isn't about intentional lying. It's about how our brain genuinely (and automatically) processes information to protect our beliefs.\",\n          \"isCorrect\": false,\n          \"text\": \"She will consciously decide to lie about the article so she can keep giving her friends skincare advice.\"\n        },\n        {\n          \"feedback\": \"While some might experiment, the immediate psychological reaction to conflicting information is usually resistance and skepticism, not an instant test.\",\n          \"isCorrect\": false,\n          \"text\": \"She will stop drinking water entirely today just to test the theory on herself.\"\n        }\n      ],\n      \"question\": \"How is Maya's brain likely to react to this article?\"\n    }\n  ]\n}",
      "outputTokens": 3306,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-psychology-confirmation-bias-quiz-1",
      "userPrompt": "LESSON_TITLE: Confirmation Bias\nLESSON_DESCRIPTION: Understanding confirmation bias - how our tendency to favor information that confirms existing beliefs affects our perception and decision-making\nCHAPTER_TITLE: Cognitive Biases\nCOURSE_TITLE: Introduction to Psychology\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Comfort of Consistency: Our brains prefer consistency. When we believe something, finding contradicting evidence feels uncomfortable - like a mental itch we want to scratch away.\n2. Selective Attention: To avoid discomfort, our brains play tricks. We notice evidence supporting our beliefs and unconsciously filter out or dismiss contradicting evidence.\n3. Unconscious Filtering: This happens automatically, not deliberately. A sports fan genuinely sees more fouls by the opposing team. A political supporter honestly remembers more flaws in opponents.\n4. Safeguards Help: Even scientists fall prey to this. That's why research uses blind studies and peer review - external checks against our natural tendency to see what we expect.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 22070.622167,
      "inputTokens": 2088,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Joana quer financiar um carro novo, mas viu no noticiário que o Banco Central reduziu drasticamente a taxa básica de juros do país.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! Juros baixos deixam o crédito mais barato, o que estimula as pessoas a consumirem e as empresas a investirem. É a alavanca da economia funcionando.\",\n          \"isCorrect\": true,\n          \"text\": \"É um ótimo momento, pois os financiamentos devem ficar mais baratos, incentivando a compra.\"\n        },\n        {\n          \"feedback\": \"Na verdade é o contrário! Juros menores reduzem o custo dos empréstimos. A resposta certa é que os financiamentos devem ficar mais baratos.\",\n          \"isCorrect\": false,\n          \"text\": \"Ela deve esperar, pois juros menores significam que os bancos vão cobrar mais caro pelos empréstimos.\"\n        },\n        {\n          \"feedback\": \"Quase! Embora pareça distante, a taxa do Banco Central serve como base para praticamente todos os empréstimos no país, inclusive o do carro da Joana.\",\n          \"isCorrect\": false,\n          \"text\": \"Não muda nada, já que a taxa do Banco Central afeta apenas o governo e não as pessoas comuns.\"\n        },\n        {\n          \"feedback\": \"Cuidado! Juros baixos não destroem o valor do dinheiro assim, eles apenas tornam o crédito mais acessível na economia.\",\n          \"isCorrect\": false,\n          \"text\": \"Ela terá que pagar o carro à vista, porque juros baixos fazem o dinheiro perder o valor imediatamente.\"\n        }\n      ],\n      \"question\": \"O que essa notícia significa para os planos da Joana?\"\n    }\n  ]\n}",
      "outputTokens": 2300,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "pt-economics-monetary-policy-quiz-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Politica Monetaria\nLESSON_DESCRIPTION: Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria\nCHAPTER_TITLE: Macroeconomia\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt\nEXPLANATION_STEPS:\n1. Equilibrio Monetario: O banco central controla a quantidade de dinheiro circulando na economia. Quando ha dinheiro demais, os precos sobem. Quando ha pouco, a economia desacelera.\n2. A Alavanca dos Juros: A taxa basica de juros e a principal ferramenta. Juros altos tornam emprestimos caros, reduzindo gastos. Juros baixos estimulam emprestimos e consumo.\n3. Efeito com Atraso: Mudancas nos juros levam meses para afetar a economia real. Empresas e consumidores ajustam seus planos gradualmente, nao instantaneamente.\n4. Operacoes de Mercado: Bancos centrais tambem compram e vendem titulos do governo. Comprando titulos, injetam dinheiro na economia. Vendendo, retiram dinheiro de circulacao.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    }
  ],
  "taskId": "activity-explanation-quiz"
}
