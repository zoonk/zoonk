{
  "generatedAt": "2026-02-21T23:37:21.638Z",
  "modelId": "anthropic/claude-opus-4.6",
  "outputs": [
    {
      "duration": 57318.517374999996,
      "inputTokens": 3531,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A child gets chickenpox at age 5 and feels terrible for a week. At age 12, they're exposed to chickenpox again at school but never develop symptoms.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not quite — skin is a first-line barrier, but it didn't change between ages 5 and 12. The key here is that the immune system *learned* from the first infection. Memory cells from the first encounter recognized the virus immediately and wiped it out before symptoms could develop.\",\n          \"isCorrect\": false,\n          \"text\": \"Their skin became thicker over time, blocking the virus from entering\"\n        },\n        {\n          \"feedback\": \"Exactly! After the first infection, the immune system created memory cells that 'remembered' the chickenpox virus. When it showed up again years later, those cells kicked into gear fast — neutralizing the threat before the child even felt sick.\",\n          \"isCorrect\": true,\n          \"text\": \"Their immune system retained cells that recognized the virus and responded before it could spread\"\n        },\n        {\n          \"feedback\": \"Macrophages are general first responders — they don't specifically improve against one virus over time. What actually happened is more targeted: the immune system created memory cells during the first infection that specifically recognized chickenpox and responded rapidly the second time.\",\n          \"isCorrect\": false,\n          \"text\": \"Macrophages in their body had become more efficient at eating all foreign invaders\"\n        },\n        {\n          \"feedback\": \"That's a common myth, but chickenpox can affect anyone at any age who hasn't been exposed. The real reason is immune memory — the child's body remembered the virus from the first infection and mounted a lightning-fast response the second time around.\",\n          \"isCorrect\": false,\n          \"text\": \"The child had simply outgrown the virus, since chickenpox mainly affects young kids\"\n        }\n      ],\n      \"question\": \"Why didn't the child get sick the second time?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You accidentally cut your finger while cooking. Within minutes, the area around the cut becomes red and swollen as your body starts fighting potential invaders that entered through the wound.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! Your skin is the front-line barrier keeping invaders out. Once it's breached by a cut, patrolling immune cells rush to the area to engulf and destroy anything foreign — no special targeting needed, they just attack anything that doesn't belong.\",\n          \"isCorrect\": true,\n          \"text\": \"The cut broke through a physical barrier, so general-purpose immune cells must now deal with whatever got in\"\n        },\n        {\n          \"feedback\": \"Antibodies are part of the slower, more targeted response. Right after a cut, the immediate issue is that the skin barrier is broken, so general-purpose cells need to jump in and handle whatever got through. Antibody production comes later if needed.\",\n          \"isCorrect\": false,\n          \"text\": \"The body needs to create antibodies specific to whatever bacteria entered the wound\"\n        },\n        {\n          \"feedback\": \"Memory cells are specialists from past infections. Right after a cut, there's no time for that — the urgent problem is that the skin barrier has been breached, so fast-acting, general-purpose immune cells respond first to clean up the area.\",\n          \"isCorrect\": false,\n          \"text\": \"Memory cells need to identify which specific pathogen entered through the cut\"\n        },\n        {\n          \"feedback\": \"Actually, the body's initial response is nearly instant! General-purpose immune cells are already patrolling your tissues and quickly converge on the wound site. It's the more targeted, specialized response that takes days — but the first wave is immediate.\",\n          \"isCorrect\": false,\n          \"text\": \"The body must wait several days to mount any kind of immune response to the wound\"\n        }\n      ],\n      \"question\": \"What's the body's first challenge here?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Stomach acid destroying bacteria in contaminated food before they reach the bloodstream\",\n          \"right\": \"Physical/chemical barrier stopping invaders from entering\"\n        },\n        {\n          \"left\": \"A cell engulfing and digesting a bacterium that entered through a scrape\",\n          \"right\": \"General-purpose immune cell destroying a foreign invader\"\n        },\n        {\n          \"left\": \"Y-shaped proteins attaching to a specific virus, flagging it for destruction\",\n          \"right\": \"Targeted antibody response to a recognized threat\"\n        },\n        {\n          \"left\": \"Getting over the flu in 2 days instead of 2 weeks because you had it last year\",\n          \"right\": \"Memory cells enabling a faster response to a familiar pathogen\"\n        }\n      ],\n      \"question\": \"Match each immune system scenario to the defense mechanism most responsible for handling it.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A researcher is studying two patients. Patient A is fighting a brand-new infection they've never encountered before. Patient B is fighting the same pathogen, but they had it once three years ago. Both patients' blood is analyzed for antibodies against this pathogen.\",\n      \"options\": [\n        {\n          \"feedback\": \"Actually, it's the opposite! Patient A has never seen this pathogen, so their body needs time to figure out how to make the right antibodies. Patient B's immune system remembers the pathogen and can produce antibodies much more quickly.\",\n          \"isCorrect\": false,\n          \"text\": \"Patient A would have antibodies immediately; Patient B would have none since the old ones expired\"\n        },\n        {\n          \"feedback\": \"The pathogen is the same, but the patients' histories are different — and that matters a lot. Patient B's immune system has a head start because it remembers the pathogen from three years ago and can ramp up antibody production much faster.\",\n          \"isCorrect\": false,\n          \"text\": \"Both patients would produce antibodies at the same speed, since the pathogen is the same\"\n        },\n        {\n          \"feedback\": \"Bingo! Patient B's immune system created memory cells during the first infection three years ago. Those cells recognize the returning threat and rapidly trigger antibody production — giving Patient B a huge time advantage over Patient A, who's starting from scratch.\",\n          \"isCorrect\": true,\n          \"text\": \"Patient B would produce specific antibodies faster because their immune system remembers this pathogen\"\n        },\n        {\n          \"feedback\": \"A 'fresh' encounter is actually a disadvantage! Patient A's immune system has to go through the slow process of identifying the pathogen and figuring out which antibodies work. Patient B already has that blueprint stored in memory cells, so they respond faster and more effectively.\",\n          \"isCorrect\": false,\n          \"text\": \"Patient A would produce stronger antibodies because their immune system is seeing the pathogen fresh\"\n        }\n      ],\n      \"question\": \"What difference would you expect to find?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"The immune system works in escalating waves. First, physical barriers (skin) are the front line. When breached, fast-acting general-purpose cells respond immediately. If they can't handle it alone, the slower but more precise antibody system kicks in, targeting the specific invader. Finally, after the battle is won, memory cells form so the body can respond faster if this same bacterium ever returns.\",\n      \"items\": [\n        \"Skin normally blocks the bacterium, but the wound provides an entry point\",\n        \"General-purpose immune cells at the wound site begin engulfing the bacteria\",\n        \"If the infection persists, specialized cells begin producing antibodies that target this specific bacterium\",\n        \"Antibodies bind to the bacteria, marking them for destruction by other immune cells\",\n        \"Some immune cells store a memory of this bacterium for future encounters\"\n      ],\n      \"question\": \"A new bacterium enters your body through a small wound. Put the immune responses in the order they would typically occur.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine two security systems for a building. System A has locked doors, security cameras, and guards who tackle anyone without a badge — no questions asked. System B has detectives who study intruders, create custom \\\"wanted posters,\\\" and keep files so they can instantly recognize repeat offenders.\",\n      \"options\": [\n        {\n          \"feedback\": \"You've got it flipped! The locked doors and tackle-first guards are more like physical barriers and general-purpose cells — they respond immediately without specificity. The detectives making custom wanted posters are like the antibody system that studies and specifically targets threats.\",\n          \"isCorrect\": false,\n          \"text\": \"System A is like the targeted antibody response; System B is like physical barriers\"\n        },\n        {\n          \"feedback\": \"Nailed it! System A — with its barriers and indiscriminate guards — mirrors skin, mucus, and general-purpose immune cells that respond immediately to anything foreign. System B — with its custom wanted posters and filed records — mirrors how antibodies specifically target invaders and how memory cells remember them for the future.\",\n          \"isCorrect\": true,\n          \"text\": \"System A represents fast, non-specific defenses; System B represents the slower, targeted immune response with memory\"\n        },\n        {\n          \"feedback\": \"They're actually fundamentally different types of defense. System A is non-specific (tackle anyone without a badge), while System B is highly specific (custom wanted posters for particular intruders). This mirrors the two distinct branches of immune defense — one fast and general, the other slow but precise.\",\n          \"isCorrect\": false,\n          \"text\": \"Both systems represent the same type of immune response, just at different speeds\"\n        },\n        {\n          \"feedback\": \"Both systems represent natural immune processes! Your body genuinely has fast, non-specific defenses (like System A) AND slower, targeted defenses that build memory (like System B). Vaccines take advantage of System B, but that system exists and works naturally during any infection.\",\n          \"isCorrect\": false,\n          \"text\": \"System A is the only real immune defense; System B just describes how vaccines work, not natural immunity\"\n        }\n      ],\n      \"question\": \"How does this map to immune defense?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"B\",\n        \"specific\",\n        \"mark\"\n      ],\n      \"distractors\": [\n        \"memory\",\n        \"general\",\n        \"dissolve\",\n        \"red blood\",\n        \"random\",\n        \"absorb\"\n      ],\n      \"feedback\": \"B cells are the antibody factories of the immune system. Unlike general-purpose cells that attack anything foreign, antibodies are precision tools — each one is shaped to latch onto one specific type of invader. Once antibodies stick to a pathogen, they act like a flag or tag, marking it so that other immune cells can find and destroy it efficiently.\",\n      \"question\": \"Complete this description of how antibodies work to neutralize a specific invader.\",\n      \"template\": \"When a pathogen persists past the body's initial defenses, [BLANK] cells produce antibodies. These proteins are designed to bind to one [BLANK] invader, not just any threat. Once attached, the antibodies essentially [BLANK] the pathogen so other immune cells know to destroy it.\"\n    }\n  ]\n}",
      "outputTokens": 2594,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-biology-immune-system-quiz-1",
      "userPrompt": "LESSON_TITLE: How the Immune System Works\nLESSON_DESCRIPTION: Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies\nCHAPTER_TITLE: Body Systems\nCOURSE_TITLE: Human Biology\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. Two Lines of Defense: Your body has two defense systems working together. The first responds instantly to any threat. The second takes time but remembers enemies forever.\n2. The First Responders: Physical barriers like skin and mucus stop most invaders. If they get through, patrolling cells called macrophages eat anything that looks foreign.\n3. The Targeting System: When threats persist, specialized cells called B cells create antibodies. These Y-shaped proteins stick to specific invaders, marking them for destruction.\n4. Remembering Enemies: Some cells become memory cells after an infection. They remember the invader's shape for years, letting your body respond faster next time.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 11110.415666999994,
      "inputTokens": 3538,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're writing a program and accidentally type `let x = 5 +;` — there's a plus sign with nothing after it. The compiler flags an error before it ever checks what type `x` should be.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not quite — the lexer would actually handle `+` and `;` as separate, perfectly valid tokens. The issue is that `5 +` followed by `;` doesn't form a valid expression structure. That's a job for the phase that checks how tokens relate to each other.\",\n          \"isCorrect\": false,\n          \"text\": \"Lexical analysis, because `+;` isn't a valid token\"\n        },\n        {\n          \"feedback\": \"Exactly! The parser builds a tree of how tokens relate, and `5 +` with nothing on the right side of the operator is a structurally incomplete expression. The parser knows an operator needs something on both sides — that's a syntax rule.\",\n          \"isCorrect\": true,\n          \"text\": \"Parsing, because the tokens don't form a valid structural pattern\"\n        },\n        {\n          \"feedback\": \"Semantic analysis handles meaning — like whether you're adding a number to a string. But this error is more basic than that: the expression isn't even structurally complete. The compiler catches this earlier, when it's figuring out how the tokens fit together.\",\n          \"isCorrect\": false,\n          \"text\": \"Semantic analysis, because the types don't match\"\n        },\n        {\n          \"feedback\": \"Code generation comes at the very end. The compiler would have flagged this broken expression long before it ever tried to produce machine instructions. Earlier phases exist specifically to catch problems like this.\",\n          \"isCorrect\": false,\n          \"text\": \"Code generation, because it can't translate an incomplete expression\"\n        }\n      ],\n      \"question\": \"Which phase caught this error?\"\n    }\n  ]\n}",
      "outputTokens": 428,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-cs-compilers-quiz-1",
      "userPrompt": "LESSON_TITLE: How Compilers Work\nLESSON_DESCRIPTION: Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation\nCHAPTER_TITLE: Language Implementation\nCOURSE_TITLE: Programming Language Theory\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Assembly Line: A compiler reads your code in stages, like an assembly line. Each stage transforms the code into something closer to what the machine understands.\n2. Breaking into Tokens: First, lexical analysis breaks your code into tokens - the smallest meaningful units. Keywords, variables, and operators each become distinct pieces.\n3. Building Structure: The parser takes those tokens and builds a tree structure showing how statements relate. This catches syntax errors like missing parentheses.\n4. Checking Meaning: Semantic analysis checks if your code makes logical sense. It catches errors like using a string where a number is required.\n5. Generating Output: Finally, code generation translates the validated structure into machine instructions the processor can execute directly.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 52298.58324999997,
      "inputTokens": 3644,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine que o país está passando por uma inflação alta — os preços nos supermercados e postos de gasolina estão subindo rápido. O banco central decide agir para conter essa situação.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! Juros mais altos encarecem empréstimos e financiamentos, o que desestimula o consumo e ajuda a frear a alta dos preços. É como pisar no freio da economia.\",\n          \"isCorrect\": true,\n          \"text\": \"Aumentar a taxa básica de juros\"\n        },\n        {\n          \"feedback\": \"Na verdade, seria o oposto! Reduzir juros estimula as pessoas a gastar mais, o que jogaria os preços ainda mais pra cima. Para conter inflação, o banco central aumenta os juros.\",\n          \"isCorrect\": false,\n          \"text\": \"Reduzir a taxa básica de juros\"\n        },\n        {\n          \"feedback\": \"Cuidado — comprar títulos injeta mais dinheiro na economia, o que tenderia a aumentar a inflação, não reduzi-la. Para conter preços, o banco central precisa desestimular gastos, não incentivá-los.\",\n          \"isCorrect\": false,\n          \"text\": \"Comprar grandes quantidades de títulos do governo\"\n        },\n        {\n          \"feedback\": \"Esse é um erro clássico! Colocar mais dinheiro em circulação quando os preços já estão subindo só piora a inflação. O banco central precisa fazer o contrário: reduzir o dinheiro circulando ou encarecer o crédito.\",\n          \"isCorrect\": false,\n          \"text\": \"Imprimir mais dinheiro para acompanhar os preços\"\n        }\n      ],\n      \"question\": \"O que o banco central provavelmente faria?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"O banco central de um país reduziu drasticamente a taxa de juros há duas semanas. Um jornalista pergunta ao presidente do banco central por que a economia ainda não reagiu.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exatamente! A política monetária não funciona como um interruptor de luz. Empresas precisam replanejar investimentos, bancos ajustam suas taxas, consumidores reavaliam decisões de compra — tudo isso leva tempo.\",\n          \"isCorrect\": true,\n          \"text\": \"Mudanças nos juros levam meses para serem sentidas na economia real\"\n        },\n        {\n          \"feedback\": \"Mesmo uma redução drástica não surte efeito imediato. O ponto principal é que existe um atraso natural: decisões de investimento e consumo não mudam da noite pro dia.\",\n          \"isCorrect\": false,\n          \"text\": \"A redução dos juros provavelmente foi pequena demais para ter efeito\"\n        },\n        {\n          \"feedback\": \"Não é questão de combinar ferramentas para ter efeito imediato. A política monetária simplesmente tem um tempo de transmissão — leva meses até que as mudanças nos juros afetem o comportamento de empresas e consumidores.\",\n          \"isCorrect\": false,\n          \"text\": \"O banco central precisa também imprimir mais dinheiro para o efeito funcionar\"\n        },\n        {\n          \"feedback\": \"Política monetária e política fiscal são coisas diferentes. A questão aqui é mais simples: qualquer mudança nos juros precisa de tempo para se propagar pela economia. Duas semanas é muito pouco para ver resultados.\",\n          \"isCorrect\": false,\n          \"text\": \"A política monetária só funciona quando combinada com redução de impostos\"\n        }\n      ],\n      \"question\": \"Qual seria a melhor explicação?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"O banco central de um país anuncia que vai comprar uma grande quantidade de títulos do governo no mercado financeiro. Analistas comentam o impacto dessa decisão.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito! Quando o banco central compra títulos, ele entrega dinheiro em troca. Esse dinheiro vai parar nas mãos de bancos e investidores, aumentando a quantidade de recursos disponíveis na economia.\",\n          \"isCorrect\": true,\n          \"text\": \"Injeta dinheiro na economia, pois paga aos vendedores dos títulos\"\n        },\n        {\n          \"feedback\": \"É o contrário! Quando o banco central compra títulos, ele está pagando por eles — ou seja, colocando dinheiro nas mãos de quem vendeu. Se quisesse retirar dinheiro, ele venderia títulos.\",\n          \"isCorrect\": false,\n          \"text\": \"Retira dinheiro da economia, pois os títulos absorvem recursos\"\n        },\n        {\n          \"feedback\": \"Na verdade, a compra de títulos tende a ter o efeito oposto. Ao injetar dinheiro na economia, essa operação facilita o acesso a crédito, o que pressiona os juros para baixo, não para cima.\",\n          \"isCorrect\": false,\n          \"text\": \"Aumenta automaticamente a taxa de juros do país\"\n        },\n        {\n          \"feedback\": \"Títulos do governo são instrumentos financeiros muito reais! Quando o banco central os compra, dinheiro novo entra em circulação. Essa é uma das ferramentas mais poderosas da política monetária.\",\n          \"isCorrect\": false,\n          \"text\": \"Não tem efeito na economia porque títulos são apenas papéis\"\n        }\n      ],\n      \"question\": \"Qual é o efeito direto dessa operação?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Banco central sobe os juros significativamente\",\n          \"right\": \"Financiamentos ficam mais caros e as pessoas compram menos\"\n        },\n        {\n          \"left\": \"Banco central reduz os juros significativamente\",\n          \"right\": \"Crédito fica mais barato e o consumo tende a aumentar\"\n        },\n        {\n          \"left\": \"Banco central compra títulos do governo em massa\",\n          \"right\": \"Mais dinheiro entra em circulação na economia\"\n        },\n        {\n          \"left\": \"Banco central vende títulos do governo em massa\",\n          \"right\": \"Dinheiro é retirado de circulação na economia\"\n        }\n      ],\n      \"question\": \"Conecte cada situação econômica à consequência mais provável para o dia a dia das pessoas:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Marina quer comprar um apartamento financiado. Ela vê no jornal que o banco central acabou de aumentar fortemente a taxa básica de juros. Sua amiga diz: \\\"Espera um pouco antes de fechar o financiamento.\\\"\",\n      \"options\": [\n        {\n          \"feedback\": \"Na verdade, seria o contrário — esperar significaria pegar juros já reajustados. O conselho da amiga faz sentido por outro motivo: se Marina esperar, talvez o banco central reduza os juros no futuro, caso a economia desacelere demais.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque os bancos vão demorar um pouco para repassar os juros mais altos aos financiamentos\"\n        },\n        {\n          \"feedback\": \"Esse raciocínio até existe no longo prazo, mas não é a razão mais direta. O conselho faz mais sentido porque, com juros altos, o financiamento será muito mais caro agora — as parcelas ficarão pesadas.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a alta dos juros pode desacelerar a economia e eventualmente os juros podem voltar a cair\"\n        },\n        {\n          \"feedback\": \"Isso! Quando o banco central sobe a taxa básica, os bancos comerciais também aumentam os juros dos financiamentos. Resultado: parcelas maiores e custo total muito mais alto. Faz sentido esperar por condições melhores.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque com juros altos, as parcelas do financiamento serão significativamente maiores\"\n        },\n        {\n          \"feedback\": \"Na verdade, juros altos tendem a ter o efeito oposto nos imóveis: com financiamentos mais caros, a demanda cai e os preços podem até se estabilizar ou diminuir. O problema real é o custo do financiamento em si.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque o aumento dos juros significa que os preços dos imóveis vão subir imediatamente\"\n        }\n      ],\n      \"question\": \"Por que o conselho da amiga faz sentido?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Esse é o chamado mecanismo de transmissão da política monetária. Tudo começa com a decisão do banco central, passa pelos bancos comerciais, chega nas decisões de empresas e famílias, e só então impacta a economia como um todo. Por isso leva meses — cada etapa depende da anterior e envolve decisões de milhões de pessoas.\",\n      \"items\": [\n        \"Banco central anuncia redução da taxa básica de juros\",\n        \"Bancos comerciais reduzem os juros de empréstimos e financiamentos\",\n        \"Empresas e consumidores percebem que o crédito ficou mais barato\",\n        \"Mais pessoas fazem empréstimos e aumentam seus gastos\",\n        \"A economia como um todo começa a aquecer\"\n      ],\n      \"question\": \"Coloque em ordem como uma redução na taxa de juros se propaga até afetar a economia real:\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"alta\",\n        \"aumentar\",\n        \"comprar\"\n      ],\n      \"distractors\": [\n        \"queda\",\n        \"reduzir\",\n        \"vender\",\n        \"congelar\",\n        \"eliminar\"\n      ],\n      \"feedback\": \"Dinheiro demais em circulação pressiona os preços para cima (inflação). Para combater isso, o banco central aumenta os juros, encarecendo o crédito e desestimulando gastos. Já quando a economia precisa de estímulo, comprar títulos injeta dinheiro novo — é como abrir a torneira do dinheiro na economia.\",\n      \"question\": \"Complete as frases sobre o equilíbrio que o banco central precisa manter na economia:\",\n      \"template\": \"Quando há dinheiro demais circulando na economia, o principal risco é a [BLANK] dos preços. Para combater isso, o banco central pode [BLANK] a taxa de juros. Por outro lado, se a economia está muito fraca, o banco central pode [BLANK] títulos do governo para injetar dinheiro na economia.\"\n    }\n  ]\n}",
      "outputTokens": 2827,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "pt-economics-monetary-policy-quiz-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Politica Monetaria\nLESSON_DESCRIPTION: Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria\nCHAPTER_TITLE: Macroeconomia\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt\nEXPLANATION_STEPS:\n1. Equilibrio Monetario: O banco central controla a quantidade de dinheiro circulando na economia. Quando ha dinheiro demais, os precos sobem. Quando ha pouco, a economia desacelera.\n2. A Alavanca dos Juros: A taxa basica de juros e a principal ferramenta. Juros altos tornam emprestimos caros, reduzindo gastos. Juros baixos estimulam emprestimos e consumo.\n3. Efeito com Atraso: Mudancas nos juros levam meses para afetar a economia real. Empresas e consumidores ajustam seus planos gradualmente, nao instantaneamente.\n4. Operacoes de Mercado: Bancos centrais tambem compram e vendem titulos do governo. Comprando titulos, injetam dinheiro na economia. Vendendo, retiram dinheiro de circulacao.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 57626.55912500003,
      "inputTokens": 3602,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Una empresa almacena los hashes de las contraseñas de sus usuarios en una base de datos. Un atacante logra robar toda la base de datos y obtiene todos los hashes.\",\n      \"options\": [\n        {\n          \"feedback\": \"No es cuestión de cifrado adicional. El hash no es cifrado — es una transformación irreversible. No existe una \\\"clave\\\" para revertirlo. La razón real es que no se puede obtener la contraseña original a partir del hash.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque los hashes están cifrados con otra clave que también necesitaría robar\"\n        },\n        {\n          \"feedback\": \"¡Exacto! Las funciones hash son de un solo sentido: puedes calcular el hash de una contraseña, pero no puedes hacer el camino inverso. El atacante tiene los hashes, pero no puede convertirlos de vuelta en contraseñas.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque a partir del hash no se puede reconstruir la contraseña original\"\n        },\n        {\n          \"feedback\": \"No, el hash de una misma contraseña siempre produce el mismo resultado. El problema para el atacante es otro: simplemente no puede revertir el hash para obtener la contraseña original.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque el hash cambia cada vez que alguien inicia sesión\"\n        },\n        {\n          \"feedback\": \"El largo del hash no tiene nada que ver. El sistema no acepta el hash como contraseña; necesita la contraseña original. Y el atacante no puede obtenerla porque el hash es una función irreversible.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque los hashes son demasiado largos para usarlos como contraseña\"\n        }\n      ],\n      \"question\": \"¿Por qué no puede iniciar sesión directamente?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Un sistema de descargas muestra el hash de cada archivo para que los usuarios verifiquen la integridad. Descargas un programa de 2GB y al verificar, el hash que calculaste difiere del publicado en un solo carácter.\",\n      \"options\": [\n        {\n          \"feedback\": \"¡Cuidado! En funciones hash, no existe \\\"diferencia pequeña\\\". Cualquier cambio en el archivo, por mínimo que sea, produce un hash completamente distinto. Si el hash no coincide exactamente, el archivo fue alterado.\",\n          \"isCorrect\": false,\n          \"text\": \"El archivo probablemente está bien, un carácter de diferencia es insignificante\"\n        },\n        {\n          \"feedback\": \"¡Correcto! Gracias al efecto avalancha, incluso el cambio más pequeño en el archivo produce un hash totalmente diferente. Si el hash no coincide perfectamente, el archivo definitivamente no es el original.\",\n          \"isCorrect\": true,\n          \"text\": \"El archivo fue modificado y no deberías confiar en él\"\n        },\n        {\n          \"feedback\": \"Las funciones hash son deterministas: la misma entrada siempre produce la misma salida. Si el hash no coincide, no es un error de cálculo — el archivo simplemente no es idéntico al original.\",\n          \"isCorrect\": false,\n          \"text\": \"Hubo un error en la función hash y deberías recalcularlo\"\n        },\n        {\n          \"feedback\": \"No funciona así. No hay correlación entre qué parte del hash cambió y qué parte del archivo se alteró. Un solo bit cambiado en cualquier lugar del archivo modifica el hash de forma impredecible y completa.\",\n          \"isCorrect\": false,\n          \"text\": \"Solo la parte final del archivo está corrupta porque solo cambió el final del hash\"\n        }\n      ],\n      \"question\": \"¿Qué deberías concluir?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Estás diseñando un sistema que necesita verificar rápidamente si un documento legal de 500 páginas ha sido modificado desde que fue firmado. Tienes almacenado el hash original del documento.\",\n      \"options\": [\n        {\n          \"feedback\": \"No, el hash no es una compresión del documento. No puedes reconstruir nada a partir de él. Su utilidad está en que cualquier modificación al documento, por pequeña que sea, generará un hash diferente.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque el hash contiene una versión comprimida del documento que permite reconstruirlo\"\n        },\n        {\n          \"feedback\": \"¡Así es! La resistencia a colisiones hace que sea prácticamente imposible que dos documentos diferentes generen el mismo hash. Si el hash actual coincide con el original, puedes confiar en que el documento no fue tocado — sin necesidad de comparar las 500 páginas carácter por carácter.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque dos documentos distintos no pueden producir el mismo hash, así que si coinciden, el documento es idéntico\"\n        },\n        {\n          \"feedback\": \"El hash no registra cambios ni historial. Es simplemente una \\\"huella digital\\\" de longitud fija. Su poder está en que es prácticamente imposible que dos documentos diferentes tengan la misma huella.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque el hash guarda un registro de todos los cambios realizados al documento\"\n        },\n        {\n          \"feedback\": \"No, la precisión del hash no depende del tamaño del documento. Un archivo de 1 byte y uno de 500 páginas producen hashes igual de confiables y del mismo tamaño. La clave es la resistencia a colisiones.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque los hashes de documentos largos son más precisos que los de documentos cortos\"\n        }\n      ],\n      \"question\": \"¿Por qué basta comparar hashes?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"fija\",\n        \"avalancha\",\n        \"colisiones\"\n      ],\n      \"distractors\": [\n        \"variable\",\n        \"cascada\",\n        \"duplicados\",\n        \"inversión\",\n        \"compresión\"\n      ],\n      \"feedback\": \"La longitud fija es lo que permite comparar hashes de forma eficiente sin importar el tamaño original. El efecto avalancha garantiza que cualquier alteración sea detectable. Y la resistencia a colisiones asegura que cada archivo tenga una huella prácticamente única.\",\n      \"question\": \"Completa las oraciones sobre las propiedades fundamentales de las funciones hash criptográficas.\",\n      \"template\": \"Sin importar si el archivo de entrada pesa 1KB o 10GB, el hash resultante siempre tendrá una longitud [BLANK]. Cuando un cambio mínimo en la entrada produce un hash completamente diferente, este comportamiento se conoce como efecto [BLANK]. Además, encontrar dos entradas distintas que produzcan el mismo hash es prácticamente imposible, lo que se conoce como resistencia a [BLANK].\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Un sitio web almacena contraseñas de forma que ni sus propios administradores pueden leerlas\",\n          \"right\": \"Irreversibilidad (función de un solo sentido)\"\n        },\n        {\n          \"left\": \"Un antivirus compara rápidamente un archivo sospechoso contra millones de firmas conocidas usando cadenas cortas\",\n          \"right\": \"Salida de longitud fija sin importar el tamaño de entrada\"\n        },\n        {\n          \"left\": \"Un sistema detecta que alguien cambió una coma en un contrato digital de 200 páginas\",\n          \"right\": \"Efecto avalancha (sensibilidad extrema a cambios)\"\n        },\n        {\n          \"left\": \"Un blockchain confía en que ningún atacante puede fabricar una transacción falsa con el mismo hash que una legítima\",\n          \"right\": \"Resistencia a colisiones\"\n        }\n      ],\n      \"question\": \"Conecta cada situación del mundo real con la propiedad de las funciones hash que la hace posible.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Tu amigo dice: \\\"Tengo un archivo muy importante que pesa 3GB. Voy a calcular su hash SHA-256 y guardar solo el hash como respaldo. Si algún día pierdo el archivo, uso el hash para recuperarlo.\\\"\",\n      \"options\": [\n        {\n          \"feedback\": \"Las funciones hash aceptan entradas de cualquier tamaño, eso no es el problema. El error de tu amigo es pensar que puede revertir el proceso.\",\n          \"isCorrect\": false,\n          \"text\": \"SHA-256 no funciona con archivos tan grandes\"\n        },\n        {\n          \"feedback\": \"¡Exacto! Una función hash es de un solo sentido. El hash es como una huella digital: sirve para verificar que un archivo es el correcto, pero no puedes reconstruir a una persona a partir de su huella. Tu amigo necesita un respaldo real del archivo.\",\n          \"isCorrect\": true,\n          \"text\": \"El hash solo sirve para verificar integridad, no se puede revertir para obtener el archivo original\"\n        },\n        {\n          \"feedback\": \"Al contrario, esa es una de las ventajas del hash: sin importar que el archivo pese 3GB, el hash SHA-256 siempre tendrá 256 bits (32 bytes). El problema real es que no puede recuperar el archivo desde el hash.\",\n          \"isCorrect\": false,\n          \"text\": \"El hash de 3GB sería demasiado grande para almacenarlo\"\n        },\n        {\n          \"feedback\": \"Los hashes no usan contraseñas ni claves — no son cifrado. El problema es más fundamental: el hash es una transformación irreversible, así que es imposible recuperar los datos originales a partir de él.\",\n          \"isCorrect\": false,\n          \"text\": \"Necesitaría guardar el hash junto con la contraseña de cifrado\"\n        }\n      ],\n      \"question\": \"¿Qué hay de malo con su plan?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagina que alguien descubre una manera eficiente de encontrar dos documentos PDF diferentes que producen exactamente el mismo hash SHA-1. Un investigador publica la demostración con dos PDFs distintos que tienen hashes idénticos.\",\n      \"options\": [\n        {\n          \"feedback\": \"El efecto avalancha se refiere a que un pequeño cambio en la entrada genera un cambio drástico en la salida. Aquí el problema no es la sensibilidad a cambios, sino que se encontraron dos entradas distintas con la misma salida.\",\n          \"isCorrect\": false,\n          \"text\": \"El efecto avalancha, porque los hashes deberían ser diferentes\"\n        },\n        {\n          \"feedback\": \"¡Correcto! Esto es exactamente una colisión: dos entradas diferentes produciendo el mismo hash. De hecho, esto realmente ocurrió con SHA-1 en 2017, y es la razón por la que se migró a algoritmos más robustos como SHA-256.\",\n          \"isCorrect\": true,\n          \"text\": \"La resistencia a colisiones, porque se hallaron dos entradas distintas con el mismo hash\"\n        },\n        {\n          \"feedback\": \"No, nadie reconstruyó contenido desde un hash. Lo que se hizo fue encontrar dos documentos diferentes que coinciden en su hash. Eso es un ataque a la resistencia a colisiones, no a la irreversibilidad.\",\n          \"isCorrect\": false,\n          \"text\": \"La irreversibilidad, porque se pudo reconstruir el contenido desde el hash\"\n        },\n        {\n          \"feedback\": \"La compresión (salida de longitud fija) sigue funcionando perfectamente. El problema es que se encontraron dos archivos distintos con el mismo hash, lo que rompe la confianza en la unicidad de los hashes.\",\n          \"isCorrect\": false,\n          \"text\": \"La compresión de datos, porque el hash ya no puede representar archivos grandes\"\n        }\n      ],\n      \"question\": \"¿Qué propiedad se rompió?\"\n    }\n  ]\n}",
      "outputTokens": 3034,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "es-crypto-hash-functions-quiz-1",
      "userPrompt": "LESSON_TITLE: Funciones Hash Criptograficas\nLESSON_DESCRIPTION: Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital\nCHAPTER_TITLE: Fundamentos de Criptografia\nCOURSE_TITLE: Seguridad Informatica\nLANGUAGE: es\nEXPLANATION_STEPS:\n1. Compresion de Datos: Una funcion hash convierte cualquier dato en una cadena de longitud fija. Un archivo de 1KB y uno de 1GB producen hashes del mismo tamano.\n2. Sensibilidad Extrema: Cambiar un solo bit del archivo original cambia completamente el hash. Esta propiedad se llama efecto avalancha y es crucial para detectar alteraciones.\n3. Camino de Ida: No puedes recuperar el archivo original desde su hash - el proceso es irreversible. Por eso se usan para almacenar contrasenas de forma segura.\n4. Unicidad Practica: Encontrar dos archivos diferentes con el mismo hash deberia ser practicamente imposible. Esta resistencia a colisiones es lo que hace a los hashes confiables.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 9575.637499999953,
      "inputTokens": 3525,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine you're training a neural network to predict house prices. After feeding in data about a house that sold for $300,000, the network predicts $450,000.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not quite — random adjustments would be like wandering blindly. The network first needs to measure how wrong it was, so it can figure out a smart direction to adjust.\",\n          \"isCorrect\": false,\n          \"text\": \"The network randomly adjusts all connection weights to try again\"\n        },\n        {\n          \"feedback\": \"Exactly! Before the network can improve, it needs to quantify its mistake. This error measurement is what drives everything that follows — it's the starting point for figuring out what to fix.\",\n          \"isCorrect\": true,\n          \"text\": \"The $150,000 difference is calculated as the error\"\n        },\n        {\n          \"feedback\": \"The data itself doesn't get re-processed. What happens first is measuring the gap between the prediction and reality — that error signal is what eventually flows backward.\",\n          \"isCorrect\": false,\n          \"text\": \"The network sends the data backward to re-process it\"\n        },\n        {\n          \"feedback\": \"Connections don't decide on their own! First, the network needs to measure the error. Only then can it figure out which connections to adjust and by how much.\",\n          \"isCorrect\": false,\n          \"text\": \"Each connection independently decides whether to increase or decrease its strength\"\n        }\n      ],\n      \"question\": \"What happens immediately next?\"\n    }\n  ]\n}",
      "outputTokens": 351,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-ml-backpropagation-quiz-1",
      "userPrompt": "LESSON_TITLE: How Neural Networks Learn\nLESSON_DESCRIPTION: Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates\nCHAPTER_TITLE: Neural Network Training\nCOURSE_TITLE: Machine Learning Fundamentals\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Adjustment Problem: Training a neural network means adjusting connection strengths so outputs match desired results. The question is: which connections need adjusting and by how much?\n2. Measuring Mistakes: First, data flows forward through the network, producing a prediction. The difference between prediction and reality is measured as error.\n3. Assigning Blame: Error information then flows backward through the network. Each connection learns how much it contributed to the mistake using calculus.\n4. Small Steps Downhill: Connections that contributed more to errors get larger adjustments. The network gradually improves by making small changes in the direction that reduces error.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 59630.30462499999,
      "inputTokens": 3548,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine you're looking at a map of the ocean floor and notice a long chain of underwater mountains running down the middle of the Atlantic Ocean. Along the ridge, fresh volcanic rock is being formed continuously.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! When plates separate, magma wells up from below to fill the space, cooling into new crust. That's why you get these long underwater mountain chains — they're basically the seams where new ocean floor is born.\",\n          \"isCorrect\": true,\n          \"text\": \"Two plates are pulling apart and new crust is forming as magma fills the gap\"\n        },\n        {\n          \"feedback\": \"Good thinking, but collisions usually produce different features. When plates crash together, you get things like deep trenches or towering land mountain ranges. This underwater ridge is actually where plates are moving *apart*, and magma rises to fill the gap.\",\n          \"isCorrect\": false,\n          \"text\": \"Two plates are colliding and pushing the ocean floor upward into mountains\"\n        },\n        {\n          \"feedback\": \"Not quite — plates don't really crack from internal pressure like that. What's actually happening is two separate plates are being pulled apart by forces in the mantle, and magma rises up to fill the gap, building new crust along the ridge.\",\n          \"isCorrect\": false,\n          \"text\": \"A single plate is cracking from internal pressure, releasing trapped gas\"\n        },\n        {\n          \"feedback\": \"Hotspots can create volcanic islands (like Hawaii!), but a long continuous ridge stretching across an ocean basin is a different story. This pattern forms where two plates are diverging — pulling apart — and magma steadily rises to create new ocean floor along the entire length.\",\n          \"isCorrect\": false,\n          \"text\": \"Volcanic hotspots beneath a stationary plate are punching through the crust\"\n        }\n      ],\n      \"question\": \"What's happening at this underwater ridge?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Scientists measure that Los Angeles and San Francisco are getting closer together by a few centimeters each year. Meanwhile, the Atlantic Ocean is slowly getting wider at roughly the same pace — just a few centimeters annually.\",\n      \"options\": [\n        {\n          \"feedback\": \"Spot on! The mantle is solid rock, but it's so hot it flows — just incredibly slowly, like ultra-thick honey. Since the plates ride on top of this sluggish flow, they can only move at the pace the mantle carries them: centimeters per year.\",\n          \"isCorrect\": true,\n          \"text\": \"The mantle rock beneath the plates flows extremely slowly due to its high viscosity, dragging plates along gradually\"\n        },\n        {\n          \"feedback\": \"Friction does cause plates to stick at their boundaries (which is what builds up to earthquakes!), but plates are actually in constant slow motion across their entire surface. The slow speed comes from the mantle beneath them flowing very gradually due to its extreme thickness and viscosity.\",\n          \"isCorrect\": false,\n          \"text\": \"Friction between plates locks them in place, so they only move during earthquakes\"\n        },\n        {\n          \"feedback\": \"Plates are massive, but weight alone isn't what sets the pace. The real speed-limiter is the mantle — the hot rock beneath the plates flows extremely slowly (think super-thick honey), and since the mantle's circulation is what drives plate motion, the plates can only move as fast as that flow carries them.\",\n          \"isCorrect\": false,\n          \"text\": \"Plates are too heavy to move quickly, so gravity limits their speed\"\n        },\n        {\n          \"feedback\": \"Cooling does play a small role in plate behavior, but it's not the main driver. Plates move because circulation in the hot mantle beneath them drags them along. The mantle flows so slowly — due to being extremely viscous despite its heat — that plates only manage centimeters per year.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates are slowly cooling and contracting, causing them to shift slightly\"\n        }\n      ],\n      \"question\": \"Why do plates move so slowly?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"The Himalayan mountain range contains fossils of ancient sea creatures found at elevations above 8,000 meters. Two massive continental landmasses — India and the rest of Asia — have been pushing into each other for tens of millions of years.\",\n      \"options\": [\n        {\n          \"feedback\": \"Nailed it! When two thick continental plates collide, neither one is dense enough to dive under the other. With nowhere else to go, the crust folds, crumples, and gets pushed skyward — that's how you end up with sea creature fossils at the top of the world's tallest mountains!\",\n          \"isCorrect\": true,\n          \"text\": \"Neither plate could sink beneath the other, so the crust crumpled and buckled upward\"\n        },\n        {\n          \"feedback\": \"Collisions do generate some heat, but the Himalayas aren't made of cooled magma — they're made of crumpled, folded continental crust. When two continental plates smash together and neither can sink below the other, the crust has nowhere to go but up.\",\n          \"isCorrect\": false,\n          \"text\": \"The collision generated so much heat that magma solidified into mountain peaks\"\n        },\n        {\n          \"feedback\": \"You're on the right track thinking about the plates interacting vertically, but it's not a clean stacking. Because both plates are thick continental crust, neither can dive underneath. Instead, the crust crumples, folds, and buckles upward — more like a rug bunching up when you push it against a wall.\",\n          \"isCorrect\": false,\n          \"text\": \"One plate slid on top of the other, stacking layers of rock into a tall range\"\n        },\n        {\n          \"feedback\": \"Volcanoes typically form where one plate dives beneath another, allowing rock to melt and rise. At the Himalayas, neither continental plate could sink, so there's no mechanism to generate lots of volcanic magma. Instead, the mountains formed from the crust itself being compressed and pushed upward.\",\n          \"isCorrect\": false,\n          \"text\": \"Volcanic activity along the boundary gradually built up the mountain range over time\"\n        }\n      ],\n      \"question\": \"Why did mountains form here instead of volcanoes?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A deep ocean trench near a chain of volcanic islands\",\n          \"right\": \"One plate diving beneath another at a collision zone\"\n        },\n        {\n          \"left\": \"A long underwater mountain ridge with fresh lava on the seafloor\",\n          \"right\": \"Two plates pulling apart with magma filling the gap\"\n        },\n        {\n          \"left\": \"A massive mountain range far from any active volcanoes\",\n          \"right\": \"Two thick continental plates pushing together, with neither sinking\"\n        },\n        {\n          \"left\": \"Slow but measurable widening of an ocean basin over time\",\n          \"right\": \"Plates diverging as mantle circulation pushes them apart\"\n        }\n      ],\n      \"question\": \"Match each real-world geological observation to the plate boundary process that best explains it.\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"It all starts with heat! Earth's core heats the mantle, which causes it to slowly circulate. That circulation is the engine that pulls plates apart. Where plates separate, magma rushes up to fill the void, then cools into brand-new ocean floor. It's a chain reaction from deep heat all the way to new rock at the surface.\",\n      \"items\": [\n        \"Heat generated in Earth's core warms the surrounding mantle\",\n        \"Hot mantle rock slowly circulates, creating convection currents\",\n        \"Mantle circulation drags tectonic plates apart at certain boundaries\",\n        \"Magma rises from below to fill the gap between separating plates\",\n        \"The magma cools and solidifies, forming new oceanic crust\"\n      ],\n      \"question\": \"Put the steps in order to show how heat deep inside Earth ultimately leads to the creation of new ocean floor.\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A geology student notices that earthquake activity along a coastal region occurs mostly at depths of 100-300 km below the surface. The earthquakes get progressively deeper as you move inland from the coast, and there's a line of active volcanoes about 200 km from the shoreline.\",\n      \"options\": [\n        {\n          \"feedback\": \"Great detective work! The pattern of earthquakes getting deeper as you move inland traces the path of a plate plunging downward. As it dives, it triggers quakes along its descent and eventually reaches depths where rock melts — that molten rock rises to create the volcanic chain near the coast.\",\n          \"isCorrect\": true,\n          \"text\": \"An oceanic plate is diving beneath a continental plate, generating deep earthquakes and melting rock that fuels the volcanoes\"\n        },\n        {\n          \"feedback\": \"If plates were pulling apart, you'd expect shallow earthquakes and a rift valley — not deep quakes that get progressively deeper inland. The deepening earthquake pattern is the signature of one plate diving beneath another, which also explains the volcanic chain from melting rock at depth.\",\n          \"isCorrect\": false,\n          \"text\": \"Two plates are pulling apart beneath the continent, and magma is rising through the cracks\"\n        },\n        {\n          \"feedback\": \"Hotspots typically produce a single volcanic center (or a chain as the plate moves over it), not a line of volcanoes parallel to the coast. The key clue here is the earthquakes getting deeper inland — that traces the path of a plate plunging beneath another one.\",\n          \"isCorrect\": false,\n          \"text\": \"A mantle hotspot is burning through the plate, causing both the earthquakes and volcanoes\"\n        },\n        {\n          \"feedback\": \"Internal cracking wouldn't produce the distinctive pattern of earthquakes getting deeper as you move away from the coast. That deepening pattern is a telltale sign of one plate sliding beneath another — as it descends, it triggers quakes along its path and eventually causes rock to melt and fuel volcanoes above.\",\n          \"isCorrect\": false,\n          \"text\": \"The continental plate is cracking from internal stress, allowing magma to escape\"\n        }\n      ],\n      \"question\": \"What's likely happening beneath this coast?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"plates\",\n        \"convection\",\n        \"magma\",\n        \"earthquakes\"\n      ],\n      \"distractors\": [\n        \"continents\",\n        \"ocean\",\n        \"lava\",\n        \"tsunamis\",\n        \"erosion\",\n        \"pressure\"\n      ],\n      \"feedback\": \"Earth's outer shell is broken into tectonic plates, not just continents (continents ride ON plates, but plates also include ocean floor). Convection currents — driven by core heat — are the engine. At divergent boundaries, magma (molten rock below the surface) fills the gaps. And at collision zones where one plate dives under another, earthquakes are the signature result along with volcanic activity.\",\n      \"question\": \"Complete this description of what drives tectonic plate motion and what happens at different types of plate boundaries.\",\n      \"template\": \"Earth's outer shell is broken into large pieces called [BLANK]. These pieces are moved by [BLANK] currents in the mantle, driven by heat from Earth's core. Where plates move apart, [BLANK] rises to create new crust. Where plates collide and one dives under the other, [BLANK] and volcanoes are common results.\"\n    }\n  ]\n}",
      "outputTokens": 2698,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-geology-plate-tectonics-quiz-1",
      "userPrompt": "LESSON_TITLE: Plate Tectonics\nLESSON_DESCRIPTION: Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create\nCHAPTER_TITLE: Earth's Structure\nCOURSE_TITLE: Earth Science\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. A Cracked Shell: Earth's outer shell is cracked into massive pieces called plates. These plates sit on the mantle - solid rock so hot it flows like thick honey over millions of years.\n2. The Engine Below: Heat from Earth's core creates circulation in the mantle. This slow churning drags the plates along, moving them centimeters per year.\n3. Spreading Apart: Where plates pull apart, magma rises to fill the gap, creating new crust. Mid-ocean ridges are underwater mountain chains formed this way.\n4. Collision Zones: Where plates collide, one may dive under the other, triggering earthquakes and volcanoes. Mountain ranges like the Himalayas form when neither plate sinks.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 46539.67350000003,
      "inputTokens": 3615,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine que você tem um longo zíper fechado e precisa criar duas cópias idênticas dele. Para isso, você primeiro precisa abrir o zíper original e usar cada metade como guia para montar uma nova metade complementar.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! Separar as fitas expõe as bases, permitindo que cada fita original sirva de guia para a construção de uma cópia nova e complementar.\",\n          \"isCorrect\": true,\n          \"text\": \"Para expor as bases de cada fita e usá-las como molde para construir novas fitas complementares\"\n        },\n        {\n          \"feedback\": \"Na verdade, as fitas originais não são destruídas — elas são conservadas! Cada uma serve de molde para a construção de uma nova fita parceira.\",\n          \"isCorrect\": false,\n          \"text\": \"Para destruir a fita antiga e construir duas fitas completamente novas do zero\"\n        },\n        {\n          \"feedback\": \"Não é isso — o objetivo não é melhorar a sequência, mas sim copiá-la fielmente. Cada fita original serve de molde para criar uma cópia idêntica.\",\n          \"isCorrect\": false,\n          \"text\": \"Para permitir que as bases se reorganizem em uma sequência melhorada\"\n        },\n        {\n          \"feedback\": \"Não! Ambas as fitas originais são preservadas. Cada uma ganha uma parceira nova, resultando em duas moléculas de DNA completas.\",\n          \"isCorrect\": false,\n          \"text\": \"Para que a célula possa descartar uma das fitas e ficar apenas com a mais recente\"\n        }\n      ],\n      \"question\": \"Por que a célula separa as duas fitas do DNA?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Em uma fábrica, um robô lê uma lista de instruções e monta peças uma por uma, seguindo a ordem da lista. Se a lista diz \\\"peça azul\\\", ele coloca uma peça azul; se diz \\\"peça vermelha\\\", coloca uma vermelha.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exato! A DNA polimerase é como esse robô montador — ela lê cada base da fita original e adiciona a base complementar correspondente na nova fita.\",\n          \"isCorrect\": true,\n          \"text\": \"DNA polimerase, que lê a fita molde e adiciona bases complementares uma a uma\"\n        },\n        {\n          \"feedback\": \"A RNA polimerase trabalha na transcrição (DNA → RNA), não na replicação do DNA. Quem constrói a nova fita de DNA base por base é a DNA polimerase.\",\n          \"isCorrect\": false,\n          \"text\": \"RNA polimerase, que transcreve o DNA em proteínas diretamente\"\n        },\n        {\n          \"feedback\": \"A helicase tem outro papel — ela ajuda a separar as fitas do DNA. Quem de fato lê o molde e constrói a nova fita é a DNA polimerase.\",\n          \"isCorrect\": false,\n          \"text\": \"Helicase, que constrói a nova fita de DNA\"\n        },\n        {\n          \"feedback\": \"A ligase tem uma função diferente — ela une fragmentos de DNA. A leitura do molde e a adição de bases complementares é trabalho da DNA polimerase.\",\n          \"isCorrect\": false,\n          \"text\": \"Ligase, que lê o molde e copia as bases\"\n        }\n      ],\n      \"question\": \"Qual enzima faz papel similar na replicação?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Pense em alguém escrevendo em um caderno que só permite escrever da esquerda para a direita. Se o texto a ser copiado vai em duas direções opostas, uma linha pode ser copiada normalmente, mas a outra precisa ser copiada em trechos curtos.\",\n      \"options\": [\n        {\n          \"feedback\": \"Perfeito! Como a polimerase só trabalha em uma direção, a fita que corre no sentido contrário precisa ser copiada em pequenos trechos que são depois unidos.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque a DNA polimerase só adiciona bases em uma direção, e uma das fitas corre no sentido oposto\"\n        },\n        {\n          \"feedback\": \"Na verdade, copiar em fragmentos não é mais rápido — é uma necessidade. A polimerase só consegue adicionar bases em uma direção, então a fita oposta precisa ser copiada em pedaços.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque copiar em fragmentos é mais rápido do que copiar continuamente\"\n        },\n        {\n          \"feedback\": \"Não é questão de quantidade de enzima. O problema é que a polimerase só funciona em uma direção, forçando a cópia em fragmentos na fita que segue o sentido oposto.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a célula não tem polimerase suficiente para copiar as duas fitas ao mesmo tempo\"\n        },\n        {\n          \"feedback\": \"Copiar em fragmentos não reduz erros — na verdade, cria mais pontos de junção. A razão real é a limitação direcional da DNA polimerase.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque fragmentos menores têm menos chance de conter erros\"\n        }\n      ],\n      \"question\": \"Por que uma fita é copiada em fragmentos?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"Primeiro, as fitas precisam ser separadas para expor as bases. Depois, cada fita funciona como molde. A polimerase então constrói a nova fita adicionando bases complementares. Por fim, mecanismos de correção revisam o trabalho para garantir que a cópia seja fiel ao original.\",\n      \"items\": [\n        \"Separação das duas fitas da dupla hélice\",\n        \"Cada fita original serve de molde para a construção de uma nova fita\",\n        \"A DNA polimerase adiciona bases complementares uma a uma\",\n        \"Enzimas de correção verificam e consertam erros nas bases adicionadas\"\n      ],\n      \"question\": \"Coloque em ordem as etapas principais da replicação do DNA, desde o início até a conclusão de uma cópia fiel:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Um escritório de advocacia contrata um digitador para copiar contratos importantes. Depois de digitar cada página, um revisor confere letra por letra. Se encontra um erro de digitação, apaga e corrige antes de seguir para a próxima página.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! Assim como o revisor confere e corrige erros de digitação, enzimas de correção checam as bases recém-adicionadas e substituem qualquer uma que esteja errada.\",\n          \"isCorrect\": true,\n          \"text\": \"A correção de erros, onde enzimas verificam cada base e substituem as incorretas\"\n        },\n        {\n          \"feedback\": \"A separação das fitas seria mais como abrir o documento original. O cenário do revisor corrigindo erros representa a etapa de correção — onde enzimas verificam e consertam bases erradas.\",\n          \"isCorrect\": false,\n          \"text\": \"A separação das fitas, onde a dupla hélice é aberta\"\n        },\n        {\n          \"feedback\": \"A parte do digitador copiando seria a leitura do molde, mas o destaque aqui é o revisor corrigindo erros — isso representa a correção de erros feita por enzimas especializadas.\",\n          \"isCorrect\": false,\n          \"text\": \"A leitura do molde, onde a polimerase copia base por base\"\n        },\n        {\n          \"feedback\": \"Copiar em fragmentos seria como digitar parágrafos fora de ordem. O cenário descreve alguém conferindo e corrigindo erros, que é a etapa de correção da replicação.\",\n          \"isCorrect\": false,\n          \"text\": \"A síntese em fragmentos da fita descontínua\"\n        }\n      ],\n      \"question\": \"Que etapa da replicação isso representa?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Abrir um zíper de jaqueta, separando os dois lados\",\n          \"right\": \"Separação das fitas da dupla hélice\"\n        },\n        {\n          \"left\": \"Usar um molde de bolo para fazer uma cópia exata do formato original\",\n          \"right\": \"Fita original servindo de molde para a nova fita\"\n        },\n        {\n          \"left\": \"Um inspetor de qualidade que rejeita peças defeituosas na linha de produção\",\n          \"right\": \"Enzimas de correção que detectam e consertam erros\"\n        },\n        {\n          \"left\": \"Só conseguir escrever da esquerda para a direita, tendo que virar o papel para copiar texto invertido\",\n          \"right\": \"Limitação direcional da DNA polimerase\"\n        }\n      ],\n      \"question\": \"Conecte cada situação do dia a dia ao conceito da replicação do DNA que ela melhor representa:\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"DNA polimerase\",\n        \"fragmentos\",\n        \"correção\"\n      ],\n      \"distractors\": [\n        \"RNA polimerase\",\n        \"espiral\",\n        \"transcrição\",\n        \"helicase\",\n        \"ciclos\"\n      ],\n      \"feedback\": \"A DNA polimerase é a enzima responsável por ler o molde e construir a nova fita. Por só trabalhar em uma direção, uma das fitas acaba sendo copiada em fragmentos. E as enzimas de correção são o controle de qualidade que garante a fidelidade da cópia genética.\",\n      \"question\": \"Complete as frases sobre como a informação genética é copiada com alta fidelidade durante a replicação do DNA:\",\n      \"template\": \"Após a separação das fitas, a enzima [BLANK] lê a fita original e constrói uma nova fita complementar. Como essa enzima só funciona em uma direção, uma das fitas precisa ser copiada em [BLANK]. Para garantir a precisão da cópia, enzimas de [BLANK] verificam cada base e substituem as incorretas.\"\n    }\n  ]\n}",
      "outputTokens": 2716,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "pt-biology-dna-replication-quiz-1",
      "userPrompt": "LESSON_TITLE: Como o DNA se Replica\nLESSON_DESCRIPTION: Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade\nCHAPTER_TITLE: Genetica Molecular\nCOURSE_TITLE: Biologia Celular\nLANGUAGE: pt\nEXPLANATION_STEPS:\n1. Abrindo o Ziper: Antes de uma celula se dividir, ela precisa copiar todo seu DNA. O processo comeca quando enzimas separam as duas fitas da dupla helice.\n2. Lendo o Molde: Cada fita original serve de molde para uma nova. Enzimas chamadas DNA polimerases leem a fita antiga e constroem a nova, base por base.\n3. O Problema da Direcao: Ha um problema: a polimerase so consegue adicionar bases em uma direcao. Uma fita e copiada continuamente, mas a outra precisa ser copiada em pedacos.\n4. Corrigindo Erros: Enzimas de correcao verificam cada base adicionada. Se encontram um erro, removem e substituem. Esse controle de qualidade mantem a fidelidade genetica.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 53694.75258300005,
      "inputTokens": 3526,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're photographing a lone lighthouse on a cliff at sunset. You want the image to feel dynamic and draw the viewer's eye across the frame rather than just landing on the lighthouse and stopping.\",\n      \"options\": [\n        {\n          \"feedback\": \"Centering the lighthouse makes the viewer's eye land right on it and stop — that's the static feeling you're trying to avoid. Placing it off-center gives the eye a journey to take across the image.\",\n          \"isCorrect\": false,\n          \"text\": \"Dead center in the frame\"\n        },\n        {\n          \"feedback\": \"Exactly! Placing the lighthouse at an intersection point creates that sense of movement you're after. The viewer's eye lands on the lighthouse but then naturally travels through the rest of the frame — the cliff, the sunset, the sky.\",\n          \"isCorrect\": true,\n          \"text\": \"At one of the intersections where the grid lines cross\"\n        },\n        {\n          \"feedback\": \"Off-center is good, but the extreme corner pushes the subject too far out — it can feel like the lighthouse is falling out of the photo. The intersection points of the grid are about a third of the way in, which hits a sweet spot between centered and edge.\",\n          \"isCorrect\": false,\n          \"text\": \"Tucked into the very corner of the frame\"\n        },\n        {\n          \"feedback\": \"A centered horizon can actually make an image feel static and split in half. The key here is placing your main subject — the lighthouse — at a strategic off-center position where grid lines intersect.\",\n          \"isCorrect\": false,\n          \"text\": \"Anywhere, as long as the horizon is perfectly centered\"\n        }\n      ],\n      \"question\": \"Where should you place the lighthouse?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're shooting a landscape with a dramatic, colorful sky filled with clouds — but the foreground is a plain, flat field. You want the photo to emphasize that stunning sky.\",\n      \"options\": [\n        {\n          \"feedback\": \"Splitting the frame 50/50 gives equal weight to both the sky and the boring field. Since the sky is your star, you want to give it more room to breathe by pushing the horizon lower.\",\n          \"isCorrect\": false,\n          \"text\": \"Right in the middle of the frame\"\n        },\n        {\n          \"feedback\": \"Nailed it! Dropping the horizon low gives roughly two-thirds of the frame to that dramatic sky. You're letting the interesting part of the scene dominate while still grounding the image with a sliver of foreground.\",\n          \"isCorrect\": true,\n          \"text\": \"Near the bottom third of the frame\"\n        },\n        {\n          \"feedback\": \"This would actually do the opposite — it would fill most of the frame with that plain, flat field and squeeze the dramatic sky into a narrow strip. Flip it! Lower horizon = more sky.\",\n          \"isCorrect\": false,\n          \"text\": \"Near the top third of the frame\"\n        },\n        {\n          \"feedback\": \"While this would certainly show the sky, removing the horizon entirely takes away the viewer's sense of place and grounding. Keeping the horizon in the lower portion lets you showcase the sky while still telling the full story of the scene.\",\n          \"isCorrect\": false,\n          \"text\": \"Completely out of the frame by pointing the camera straight up\"\n        }\n      ],\n      \"question\": \"Where should you place the horizon?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Your friend shows you two photos of their dog in a park. In Photo A, the dog is perfectly centered with equal space on all sides. In Photo B, the dog is positioned about a third of the way from the left edge, with open park space stretching out to the right.\",\n      \"options\": [\n        {\n          \"feedback\": \"The dog's size isn't what's different here — it's the placement. Photo B works better because the off-center positioning gives your eye a path to follow from the dog out into the park, creating a sense of movement and story.\",\n          \"isCorrect\": false,\n          \"text\": \"Because the dog appears larger in the frame\"\n        },\n        {\n          \"feedback\": \"Not quite — centering isn't always bad! Symmetrical subjects (like a building's facade) can look great centered. But for a dog in a park, off-center placement creates a more dynamic feel because your eye has somewhere to travel.\",\n          \"isCorrect\": false,\n          \"text\": \"Because centering a subject is always wrong\"\n        },\n        {\n          \"feedback\": \"Spot on! When the dog is off to one side, your eye naturally moves from the subject across the open space. It feels like there's a story happening — the dog has somewhere to go. That sense of visual movement is what makes images feel alive.\",\n          \"isCorrect\": true,\n          \"text\": \"Because off-center placement gives the viewer's eye a path to travel through the image\"\n        },\n        {\n          \"feedback\": \"There's nothing inherently special about left vs. right. What matters is that the dog is off-center, giving the viewer's eye room to wander. It could be a third from the right and work just as well!\",\n          \"isCorrect\": false,\n          \"text\": \"Because the left side of a photo is always more important\"\n        }\n      ],\n      \"question\": \"Why does Photo B likely feel more engaging?\"\n    },\n    {\n      \"format\": \"selectImage\",\n      \"options\": [\n        {\n          \"feedback\": \"Both the boat and the horizon are dead center, splitting the frame in half. This creates a static, symmetrical feel — the viewer's eye lands on the boat and has nowhere interesting to travel.\",\n          \"isCorrect\": false,\n          \"prompt\": \"A sailboat positioned exactly in the center of the ocean frame, with the horizon line running through the exact middle of the image, equal water below and sky above\"\n        },\n        {\n          \"feedback\": \"The boat placement is good — it's at an intersection point! But the horizon in the upper third emphasizes the water below. If the sky is more interesting, you'd want the horizon lower. This could work in some cases, but consider what you want to emphasize.\",\n          \"isCorrect\": false,\n          \"prompt\": \"A sailboat positioned in the upper-right area of the frame where imaginary grid lines would intersect, with the horizon running along the upper third of the image, showing more ocean than sky\"\n        },\n        {\n          \"feedback\": \"This nails it! The sailboat sits at an intersection point, the horizon is low to show off the sky, and there's open space for the boat to 'sail into.' Your eye travels from the boat across the frame — that's dynamic composition.\",\n          \"isCorrect\": true,\n          \"prompt\": \"A sailboat positioned in the left-third area of the frame where imaginary grid lines would intersect, with the horizon running along the lower third of the image, showing expansive sky above and the boat sailing into open space to the right\"\n        },\n        {\n          \"feedback\": \"While off-center, the boat is pushed so far into the corner that it feels lost rather than strategically placed. The grid intersection points are about a third into the frame — not at the edges — hitting a balance between centered and cornered.\",\n          \"isCorrect\": false,\n          \"prompt\": \"A sailboat positioned in the extreme bottom-left corner of the frame, very small, with vast empty ocean and sky filling almost the entire image\"\n        }\n      ],\n      \"question\": \"You're composing a photo of a sailboat on the ocean. Which framing best uses strategic placement to create a dynamic, engaging composition?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"Subject placed dead center with equal space on all sides\",\n          \"right\": \"Static, stable image — the eye lands and stays put\"\n        },\n        {\n          \"left\": \"Subject placed at a grid intersection point with open space ahead\",\n          \"right\": \"Dynamic image — the eye travels through the frame\"\n        },\n        {\n          \"left\": \"Horizon placed in the lower third of the frame\",\n          \"right\": \"Emphasizes the sky and what's above the horizon\"\n        },\n        {\n          \"left\": \"Horizon placed in the upper third of the frame\",\n          \"right\": \"Emphasizes the ground or foreground below the horizon\"\n        }\n      ],\n      \"question\": \"Match each composition choice with the visual effect it creates in the final photograph.\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"two\",\n        \"two\",\n        \"nine\",\n        \"intersect\"\n      ],\n      \"distractors\": [\n        \"three\",\n        \"four\",\n        \"six\",\n        \"twelve\",\n        \"begin\",\n        \"end\"\n      ],\n      \"feedback\": \"Two lines in each direction create a 3×3 grid of nine sections. The four points where these lines cross each other — the intersection points — are the sweet spots for placing your main subject. These points naturally attract the viewer's eye.\",\n      \"question\": \"Complete this description of how the rule of thirds grid divides a photograph.\",\n      \"template\": \"The rule of thirds divides the frame using [BLANK] horizontal and [BLANK] vertical lines, creating [BLANK] equal sections. The most visually powerful spots to place a subject are where the lines [BLANK].\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"You're taking a portrait of a friend standing on a quiet street. There's nothing special about the background — just a normal sidewalk and buildings. Your friend's face is what matters most in this shot.\",\n      \"options\": [\n        {\n          \"feedback\": \"'Never' is too strong! The rule of thirds is a guideline, not a law. Off-center placement often creates more dynamic images, but centering can work well in certain situations — like when you want a formal, symmetrical, or powerful feel.\",\n          \"isCorrect\": false,\n          \"text\": \"Yes — subjects should never be centered\"\n        },\n        {\n          \"feedback\": \"Right! Centering a portrait can create a strong, direct connection between the viewer and the subject. The rule of thirds is a helpful guideline for creating dynamic compositions, but it's not a law. Sometimes a centered subject is exactly what the image calls for.\",\n          \"isCorrect\": true,\n          \"text\": \"No — centering can work fine, especially for a direct, powerful portrait\"\n        },\n        {\n          \"feedback\": \"The street is just the background here — your friend's face is the star. The real question is about placement strategy, and the answer is that centering can absolutely work for portraits, especially when you want a direct, powerful feel.\",\n          \"isCorrect\": false,\n          \"text\": \"Yes — the street should be the main subject instead\"\n        },\n        {\n          \"feedback\": \"The rule of thirds applies to all kinds of photography, including portraits! Many great portraits place the subject's eyes along an upper grid line. The point here is that centering isn't always wrong — it's one valid choice among many.\",\n          \"isCorrect\": false,\n          \"text\": \"No — the rule of thirds only applies to landscapes, not portraits\"\n        }\n      ],\n      \"question\": \"Is centering your friend a bad choice here?\"\n    }\n  ]\n}",
      "outputTokens": 2524,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-photography-composition-quiz-1",
      "userPrompt": "LESSON_TITLE: The Rule of Thirds\nLESSON_DESCRIPTION: Understanding the rule of thirds and how strategic subject placement creates more visually engaging photographs\nCHAPTER_TITLE: Composition Basics\nCOURSE_TITLE: Photography Fundamentals\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. Beyond the Center: Most beginners center their subjects. While this works sometimes, placing subjects off-center often creates more dynamic, interesting images.\n2. The Grid: Imagine your frame divided by two horizontal and two vertical lines, creating nine equal sections. The four points where lines cross are power points.\n3. Strategic Placement: Placing your main subject on a power point or along a line draws the viewer's eye naturally. A horizon on the lower line emphasizes sky; on the upper line emphasizes ground.\n4. Why It Works: This guideline works because our eyes naturally scan images in patterns. Off-center placement gives the eye somewhere to travel, making photos feel more alive.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 63665.582250000036,
      "inputTokens": 3539,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Maria is convinced that her neighborhood is becoming more dangerous. Over the past month, she's read three news articles about local crime but scrolled past several articles about declining crime rates in her area. When a neighbor mentions the new community safety program that's been working well, Maria thinks, \\\"That's just one example.\\\"\",\n      \"options\": [\n        {\n          \"feedback\": \"It might look deliberate, but this kind of filtering usually happens automatically. Maria isn't scheming — her brain is naturally gravitating toward information that fits what she already believes and downplaying what doesn't.\",\n          \"isCorrect\": false,\n          \"text\": \"She's deliberately ignoring good news to justify moving away\"\n        },\n        {\n          \"feedback\": \"Exactly! Maria's brain is doing what brains do — latching onto information that fits her belief (crime articles) and brushing aside what contradicts it (declining crime stats, the safety program). She's not doing this on purpose, which is what makes it so tricky to catch.\",\n          \"isCorrect\": true,\n          \"text\": \"She's unconsciously paying more attention to evidence that matches her existing belief\"\n        },\n        {\n          \"feedback\": \"This feels logical on the surface, but notice the pattern: she's consuming the scary articles and dismissing the positive ones. If she were being balanced, she'd weigh both types of evidence. Her existing belief is acting like a filter on what she considers important.\",\n          \"isCorrect\": false,\n          \"text\": \"She's being rational — crime articles are more important than feel-good stories\"\n        },\n        {\n          \"feedback\": \"Maria might be anxious, but the key pattern here is how she's processing information — seeking out and remembering evidence that supports her belief while dismissing contradicting evidence. That's a thinking pattern, not just an emotion.\",\n          \"isCorrect\": false,\n          \"text\": \"She's experiencing anxiety, not a thinking bias\"\n        }\n      ],\n      \"question\": \"What's happening with Maria's thinking?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Two friends watch the same basketball game together. Afterward, Jake (who roots for Team A) says the refs were clearly biased against his team and recalls four bad calls. Lisa (who roots for Team B) watched the same game and says the refs were fair, maybe even slightly favoring Team A.\",\n      \"options\": [\n        {\n          \"feedback\": \"Actually, both were paying attention — that's the interesting part! Their brains just filtered the same events differently based on which team they were rooting for. Each person genuinely perceived the game differently.\",\n          \"isCorrect\": false,\n          \"text\": \"One of them wasn't paying close enough attention to the game\"\n        },\n        {\n          \"feedback\": \"Spot on! Jake's loyalty to Team A made his brain more attuned to calls that went against his team, while Lisa's loyalty did the same in reverse. Neither is lying — they literally noticed and remembered different things because of their pre-existing allegiances.\",\n          \"isCorrect\": true,\n          \"text\": \"Their existing loyalties shaped what each person noticed and remembered during the game\"\n        },\n        {\n          \"feedback\": \"Here's what's surprising — Jake probably isn't exaggerating at all. He genuinely remembers those bad calls more vividly because his brain flagged them as important. His existing loyalty acts as a spotlight that highlights certain moments over others.\",\n          \"isCorrect\": false,\n          \"text\": \"Jake is exaggerating to defend his team, and he knows it\"\n        },\n        {\n          \"feedback\": \"While refereeing does have some subjectivity, the pattern here is telling: each fan's perception aligns perfectly with their pre-existing loyalty. The fact that they watched the identical game but came away with opposite impressions points to something happening in how they processed what they saw.\",\n          \"isCorrect\": false,\n          \"text\": \"Basketball refereeing is subjective, so neither interpretation is biased\"\n        }\n      ],\n      \"question\": \"Why do Jake and Lisa disagree?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A pharmaceutical company is testing a new pain medication. They could either have their own researchers evaluate whether patients improved, or they could set up a system where the doctors assessing patient outcomes don't know which patients received the real drug and which received a sugar pill.\",\n      \"options\": [\n        {\n          \"feedback\": \"Qualification isn't really the issue here. Even highly qualified researchers can unconsciously interpret ambiguous results in ways that favor what they expect or hope to find. The second approach addresses a different problem entirely.\",\n          \"isCorrect\": false,\n          \"text\": \"Company researchers aren't qualified to assess medical outcomes\"\n        },\n        {\n          \"feedback\": \"Nailed it! If the doctors assessing outcomes know who got the real drug, their expectations might subtly shade how they interpret results — not because they're dishonest, but because our brains naturally tend to see what we expect. Keeping them 'blind' removes that unconscious influence.\",\n          \"isCorrect\": true,\n          \"text\": \"It prevents the evaluators' expectations from unconsciously influencing their judgments\"\n        },\n        {\n          \"feedback\": \"Blind studies are actually more complex to set up, not simpler. The real reason is about accuracy — when evaluators don't know which group a patient belongs to, they can't unconsciously lean toward the result they expect to find.\",\n          \"isCorrect\": false,\n          \"text\": \"It makes the study cheaper and faster to run\"\n        },\n        {\n          \"feedback\": \"That's more about the placebo effect, which is a different issue. The key benefit of blinding the evaluators is that the people judging the results can't be swayed by knowing which treatment a patient received — protecting against their own unconscious expectations.\",\n          \"isCorrect\": false,\n          \"text\": \"It prevents patients from faking their symptoms\"\n        }\n      ],\n      \"question\": \"Why is the second approach better?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Devon believes he's unlucky with technology — \\\"devices always break on me.\\\" Last week, his laptop crashed and he told everyone about it. His coworker points out that Devon's phone, tablet, and work computer have all been running fine for over two years.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly right! Devon's belief that he's 'unlucky with tech' acts like a magnet — it pulls in the laptop crash as proof while letting the years of trouble-free devices slip by unnoticed. One crash gets spotlighted; years of smooth operation get ignored.\",\n          \"isCorrect\": true,\n          \"text\": \"He's focusing on the one event that confirms his belief and overlooking the many that don't\"\n        },\n        {\n          \"feedback\": \"Everyone vents, sure — but notice the broader pattern. Devon has turned one incident into a universal rule ('devices always break on me') while ignoring strong counter-evidence. That's more than venting; it's his brain selectively building a case for something he already believes.\",\n          \"isCorrect\": false,\n          \"text\": \"He's just venting about a frustrating experience, nothing deeper going on\"\n        },\n        {\n          \"feedback\": \"Let's look at the actual scorecard: one crash vs. three devices running perfectly for two years. The evidence strongly suggests Devon's luck is pretty normal! His belief makes the crash feel like a pattern when it's really an exception.\",\n          \"isCorrect\": false,\n          \"text\": \"He has genuine bad luck with technology based on the evidence\"\n        },\n        {\n          \"feedback\": \"Maybe, but the interesting thing is Devon probably genuinely believes devices always break on him. His brain naturally files the crash under 'see, I told you!' while barely registering the devices that work fine. It's not a performance — it's how his mind is filtering reality.\",\n          \"isCorrect\": false,\n          \"text\": \"He's trying to get sympathy from his coworkers\"\n        }\n      ],\n      \"question\": \"What pattern is Devon showing?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A hiring manager who believes young workers are unreliable remembers the one intern who showed up late but forgets the five who were early every day\",\n          \"right\": \"Selectively remembering evidence that fits an existing belief\"\n        },\n        {\n          \"left\": \"A person reading online reviews for a product they already want to buy spends more time on 5-star reviews and skims past 1-star reviews\",\n          \"right\": \"Seeking out information that supports a decision already made\"\n        },\n        {\n          \"left\": \"A doctor who suspects a certain diagnosis interprets an ambiguous test result as supporting that diagnosis\",\n          \"right\": \"Interpreting unclear evidence in a way that confirms expectations\"\n        },\n        {\n          \"left\": \"A research team has their study reviewed by independent scientists before publication\",\n          \"right\": \"Using external checks to counteract natural bias\"\n        }\n      ],\n      \"question\": \"Match each scenario to the specific way confirmation bias is showing up:\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Your friend says: \\\"I know I have confirmation bias sometimes, so I just try really hard to be objective when I'm evaluating evidence. I think carefully about my decisions, so I'm pretty confident I can overcome it through willpower alone.\\\"\",\n      \"options\": [\n        {\n          \"feedback\": \"Intelligence doesn't protect you from this — in fact, smarter people can sometimes be better at constructing arguments for what they already believe! The issue isn't brainpower; it's the automatic nature of how our minds filter information.\",\n          \"isCorrect\": false,\n          \"text\": \"Confirmation bias only affects unintelligent people, so your friend might be fine\"\n        },\n        {\n          \"feedback\": \"Bingo! That's exactly the tricky part. Since the filtering happens below conscious awareness, you can't just 'try harder' to be fair. It's like trying to willpower your way out of an optical illusion — you need external tools and structured processes, not just good intentions.\",\n          \"isCorrect\": true,\n          \"text\": \"The bias operates automatically, so willpower alone can't reliably catch what you're unconsciously filtering out\"\n        },\n        {\n          \"feedback\": \"It absolutely matters in everyday life! From who we vote for to what products we buy to how we judge people — this bias shapes all kinds of decisions. That's actually what makes it so important to understand.\",\n          \"isCorrect\": false,\n          \"text\": \"Confirmation bias only matters in scientific research, not everyday decisions\"\n        },\n        {\n          \"feedback\": \"Having no opinions isn't realistic or even desirable. The goal isn't to stop believing things — it's to build in checks and systems that help you evaluate evidence more fairly, like actively seeking out opposing viewpoints or asking others to challenge your reasoning.\",\n          \"isCorrect\": false,\n          \"text\": \"Your friend should just avoid having strong opinions about anything\"\n        }\n      ],\n      \"question\": \"What's the flaw in this approach?\"\n    },\n    {\n      \"format\": \"fillBlank\",\n      \"answers\": [\n        \"unconsciously\",\n        \"discomfort\",\n        \"external\"\n      ],\n      \"distractors\": [\n        \"deliberately\",\n        \"curiosity\",\n        \"internal\",\n        \"slowly\",\n        \"excitement\",\n        \"personal\"\n      ],\n      \"feedback\": \"The key insight is that confirmation bias isn't a choice — it runs automatically (unconsciously), driven by the discomfort we feel when evidence challenges our beliefs. Because we can't reliably catch our own blind spots, we need external safeguards like peer review, blind studies, or simply asking someone else to challenge our reasoning.\",\n      \"question\": \"Understanding why confirmation bias is hard to fight requires grasping how it operates in our minds:\",\n      \"template\": \"Confirmation bias is especially difficult to overcome because it operates [BLANK], meaning people aren't aware it's happening. When we encounter evidence that contradicts our beliefs, we experience psychological [BLANK], which motivates our brains to filter or dismiss that evidence. This is why fields like science rely on [BLANK] safeguards rather than trusting individuals to be objective on their own.\"\n    }\n  ]\n}",
      "outputTokens": 2750,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-psychology-confirmation-bias-quiz-1",
      "userPrompt": "LESSON_TITLE: Confirmation Bias\nLESSON_DESCRIPTION: Understanding confirmation bias - how our tendency to favor information that confirms existing beliefs affects our perception and decision-making\nCHAPTER_TITLE: Cognitive Biases\nCOURSE_TITLE: Introduction to Psychology\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Comfort of Consistency: Our brains prefer consistency. When we believe something, finding contradicting evidence feels uncomfortable - like a mental itch we want to scratch away.\n2. Selective Attention: To avoid discomfort, our brains play tricks. We notice evidence supporting our beliefs and unconsciously filter out or dismiss contradicting evidence.\n3. Unconscious Filtering: This happens automatically, not deliberately. A sports fan genuinely sees more fouls by the opposing team. A political supporter honestly remembers more flaws in opponents.\n4. Safeguards Help: Even scientists fall prey to this. That's why research uses blind studies and peer review - external checks against our natural tendency to see what we expect.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    }
  ],
  "taskId": "activity-explanation-quiz"
}
