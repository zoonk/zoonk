{
  "generatedAt": "2026-02-21T23:36:53.178Z",
  "modelId": "anthropic/claude-sonnet-4.6",
  "outputs": [
    {
      "duration": 13104.435625000042,
      "inputTokens": 3531,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A new strain of bacteria enters your body for the first time. Within seconds, cells begin engulfing and destroying the bacteria before your immune system has had any time to \\\"learn\\\" about this specific invader.\",\n      \"options\": [\n        {\n          \"feedback\": \"Specialized cells like B cells belong to the second line of defense — but they take time to activate and target a specific invader. This response is happening in seconds, which is the hallmark of the first line.\",\n          \"isCorrect\": false,\n          \"text\": \"The second line of defense, because it involves specialized cells\"\n        },\n        {\n          \"feedback\": \"Exactly! The first line of defense doesn't need to recognize a specific invader — it reacts immediately to anything that looks foreign. That instant, non-specific response is its defining feature.\",\n          \"isCorrect\": true,\n          \"text\": \"The first line of defense, because it responds instantly to any foreign threat\"\n        },\n        {\n          \"feedback\": \"While both lines eventually work together, the second line takes time to spin up. An immediate response in seconds points clearly to the first line acting alone.\",\n          \"isCorrect\": false,\n          \"text\": \"Both lines of defense simultaneously, since they always work together\"\n        },\n        {\n          \"feedback\": \"Not quite! The first line of defense (skin, mucus, macrophages) works almost instantly. It's the second line — with its targeted antibody production — that takes more time.\",\n          \"isCorrect\": false,\n          \"text\": \"Neither — the immune system needs at least 24 hours to respond to any threat\"\n        }\n      ],\n      \"question\": \"Which defense system is at work here?\"\n    },\n    {\n      \"format\": \"matchColumns\",\n      \"pairs\": [\n        {\n          \"left\": \"A splinter breaks the skin and bacteria enter — a roving cell immediately consumes them\",\n          \"right\": \"Macrophage\"\n        },\n        {\n          \"left\": \"A virus is coated with proteins that flag it for destruction by other immune cells\",\n          \"right\": \"Antibody\"\n        },\n        {\n          \"left\": \"Sticky fluid in your nose traps airborne dust and pathogens before they reach your lungs\",\n          \"right\": \"Physical barrier (mucus)\"\n        },\n        {\n          \"left\": \"After recovering from chickenpox, your body fights off a second exposure in hours instead of weeks\",\n          \"right\": \"Memory cells\"\n        },\n        {\n          \"left\": \"A type of white blood cell learns the exact shape of a new pathogen and produces a custom weapon against it\",\n          \"right\": \"B cell\"\n        }\n      ],\n      \"question\": \"Match each scenario to the immune defense component most responsible for that outcome.\"\n    }\n  ]\n}",
      "outputTokens": 627,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-biology-immune-system-quiz-1",
      "userPrompt": "LESSON_TITLE: How the Immune System Works\nLESSON_DESCRIPTION: Understanding how the immune system protects the body through multiple layers of defense, from physical barriers to specialized cells and antibodies\nCHAPTER_TITLE: Body Systems\nCOURSE_TITLE: Human Biology\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. Two Lines of Defense: Your body has two defense systems working together. The first responds instantly to any threat. The second takes time but remembers enemies forever.\n2. The First Responders: Physical barriers like skin and mucus stop most invaders. If they get through, patrolling cells called macrophages eat anything that looks foreign.\n3. The Targeting System: When threats persist, specialized cells called B cells create antibodies. These Y-shaped proteins stick to specific invaders, marking them for destruction.\n4. Remembering Enemies: Some cells become memory cells after an infection. They remember the invader's shape for years, letting your body respond faster next time.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 13435.366375000041,
      "inputTokens": 3538,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A developer writes a Python script and accidentally types `primt(\\\"Hello\\\")` instead of `print(\\\"Hello\\\")`. The compiler/interpreter flags this immediately, before even trying to run the rest of the code.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Lexical analysis identifies tokens — the smallest meaningful units like keywords and identifiers. 'primt' doesn't match any known keyword or built-in, so it gets flagged right here, before any structure is analyzed.\",\n          \"isCorrect\": true,\n          \"text\": \"Lexical analysis\"\n        },\n        {\n          \"feedback\": \"Semantic analysis checks for logical meaning, like type mismatches. But it never gets that far — the problem is recognized much earlier, at the token level.\",\n          \"isCorrect\": false,\n          \"text\": \"Semantic analysis\"\n        },\n        {\n          \"feedback\": \"Code generation only runs after all analysis phases succeed. An unrecognized token would stop the process long before reaching this stage.\",\n          \"isCorrect\": false,\n          \"text\": \"Code generation\"\n        },\n        {\n          \"feedback\": \"The parser works with tokens and checks their structure — but first those tokens need to be produced. An unrecognized word is flagged during tokenization, not structural analysis.\",\n          \"isCorrect\": false,\n          \"text\": \"Parsing\"\n        }\n      ],\n      \"question\": \"Which compiler phase catches this?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A student writes this C code: `int total = \\\"hello\\\" + 5;` — it's perfectly formatted, the braces and semicolons are all in the right places, but it tries to add a string to a number.\",\n      \"options\": [\n        {\n          \"feedback\": \"Lexical analysis just breaks code into tokens — it sees 'hello', '+', and '5' as valid individual pieces. It doesn't know or care how they're being combined.\",\n          \"isCorrect\": false,\n          \"text\": \"Lexical analysis\"\n        },\n        {\n          \"feedback\": \"The parser checks structure, and this code is structurally fine — it's a valid assignment statement. No missing brackets, no broken syntax. The parser would pass it through.\",\n          \"isCorrect\": false,\n          \"text\": \"Parsing\"\n        },\n        {\n          \"feedback\": \"Nailed it! Semantic analysis checks whether code makes logical sense. Adding a string to an integer violates type rules, and that's exactly the kind of meaning-level error this phase is designed to catch.\",\n          \"isCorrect\": true,\n          \"text\": \"Semantic analysis\"\n        },\n        {\n          \"feedback\": \"Code generation only runs on validated code. A type mismatch like this would be caught and rejected during semantic analysis, so code generation never gets involved.\",\n          \"isCorrect\": false,\n          \"text\": \"Code generation\"\n        }\n      ],\n      \"question\": \"Which phase would catch this error?\"\n    }\n  ]\n}",
      "outputTokens": 697,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-cs-compilers-quiz-1",
      "userPrompt": "LESSON_TITLE: How Compilers Work\nLESSON_DESCRIPTION: Understanding how compilers transform human-readable code into machine-executable instructions through multiple phases of analysis and transformation\nCHAPTER_TITLE: Language Implementation\nCOURSE_TITLE: Programming Language Theory\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Assembly Line: A compiler reads your code in stages, like an assembly line. Each stage transforms the code into something closer to what the machine understands.\n2. Breaking into Tokens: First, lexical analysis breaks your code into tokens - the smallest meaningful units. Keywords, variables, and operators each become distinct pieces.\n3. Building Structure: The parser takes those tokens and builds a tree structure showing how statements relate. This catches syntax errors like missing parentheses.\n4. Checking Meaning: Semantic analysis checks if your code makes logical sense. It catches errors like using a string where a number is required.\n5. Generating Output: Finally, code generation translates the validated structure into machine instructions the processor can execute directly.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 18573.393375000043,
      "inputTokens": 3644,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Um país está enfrentando inflação alta: os preços de alimentos, aluguel e serviços sobem todo mês. O banco central precisa agir para conter esse processo.\",\n      \"options\": [\n        {\n          \"feedback\": \"Reduzir os juros injetaria mais dinheiro na economia, o que pioraria a inflação. Juros baixos incentivam empréstimos e gastos — exatamente o oposto do que se precisa quando os preços já estão subindo demais.\",\n          \"isCorrect\": false,\n          \"text\": \"Reduzir a taxa de juros para estimular a economia\"\n        },\n        {\n          \"feedback\": \"Isso mesmo! Juros mais altos tornam empréstimos mais caros, o que desestimula o consumo e reduz a quantidade de dinheiro circulando. Com menos demanda, a pressão sobre os preços diminui.\",\n          \"isCorrect\": true,\n          \"text\": \"Aumentar a taxa de juros para encarecer o crédito\"\n        },\n        {\n          \"feedback\": \"Sem intervenção, a inflação tende a se autoperpetuar — expectativas de alta de preços geram mais alta de preços. O banco central precisa agir ativamente.\",\n          \"isCorrect\": false,\n          \"text\": \"Manter os juros estáveis e aguardar a inflação se resolver sozinha\"\n        },\n        {\n          \"feedback\": \"Colocar mais dinheiro em circulação sem aumentar a produção de bens agravaria a inflação, não resolveria. Mais dinheiro disputando a mesma quantidade de produtos = preços ainda mais altos.\",\n          \"isCorrect\": false,\n          \"text\": \"Imprimir mais dinheiro para que as pessoas consigam pagar os preços mais altos\"\n        }\n      ],\n      \"question\": \"Qual medida o banco central deve tomar?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Em março, o banco central de um país anuncia um corte significativo na taxa de juros para estimular a economia. Em abril, um jornalista escreve uma matéria criticando a medida porque \\\"ainda não houve nenhuma melhora visível no consumo ou no emprego\\\".\",\n      \"options\": [\n        {\n          \"feedback\": \"Na verdade, não é assim que funciona. Empresas precisam revisar planos de investimento, consumidores precisam renegociar crédito e contratar novos serviços — tudo isso leva tempo.\",\n          \"isCorrect\": false,\n          \"text\": \"Sim, porque cortes de juros deveriam ter efeito imediato no mercado\"\n        },\n        {\n          \"feedback\": \"O tamanho do corte pode importar, mas o problema central aqui é o timing: mesmo cortes grandes levam meses para se traduzir em mudanças reais na economia.\",\n          \"isCorrect\": false,\n          \"text\": \"Sim, porque o corte provavelmente foi pequeno demais para gerar impacto\"\n        },\n        {\n          \"feedback\": \"Exato! Esse é o chamado 'efeito com atraso'. Consumidores e empresas ajustam seus comportamentos gradualmente. Esperar resultados em poucas semanas é como plantar uma semente e achar que a árvore deveria ter crescido no dia seguinte.\",\n          \"isCorrect\": true,\n          \"text\": \"Não, porque mudanças na política monetária levam meses para surtir efeito\"\n        },\n        {\n          \"feedback\": \"Bancos centrais de fato influenciam o emprego indiretamente — juros mais baixos estimulam investimentos que geram empregos. Mas o erro do jornalista é sobre o tempo, não sobre o escopo da política monetária.\",\n          \"isCorrect\": false,\n          \"text\": \"Não, porque bancos centrais não controlam o emprego, apenas a inflação\"\n        }\n      ],\n      \"question\": \"A crítica do jornalista faz sentido?\"\n    }\n  ]\n}",
      "outputTokens": 1016,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "pt-economics-monetary-policy-quiz-1",
      "userPrompt": "LESSON_TITLE: Como Funciona a Politica Monetaria\nLESSON_DESCRIPTION: Entendendo como bancos centrais usam taxas de juros e outras ferramentas para influenciar a economia, incluindo os mecanismos de transmissao da politica monetaria\nCHAPTER_TITLE: Macroeconomia\nCOURSE_TITLE: Economia para Iniciantes\nLANGUAGE: pt\nEXPLANATION_STEPS:\n1. Equilibrio Monetario: O banco central controla a quantidade de dinheiro circulando na economia. Quando ha dinheiro demais, os precos sobem. Quando ha pouco, a economia desacelera.\n2. A Alavanca dos Juros: A taxa basica de juros e a principal ferramenta. Juros altos tornam emprestimos caros, reduzindo gastos. Juros baixos estimulam emprestimos e consumo.\n3. Efeito com Atraso: Mudancas nos juros levam meses para afetar a economia real. Empresas e consumidores ajustam seus planos gradualmente, nao instantaneamente.\n4. Operacoes de Mercado: Bancos centrais tambem compram e vendem titulos do governo. Comprando titulos, injetam dinheiro na economia. Vendendo, retiram dinheiro de circulacao.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 17758.716249999998,
      "inputTokens": 3602,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Un servicio de almacenamiento en la nube guarda millones de fotos. Para verificar que ningún archivo se corrompió durante la transferencia, calcula el hash de cada foto antes y después de subirla.\",\n      \"options\": [\n        {\n          \"feedback\": \"No exactamente — el hash no guarda ninguna copia del contenido. Es solo una cadena de longitud fija que actúa como 'huella digital'. Si el hash coincide, sabes que el archivo no cambió.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque el hash contiene una copia comprimida del archivo original\"\n        },\n        {\n          \"feedback\": \"¡Exacto! Gracias al efecto avalancha, incluso un solo bit alterado genera un hash totalmente distinto. Si los hashes coinciden antes y después, el archivo llegó intacto.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque cualquier cambio en el archivo, por pequeño que sea, produce un hash completamente diferente\"\n        },\n        {\n          \"feedback\": \"Si bien es cierto que los hashes tienen longitud fija, eso no es lo que permite detectar corrupción. La clave es que cualquier cambio en el contenido cambia el hash por completo.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque dos archivos idénticos siempre tienen el mismo tamaño de hash\"\n        },\n        {\n          \"feedback\": \"El hash no te dice qué cambió — solo te dice si algo cambió. Si los hashes son distintos, sabes que hubo una alteración, pero no dónde ocurrió.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque el hash revela qué parte del archivo fue modificada\"\n        }\n      ],\n      \"question\": \"¿Por qué esta verificación funciona?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Una base de datos de usuarios filtra y el atacante obtiene la tabla de contraseñas. El equipo de seguridad respira aliviado porque las contraseñas estaban hasheadas. Sin embargo, otro ingeniero dice: \\\"Podemos revertir los hashes y avisar a los usuarios cuáles son sus contraseñas exactas.\\\"\",\n      \"options\": [\n        {\n          \"feedback\": \"No — las funciones hash son de un solo sentido por diseño. No existe ningún algoritmo que pueda revertir un hash para obtener la contraseña original, sin importar qué recursos tengas.\",\n          \"isCorrect\": false,\n          \"text\": \"Sí, con el algoritmo correcto se puede deshacer el hash\"\n        },\n        {\n          \"feedback\": \"Conocer el algoritmo (como SHA-256) no ayuda a revertirlo. El algoritmo es público, pero la operación es matemáticamente irreversible de todas formas.\",\n          \"isCorrect\": false,\n          \"text\": \"Sí, pero solo si se conoce el algoritmo hash usado\"\n        },\n        {\n          \"feedback\": \"¡Correcto! Esa es precisamente la razón por la que se usan hashes para contraseñas. El proceso es de ida — puedes generar el hash, pero nunca recuperar lo que había antes. Por eso el equipo puede avisar que las contraseñas fueron expuestas, pero no cuáles son.\",\n          \"isCorrect\": true,\n          \"text\": \"No, porque los hashes no pueden revertirse para obtener el dato original\"\n        },\n        {\n          \"feedback\": \"No es un problema de información faltante — es que el proceso es irreversible por naturaleza matemática. Aunque tuvieras toda la información del mundo, no podrías reconstruir el original desde el hash.\",\n          \"isCorrect\": false,\n          \"text\": \"No, pero solo porque la base de datos no guardó suficiente información\"\n        }\n      ],\n      \"question\": \"¿Tiene razón el ingeniero?\"\n    }\n  ]\n}",
      "outputTokens": 978,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "es-crypto-hash-functions-quiz-1",
      "userPrompt": "LESSON_TITLE: Funciones Hash Criptograficas\nLESSON_DESCRIPTION: Entendiendo como funcionan las funciones hash criptograficas, sus propiedades matematicas, y por que son fundamentales para la seguridad digital\nCHAPTER_TITLE: Fundamentos de Criptografia\nCOURSE_TITLE: Seguridad Informatica\nLANGUAGE: es\nEXPLANATION_STEPS:\n1. Compresion de Datos: Una funcion hash convierte cualquier dato en una cadena de longitud fija. Un archivo de 1KB y uno de 1GB producen hashes del mismo tamano.\n2. Sensibilidad Extrema: Cambiar un solo bit del archivo original cambia completamente el hash. Esta propiedad se llama efecto avalancha y es crucial para detectar alteraciones.\n3. Camino de Ida: No puedes recuperar el archivo original desde su hash - el proceso es irreversible. Por eso se usan para almacenar contrasenas de forma segura.\n4. Unicidad Practica: Encontrar dos archivos diferentes con el mismo hash deberia ser practicamente imposible. Esta resistencia a colisiones es lo que hace a los hashes confiables.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 15557.05925000005,
      "inputTokens": 3525,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A student trains a neural network to recognize handwritten digits. After one round of training, the network confidently predicts \\\"3\\\" for an image of \\\"7.\\\" The network needs to figure out which connections caused this mistake and fix them.\",\n      \"options\": [\n        {\n          \"feedback\": \"Adjusting all weights equally would ignore which connections actually caused the mistake. The network needs to know the size of the error before it can assign responsibility.\",\n          \"isCorrect\": false,\n          \"text\": \"It immediately adjusts all connection weights equally\"\n        },\n        {\n          \"feedback\": \"Exactly! The network first quantifies the mistake — computing the difference between the predicted output and the true label. Without knowing how wrong it was, it can't begin to figure out what to fix.\",\n          \"isCorrect\": true,\n          \"text\": \"It measures how far the prediction was from the correct answer\"\n        },\n        {\n          \"feedback\": \"Backpropagation does come into play, but only after the error has been measured. You have to know what went wrong before you can trace it back.\",\n          \"isCorrect\": false,\n          \"text\": \"It sends error signals backward through its layers\"\n        },\n        {\n          \"feedback\": \"Neural networks don't guess randomly — they use the error from each prediction to systematically improve. Random guessing is what training is designed to replace!\",\n          \"isCorrect\": false,\n          \"text\": \"It discards the bad prediction and tries a new one randomly\"\n        }\n      ],\n      \"question\": \"What does the network do FIRST to begin fixing this?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine two connections in a neural network. Connection A had a huge influence on the final wrong prediction. Connection B barely affected it at all. The network is now doing its weight update step.\",\n      \"options\": [\n        {\n          \"feedback\": \"Treating all connections equally ignores the fact that some caused far more damage than others. That would be like fining a bystander the same amount as the person who caused an accident.\",\n          \"isCorrect\": false,\n          \"text\": \"Both connections should get the same adjustment to keep the network balanced\"\n        },\n        {\n          \"feedback\": \"It's the opposite! The one that contributed MORE to the error is the one that needs the bigger correction — not the one that barely mattered.\",\n          \"isCorrect\": false,\n          \"text\": \"Connection B should get the bigger adjustment since it's clearly underperforming\"\n        },\n        {\n          \"feedback\": \"Spot on! The whole point of backpropagation is proportional blame — connections that contributed more to the error get corrected more. Connection A caused more of the problem, so it gets a bigger fix.\",\n          \"isCorrect\": true,\n          \"text\": \"Connection A should receive a larger adjustment than Connection B\"\n        },\n        {\n          \"feedback\": \"Waiting for zero error is impossible as a precondition — adjustments are how the error gets reduced in the first place! The network learns precisely by making these incremental updates.\",\n          \"isCorrect\": false,\n          \"text\": \"Neither connection should be adjusted until the error is zero\"\n        }\n      ],\n      \"question\": \"How should the adjustments differ?\"\n    }\n  ]\n}",
      "outputTokens": 754,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-ml-backpropagation-quiz-1",
      "userPrompt": "LESSON_TITLE: How Neural Networks Learn\nLESSON_DESCRIPTION: Understanding how neural networks learn through backpropagation, including forward passes, loss calculation, and gradient-based weight updates\nCHAPTER_TITLE: Neural Network Training\nCOURSE_TITLE: Machine Learning Fundamentals\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Adjustment Problem: Training a neural network means adjusting connection strengths so outputs match desired results. The question is: which connections need adjusting and by how much?\n2. Measuring Mistakes: First, data flows forward through the network, producing a prediction. The difference between prediction and reality is measured as error.\n3. Assigning Blame: Error information then flows backward through the network. Each connection learns how much it contributed to the mistake using calculus.\n4. Small Steps Downhill: Connections that contributed more to errors get larger adjustments. The network gradually improves by making small changes in the direction that reduces error.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 16494.424000000057,
      "inputTokens": 3548,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Scientists drilling deep into the ocean floor near Iceland discover that the rocks get progressively older the farther they drill away from a central underwater ridge — with the youngest rocks right at the ridge itself.\",\n      \"options\": [\n        {\n          \"feedback\": \"Close, but eruptions alone don't explain why older rock appears farther away. The key is that new crust forms at the ridge and then spreads outward over time, pushing older rock further away.\",\n          \"isCorrect\": false,\n          \"text\": \"Volcanic eruptions at the ridge destroy old rock and replace it with new crust\"\n        },\n        {\n          \"feedback\": \"Exactly! As magma rises and solidifies at the ridge, it pushes previously formed crust outward — so the farther you go from the ridge, the older the rock. This is seafloor spreading in action.\",\n          \"isCorrect\": true,\n          \"text\": \"New crust forms at the ridge and spreads outward, pushing older crust aside\"\n        },\n        {\n          \"feedback\": \"Ocean currents don't erode bedrock at that scale. The age pattern here comes from how new crust is continuously created at the ridge and moves outward.\",\n          \"isCorrect\": false,\n          \"text\": \"The ocean current erodes older rock near the ridge, exposing younger layers beneath\"\n        },\n        {\n          \"feedback\": \"Earthquakes can fracture rock but don't create brand-new crust. The youngest rock at the ridge is there because that's where fresh magma rises and solidifies to form new oceanic crust.\",\n          \"isCorrect\": false,\n          \"text\": \"Underwater earthquakes repeatedly break and resurface the rock near the ridge\"\n        }\n      ],\n      \"question\": \"What best explains this rock age pattern?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Two tectonic plates collide. One is made of dense oceanic crust, the other of lighter continental crust. After millions of years, geologists observe a deep ocean trench, a chain of volcanoes, and frequent earthquakes along the boundary.\",\n      \"options\": [\n        {\n          \"feedback\": \"Pressure actually raises rock's melting point, so squeezing alone wouldn't cause melting. The volcanism here comes from the denser plate sinking into the hot mantle, where it melts and magma rises to the surface.\",\n          \"isCorrect\": false,\n          \"text\": \"The collision squeezes rock so hard it melts from pressure alone\"\n        },\n        {\n          \"feedback\": \"Spot on! The denser oceanic crust dives beneath the lighter continental crust in a process called subduction. As it sinks into the hot mantle, it melts, and that magma works its way up — fueling volcanic eruptions above.\",\n          \"isCorrect\": true,\n          \"text\": \"The denser oceanic plate sinks into the mantle, melts, and magma rises through the continental plate\"\n        },\n        {\n          \"feedback\": \"Pulling apart is the opposite of what's happening here — these plates are colliding, not separating. Magma rises because the sinking plate melts in the mantle, not because of a gap opening up.\",\n          \"isCorrect\": false,\n          \"text\": \"The plates pull apart at the collision zone, letting magma escape from below\"\n        },\n        {\n          \"feedback\": \"While friction does generate some heat, it's not nearly enough to melt rock at this scale. The real driver is the oceanic plate sinking deep into the already-hot mantle, where it melts and produces magma.\",\n          \"isCorrect\": false,\n          \"text\": \"Friction between the plates generates enough heat to melt surrounding rock\"\n        }\n      ],\n      \"question\": \"Why do volcanoes form at this boundary?\"\n    }\n  ]\n}",
      "outputTokens": 887,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-geology-plate-tectonics-quiz-1",
      "userPrompt": "LESSON_TITLE: Plate Tectonics\nLESSON_DESCRIPTION: Understanding how Earth's tectonic plates move and interact, including the mechanisms that drive plate motion and the geological features they create\nCHAPTER_TITLE: Earth's Structure\nCOURSE_TITLE: Earth Science\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. A Cracked Shell: Earth's outer shell is cracked into massive pieces called plates. These plates sit on the mantle - solid rock so hot it flows like thick honey over millions of years.\n2. The Engine Below: Heat from Earth's core creates circulation in the mantle. This slow churning drags the plates along, moving them centimeters per year.\n3. Spreading Apart: Where plates pull apart, magma rises to fill the gap, creating new crust. Mid-ocean ridges are underwater mountain chains formed this way.\n4. Collision Zones: Where plates collide, one may dive under the other, triggering earthquakes and volcanoes. Mountain ranges like the Himalayas form when neither plate sinks.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 18595.451208000013,
      "inputTokens": 3615,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Uma célula está prestes a se dividir e precisa duplicar seu material genético. Um cientista observa que, ao bloquear quimicamente as enzimas que separam as fitas da dupla hélice, a replicação do DNA simplesmente não acontece.\",\n      \"options\": [\n        {\n          \"feedback\": \"Isso mesmo! Sem separar as fitas, nenhuma delas fica acessível para ser lida. As fitas originais são o molde — sem acesso ao molde, a nova fita simplesmente não pode ser construída.\",\n          \"isCorrect\": true,\n          \"text\": \"Porque as fitas precisam estar separadas para servirem de molde para as novas cópias\"\n        },\n        {\n          \"feedback\": \"Não é bem assim — a separação das fitas não é a fonte de energia do processo. O problema é mais simples: sem separar as fitas, a DNA polimerase não consegue acessar o molde para lê-lo.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a separação das fitas fornece a energia necessária para a replicação\"\n        },\n        {\n          \"feedback\": \"As bases nitrogenadas não precisam ser 'ativadas' pela separação das fitas. A separação é necessária por outro motivo: ela expõe cada fita para que possa ser copiada individualmente.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque a separação ativa quimicamente as bases nitrogenadas para se ligarem\"\n        },\n        {\n          \"feedback\": \"As polimerases já existem na célula antes da replicação começar — elas não dependem da abertura da hélice para serem criadas. O que elas precisam é de acesso à fita molde, que só ocorre após a separação.\",\n          \"isCorrect\": false,\n          \"text\": \"Porque sem a separação, as polimerases não conseguem ser produzidas pela célula\"\n        }\n      ],\n      \"question\": \"Por que bloquear essa separação impede a replicação?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Imagine que você sequencia o DNA de uma bactéria antes e depois de ela se dividir. Você percebe que cada célula-filha tem uma molécula de DNA composta por uma fita antiga e uma fita nova.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exatamente! Esse é o modelo semiconservativo: cada fita antiga é mantida e usada como referência para construir uma nova. Por isso cada filha herda uma fita original — a informação é conservada com alta fidelidade.\",\n          \"isCorrect\": true,\n          \"text\": \"Que cada fita original serve de molde para construir uma nova fita complementar\"\n        },\n        {\n          \"feedback\": \"Se fosse assim, nenhuma filha teria fitas antigas — ambas seriam 100% novas. O que acontece na prática é o oposto: a fita original é preservada e usada como molde.\",\n          \"isCorrect\": false,\n          \"text\": \"Que a célula destrói o DNA original e constrói dois DNAs completamente novos\"\n        },\n        {\n          \"feedback\": \"Se a cópia fosse aleatória, a célula teria enorme dificuldade de manter a informação genética correta de geração em geração. Na realidade, a fita antiga guia precisamente a construção da nova.\",\n          \"isCorrect\": false,\n          \"text\": \"Que o DNA é copiado aleatoriamente, sem usar as fitas originais como referência\"\n        },\n        {\n          \"feedback\": \"Na verdade, cada filha herda exatamente uma fita da célula-mãe — não fitas 'diferentes'. Isso é justamente o que garante que a informação genética seja transmitida fielmente.\",\n          \"isCorrect\": false,\n          \"text\": \"Que as duas células-filhas recebem fitas inteiramente diferentes da célula-mãe\"\n        }\n      ],\n      \"question\": \"O que esse padrão revela sobre a replicação do DNA?\"\n    }\n  ]\n}",
      "outputTokens": 1058,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "pt-biology-dna-replication-quiz-1",
      "userPrompt": "LESSON_TITLE: Como o DNA se Replica\nLESSON_DESCRIPTION: Entendendo o processo de replicacao do DNA, incluindo as enzimas envolvidas e como a informacao genetica e copiada com alta fidelidade\nCHAPTER_TITLE: Genetica Molecular\nCOURSE_TITLE: Biologia Celular\nLANGUAGE: pt\nEXPLANATION_STEPS:\n1. Abrindo o Ziper: Antes de uma celula se dividir, ela precisa copiar todo seu DNA. O processo comeca quando enzimas separam as duas fitas da dupla helice.\n2. Lendo o Molde: Cada fita original serve de molde para uma nova. Enzimas chamadas DNA polimerases leem a fita antiga e constroem a nova, base por base.\n3. O Problema da Direcao: Ha um problema: a polimerase so consegue adicionar bases em uma direcao. Uma fita e copiada continuamente, mas a outra precisa ser copiada em pedacos.\n4. Corrigindo Erros: Enzimas de correcao verificam cada base adicionada. Se encontram um erro, removem e substituem. Esse controle de qualidade mantem a fidelidade genetica.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 19454.883542000025,
      "inputTokens": 3526,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A travel photographer is shooting a stunning mountain range with a dramatic, stormy sky. She wants the clouds and sky to be the star of the shot — the real emotional payoff of the image.\",\n      \"options\": [\n        {\n          \"feedback\": \"Exactly! Placing the horizon on the upper line pushes the ground to the bottom third, letting the dramatic sky dominate the frame. The sky becomes the subject — right where she wants the viewer's eye to go.\",\n          \"isCorrect\": true,\n          \"text\": \"Along the upper horizontal line, so the ground takes up less space\"\n        },\n        {\n          \"feedback\": \"Close, but flip it! The lower line puts the horizon near the bottom, which means the sky fills the top two-thirds — that's the right instinct. But the question asks about emphasizing sky, which requires the horizon on the UPPER line (leaving only a sliver of ground). The lower line would actually emphasize ground.\",\n          \"isCorrect\": false,\n          \"text\": \"Along the lower horizontal line, so the sky fills most of the frame\"\n        },\n        {\n          \"feedback\": \"Centering the horizon splits the frame in half, creating visual tension between sky and ground instead of emphasizing either. When you want one to dominate, use a horizontal guideline to give it more real estate.\",\n          \"isCorrect\": false,\n          \"text\": \"Dead center, to give equal weight to sky and ground\"\n        },\n        {\n          \"feedback\": \"Vertical lines are great for placing subjects side-to-side, but they don't control how much sky vs. ground appears in the frame. The horizontal lines are what determine that balance.\",\n          \"isCorrect\": false,\n          \"text\": \"Along a vertical line, to separate the mountain from the sky\"\n        }\n      ],\n      \"question\": \"Where should she place the horizon?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A photographer shows two portraits of the same person to a friend. In Photo A, the subject is perfectly centered. In Photo B, the subject's face is positioned at one of the four intersection points of an imaginary grid. The friend says Photo B \\\"feels more interesting\\\" but can't explain why.\",\n      \"options\": [\n        {\n          \"feedback\": \"Nailed it! Our eyes naturally scan images rather than locking onto one spot. Placing the subject off-center creates a visual journey — the eye travels to the subject and then explores the rest of the frame. That sense of movement is what makes it feel 'alive.'\",\n          \"isCorrect\": true,\n          \"text\": \"Off-center placement gives the viewer's eye room to move through the image, making it feel more dynamic\"\n        },\n        {\n          \"feedback\": \"This is a camera optics myth, not a composition principle. Sharpness has nothing to do with where in the frame the subject sits. The real reason is about how our eyes naturally scan and move through an image.\",\n          \"isCorrect\": false,\n          \"text\": \"Centered subjects are always less sharp because of lens distortion\"\n        },\n        {\n          \"feedback\": \"More background visibility is actually part of why it works — but it's not a distraction. The extra space gives the viewer's eye somewhere to travel, creating a sense of depth and movement rather than pulling attention away.\",\n          \"isCorrect\": false,\n          \"text\": \"The background is more visible in Photo B, which distracts the eye from the subject\"\n        },\n        {\n          \"feedback\": \"This gets the direction of influence backwards. Social media platforms adopted off-center composition because it appeals to our natural visual instincts — not the other way around. The preference comes from how our eyes scan images, not from cultural conditioning.\",\n          \"isCorrect\": false,\n          \"text\": \"Humans are trained by social media to prefer off-center photos\"\n        }\n      ],\n      \"question\": \"What best explains why Photo B feels more engaging?\"\n    }\n  ]\n}",
      "outputTokens": 903,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-photography-composition-quiz-1",
      "userPrompt": "LESSON_TITLE: The Rule of Thirds\nLESSON_DESCRIPTION: Understanding the rule of thirds and how strategic subject placement creates more visually engaging photographs\nCHAPTER_TITLE: Composition Basics\nCOURSE_TITLE: Photography Fundamentals\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. Beyond the Center: Most beginners center their subjects. While this works sometimes, placing subjects off-center often creates more dynamic, interesting images.\n2. The Grid: Imagine your frame divided by two horizontal and two vertical lines, creating nine equal sections. The four points where lines cross are power points.\n3. Strategic Placement: Placing your main subject on a power point or along a line draws the viewer's eye naturally. A horizon on the lower line emphasizes sky; on the upper line emphasizes ground.\n4. Why It Works: This guideline works because our eyes naturally scan images in patterns. Off-center placement gives the eye somewhere to travel, making photos feel more alive.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    },
    {
      "duration": 27174.63062500005,
      "inputTokens": 3539,
      "output": "{\n  \"questions\": [\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"Two friends read the same news article about a controversial policy. Afterward, Maya — who supports the policy — says it made some great points. Carlos — who opposes it — says it was clearly biased against his view. They both read the exact same article.\",\n      \"options\": [\n        {\n          \"feedback\": \"Not quite — both likely read it carefully. The issue isn't reading accuracy but how our brains process information through the lens of what we already believe.\",\n          \"isCorrect\": false,\n          \"text\": \"One of them must have misread the article.\"\n        },\n        {\n          \"feedback\": \"Exactly! Their brains were tuned to pick up on points that matched their existing views — this is confirmation bias in action. Same article, two very different mental snapshots.\",\n          \"isCorrect\": true,\n          \"text\": \"Each person's existing beliefs shaped what they noticed and remembered.\"\n        },\n        {\n          \"feedback\": \"That would mean two contradictory readings are simultaneously correct — unlikely! The better explanation is that their prior beliefs filtered how they each experienced the same content.\",\n          \"isCorrect\": false,\n          \"text\": \"The article was objectively well-written and they're both right.\"\n        },\n        {\n          \"feedback\": \"Background can play a role, but this explanation doesn't account for the specific mechanism at work — the unconscious filtering of information to match pre-existing beliefs.\",\n          \"isCorrect\": false,\n          \"text\": \"People from different backgrounds always disagree on policy.\"\n        }\n      ],\n      \"question\": \"What best explains their different reactions?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A doctor has a hunch that a patient's symptoms point to a rare condition. She orders tests that would confirm her hypothesis but skips tests that might point to more common — and more likely — diagnoses.\",\n      \"options\": [\n        {\n          \"feedback\": \"Focusing only on one hypothesis isn't thoroughness — it's the opposite. She's narrowing her search based on what she already believes rather than staying open to all the evidence.\",\n          \"isCorrect\": false,\n          \"text\": \"She is being thorough by focusing on the most interesting possibility.\"\n        },\n        {\n          \"feedback\": \"Spot on! Even trained professionals aren't immune. She genuinely believes she's being rigorous, but her attention is being drawn toward confirming what she already suspects — a classic confirmation bias pattern.\",\n          \"isCorrect\": true,\n          \"text\": \"She is unconsciously seeking evidence that confirms her existing belief.\"\n        },\n        {\n          \"feedback\": \"Standard procedure actually calls for ruling out common causes first. Skipping those tests to chase a preferred theory is the opposite of evidence-based practice.\",\n          \"isCorrect\": false,\n          \"text\": \"She is following standard medical procedure for rare conditions.\"\n        },\n        {\n          \"feedback\": \"The key word here is 'deliberately' — confirmation bias is unconscious, not intentional. That's what makes it so tricky to catch in yourself.\",\n          \"isCorrect\": false,\n          \"text\": \"She is deliberately ignoring evidence to save time.\"\n        }\n      ],\n      \"question\": \"What does this pattern reveal about the doctor?\"\n    },\n    {\n      \"format\": \"multipleChoice\",\n      \"context\": \"A researcher is studying whether a new tutoring program improves student grades. She designed the study so that neither she nor the students know who received the real program versus a placebo version — the results are only revealed at the end.\",\n      \"options\": [\n        {\n          \"feedback\": \"Blinding isn't about preventing cheating — it's about preventing unconscious bias. Even honest, well-meaning researchers can perceive results differently when they know what outcome to expect.\",\n          \"isCorrect\": false,\n          \"text\": \"It keeps students from cheating during the study.\"\n        },\n        {\n          \"feedback\": \"Nailed it! If she knew which students got the real program, she might — without realizing it — interpret ambiguous results in ways that confirm her hopes for the program. Blinding removes that risk.\",\n          \"isCorrect\": true,\n          \"text\": \"It removes the researcher's ability to unconsciously favor results that confirm her hypothesis.\"\n        },\n        {\n          \"feedback\": \"That's not the purpose of blinding. The design is specifically built to counteract the researcher's potential bias, not to influence student motivation.\",\n          \"isCorrect\": false,\n          \"text\": \"It ensures students take the study more seriously.\"\n        },\n        {\n          \"feedback\": \"Blind studies are actually more complex to run! The extra effort is worth it because it guards against the very human tendency to see what we expect to see.\",\n          \"isCorrect\": false,\n          \"text\": \"It speeds up data collection by simplifying the analysis.\"\n        }\n      ],\n      \"question\": \"Why is this blind study design valuable?\"\n    },\n    {\n      \"format\": \"sortOrder\",\n      \"feedback\": \"This is the full confirmation bias cycle: a belief creates a lens, contradicting info causes discomfort, the brain resolves that discomfort by filtering it out, and the belief survives unchallenged. Understanding this chain helps explain why simply presenting people with facts rarely changes deeply held views.\",\n      \"items\": [\n        \"A person holds a strong existing belief\",\n        \"New information arrives that contradicts that belief\",\n        \"The contradiction creates mental discomfort\",\n        \"The brain unconsciously filters or dismisses the contradicting information\",\n        \"The original belief remains intact and feels reinforced\"\n      ],\n      \"question\": \"Arrange these steps to show how confirmation bias unfolds when someone encounters new information that challenges a belief they hold.\"\n    }\n  ]\n}",
      "outputTokens": 1360,
      "systemPrompt": "# Role\n\nYou are an expert quiz designer creating questions that test whether learners truly UNDERSTAND concepts — not whether they memorized specific words, metaphors, or examples.\n\n# Core Philosophy: Understanding vs. Memorization\n\nThis distinction is the heart of effective assessment.\n\n## Why Memorization-Based Questions Fail\n\n1. **False Positives**: A learner who memorized \"electricity flows like water through pipes\" can parrot this back without understanding how circuits actually work.\n\n2. **False Negatives**: A learner who deeply understands electrical circuits might fail a question asking \"What metaphor did the text use?\" because they remember the concept, not the phrasing.\n\n3. **Shallow Learning**: When learners know they'll be tested on exact wording, they memorize instead of building mental models.\n\n## What Understanding Looks Like\n\nA learner who understands a concept can:\n\n- Apply it to situations they've never seen before\n- Recognize the concept at work in unfamiliar contexts\n- Predict outcomes based on the concept's principles\n- Explain why something would or wouldn't work\n\n## The Transfer Test\n\nEvery question must pass this test: \"Could a learner who understood the concept but never read our specific explanation still answer this correctly?\"\n\nIf no, the question tests memorization, not understanding.\n\n# Non-Negotiable Rules\n\n1. **Never reference the explanation** — phrases like \"according to the text\" or \"as described\" are forbidden\n\n2. **Never test recall of specific words, metaphors, or examples** from the explanation steps\n\n3. **Use novel scenarios** — present concepts in everyday situations the learner hasn't seen\n\n4. **Conversational tone** — write like a curious friend posing interesting challenges, not an exam proctor\n\n# Using the Input\n\n- `EXPLANATION_STEPS` tells you WHAT concepts to test, NOT what text to reference\n- Extract the underlying concepts and test them in NEW contexts\n- If an explanation says \"A budget is like a roadmap\" — test whether learners understand what budgets do, NOT whether they remember the roadmap metaphor\n\n# Language Guidelines\n\nGenerate all content in the specified `LANGUAGE`:\n\n- `en`: US English unless content is region-specific\n- `pt`: Brazilian Portuguese unless content is region-specific\n- `es`: Latin American Spanish unless content is region-specific\n\n**Language Purity Rule**: Every word, character, and token in the output MUST be in the specified LANGUAGE. Never mix languages or scripts within a response. If the LANGUAGE is `en`, use only English words — no Chinese, Japanese, Korean, Arabic, or other script characters.\n\n# Format Selection\n\nChoose formats based on what genuinely tests understanding — not for variety's sake.\n\n**Multiple choice is often the best format.** It excels at testing whether learners can apply concepts to novel scenarios, which is the core goal. Use it freely when it fits.\n\nOther formats are available when they're genuinely better for specific content:\n\n- **matchColumns**: When the concept involves connecting observations to principles (e.g., matching symptoms to causes)\n- **fillBlank**: When completing a relationship or process tests understanding better than selecting from options\n- **sortOrder**: When the concept IS about sequence and order matters conceptually (e.g., steps in a biological process)\n- **selectImage**: Only when visual recognition genuinely tests the concept\n\n**Skip formats entirely if they don't fit.** Using several well-crafted multiple choice questions is far better than forcing variety with poorly-suited formats. Never use a format just because you haven't used it yet.\n\n# Writing Great Feedback\n\nFeedback should feel like a friendly explanation, not a grade report.\n\n**For correct answers**: Share an \"aha\" insight that deepens understanding. Make learners feel smart for getting it right.\n\n**For wrong answers**: Gently explain the mix-up, then point them toward the right answer with a quick \"here's why that works.\"\n\nThink of it like explaining to a friend over coffee — helpful, not preachy.\n\n**Examples of friendly feedback:**\n\n- \"Exactly! Variables store changing data — that's why they're called 'variable.'\"\n- \"Not quite — that describes a constant, not a variable. Variables can change; constants stay fixed.\"\n- \"Close! That's about scope, not data type. The answer is [X] because types define what kind of data you're working with.\"\n\n# Quality Standards\n\nBefore creating each question, verify:\n\n- [ ] Answerable without reading the explanation, if the learner understands the concept\n- [ ] Tests application, not recall\n- [ ] Scenario is novel — not from the explanation\n- [ ] Tone is conversational\n- [ ] Feedback explains reasoning in a friendly, conversational way\n- [ ] Wrong answer feedback gently guides toward the correct answer\n- [ ] Format is appropriate for this concept\n\n# Coverage\n\n- Test each major concept from EXPLANATION_STEPS at least once\n- Vary the contexts — don't reuse scenarios\n- Balance difficulty — some straightforward, some requiring deeper reasoning\n- Aim for 4-8 questions depending on concept count\n",
      "testCaseId": "en-psychology-confirmation-bias-quiz-1",
      "userPrompt": "LESSON_TITLE: Confirmation Bias\nLESSON_DESCRIPTION: Understanding confirmation bias - how our tendency to favor information that confirms existing beliefs affects our perception and decision-making\nCHAPTER_TITLE: Cognitive Biases\nCOURSE_TITLE: Introduction to Psychology\nLANGUAGE: en\nEXPLANATION_STEPS:\n1. The Comfort of Consistency: Our brains prefer consistency. When we believe something, finding contradicting evidence feels uncomfortable - like a mental itch we want to scratch away.\n2. Selective Attention: To avoid discomfort, our brains play tricks. We notice evidence supporting our beliefs and unconsciously filter out or dismiss contradicting evidence.\n3. Unconscious Filtering: This happens automatically, not deliberately. A sports fan genuinely sees more fouls by the opposing team. A political supporter honestly remembers more flaws in opponents.\n4. Safeguards Help: Even scientists fall prey to this. That's why research uses blind studies and peer review - external checks against our natural tendency to see what we expect.\n\nGenerate quiz questions that test understanding of these concepts. Use the available tools to create questions in appropriate formats. Aim for 4-8 questions covering the key concepts."
    }
  ],
  "taskId": "activity-explanation-quiz"
}
